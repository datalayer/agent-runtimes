diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.d.ts
index 8853eaf..04b0bc2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.d.ts
@@ -31,12 +31,12 @@ import { LanguageIndentRegistry } from './LanguageIndentRegistry';
  */
 export declare class AutoIndentEngine {
     private registry;
-    private debug;
+    private _debug;
     /**
      * Create a new autoindent engine
      *
      * @param registry - Language configuration registry
-     * @param debug - Enable debug logging
+     * @param debug - Enable debug logging (currently unused - logging disabled)
      */
     constructor(registry: LanguageIndentRegistry, debug?: boolean);
     /**
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.js b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.js
index 1f42b6b..b97e223 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.js
@@ -26,16 +26,17 @@
  */
 export class AutoIndentEngine {
     registry;
-    debug;
+    // @ts-expect-error - Debug field preserved for future use, logging currently disabled
+    _debug;
     /**
      * Create a new autoindent engine
      *
      * @param registry - Language configuration registry
-     * @param debug - Enable debug logging
+     * @param debug - Enable debug logging (currently unused - logging disabled)
      */
     constructor(registry, debug = false) {
         this.registry = registry;
-        this.debug = debug;
+        this._debug = debug;
     }
     /**
      * Calculate indentation for a new line based on current line context
@@ -58,9 +59,6 @@ export class AutoIndentEngine {
                 resultSpaces = currentLineIndent + rule.indentAmount;
                 shouldIndent = true;
                 triggeredRule = rule.name;
-                if (this.debug) {
-                    console.log(`[AutoIndentEngine] Indent triggered by rule: ${rule.name}`);
-                }
                 break; // Use first matching rule
             }
         }
@@ -72,9 +70,6 @@ export class AutoIndentEngine {
                     // line should be dedented. The current line maintains its indent.
                     shouldDedent = true;
                     triggeredRule = rule.name;
-                    if (this.debug) {
-                        console.log(`[AutoIndentEngine] Dedent triggered by rule: ${rule.name}`);
-                    }
                     break;
                 }
             }
@@ -84,9 +79,6 @@ export class AutoIndentEngine {
             for (const customRule of config.customRules) {
                 if (customRule.condition(context.currentLine, context)) {
                     resultSpaces = customRule.apply(resultSpaces, context);
-                    if (this.debug) {
-                        console.log(`[AutoIndentEngine] Custom rule applied: ${customRule.name}`);
-                    }
                     break; // Use first matching custom rule
                 }
             }
@@ -99,14 +91,6 @@ export class AutoIndentEngine {
             shouldDedent,
             triggeredRule,
         };
-        if (this.debug) {
-            console.log('[AutoIndentEngine] Indent calculation:', {
-                input: context.currentLine,
-                language: context.language,
-                currentIndent: currentLineIndent,
-                result,
-            });
-        }
         return result;
     }
     /**
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.js.map b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.js.map
index febded4..ff60516 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/AutoIndentEngine.js.map
@@ -1 +1 @@
-{"version":3,"file":"AutoIndentEngine.js","sourceRoot":"","sources":["../../src/autoindent/AutoIndentEngine.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"AutoIndentEngine.js","sourceRoot":"","sources":["../../src/autoindent/AutoIndentEngine.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAmBH;;;;;;;;;;;;;;;;;;;;GAoBG;AACH,MAAM,OAAO,gBAAgB;IACnB,QAAQ,CAAyB;IACzC,sFAAsF;IAC9E,MAAM,CAAU;IAExB;;;;;OAKG;IACH,YAAY,QAAgC,EAAE,KAAK,GAAG,KAAK;QACzD,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACtB,CAAC;IAED;;;;;OAKG;IACH,eAAe,CAAC,OAAsB;QACpC,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAElE,yCAAyC;QACzC,MAAM,iBAAiB,GAAG,IAAI,CAAC,yBAAyB,CACtD,OAAO,CAAC,WAAW,CACpB,CAAC;QAEF,iCAAiC;QACjC,IAAI,YAAY,GAAG,iBAAiB,CAAC;QACrC,IAAI,YAAY,GAAG,KAAK,CAAC;QACzB,IAAI,YAAY,GAAG,KAAK,CAAC;QACzB,IAAI,aAAiC,CAAC;QAEtC,wBAAwB;QACxB,KAAK,MAAM,IAAI,IAAI,MAAM,CAAC,cAAc,EAAE,CAAC;YACzC,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,EAAE,CAAC;gBACtD,YAAY,GAAG,iBAAiB,GAAG,IAAI,CAAC,YAAY,CAAC;gBACrD,YAAY,GAAG,IAAI,CAAC;gBACpB,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC;gBAC1B,MAAM,CAAC,0BAA0B;YACnC,CAAC;QACH,CAAC;QAED,4DAA4D;QAC5D,IAAI,CAAC,YAAY,EAAE,CAAC;YAClB,KAAK,MAAM,IAAI,IAAI,MAAM,CAAC,cAAc,EAAE,CAAC;gBACzC,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,EAAE,CAAC;oBACtD,sEAAsE;oBACtE,kEAAkE;oBAClE,YAAY,GAAG,IAAI,CAAC;oBACpB,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC;oBAC1B,MAAM;gBACR,CAAC;YACH,CAAC;QACH,CAAC;QAED,qBAAqB;QACrB,IAAI,MAAM,CAAC,WAAW,EAAE,CAAC;YACvB,KAAK,MAAM,UAAU,IAAI,MAAM,CAAC,WAAW,EAAE,CAAC;gBAC5C,IAAI,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,EAAE,OAAO,CAAC,EAAE,CAAC;oBACvD,YAAY,GAAG,UAAU,CAAC,KAAK,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;oBACvD,MAAM,CAAC,iCAAiC;gBAC1C,CAAC;YACH,CAAC;QACH,CAAC;QAED,8BAA8B;QAC9B,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;QAEzC,MAAM,MAAM,GAAiB;YAC3B,MAAM,EAAE,YAAY;YACpB,YAAY;YACZ,YAAY;YACZ,aAAa;SACd,CAAC;QAEF,OAAO,MAAM,CAAC;IAChB,CAAC;IAED;;;;;OAKG;IACH,YAAY,CAAC,QAAmC;QAC9C,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QAE1D,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;YACnB,OAAO,IAAI,CAAC;QACd,CAAC;QAED,OAAO,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;IAED;;;;;OAKG;IACH,UAAU,CAAC,QAAmC;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QAC1D,OAAO,MAAM,CAAC,OAAO,CAAC;IACxB,CAAC;IAED;;;;;;OAMG;IACH,gBAAgB,CACd,aAAqB,EACrB,QAAmC;QAEnC,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QAC1D,MAAM,SAAS,GAAG,aAAa,GAAG,MAAM,CAAC,OAAO,CAAC;QAEjD,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;IAChC,CAAC;IAED;;;;;OAKG;IACK,yBAAyB,CAAC,IAAY;QAC5C,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACpC,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO,CAAC,CAAC;QACX,CAAC;QAED,MAAM,UAAU,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,KAAK,MAAM,IAAI,IAAI,UAAU,EAAE,CAAC;YAC9B,IAAI,IAAI,KAAK,IAAI,EAAE,CAAC;gBAClB,iDAAiD;gBACjD,qEAAqE;gBACrE,KAAK,IAAI,CAAC,CAAC;YACb,CAAC;iBAAM,CAAC;gBACN,KAAK,IAAI,CAAC,CAAC;YACb,CAAC;QACH,CAAC;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;;;;OAKG;IACH,oBAAoB,CAAC,IAAY;QAC/B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACpC,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAC/B,CAAC;IAED;;;;;;OAMG;IACK,iBAAiB,CAAC,IAAY,EAAE,IAAgB;QACtD,QAAQ,IAAI,CAAC,OAAO,EAAE,CAAC;YACrB,KAAK,UAAU;gBACb,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEjC,KAAK,YAAY;gBACf,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEjC,KAAK,UAAU;gBACb,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEjC;gBACE,OAAO,KAAK,CAAC;QACjB,CAAC;IACH,CAAC;IAED;;;;;;OAMG;IACK,iBAAiB,CAAC,IAAY,EAAE,IAAgB;QACtD,QAAQ,IAAI,CAAC,OAAO,EAAE,CAAC;YACrB,KAAK,YAAY;gBACf,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEjC,KAAK,UAAU;gBACb,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEjC;gBACE,OAAO,KAAK,CAAC;QACjB,CAAC;IACH,CAAC;IAED;;;;;;;OAOG;IACH,oBAAoB,CAClB,IAAY,EACZ,QAAmC;QAEnC,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QAE1D,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;YACnB,yBAAyB;YACzB,MAAM,aAAa,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;YACtD,MAAM,UAAU,GAAG,aAAa,CAAC,MAAM,CAAC;YACxC,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;YACzD,MAAM,eAAe,GAAG,UAAU,GAAG,MAAM,CAAC,OAAO,CAAC;YAEpD,MAAM,UAAU,GACd,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACrB,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC;gBAC3B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAEvC,OAAO,UAAU,CAAC;QACpB,CAAC;aAAM,CAAC;YACN,yBAAyB;YACzB,MAAM,iBAAiB,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;YAC1D,MAAM,UAAU,GAAG,iBAAiB;iBACjC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;iBAC1C,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC;YAEpD,OAAO,UAAU,CAAC;QACpB,CAAC;IACH,CAAC;CACF;AAED,eAAe,gBAAgB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/LanguageIndentRegistry.js b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/LanguageIndentRegistry.js
index 1b87eb0..2cd9470 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/LanguageIndentRegistry.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/LanguageIndentRegistry.js
@@ -3,8 +3,8 @@
  *
  * MIT License
  */
-import { pythonIndentConfig } from './languages/python.js';
-import { javascriptIndentConfig, typescriptIndentConfig, } from './languages/javascript.js';
+import { pythonIndentConfig } from './languages/python';
+import { javascriptIndentConfig, typescriptIndentConfig, } from './languages/javascript';
 /**
  * Registry for language indentation configurations
  *
@@ -70,9 +70,6 @@ export class LanguageIndentRegistry {
             return;
         }
         this.configs.set(config.language, config);
-        if (this.options.debug) {
-            console.log(`[LanguageIndentRegistry] Registered language: ${config.language} (tabSize=${config.tabSize})`);
-        }
     }
     /**
      * Register a language alias
@@ -173,9 +170,6 @@ export class LanguageIndentRegistry {
             language: existing.language, // Preserve original language name
         };
         this.configs.set(normalized, updated);
-        if (this.options.debug) {
-            console.log(`[LanguageIndentRegistry] Updated config for: ${language}`, updates);
-        }
         return true;
     }
     /**
@@ -192,9 +186,6 @@ export class LanguageIndentRegistry {
      */
     clear() {
         this.configs.clear();
-        if (this.options.debug) {
-            console.log('[LanguageIndentRegistry] Cleared all configurations');
-        }
     }
     /**
      * Reset to default configurations
@@ -203,9 +194,6 @@ export class LanguageIndentRegistry {
     reset() {
         this.clear();
         this.registerDefaultLanguages();
-        if (this.options.debug) {
-            console.log('[LanguageIndentRegistry] Reset to default configurations');
-        }
     }
 }
 export default LanguageIndentRegistry;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/LanguageIndentRegistry.js.map b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/LanguageIndentRegistry.js.map
index faefd16..b765808 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/LanguageIndentRegistry.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/LanguageIndentRegistry.js.map
@@ -1 +1 @@
-{"version":3,"file":"LanguageIndentRegistry.js","sourceRoot":"","sources":["../../src/autoindent/LanguageIndentRegistry.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"LanguageIndentRegistry.js","sourceRoot":"","sources":["../../src/autoindent/LanguageIndentRegistry.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/__tests__/AutoIndentEngine.test.js b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/__tests__/AutoIndentEngine.test.js
index 84c7a35..2efbe8a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/__tests__/AutoIndentEngine.test.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/__tests__/AutoIndentEngine.test.js
@@ -10,8 +10,8 @@
  *
  * @module autoindent/__tests__
  */
-import { AutoIndentEngine } from '../AutoIndentEngine.js';
-import { LanguageIndentRegistry } from '../LanguageIndentRegistry.js';
+import { AutoIndentEngine } from '../AutoIndentEngine';
+import { LanguageIndentRegistry } from '../LanguageIndentRegistry';
 describe('AutoIndentEngine', () => {
     let registry;
     let engine;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/index.js b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/index.js
index e3d5cab..0d38767 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/index.js
@@ -12,9 +12,9 @@
  * @module autoindent
  */
 // Core exports
-export { AutoIndentEngine } from './AutoIndentEngine.js';
-export { LanguageIndentRegistry } from './LanguageIndentRegistry.js';
+export { AutoIndentEngine } from './AutoIndentEngine';
+export { LanguageIndentRegistry } from './LanguageIndentRegistry';
 // Language configurations
-export { pythonIndentConfig } from './languages/python.js';
-export { javascriptIndentConfig, typescriptIndentConfig, } from './languages/javascript.js';
+export { pythonIndentConfig } from './languages/python';
+export { javascriptIndentConfig, typescriptIndentConfig, } from './languages/javascript';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/languages/javascript.js b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/languages/javascript.js
index d07e98f..e139e3c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/languages/javascript.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/languages/javascript.js
@@ -115,7 +115,7 @@ export const javascriptIndentConfig = {
                 // Check if line is a case or default label in switch statement
                 return /^\s*(case\s+.*:|default:)/.test(line);
             },
-            apply: (currentIndent, context) => {
+            apply: (currentIndent, _context) => {
                 // Case labels are typically at the same level as switch
                 // This is a simplified heuristic
                 return currentIndent;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/languages/javascript.js.map b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/languages/javascript.js.map
index e55b31d..5d1ac3a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/autoindent/languages/javascript.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/autoindent/languages/javascript.js.map
@@ -1 +1 @@
-{"version":3,"file":"javascript.js","sourceRoot":"","sources":["../../../src/autoindent/languages/javascript.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"javascript.js","sourceRoot":"","sources":["../../../src/autoindent/languages/javascript.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/Button.js b/node_modules/@datalayer/jupyter-lexical/lib/components/Button.js
index 7472467..e48adfe 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/Button.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/Button.js
@@ -1,5 +1,5 @@
 import { jsx as _jsx } from "react/jsx-runtime";
-import joinClasses from '../utils/join.js';
+import joinClasses from '../utils/join';
 export const Button = ({ 'data-test-id': dataTestId, children, className, onClick, disabled, small, title, }) => {
     return (_jsx("button", { disabled: disabled, className: joinClasses('Button__root', small && 'Button__small', disabled && 'Button__disabled', className), onClick: onClick, title: title, "aria-label": title, ...(dataTestId && { 'data-test-id': dataTestId }), children: children }));
 };
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.d.ts
new file mode 100644
index 0000000..dd64aa0
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.d.ts
@@ -0,0 +1,13 @@
+import type { JSX } from 'react';
+interface ColorPickerProps {
+    color: string;
+    onChange?: (value: string, skipHistoryStack: boolean) => void;
+}
+export declare function parseAllowedColor(input: string): string;
+export default function ColorPicker({ color, onChange, }: Readonly<ColorPickerProps>): JSX.Element;
+export interface Position {
+    x: number;
+    y: number;
+}
+export declare function toHex(value: string): string;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.js b/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.js
new file mode 100644
index 0000000..221b0b1
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.js
@@ -0,0 +1,219 @@
+import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
+import { calculateZoomLevel } from '@lexical/utils';
+import { useEffect, useMemo, useRef, useState } from 'react';
+import TextInput from './TextInput';
+let skipAddingToHistoryStack = false;
+export function parseAllowedColor(input) {
+    return /^rgb\(\d+, \d+, \d+\)$/.test(input) ? input : '';
+}
+const basicColors = [
+    '#d0021b',
+    '#f5a623',
+    '#f8e71c',
+    '#8b572a',
+    '#7ed321',
+    '#417505',
+    '#bd10e0',
+    '#9013fe',
+    '#4a90e2',
+    '#50e3c2',
+    '#b8e986',
+    '#000000',
+    '#4a4a4a',
+    '#9b9b9b',
+    '#ffffff',
+];
+const WIDTH = 214;
+const HEIGHT = 150;
+export default function ColorPicker({ color, onChange, }) {
+    const [selfColor, setSelfColor] = useState(transformColor('hex', color));
+    const [inputColor, setInputColor] = useState(color);
+    const innerDivRef = useRef(null);
+    const saturationPosition = useMemo(() => ({
+        x: (selfColor.hsv.s / 100) * WIDTH,
+        y: ((100 - selfColor.hsv.v) / 100) * HEIGHT,
+    }), [selfColor.hsv.s, selfColor.hsv.v]);
+    const huePosition = useMemo(() => ({
+        x: (selfColor.hsv.h / 360) * WIDTH,
+    }), [selfColor.hsv]);
+    const onSetHex = (hex) => {
+        setInputColor(hex);
+        if (/^#[0-9A-Fa-f]{6}$/i.test(hex)) {
+            const newColor = transformColor('hex', hex);
+            setSelfColor(newColor);
+        }
+    };
+    const onMoveSaturation = ({ x, y }) => {
+        const newHsv = {
+            ...selfColor.hsv,
+            s: (x / WIDTH) * 100,
+            v: 100 - (y / HEIGHT) * 100,
+        };
+        const newColor = transformColor('hsv', newHsv);
+        setSelfColor(newColor);
+        setInputColor(newColor.hex);
+    };
+    const onMoveHue = ({ x }) => {
+        const newHsv = { ...selfColor.hsv, h: (x / WIDTH) * 360 };
+        const newColor = transformColor('hsv', newHsv);
+        setSelfColor(newColor);
+        setInputColor(newColor.hex);
+    };
+    useEffect(() => {
+        // Check if the dropdown is actually active
+        if (innerDivRef.current !== null && onChange) {
+            onChange(selfColor.hex, skipAddingToHistoryStack);
+            setInputColor(selfColor.hex);
+        }
+    }, [selfColor, onChange]);
+    useEffect(() => {
+        if (color === undefined) {
+            return;
+        }
+        const newColor = transformColor('hex', color);
+        setSelfColor(newColor);
+        setInputColor(newColor.hex);
+    }, [color]);
+    return (_jsxs("div", { className: "color-picker-wrapper", style: { width: WIDTH }, ref: innerDivRef, children: [_jsx(TextInput, { label: "Hex", onChange: onSetHex, value: inputColor }), _jsx("div", { className: "color-picker-basic-color", children: basicColors.map(basicColor => (_jsx("button", { className: basicColor === selfColor.hex ? ' active' : '', style: { backgroundColor: basicColor }, onClick: () => {
+                        setInputColor(basicColor);
+                        setSelfColor(transformColor('hex', basicColor));
+                    } }, basicColor))) }), _jsx(MoveWrapper, { className: "color-picker-saturation", style: { backgroundColor: `hsl(${selfColor.hsv.h}, 100%, 50%)` }, onChange: onMoveSaturation, children: _jsx("div", { className: "color-picker-saturation_cursor", style: {
+                        backgroundColor: selfColor.hex,
+                        left: saturationPosition.x,
+                        top: saturationPosition.y,
+                    } }) }), _jsx(MoveWrapper, { className: "color-picker-hue", onChange: onMoveHue, children: _jsx("div", { className: "color-picker-hue_cursor", style: {
+                        backgroundColor: `hsl(${selfColor.hsv.h}, 100%, 50%)`,
+                        left: huePosition.x,
+                    } }) }), _jsx("div", { className: "color-picker-color", style: { backgroundColor: selfColor.hex } })] }));
+}
+function MoveWrapper({ className, style, onChange, children, }) {
+    const divRef = useRef(null);
+    const draggedRef = useRef(false);
+    const move = (e) => {
+        if (divRef.current) {
+            const { current: div } = divRef;
+            const { width, height, left, top } = div.getBoundingClientRect();
+            const zoom = calculateZoomLevel(div);
+            const x = clamp(e.clientX / zoom - left, width, 0);
+            const y = clamp(e.clientY / zoom - top, height, 0);
+            onChange({ x, y });
+        }
+    };
+    const onMouseDown = (e) => {
+        if (e.button !== 0) {
+            return;
+        }
+        move(e);
+        const onMouseMove = (_e) => {
+            draggedRef.current = true;
+            skipAddingToHistoryStack = true;
+            move(_e);
+        };
+        const onMouseUp = (_e) => {
+            if (draggedRef.current) {
+                skipAddingToHistoryStack = false;
+            }
+            document.removeEventListener('mousemove', onMouseMove, false);
+            document.removeEventListener('mouseup', onMouseUp, false);
+            move(_e);
+            draggedRef.current = false;
+        };
+        document.addEventListener('mousemove', onMouseMove, false);
+        document.addEventListener('mouseup', onMouseUp, false);
+    };
+    return (_jsx("div", { ref: divRef, className: className, style: style, onMouseDown: onMouseDown, children: children }));
+}
+function clamp(value, max, min) {
+    return value > max ? max : value < min ? min : value;
+}
+export function toHex(value) {
+    if (!value.startsWith('#')) {
+        const ctx = document.createElement('canvas').getContext('2d');
+        if (!ctx) {
+            throw new Error('2d context not supported or canvas already initialized');
+        }
+        ctx.fillStyle = value;
+        return ctx.fillStyle;
+    }
+    else if (value.length === 4 || value.length === 5) {
+        value = value
+            .split('')
+            .map((v, i) => (i ? v + v : '#'))
+            .join('');
+        return value;
+    }
+    else if (value.length === 7 || value.length === 9) {
+        return value;
+    }
+    return '#000000';
+}
+function hex2rgb(hex) {
+    const rbgArr = (hex
+        .replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, (m, r, g, b) => '#' + r + r + g + g + b + b)
+        .substring(1)
+        .match(/.{2}/g) || []).map(x => parseInt(x, 16));
+    return {
+        b: rbgArr[2],
+        g: rbgArr[1],
+        r: rbgArr[0],
+    };
+}
+function rgb2hsv({ r, g, b }) {
+    r /= 255;
+    g /= 255;
+    b /= 255;
+    const max = Math.max(r, g, b);
+    const d = max - Math.min(r, g, b);
+    const h = d
+        ? (max === r
+            ? (g - b) / d + (g < b ? 6 : 0)
+            : max === g
+                ? 2 + (b - r) / d
+                : 4 + (r - g) / d) * 60
+        : 0;
+    const s = max ? (d / max) * 100 : 0;
+    const v = max * 100;
+    return { h, s, v };
+}
+function hsv2rgb({ h, s, v }) {
+    s /= 100;
+    v /= 100;
+    const i = ~~(h / 60);
+    const f = h / 60 - i;
+    const p = v * (1 - s);
+    const q = v * (1 - s * f);
+    const t = v * (1 - s * (1 - f));
+    const index = i % 6;
+    const r = Math.round([v, q, p, p, t, v][index] * 255);
+    const g = Math.round([t, v, v, q, p, p][index] * 255);
+    const b = Math.round([p, p, t, v, v, q][index] * 255);
+    return { b, g, r };
+}
+function rgb2hex({ b, g, r }) {
+    return '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');
+}
+function transformColor(format, color) {
+    let hex = toHex('#121212');
+    let rgb = hex2rgb(hex);
+    let hsv = rgb2hsv(rgb);
+    if (format === 'hex') {
+        const value = color;
+        hex = toHex(value);
+        rgb = hex2rgb(hex);
+        hsv = rgb2hsv(rgb);
+    }
+    else if (format === 'rgb') {
+        const value = color;
+        rgb = value;
+        hex = rgb2hex(rgb);
+        hsv = rgb2hsv(rgb);
+    }
+    else if (format === 'hsv') {
+        const value = color;
+        hsv = value;
+        rgb = hsv2rgb(hsv);
+        hex = rgb2hex(rgb);
+    }
+    return { hex, hsv, rgb };
+}
+//# sourceMappingURL=ColorPicker.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.js.map b/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.js.map
new file mode 100644
index 0000000..10dbc58
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ColorPicker.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ColorPicker.js","sourceRoot":"","sources":["../../src/components/ColorPicker.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.d.ts
index 8fee0e5..71719da 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.d.ts
@@ -30,7 +30,7 @@ export declare class CommentStore {
      * Updates CommentThreadNode in the Lexical editor state, which automatically
      * syncs via Loro collaboration provider.
      */
-    addComment(commentOrThread: Comment | Thread, thread?: Thread, offset?: number): void;
+    addComment(commentOrThread: Comment | Thread, thread?: Thread, _offset?: number): void;
     /**
      * Delete a comment from a thread or delete an entire thread.
      * Updates CommentThreadNode in the Lexical editor state, which automatically
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.js b/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.js
index f8be545..0fecaa2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.js
@@ -5,7 +5,7 @@
  */
 import { useEffect, useState } from 'react';
 import { $getRoot } from 'lexical';
-import { $createCommentThreadNode, $isCommentThreadNode, } from '../nodes/CommentThreadNode.js';
+import { $createCommentThreadNode, $isCommentThreadNode, } from '../nodes/CommentThreadNode';
 function createUID() {
     return Math.random()
         .toString(36)
@@ -84,7 +84,7 @@ export class CommentStore {
      * Updates CommentThreadNode in the Lexical editor state, which automatically
      * syncs via Loro collaboration provider.
      */
-    addComment(commentOrThread, thread, offset) {
+    addComment(commentOrThread, thread, _offset) {
         this._editor.update(() => {
             if (thread !== undefined && commentOrThread.type === 'comment') {
                 // Add comment to existing thread
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.js.map b/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.js.map
index c42b2af..ab455df 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/Commenting.js.map
@@ -1 +1 @@
-{"version":3,"file":"Commenting.js","sourceRoot":"","sources":["../../src/components/Commenting.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Commenting.js","sourceRoot":"","sources":["../../src/components/Commenting.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/CopyButton.js b/node_modules/@datalayer/jupyter-lexical/lib/components/CopyButton.js
index 7e565ff..49bbd32 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/CopyButton.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/CopyButton.js
@@ -7,7 +7,7 @@ import { jsx as _jsx } from "react/jsx-runtime";
 import { useState } from 'react';
 import { $getNearestNodeFromDOMNode, $getSelection, $setSelection, } from 'lexical';
 import { $isCodeNode } from '@lexical/code';
-import { useDebounce } from '../hooks/index.js';
+import { useDebounce } from '../hooks';
 export function CopyButton({ editor, getCodeDOMNode }) {
     const [isCopyCompleted, setCopyCompleted] = useState(false);
     const removeSuccessIcon = useDebounce(() => {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.d.ts
new file mode 100644
index 0000000..6e033e0
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.d.ts
@@ -0,0 +1,8 @@
+import type { NodeKey } from 'lexical';
+import type { JSX } from 'react';
+export default function ExcalidrawComponent({ nodeKey, data, width, height, }: {
+    data: string;
+    nodeKey: NodeKey;
+    width: 'inherit' | number;
+    height: 'inherit' | number;
+}): JSX.Element;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.js b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.js
new file mode 100644
index 0000000..f45cab8
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.js
@@ -0,0 +1,111 @@
+import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { useLexicalEditable } from '@lexical/react/useLexicalEditable';
+import { useLexicalNodeSelection } from '@lexical/react/useLexicalNodeSelection';
+import { mergeRegister } from '@lexical/utils';
+import { $getNodeByKey, CLICK_COMMAND, COMMAND_PRIORITY_LOW, isDOMNode, } from 'lexical';
+import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
+import ExcalidrawModal from './ExcalidrawModal';
+import ImageResizer from './ImageResizer';
+import { $isExcalidrawNode } from '../nodes/ExcalidrawNode';
+import ExcalidrawImage from './ExcalidrawImage';
+export default function ExcalidrawComponent({ nodeKey, data, width, height, }) {
+    const [editor] = useLexicalComposerContext();
+    const isEditable = useLexicalEditable();
+    const [isModalOpen, setModalOpen] = useState(data === '[]' && editor.isEditable());
+    const imageContainerRef = useRef(null);
+    const buttonRef = useRef(null);
+    const captionButtonRef = useRef(null);
+    const [isSelected, setSelected, clearSelection] = useLexicalNodeSelection(nodeKey);
+    const [isResizing, setIsResizing] = useState(false);
+    useEffect(() => {
+        if (!isEditable) {
+            if (isSelected) {
+                clearSelection();
+            }
+            return;
+        }
+        return mergeRegister(editor.registerCommand(CLICK_COMMAND, (event) => {
+            const buttonElem = buttonRef.current;
+            const eventTarget = event.target;
+            if (isResizing) {
+                return true;
+            }
+            if (buttonElem !== null &&
+                isDOMNode(eventTarget) &&
+                buttonElem.contains(eventTarget)) {
+                if (!event.shiftKey) {
+                    clearSelection();
+                }
+                setSelected(!isSelected);
+                if (event.detail > 1) {
+                    setModalOpen(true);
+                }
+                return true;
+            }
+            return false;
+        }, COMMAND_PRIORITY_LOW));
+    }, [clearSelection, editor, isSelected, isResizing, setSelected, isEditable]);
+    const deleteNode = useCallback(() => {
+        setModalOpen(false);
+        return editor.update(() => {
+            const node = $getNodeByKey(nodeKey);
+            if (node) {
+                node.remove();
+            }
+        });
+    }, [editor, nodeKey]);
+    const setData = (els, aps, fls) => {
+        return editor.update(() => {
+            const node = $getNodeByKey(nodeKey);
+            if ($isExcalidrawNode(node)) {
+                if ((els && els.length > 0) || Object.keys(fls).length > 0) {
+                    node.setData(JSON.stringify({
+                        appState: aps,
+                        elements: els,
+                        files: fls,
+                    }));
+                }
+                else {
+                    node.remove();
+                }
+            }
+        });
+    };
+    const onResizeStart = () => {
+        setIsResizing(true);
+    };
+    const onResizeEnd = (nextWidth, nextHeight) => {
+        // Delay hiding the resize bars for click case
+        setTimeout(() => {
+            setIsResizing(false);
+        }, 200);
+        editor.update(() => {
+            const node = $getNodeByKey(nodeKey);
+            if ($isExcalidrawNode(node)) {
+                node.setWidth(nextWidth);
+                node.setHeight(nextHeight);
+            }
+        });
+    };
+    const openModal = useCallback(() => {
+        setModalOpen(true);
+    }, []);
+    const { elements = [], files = {}, appState = {}, } = useMemo(() => JSON.parse(data), [data]);
+    const closeModal = useCallback(() => {
+        setModalOpen(false);
+        if (elements.length === 0) {
+            editor.update(() => {
+                const node = $getNodeByKey(nodeKey);
+                if (node) {
+                    node.remove();
+                }
+            });
+        }
+    }, [editor, nodeKey, elements.length]);
+    return (_jsxs(_Fragment, { children: [isEditable && isModalOpen && (_jsx(ExcalidrawModal, { initialElements: elements, initialFiles: files, initialAppState: appState, isShown: isModalOpen, onDelete: deleteNode, onClose: closeModal, onSave: (els, aps, fls) => {
+                    setData(els, aps, fls);
+                    setModalOpen(false);
+                }, closeOnClickOutside: false })), elements.length > 0 && (_jsxs("button", { ref: buttonRef, className: `excalidraw-button ${isSelected ? 'selected' : ''}`, children: [_jsx(ExcalidrawImage, { imageContainerRef: imageContainerRef, className: "image", elements: elements, files: files, appState: appState, width: width, height: height }), isSelected && isEditable && (_jsx("div", { className: "image-edit-button", role: "button", tabIndex: 0, onMouseDown: event => event.preventDefault(), onClick: openModal })), (isSelected || isResizing) && isEditable && (_jsx(ImageResizer, { buttonRef: captionButtonRef, showCaption: true, setShowCaption: () => null, imageRef: imageContainerRef, editor: editor, onResizeStart: onResizeStart, onResizeEnd: onResizeEnd }))] }))] }));
+}
+//# sourceMappingURL=ExcalidrawComponent.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.js.map b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.js.map
new file mode 100644
index 0000000..7946c69
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawComponent.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ExcalidrawComponent.js","sourceRoot":"","sources":["../../src/components/ExcalidrawComponent.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.d.ts
new file mode 100644
index 0000000..30659bc
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.d.ts
@@ -0,0 +1,49 @@
+import type { ExcalidrawElement, NonDeleted } from '@excalidraw/excalidraw/element/types';
+import type { AppState, BinaryFiles } from '@excalidraw/excalidraw/types';
+import type { JSX } from 'react';
+import * as React from 'react';
+type ImageType = 'svg' | 'canvas';
+type Dimension = 'inherit' | number;
+type Props = {
+    /**
+     * Configures the export setting for SVG/Canvas
+     */
+    appState: AppState;
+    /**
+     * The css class applied to image to be rendered
+     */
+    className?: string;
+    /**
+     * The Excalidraw elements to be rendered as an image
+     */
+    elements: NonDeleted<ExcalidrawElement>[];
+    /**
+     * The Excalidraw files associated with the elements
+     */
+    files: BinaryFiles;
+    /**
+     * The height of the image to be rendered
+     */
+    height?: Dimension;
+    /**
+     * The ref object to be used to render the image
+     */
+    imageContainerRef: React.MutableRefObject<HTMLDivElement | null>;
+    /**
+     * The type of image to be rendered
+     */
+    imageType?: ImageType;
+    /**
+     * The css class applied to the root element of this component
+     */
+    rootClassName?: string | null;
+    /**
+     * The width of the image to be rendered
+     */
+    width?: Dimension;
+};
+/**
+ * A component for rendering Excalidraw elements as a static image
+ */
+export default function ExcalidrawImage({ elements, files, imageContainerRef, appState, rootClassName, width, height, }: Props): JSX.Element;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.js b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.js
new file mode 100644
index 0000000..36a1754
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.js
@@ -0,0 +1,118 @@
+import { jsx as _jsx } from "react/jsx-runtime";
+import { exportToSvg } from '@excalidraw/excalidraw';
+import { useEffect, useState } from 'react';
+import { useTheme } from '../context/ThemeContext';
+// exportToSvg has fonts from excalidraw.com
+// We don't want them to be used in open source
+const removeStyleFromSvg_HACK = (svg) => {
+    const styleTag = svg?.firstElementChild?.firstElementChild;
+    // Generated SVG is getting double-sized by height and width attributes
+    // We want to match the real size of the SVG element
+    const viewBox = svg.getAttribute('viewBox');
+    if (viewBox != null) {
+        const viewBoxDimensions = viewBox.split(' ');
+        svg.setAttribute('width', viewBoxDimensions[2]);
+        svg.setAttribute('height', viewBoxDimensions[3]);
+    }
+    if (styleTag && styleTag.tagName === 'style') {
+        styleTag.remove();
+    }
+};
+/**
+ * A component for rendering Excalidraw elements as a static image
+ */
+export default function ExcalidrawImage({ elements, files, imageContainerRef, appState, rootClassName = null, width = 'inherit', height = 'inherit', }) {
+    const { theme } = useTheme();
+    const [Svg, setSvg] = useState(null);
+    const [cssVersion, setCssVersion] = useState(0);
+    // Listen for CSS variable changes (detects theme palette changes)
+    useEffect(() => {
+        const observer = new MutationObserver(mutations => {
+            // Check if style or class attributes changed (indicates theme change)
+            for (const mutation of mutations) {
+                if (mutation.type === 'attributes' &&
+                    (mutation.attributeName === 'style' ||
+                        mutation.attributeName === 'class')) {
+                    setCssVersion(v => v + 1);
+                    break;
+                }
+            }
+        });
+        // Watch document root for attribute changes
+        observer.observe(document.documentElement, {
+            attributes: true,
+            attributeFilter: ['style', 'class'],
+        });
+        // Also watch body element
+        observer.observe(document.body, {
+            attributes: true,
+            attributeFilter: ['style', 'class'],
+        });
+        return () => observer.disconnect();
+    }, []);
+    useEffect(() => {
+        const setContent = async () => {
+            // Wait for CSS variables to update after theme change
+            await new Promise(resolve => setTimeout(resolve, 150));
+            // Excalidraw default colors that should be replaced with editor background
+            const EXCALIDRAW_DEFAULTS = ['#ffffff', '#000000', 'transparent', ''];
+            // Get current background color from appState
+            const currentBg = appState?.viewBackgroundColor || 'transparent';
+            // Check if it's a default color that should match editor background
+            const shouldUseEditorBackground = EXCALIDRAW_DEFAULTS.includes(currentBg.toLowerCase());
+            // Strategy: Let Excalidraw handle stroke colors via exportWithDarkMode
+            // Set background via CSS on container instead of in SVG
+            const modifiedAppState = {
+                ...appState,
+                // Use transparent background - we'll set container background via CSS
+                viewBackgroundColor: shouldUseEditorBackground
+                    ? 'transparent'
+                    : appState?.viewBackgroundColor,
+                // exportBackground: false so SVG has no background rect
+                exportBackground: !shouldUseEditorBackground,
+                // Use exportWithDarkMode to get correct stroke colors for theme
+                exportWithDarkMode: theme === 'dark',
+            };
+            const svg = await exportToSvg({
+                appState: modifiedAppState,
+                elements,
+                files,
+            });
+            removeStyleFromSvg_HACK(svg);
+            svg.setAttribute('width', '100%');
+            svg.setAttribute('height', '100%');
+            svg.setAttribute('display', 'block');
+            setSvg(svg);
+        };
+        setContent();
+    }, [elements, files, appState, theme, cssVersion]);
+    // Build container style with editor background color
+    const containerStyle = {};
+    if (width !== 'inherit') {
+        containerStyle.width = `${width}px`;
+    }
+    if (height !== 'inherit') {
+        containerStyle.height = `${height}px`;
+    }
+    // Set background color on container (not in SVG)
+    const currentBg = appState?.viewBackgroundColor || 'transparent';
+    const EXCALIDRAW_DEFAULTS = ['#ffffff', '#000000', 'transparent', ''];
+    const shouldUseEditorBackground = EXCALIDRAW_DEFAULTS.includes(currentBg.toLowerCase());
+    if (shouldUseEditorBackground) {
+        // Read current CSS variable for container background
+        const docStyle = getComputedStyle(document.documentElement);
+        const cssVar = docStyle
+            .getPropertyValue('--vscode-editor-background')
+            .trim();
+        containerStyle.backgroundColor =
+            cssVar || (theme === 'dark' ? '#1e1e1e' : '#ffffff');
+    }
+    return (_jsx("div", { ref: node => {
+            if (node) {
+                if (imageContainerRef) {
+                    imageContainerRef.current = node;
+                }
+            }
+        }, className: rootClassName ?? '', style: containerStyle, dangerouslySetInnerHTML: { __html: Svg?.outerHTML ?? '' } }));
+}
+//# sourceMappingURL=ExcalidrawImage.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.js.map b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.js.map
new file mode 100644
index 0000000..d818475
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawImage.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ExcalidrawImage.js","sourceRoot":"","sources":["../../src/components/ExcalidrawImage.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.d.ts
new file mode 100644
index 0000000..a65ee00
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.d.ts
@@ -0,0 +1,41 @@
+import type { AppState, BinaryFiles, ExcalidrawInitialDataState } from '@excalidraw/excalidraw/types';
+import '@excalidraw/excalidraw/index.css';
+import { ReactPortal } from 'react';
+export type ExcalidrawInitialElements = ExcalidrawInitialDataState['elements'];
+type Props = {
+    closeOnClickOutside?: boolean;
+    /**
+     * The initial set of elements to draw into the scene
+     */
+    initialElements: ExcalidrawInitialElements;
+    /**
+     * The initial set of elements to draw into the scene
+     */
+    initialAppState: AppState;
+    /**
+     * The initial set of elements to draw into the scene
+     */
+    initialFiles: BinaryFiles;
+    /**
+     * Controls the visibility of the modal
+     */
+    isShown?: boolean;
+    /**
+     * Callback when closing and discarding the new changes
+     */
+    onClose: () => void;
+    /**
+     * Completely remove Excalidraw component
+     */
+    onDelete: () => void;
+    /**
+     * Callback when the save button is clicked
+     */
+    onSave: (elements: ExcalidrawInitialElements, appState: Partial<AppState>, files: BinaryFiles) => void;
+};
+/**
+ * A component which renders a modal with Excalidraw (a painting app)
+ * which can be used to export an editable image
+ */
+export default function ExcalidrawModal({ closeOnClickOutside, onSave, initialElements, initialAppState, initialFiles, isShown, onDelete, onClose, }: Props): ReactPortal | null;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.js b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.js
new file mode 100644
index 0000000..efdb44a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.js
@@ -0,0 +1,105 @@
+import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
+import '@excalidraw/excalidraw/index.css';
+import { Excalidraw } from '@excalidraw/excalidraw';
+import { isDOMNode } from 'lexical';
+import { useEffect, useLayoutEffect, useRef, useState, } from 'react';
+import { createPortal } from 'react-dom';
+import Button from './Button';
+import Modal from './Modal';
+import { useTheme } from '../context/ThemeContext';
+/**
+ * A component which renders a modal with Excalidraw (a painting app)
+ * which can be used to export an editable image
+ */
+export default function ExcalidrawModal({ closeOnClickOutside = false, onSave, initialElements, initialAppState, initialFiles, isShown = false, onDelete, onClose, }) {
+    const { theme } = useTheme();
+    const excaliDrawModelRef = useRef(null);
+    const [excalidrawAPI, setExcalidrawAPI] = useState(null);
+    const [discardModalOpen, setDiscardModalOpen] = useState(false);
+    const [elements, setElements] = useState(initialElements);
+    const [files, setFiles] = useState(initialFiles);
+    useEffect(() => {
+        excaliDrawModelRef.current?.focus();
+    }, []);
+    useEffect(() => {
+        let modalOverlayElement = null;
+        const clickOutsideHandler = (event) => {
+            const target = event.target;
+            if (excaliDrawModelRef.current !== null &&
+                isDOMNode(target) &&
+                !excaliDrawModelRef.current.contains(target) &&
+                closeOnClickOutside) {
+                onDelete();
+            }
+        };
+        if (excaliDrawModelRef.current !== null) {
+            modalOverlayElement = excaliDrawModelRef.current?.parentElement;
+            modalOverlayElement?.addEventListener('click', clickOutsideHandler);
+        }
+        return () => {
+            modalOverlayElement?.removeEventListener('click', clickOutsideHandler);
+        };
+    }, [closeOnClickOutside, onDelete]);
+    useLayoutEffect(() => {
+        const currentModalRef = excaliDrawModelRef.current;
+        const onKeyDown = (event) => {
+            if (event.key === 'Escape') {
+                onClose();
+            }
+        };
+        currentModalRef?.addEventListener('keydown', onKeyDown);
+        return () => {
+            currentModalRef?.removeEventListener('keydown', onKeyDown);
+        };
+    }, [elements, files, onClose]);
+    const save = () => {
+        if (elements?.some(el => !el.isDeleted)) {
+            const appState = excalidrawAPI?.getAppState();
+            // We only need a subset of the state
+            const partialState = {
+                exportBackground: appState?.exportBackground,
+                exportScale: appState?.exportScale,
+                exportWithDarkMode: appState?.theme === 'dark',
+                isBindingEnabled: appState?.isBindingEnabled,
+                isLoading: appState?.isLoading,
+                name: appState?.name,
+                theme: appState?.theme,
+                viewBackgroundColor: appState?.viewBackgroundColor,
+                viewModeEnabled: appState?.viewModeEnabled,
+                zenModeEnabled: appState?.zenModeEnabled,
+                zoom: appState?.zoom,
+            };
+            onSave(elements, partialState, files);
+        }
+        else {
+            // delete node if the scene is clear
+            onDelete();
+        }
+    };
+    const discard = () => {
+        setDiscardModalOpen(true);
+    };
+    function ShowDiscardDialog() {
+        return (_jsxs(Modal, { title: "Discard", onClose: () => {
+                setDiscardModalOpen(false);
+            }, closeOnClickOutside: false, children: ["Are you sure you want to discard the changes?", _jsxs("div", { className: "ExcalidrawModal__discardModal", children: [_jsx(Button, { onClick: () => {
+                                setDiscardModalOpen(false);
+                                onClose();
+                            }, children: "Discard" }), ' ', _jsx(Button, { onClick: () => {
+                                setDiscardModalOpen(false);
+                            }, children: "Cancel" })] })] }));
+    }
+    if (isShown === false) {
+        return null;
+    }
+    const onChange = (els, _, fls) => {
+        setElements(els);
+        setFiles(fls);
+    };
+    return createPortal(_jsx("div", { className: "ExcalidrawModal__overlay", role: "dialog", children: _jsx("div", { className: "ExcalidrawModal__modal", ref: excaliDrawModelRef, tabIndex: -1, children: _jsxs("div", { className: "ExcalidrawModal__row", children: [discardModalOpen && _jsx(ShowDiscardDialog, {}), _jsx(Excalidraw, { onChange: onChange, excalidrawAPI: api => setExcalidrawAPI(api), initialData: {
+                            appState: initialAppState || { isLoading: false },
+                            elements: initialElements,
+                            files: initialFiles,
+                        }, theme: theme }), _jsxs("div", { className: "ExcalidrawModal__actions", children: [_jsx("button", { className: "action-button", onClick: discard, children: "Discard" }), _jsx("button", { className: "action-button", onClick: save, children: "Save" })] })] }) }) }), document.body);
+}
+//# sourceMappingURL=ExcalidrawModal.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.js.map b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.js.map
new file mode 100644
index 0000000..f3def8d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/ExcalidrawModal.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ExcalidrawModal.js","sourceRoot":"","sources":["../../src/components/ExcalidrawModal.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/InsertEquationDialog.js b/node_modules/@datalayer/jupyter-lexical/lib/components/InsertEquationDialog.js
index 5ea074b..5eb3341 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/InsertEquationDialog.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/InsertEquationDialog.js
@@ -5,8 +5,8 @@ import { jsx as _jsx } from "react/jsx-runtime";
  * MIT License
  */
 import { useCallback } from 'react';
-import { KatexEquationAlterer } from './../components/KatexEquationAlterer.js';
-import { INSERT_EQUATION_COMMAND } from './../plugins/EquationsPlugin.js';
+import { KatexEquationAlterer } from './../components/KatexEquationAlterer';
+import { INSERT_EQUATION_COMMAND } from './../plugins/EquationsPlugin';
 export function InsertEquationDialog({ activeEditor, onClose, }) {
     const onEquationConfirm = useCallback((equation, inline) => {
         activeEditor.dispatchCommand(INSERT_EQUATION_COMMAND, {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/InsertImageDialog.js b/node_modules/@datalayer/jupyter-lexical/lib/components/InsertImageDialog.js
index 71af7ca..f05d754 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/InsertImageDialog.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/InsertImageDialog.js
@@ -5,10 +5,10 @@ import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-run
  * MIT License
  */
 import { useState } from 'react';
-import { Button } from './../components/Button.js';
-import { TextInput } from './../components/TextInput.js';
-import { FileInput } from './../components/FileInput.js';
-import { INSERT_IMAGE_COMMAND } from './../plugins/ImagesPlugin.js';
+import { Button } from './../components/Button';
+import { TextInput } from './../components/TextInput';
+import { FileInput } from './../components/FileInput';
+import { INSERT_IMAGE_COMMAND } from './../plugins/ImagesPlugin';
 import yellowFlowerImage from '../images/yellow-flower-small.jpg';
 export function InsertImageUriDialogBody({ onClick, }) {
     const [src, setSrc] = useState('');
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/KatexEquationAlterer.js b/node_modules/@datalayer/jupyter-lexical/lib/components/KatexEquationAlterer.js
index 689bd06..6a00606 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/KatexEquationAlterer.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/KatexEquationAlterer.js
@@ -5,8 +5,8 @@ import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-run
  * MIT License
  */
 import { useCallback, useState } from 'react';
-import Button from '../components/Button.js';
-import KatexRenderer from './KatexRenderer.js';
+import Button from '../components/Button';
+import KatexRenderer from './KatexRenderer';
 export const KatexEquationAlterer = ({ onConfirm, initialEquation = '', }) => {
     const [equation, setEquation] = useState(initialEquation);
     const [inline, setInline] = useState(true);
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.d.ts
new file mode 100644
index 0000000..9b46be2
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.d.ts
@@ -0,0 +1,6 @@
+type Props = {
+    onConfirm: (rows: number, columns: number) => void;
+    onClose: () => void;
+};
+export default function TableInsertModal({ onConfirm, onClose, }: Props): JSX.Element;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.js b/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.js
new file mode 100644
index 0000000..c9512e4
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.js
@@ -0,0 +1,34 @@
+import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Copyright (c) 2021-2025 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { useState } from 'react';
+import { createPortal } from 'react-dom';
+export default function TableInsertModal({ onConfirm, onClose, }) {
+    const [rows, setRows] = useState('5');
+    const [columns, setColumns] = useState('5');
+    const handleConfirm = () => {
+        const rowCount = parseInt(rows, 10);
+        const colCount = parseInt(columns, 10);
+        if (rowCount > 0 && rowCount <= 500 && colCount > 0 && colCount <= 50) {
+            onConfirm(rowCount, colCount);
+        }
+    };
+    const handleKeyDown = (event) => {
+        if (event.key === 'Enter') {
+            handleConfirm();
+        }
+        else if (event.key === 'Escape') {
+            onClose();
+        }
+    };
+    return createPortal(_jsx("div", { className: "TableInsertModal__overlay", onClick: onClose, children: _jsxs("div", { className: "TableInsertModal__modal", onClick: e => e.stopPropagation(), onKeyDown: handleKeyDown, children: [_jsx("h2", { className: "TableInsertModal__title", children: "Insert Table" }), _jsxs("div", { className: "TableInsertModal__content", children: [_jsxs("div", { className: "TableInsertModal__field", children: [_jsx("label", { htmlFor: "table-rows", children: "Rows" }), _jsx("input", { id: "table-rows", type: "number", min: "1", max: "500", value: rows, onChange: e => setRows(e.target.value), autoFocus: true })] }), _jsxs("div", { className: "TableInsertModal__field", children: [_jsx("label", { htmlFor: "table-columns", children: "Columns" }), _jsx("input", { id: "table-columns", type: "number", min: "1", max: "50", value: columns, onChange: e => setColumns(e.target.value) })] })] }), _jsxs("div", { className: "TableInsertModal__actions", children: [_jsx("button", { className: "TableInsertModal__button TableInsertModal__button--cancel", onClick: onClose, children: "Cancel" }), _jsx("button", { className: "TableInsertModal__button TableInsertModal__button--confirm", onClick: handleConfirm, children: "Confirm" })] })] }) }), document.body);
+}
+//# sourceMappingURL=TableInsertModal.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.js.map b/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.js.map
new file mode 100644
index 0000000..e4cda0f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/TableInsertModal.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"TableInsertModal.js","sourceRoot":"","sources":["../../src/components/TableInsertModal.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACjC,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AAOzC,MAAM,CAAC,OAAO,UAAU,gBAAgB,CAAC,EACvC,SAAS,EACT,OAAO,GACD;IACN,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,QAAQ,CAAS,GAAG,CAAC,CAAC;IAC9C,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAS,GAAG,CAAC,CAAC;IAEpD,MAAM,aAAa,GAAG,GAAG,EAAE;QACzB,MAAM,QAAQ,GAAG,QAAQ,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACpC,MAAM,QAAQ,GAAG,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAEvC,IAAI,QAAQ,GAAG,CAAC,IAAI,QAAQ,IAAI,GAAG,IAAI,QAAQ,GAAG,CAAC,IAAI,QAAQ,IAAI,EAAE,EAAE,CAAC;YACtE,SAAS,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAChC,CAAC;IACH,CAAC,CAAC;IAEF,MAAM,aAAa,GAAG,CAAC,KAA0B,EAAE,EAAE;QACnD,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE,CAAC;YAC1B,aAAa,EAAE,CAAC;QAClB,CAAC;aAAM,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;YAClC,OAAO,EAAE,CAAC;QACZ,CAAC;IACH,CAAC,CAAC;IAEF,OAAO,YAAY,CACjB,cAAK,SAAS,EAAC,2BAA2B,EAAC,OAAO,EAAE,OAAO,YACzD,eACE,SAAS,EAAC,yBAAyB,EACnC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,eAAe,EAAE,EACjC,SAAS,EAAE,aAAa,aAExB,aAAI,SAAS,EAAC,yBAAyB,6BAAkB,EACzD,eAAK,SAAS,EAAC,2BAA2B,aACxC,eAAK,SAAS,EAAC,yBAAyB,aACtC,gBAAO,OAAO,EAAC,YAAY,qBAAa,EACxC,gBACE,EAAE,EAAC,YAAY,EACf,IAAI,EAAC,QAAQ,EACb,GAAG,EAAC,GAAG,EACP,GAAG,EAAC,KAAK,EACT,KAAK,EAAE,IAAI,EACX,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EACtC,SAAS,SACT,IACE,EACN,eAAK,SAAS,EAAC,yBAAyB,aACtC,gBAAO,OAAO,EAAC,eAAe,wBAAgB,EAC9C,gBACE,EAAE,EAAC,eAAe,EAClB,IAAI,EAAC,QAAQ,EACb,GAAG,EAAC,GAAG,EACP,GAAG,EAAC,IAAI,EACR,KAAK,EAAE,OAAO,EACd,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,GACzC,IACE,IACF,EACN,eAAK,SAAS,EAAC,2BAA2B,aACxC,iBACE,SAAS,EAAC,2DAA2D,EACrE,OAAO,EAAE,OAAO,uBAGT,EACT,iBACE,SAAS,EAAC,4DAA4D,EACtE,OAAO,EAAE,aAAa,wBAGf,IACL,IACF,GACF,EACN,QAAQ,CAAC,IAAI,CACd,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/index.js b/node_modules/@datalayer/jupyter-lexical/lib/components/index.js
index 8277a8a..6704b35 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/index.js
@@ -3,20 +3,20 @@
  *
  * MIT License
  */
-// export * from "./InsertEquationDialog.js";
-// export * from "./InsertImageDialog.js";
-export * from './Button.js';
-export * from './Commenting.js';
-export * from './ContentEditable.js';
-export * from './DropDown.js';
-export * from './EquationEditor.js';
-export * from './FileInput.js';
-export * from './ImageResizer.js';
-export * from './KatexEquationAlterer.js';
-export * from './KatexEquationAlterer.js';
-export * from './KatexRenderer.js';
-export * from './Modal.js';
-export * from './Placeholder.js';
-export * from './PrettierButton.js';
-export * from './TextInput.js';
+// export * from "./InsertEquationDialog";
+// export * from "./InsertImageDialog";
+export * from './Button';
+export * from './Commenting';
+export * from './ContentEditable';
+export * from './DropDown';
+export * from './EquationEditor';
+export * from './FileInput';
+export * from './ImageResizer';
+export * from './KatexEquationAlterer';
+export * from './KatexEquationAlterer';
+export * from './KatexRenderer';
+export * from './Modal';
+export * from './Placeholder';
+export * from './PrettierButton';
+export * from './TextInput';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.d.ts
new file mode 100644
index 0000000..c576e21
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.d.ts
@@ -0,0 +1,11 @@
+import { ReactNode } from 'react';
+type CommentsContextType = {
+    showComments: boolean;
+    toggleComments: () => void;
+    setShowComments: (show: boolean) => void;
+};
+export declare const CommentsProvider: ({ children }: {
+    children: ReactNode;
+}) => import("react/jsx-runtime").JSX.Element;
+export declare const useComments: () => CommentsContextType;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.js b/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.js
new file mode 100644
index 0000000..e0e734c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.js
@@ -0,0 +1,21 @@
+import { jsx as _jsx } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { createContext, useContext, useState } from 'react';
+const CommentsContext = createContext(undefined);
+export const CommentsProvider = ({ children }) => {
+    const [showComments, setShowComments] = useState(false);
+    const toggleComments = () => setShowComments(prev => !prev);
+    return (_jsx(CommentsContext.Provider, { value: { showComments, toggleComments, setShowComments }, children: children }));
+};
+export const useComments = () => {
+    const context = useContext(CommentsContext);
+    if (!context) {
+        throw new Error('useComments must be used within CommentsProvider');
+    }
+    return context;
+};
+//# sourceMappingURL=CommentsContext.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.js.map
new file mode 100644
index 0000000..0c46a63
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/CommentsContext.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"CommentsContext.js","sourceRoot":"","sources":["../../src/context/CommentsContext.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,QAAQ,EAAa,MAAM,OAAO,CAAC;AAQvE,MAAM,eAAe,GAAG,aAAa,CACnC,SAAS,CACV,CAAC;AAEF,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAAC,EAAE,QAAQ,EAA2B,EAAE,EAAE;IACxE,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAExD,MAAM,cAAc,GAAG,GAAG,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;IAE5D,OAAO,CACL,KAAC,eAAe,CAAC,QAAQ,IACvB,KAAK,EAAE,EAAE,YAAY,EAAE,cAAc,EAAE,eAAe,EAAE,YAEvD,QAAQ,GACgB,CAC5B,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,GAAG,EAAE;IAC9B,MAAM,OAAO,GAAG,UAAU,CAAC,eAAe,CAAC,CAAC;IAC5C,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAAC;IACtE,CAAC;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.d.ts
new file mode 100644
index 0000000..db9c1b8
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.d.ts
@@ -0,0 +1,33 @@
+/**
+ * Handlers for customizing embed behavior in different environments.
+ * Allows consuming applications (VS Code, web, mobile) to provide
+ * environment-specific implementations for embed interactions.
+ */
+export interface EmbedHandlers {
+    /**
+     * Called when a YouTube embed is clicked.
+     * If not provided, falls back to default iframe embed.
+     *
+     * @param videoID - YouTube video ID
+     */
+    onYouTubeClick?: (videoID: string) => void;
+}
+/**
+ * Context for providing environment-specific embed handlers.
+ * Use this to customize how embeds behave in different environments.
+ *
+ * @example
+ * ```tsx
+ * // In VS Code extension
+ * <EmbedHandlersContext.Provider value={{ onYouTubeClick: handleYouTubeClick }}>
+ *   <LexicalComposer>...</LexicalComposer>
+ * </EmbedHandlersContext.Provider>
+ * ```
+ */
+export declare const EmbedHandlersContext: import("react").Context<EmbedHandlers>;
+/**
+ * Hook to access embed handlers from context.
+ *
+ * @returns Current embed handlers
+ */
+export declare function useEmbedHandlers(): EmbedHandlers;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.js b/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.js
new file mode 100644
index 0000000..1906dd3
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.js
@@ -0,0 +1,33 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/*
+ * Copyright (c) 2021-2025 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { createContext, useContext } from 'react';
+/**
+ * Context for providing environment-specific embed handlers.
+ * Use this to customize how embeds behave in different environments.
+ *
+ * @example
+ * ```tsx
+ * // In VS Code extension
+ * <EmbedHandlersContext.Provider value={{ onYouTubeClick: handleYouTubeClick }}>
+ *   <LexicalComposer>...</LexicalComposer>
+ * </EmbedHandlersContext.Provider>
+ * ```
+ */
+export const EmbedHandlersContext = createContext({});
+/**
+ * Hook to access embed handlers from context.
+ *
+ * @returns Current embed handlers
+ */
+export function useEmbedHandlers() {
+    return useContext(EmbedHandlersContext);
+}
+//# sourceMappingURL=EmbedHandlersContext.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.js.map
new file mode 100644
index 0000000..7d2452f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/EmbedHandlersContext.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"EmbedHandlersContext.js","sourceRoot":"","sources":["../../src/context/EmbedHandlersContext.tsx"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAiBlD;;;;;;;;;;;GAWG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAAG,aAAa,CAAgB,EAAE,CAAC,CAAC;AAErE;;;;GAIG;AACH,MAAM,UAAU,gBAAgB;IAC9B,OAAO,UAAU,CAAC,oBAAoB,CAAC,CAAC;AAC1C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.d.ts
index d691a2a..b6f546d 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.d.ts
@@ -1,3 +1,4 @@
+import { ServiceManager } from '@jupyterlab/services';
 /**
  * Configuration passed down to Lexical plugins
  */
@@ -5,7 +6,7 @@ export interface LexicalConfig {
     /** Unique identifier for this Lexical document */
     lexicalId: string;
     /** Service manager for kernel operations (optional) */
-    serviceManager?: any;
+    serviceManager?: ServiceManager.IManager;
 }
 /**
  * Hook to access Lexical configuration
@@ -25,7 +26,7 @@ export declare function useLexicalConfig(): LexicalConfig;
  */
 export interface LexicalConfigProviderProps {
     lexicalId: string;
-    serviceManager?: any;
+    serviceManager?: ServiceManager.IManager;
     children: React.ReactNode;
 }
 export declare function LexicalConfigProvider({ lexicalId, serviceManager, children, }: LexicalConfigProviderProps): import("react/jsx-runtime").JSX.Element;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js.map
index cacf3bd..43cf78c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js.map
@@ -1 +1 @@
-{"version":3,"file":"LexicalConfigContext.js","sourceRoot":"","sources":["../../src/context/LexicalConfigContext.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH;;;;;GAKG;AAEH,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAYlD;;GAEG;AACH,MAAM,oBAAoB,GAAG,aAAa,CACxC,SAAS,CACV,CAAC;AAEF;;;;GAIG;AACH,MAAM,UAAU,gBAAgB;IAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,oBAAoB,CAAC,CAAC;IAChD,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,MAAM,IAAI,KAAK,CACb,8DAA8D,CAC/D,CAAC;IACJ,CAAC;IACD,OAAO,MAAM,CAAC;AAChB,CAAC;AAkBD,MAAM,UAAU,qBAAqB,CAAC,EACpC,SAAS,EACT,cAAc,EACd,QAAQ,GACmB;IAC3B,OAAO,CACL,KAAC,oBAAoB,CAAC,QAAQ,IAAC,KAAK,EAAE,EAAE,SAAS,EAAE,cAAc,EAAE,YAChE,QAAQ,GACqB,CACjC,CAAC;AACJ,CAAC"}
\ No newline at end of file
+{"version":3,"file":"LexicalConfigContext.js","sourceRoot":"","sources":["../../src/context/LexicalConfigContext.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH;;;;;GAKG;AAEH,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAalD;;GAEG;AACH,MAAM,oBAAoB,GAAG,aAAa,CACxC,SAAS,CACV,CAAC;AAEF;;;;GAIG;AACH,MAAM,UAAU,gBAAgB;IAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,oBAAoB,CAAC,CAAC;IAChD,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,MAAM,IAAI,KAAK,CACb,8DAA8D,CAC/D,CAAC;IACJ,CAAC;IACD,OAAO,MAAM,CAAC;AAChB,CAAC;AAkBD,MAAM,UAAU,qBAAqB,CAAC,EACpC,SAAS,EACT,cAAc,EACd,QAAQ,GACmB;IAC3B,OAAO,CACL,KAAC,oBAAoB,CAAC,QAAQ,IAAC,KAAK,EAAE,EAAE,SAAS,EAAE,cAAc,EAAE,YAChE,QAAQ,GACqB,CACjC,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js b/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js
index 48ae1ff..78795c6 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js
@@ -1,8 +1,8 @@
 import { jsx as _jsx } from "react/jsx-runtime";
 import { createContext, useCallback, useContext, useMemo, useState, } from 'react';
-import { DEFAULT_SETTINGS, INITIAL_SETTINGS } from '../appSettings.js';
+import { DEFAULT_SETTINGS, INITIAL_SETTINGS } from '../appSettings';
 const Context = createContext({
-    setOption: (name, value) => {
+    setOption: (_name, _value) => {
         return;
     },
     settings: INITIAL_SETTINGS,
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js.map
index 07ef220..2bd55bf 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js.map
@@ -1 +1 @@
-{"version":3,"file":"SettingsContext.js","sourceRoot":"","sources":["../../src/context/SettingsContext.tsx"],"names":[],"mappings":";AAkBA,OAAO,EACL,aAAa,EAEb,WAAW,EACX,UAAU,EACV,OAAO,EACP,QAAQ,GACT,MAAM,OAAO,CAAC;AAEf,OAAO,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,MAAM,gBAAgB,CAAC;AAOpE,MAAM,OAAO,GAAwC,aAAa,CAAC;IACjE,SAAS,EAAE,CAAC,IAAiB,EAAE,KAAc,EAAE,EAAE;QAC/C,OAAO;IACT,CAAC;IACD,QAAQ,EAAE,gBAAgB;CAC3B,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,EAC9B,QAAQ,GAGT,EAAe,EAAE;IAChB,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,gBAAgB,CAAC,CAAC;IAE3D,MAAM,SAAS,GAAG,WAAW,CAAC,CAAC,OAAoB,EAAE,KAAc,EAAE,EAAE;QACrE,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACtB,GAAG,OAAO;YACV,CAAC,OAAO,CAAC,EAAE,KAAK;SACjB,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,YAAY,GAAG,OAAO,CAAC,GAAG,EAAE;QAChC,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC;IACjC,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;IAE1B,OAAO,KAAC,OAAO,CAAC,QAAQ,IAAC,KAAK,EAAE,YAAY,YAAG,QAAQ,GAAoB,CAAC;AAC9E,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,GAAyB,EAAE;IACpD,OAAO,UAAU,CAAC,OAAO,CAAC,CAAC;AAC7B,CAAC,CAAC;AAEF,SAAS,WAAW,CAAC,KAAkB,EAAE,KAAqB;IAC5D,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC1C,MAAM,MAAM,GAAG,IAAI,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC/C,IAAI,KAAK,KAAK,gBAAgB,CAAC,KAAK,CAAC,EAAE,CAAC;QACtC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;SAAM,CAAC;QACN,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACvB,CAAC;IACD,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;IAC/B,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;AACrD,CAAC"}
\ No newline at end of file
+{"version":3,"file":"SettingsContext.js","sourceRoot":"","sources":["../../src/context/SettingsContext.tsx"],"names":[],"mappings":";AAkBA,OAAO,EACL,aAAa,EAEb,WAAW,EACX,UAAU,EACV,OAAO,EACP,QAAQ,GACT,MAAM,OAAO,CAAC;AAEf,OAAO,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,MAAM,gBAAgB,CAAC;AAOpE,MAAM,OAAO,GAAwC,aAAa,CAAC;IACjE,SAAS,EAAE,CAAC,KAAkB,EAAE,MAAe,EAAE,EAAE;QACjD,OAAO;IACT,CAAC;IACD,QAAQ,EAAE,gBAAgB;CAC3B,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,EAC9B,QAAQ,GAGT,EAAe,EAAE;IAChB,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,gBAAgB,CAAC,CAAC;IAE3D,MAAM,SAAS,GAAG,WAAW,CAAC,CAAC,OAAoB,EAAE,KAAc,EAAE,EAAE;QACrE,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACtB,GAAG,OAAO;YACV,CAAC,OAAO,CAAC,EAAE,KAAK;SACjB,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,YAAY,GAAG,OAAO,CAAC,GAAG,EAAE;QAChC,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC;IACjC,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;IAE1B,OAAO,KAAC,OAAO,CAAC,QAAQ,IAAC,KAAK,EAAE,YAAY,YAAG,QAAQ,GAAoB,CAAC;AAC9E,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,GAAyB,EAAE;IACpD,OAAO,UAAU,CAAC,OAAO,CAAC,CAAC;AAC7B,CAAC,CAAC;AAEF,SAAS,WAAW,CAAC,KAAkB,EAAE,KAAqB;IAC5D,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC1C,MAAM,MAAM,GAAG,IAAI,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC/C,IAAI,KAAK,KAAK,gBAAgB,CAAC,KAAK,CAAC,EAAE,CAAC;QACtC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;SAAM,CAAC;QACN,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACvB,CAAC;IACD,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;IAC/B,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;AACrD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.d.ts
new file mode 100644
index 0000000..f183e8d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.d.ts
@@ -0,0 +1,24 @@
+export type ThemeType = 'light' | 'dark';
+export interface ThemeContextValue {
+    theme: ThemeType;
+}
+/**
+ * Context for providing theme to lexical components.
+ * Parent application should provide this context.
+ */
+export declare const ThemeContext: import("react").Context<ThemeContextValue | undefined>;
+/**
+ * Hook to access the current theme from parent application.
+ * Returns "light" as default if no theme is provided.
+ *
+ * @returns The current theme ("light" or "dark")
+ *
+ * @example
+ * ```tsx
+ * function MyComponent() {
+ *   const { theme } = useTheme();
+ *   return <Excalidraw theme={theme} />;
+ * }
+ * ```
+ */
+export declare function useTheme(): ThemeContextValue;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.js b/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.js
new file mode 100644
index 0000000..6ebea43
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.js
@@ -0,0 +1,42 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/*
+ * Copyright (c) 2021-2025 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Theme context for accessing application theme in lexical components.
+ * This allows components to access the theme provided by the parent application.
+ *
+ * @module context/ThemeContext
+ */
+import { createContext, useContext } from 'react';
+/**
+ * Context for providing theme to lexical components.
+ * Parent application should provide this context.
+ */
+export const ThemeContext = createContext(undefined);
+/**
+ * Hook to access the current theme from parent application.
+ * Returns "light" as default if no theme is provided.
+ *
+ * @returns The current theme ("light" or "dark")
+ *
+ * @example
+ * ```tsx
+ * function MyComponent() {
+ *   const { theme } = useTheme();
+ *   return <Excalidraw theme={theme} />;
+ * }
+ * ```
+ */
+export function useTheme() {
+    const context = useContext(ThemeContext);
+    // Return default theme if not in a provider (e.g., standalone usage)
+    return context ?? { theme: 'light' };
+}
+//# sourceMappingURL=ThemeContext.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.js.map
new file mode 100644
index 0000000..86f1a2f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/ThemeContext.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ThemeContext.js","sourceRoot":"","sources":["../../src/context/ThemeContext.tsx"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH;;;;;GAKG;AAEH,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAQlD;;;GAGG;AACH,MAAM,CAAC,MAAM,YAAY,GAAG,aAAa,CACvC,SAAS,CACV,CAAC;AAEF;;;;;;;;;;;;;GAaG;AACH,MAAM,UAAU,QAAQ;IACtB,MAAM,OAAO,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC;IACzC,qEAAqE;IACrE,OAAO,OAAO,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC;AACvC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/context/index.d.ts
index 2450faa..8b99cb2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/index.d.ts
@@ -1,4 +1,7 @@
+export * from './CommentsContext';
+export * from './EmbedHandlersContext';
 export * from './LexicalConfigContext';
 export * from './LexicalContext';
 export * from './SettingsContext';
+export * from './ThemeContext';
 export * from './ToolbarContext';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/index.js b/node_modules/@datalayer/jupyter-lexical/lib/context/index.js
index f3c549f..0e820c9 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/index.js
@@ -3,8 +3,11 @@
  *
  * MIT License
  */
-export * from './LexicalConfigContext.js';
-export * from './LexicalContext.js';
-export * from './SettingsContext.js';
-export * from './ToolbarContext.js';
+export * from './CommentsContext';
+export * from './EmbedHandlersContext';
+export * from './LexicalConfigContext';
+export * from './LexicalContext';
+export * from './SettingsContext';
+export * from './ThemeContext';
+export * from './ToolbarContext';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/index.js.map
index 53242ab..99e481c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/context/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,wBAAwB,CAAC;AACvC,cAAc,kBAAkB,CAAC;AACjC,cAAc,mBAAmB,CAAC;AAClC,cAAc,kBAAkB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/context/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,mBAAmB,CAAC;AAClC,cAAc,wBAAwB,CAAC;AACvC,cAAc,wBAAwB,CAAC;AACvC,cAAc,kBAAkB,CAAC;AACjC,cAAc,mBAAmB,CAAC;AAClC,cAAc,gBAAgB,CAAC;AAC/B,cAAc,kBAAkB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/LexicalToNbformat.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/LexicalToNbformat.js
index ab1ab35..a3d4aee 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/LexicalToNbformat.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/LexicalToNbformat.js
@@ -4,12 +4,12 @@
  * MIT License
  */
 import { $isElementNode, $isTextNode, $isParagraphNode, } from 'lexical';
-import { $isEquationNode } from './../nodes/EquationNode.js';
-import { $isYouTubeNode } from './../nodes/YouTubeNode.js';
-import { $isJupyterInputNode } from './../nodes/JupyterInputNode.js';
-import { exportTopLevelElements } from './markdown/MarkdownExport.js';
-import { transformersByType } from './markdown/utils.js';
-import { TRANSFORMERS } from './markdown/index.js';
+import { $isEquationNode } from './../nodes/EquationNode';
+import { $isYouTubeNode } from './../nodes/YouTubeNode';
+import { $isJupyterInputNode } from './../nodes/JupyterInputNode';
+import { exportTopLevelElements } from './markdown/MarkdownExport';
+import { transformersByType } from './markdown/utils';
+import { TRANSFORMERS } from './markdown/index';
 export const lexicalToNbformat = (nodes) => {
     const nb = {
         nbformat: 4,
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/NbformatToLexical.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/NbformatToLexical.js
index a4105d1..37c63f7 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/NbformatToLexical.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/NbformatToLexical.js
@@ -4,9 +4,9 @@
  * MIT License
  */
 import { INSERT_PARAGRAPH_COMMAND } from 'lexical';
-// import { INSERT_JUPYTER_CELL_COMMAND } from '../plugins/JupyterCellPlugin.js';
-import { INSERT_JUPYTER_INPUT_OUTPUT_COMMAND } from '../plugins/JupyterInputOutputPlugin.js';
-import { $convertFromMarkdownString, TRANSFORMERS } from './markdown/index.js';
+// import { INSERT_JUPYTER_CELL_COMMAND } from '../plugins/JupyterCellPlugin';
+import { INSERT_JUPYTER_INPUT_OUTPUT_COMMAND } from '../plugins/JupyterInputOutputPlugin';
+import { $convertFromMarkdownString, TRANSFORMERS } from './markdown';
 export const nbformatToLexical = (notebook, editor) => {
     editor.update(() => {
         notebook.cells.map((cell, index) => {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/index.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/index.js
index b46574f..feac17a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/index.js
@@ -3,6 +3,6 @@
  *
  * MIT License
  */
-export * from './LexicalToNbformat.js';
-export * from './NbformatToLexical.js';
+export * from './LexicalToNbformat';
+export * from './NbformatToLexical';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownExport.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownExport.js
index bdbed78..c53a9e6 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownExport.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownExport.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { $getRoot, $isElementNode, $isLineBreakNode, $isTextNode, } from 'lexical';
-import { transformersByType } from './utils.js';
+import { transformersByType } from './utils';
 export function createMarkdownExport(transformers) {
     const byType = transformersByType(transformers);
     // Export only uses text formats that are responsible for single format
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownImport.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownImport.js
index 8ffdeee..0913986 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownImport.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownImport.js
@@ -3,12 +3,12 @@
  *
  * MIT License
  */
-import { $createJupyterInputNode, } from './../../nodes/JupyterInputNode.js';
+import { $createJupyterInputNode, } from './../../nodes/JupyterInputNode';
 import { $isListItemNode, $isListNode } from '@lexical/list';
 import { $isQuoteNode } from '@lexical/rich-text';
 import { $findMatchingParent } from '@lexical/utils';
 import { $createLineBreakNode, $createParagraphNode, $createTextNode, $getRoot, $isParagraphNode, $isTextNode, } from 'lexical';
-import { PUNCTUATION_OR_SPACE, transformersByType } from './utils.js';
+import { PUNCTUATION_OR_SPACE, transformersByType } from './utils';
 const MARKDOWN_EMPTY_LINE_REG_EXP = /^\s{0,3}$/;
 const CODE_BLOCK_REG_EXP = /^```(\w{1,10})?\s?$/;
 export function createMarkdownImport(transformers) {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownShortcuts.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownShortcuts.js
index 7058760..5a9f895 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownShortcuts.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownShortcuts.js
@@ -3,11 +3,11 @@
  *
  * MIT License
  */
-import { $isJupyterInputNode } from './../../nodes/JupyterInputNode.js';
+import { $isJupyterInputNode } from './../../nodes/JupyterInputNode';
 import { $createRangeSelection, $getSelection, $isLineBreakNode, $isRangeSelection, $isRootNode, $isTextNode, $setSelection, } from 'lexical';
-import invariant from '../../utils/invariant.js';
+import invariant from '../../utils/invariant';
 import { TRANSFORMERS } from '.';
-import { indexBy, PUNCTUATION_OR_SPACE, transformersByType } from './utils.js';
+import { indexBy, PUNCTUATION_OR_SPACE, transformersByType } from './utils';
 function runElementTransformers(parentNode, anchorNode, anchorOffset, elementTransformers) {
     const grandParentNode = parentNode.getParent();
     if (!$isRootNode(grandParentNode) ||
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownTransformers.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownTransformers.js
index c5252a9..a96537d 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownTransformers.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/MarkdownTransformers.js
@@ -3,7 +3,7 @@
  *
  * MIT License
  */
-import { $createJupyterInputNode, $isJupyterInputNode, JupyterInputNode, } from './../../nodes/JupyterInputNode.js';
+import { $createJupyterInputNode, $isJupyterInputNode, JupyterInputNode, } from './../../nodes/JupyterInputNode';
 import { $createLinkNode, $isLinkNode, LinkNode } from '@lexical/link';
 import { $createListItemNode, $createListNode, $isListItemNode, $isListNode, ListItemNode, ListNode, } from '@lexical/list';
 import { $createHeadingNode, $createQuoteNode, $isHeadingNode, $isQuoteNode, HeadingNode, QuoteNode, } from '@lexical/rich-text';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/convertToMarkdown.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/convertToMarkdown.js
index d4eb32e..b93bcca 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/convertToMarkdown.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/convertToMarkdown.js
@@ -5,7 +5,7 @@
  */
 import { $isLinkNode } from '@lexical/link';
 import { $getRoot, $isElementNode, $isLineBreakNode, $isTextNode, } from 'lexical';
-import { getAllMarkdownCriteriaForParagraphs, getAllMarkdownCriteriaForTextNodes, } from './utils.js';
+import { getAllMarkdownCriteriaForParagraphs, getAllMarkdownCriteriaForTextNodes, } from './utils';
 export function $convertToMarkdownString() {
     const output = [];
     const children = $getRoot().getChildren();
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/index.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/index.js
index ea1d951..84caaa4 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/index.js
@@ -3,10 +3,10 @@
  *
  * MIT License
  */
-import { createMarkdownExport } from './MarkdownExport.js';
-import { createMarkdownImport } from './MarkdownImport.js';
-import { registerMarkdownShortcuts } from './MarkdownShortcuts.js';
-import { BOLD_ITALIC_STAR, BOLD_ITALIC_UNDERSCORE, BOLD_STAR, BOLD_UNDERSCORE, CHECK_LIST, CODE, HEADING, INLINE_CODE, ITALIC_STAR, ITALIC_UNDERSCORE, LINK, ORDERED_LIST, QUOTE, STRIKETHROUGH, UNORDERED_LIST, } from './MarkdownTransformers.js';
+import { createMarkdownExport } from './MarkdownExport';
+import { createMarkdownImport } from './MarkdownImport';
+import { registerMarkdownShortcuts } from './MarkdownShortcuts';
+import { BOLD_ITALIC_STAR, BOLD_ITALIC_UNDERSCORE, BOLD_STAR, BOLD_UNDERSCORE, CHECK_LIST, CODE, HEADING, INLINE_CODE, ITALIC_STAR, ITALIC_UNDERSCORE, LINK, ORDERED_LIST, QUOTE, STRIKETHROUGH, UNORDERED_LIST, } from './MarkdownTransformers';
 const ELEMENT_TRANSFORMERS = [
     HEADING,
     QUOTE,
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/utils.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/utils.js
index 398efc4..cfbf85f 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/utils.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/utils.js
@@ -3,7 +3,7 @@
  *
  * MIT License
  */
-import { $isJupyterInputNode } from './../../nodes/JupyterInputNode.js';
+import { $isJupyterInputNode } from './../../nodes/JupyterInputNode';
 import { $isListItemNode, $isListNode } from '@lexical/list';
 import { $isHeadingNode, $isQuoteNode } from '@lexical/rich-text';
 const autoFormatBase = {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/transformers/MarkdownTransformers.js b/node_modules/@datalayer/jupyter-lexical/lib/convert/transformers/MarkdownTransformers.js
index 7eef134..f1ab4dd 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/transformers/MarkdownTransformers.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/transformers/MarkdownTransformers.js
@@ -3,12 +3,12 @@
  *
  * MIT License
  */
-import { CHECK_LIST, ELEMENT_TRANSFORMERS, TEXT_FORMAT_TRANSFORMERS, TEXT_MATCH_TRANSFORMERS, } from './../markdown/index.js';
+import { CHECK_LIST, ELEMENT_TRANSFORMERS, TEXT_FORMAT_TRANSFORMERS, TEXT_MATCH_TRANSFORMERS, } from './../markdown';
 import { $createHorizontalRuleNode, $isHorizontalRuleNode, HorizontalRuleNode, } from '@lexical/react/LexicalHorizontalRuleNode';
 import { $createTableCellNode, $createTableNode, $createTableRowNode, $isTableNode, $isTableRowNode, TableCellHeaderStates, TableCellNode, TableNode, TableRowNode, } from '@lexical/table';
 import { $createParagraphNode, $createTextNode, $isElementNode, $isParagraphNode, $isTextNode, } from 'lexical';
-import { $createEquationNode, $isEquationNode, EquationNode, } from '../../nodes/EquationNode.js';
-import { $createImageNode, $isImageNode, ImageNode, } from '../../nodes/ImageNode.js';
+import { $createEquationNode, $isEquationNode, EquationNode, } from '../../nodes/EquationNode';
+import { $createImageNode, $isImageNode, ImageNode, } from '../../nodes/ImageNode';
 export const HR = {
     dependencies: [HorizontalRuleNode],
     export: (node) => {
@@ -24,7 +24,8 @@ export const HR = {
         else {
             parentNode.insertBefore(line);
         }
-        line.selectNext();
+        // Note: selectNext() is not available on HorizontalRuleNode
+        // line.selectNext();
     },
     type: 'element',
 };
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/transformers/MarkdownTransformers.js.map b/node_modules/@datalayer/jupyter-lexical/lib/convert/transformers/MarkdownTransformers.js.map
index 8ec884c..442c87e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/transformers/MarkdownTransformers.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/transformers/MarkdownTransformers.js.map
@@ -1 +1 @@
-{"version":3,"file":"MarkdownTransformers.js","sourceRoot":"","sources":["../../../src/convert/transformers/MarkdownTransformers.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"MarkdownTransformers.js","sourceRoot":"","sources":["../../../src/convert/transformers/MarkdownTransformers.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js
index 35bc908..8c816b0 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js
@@ -18,6 +18,7 @@ import { ListPlugin } from '@lexical/react/LexicalListPlugin';
 import { OnChangePlugin } from '@lexical/react/LexicalOnChangePlugin';
 import { CheckListPlugin } from '@lexical/react/LexicalCheckListPlugin';
 import { HorizontalRuleNode } from '@lexical/react/LexicalHorizontalRuleNode';
+import { HorizontalRulePlugin as LexicalHorizontalRulePlugin } from '@lexical/react/LexicalHorizontalRulePlugin';
 import { LexicalErrorBoundary } from '@lexical/react/LexicalErrorBoundary';
 import { HeadingNode, QuoteNode } from '@lexical/rich-text';
 import { TableCellNode, TableNode, TableRowNode } from '@lexical/table';
@@ -25,17 +26,18 @@ import { ListItemNode, ListNode } from '@lexical/list';
 import { HashtagNode } from '@lexical/hashtag';
 import { MarkNode } from '@lexical/mark';
 import { AutoLinkNode, LinkNode } from '@lexical/link';
-import { CodeNode } from '@lexical/code';
+import { CodeNode, CodeHighlightNode } from '@lexical/code';
 import { useJupyter } from '@datalayer/jupyter-react';
-import { CommentThreadNode, CounterNode, EquationNode, ImageNode, JupyterInputHighlightNode, JupyterInputNode, JupyterOutputNode, YouTubeNode, } from '../nodes/index.js';
-import { AutoEmbedPlugin, AutoLinkPlugin, CodeActionMenuPlugin, CommentPlugin, ComponentPickerMenuPlugin, DraggableBlockPlugin, EquationsPlugin, FloatingTextFormatToolbarPlugin, HorizontalRulePlugin, ImagesPlugin, JupyterInputOutputPlugin, ListMaxIndentLevelPlugin, MarkdownPlugin, NbformatContentPlugin, TableOfContentsPlugin, YouTubePlugin, } from './../index.js';
-import { commentTheme } from '../themes/index.js';
-import { useLexical } from '../context/index.js';
-import { TreeViewPlugin } from '../plugins/index.js';
-import { ToolbarPlugin } from '../plugins/ToolbarPlugin/index.js';
-import { ToolbarContext } from '../context/ToolbarContext.js';
-import { LexicalConfigProvider } from '../context/LexicalConfigContext.js';
-import { LexicalStatePlugin } from '../plugins/LexicalStatePlugin.js';
+import { CommentThreadNode, CounterNode, EquationNode, ExcalidrawNode, ImageNode, JupyterInputHighlightNode, JupyterInputNode, JupyterOutputNode, YouTubeNode, } from '../nodes';
+import { AutoEmbedPlugin, AutoLinkPlugin, CodeActionMenuPlugin, CodeBlockHighlightPlugin, CollapsibleContainerNode, CollapsibleContentNode, CollapsiblePlugin, CollapsibleTitleNode, CommentPlugin, ComponentPickerMenuPlugin, DraggableBlockPlugin, EquationsPlugin, ExcalidrawPlugin, FloatingLinkEditorPlugin, FloatingTextFormatToolbarPlugin, ImagesPlugin, JupyterInputOutputPlugin, ListMaxIndentLevelPlugin, MarkdownPlugin, NbformatContentPlugin, TableActionMenuPlugin, TableCellResizerPlugin, TableHoverActionsV2Plugin, TableOfContentsPlugin, YouTubePlugin, } from './..';
+import { commentTheme } from '../themes';
+import { useLexical } from '../context';
+import { CommentsProvider } from '../context/CommentsContext';
+import { TreeViewPlugin } from '../plugins';
+import { ToolbarPlugin } from '../plugins/ToolbarPlugin';
+import { ToolbarContext } from '../context/ToolbarContext';
+import { LexicalConfigProvider } from '../context/LexicalConfigContext';
+import { LexicalStatePlugin } from '../plugins/LexicalStatePlugin';
 function Placeholder() {
     return _jsx("div", { className: "editor-placeholder", children: "Code and analyse data." });
 }
@@ -48,9 +50,14 @@ const initialConfig = {
     nodes: [
         AutoLinkNode,
         CodeNode,
+        CodeHighlightNode,
+        CollapsibleContainerNode,
+        CollapsibleContentNode,
+        CollapsibleTitleNode,
         CommentThreadNode,
         CounterNode,
         EquationNode,
+        ExcalidrawNode,
         HashtagNode,
         HeadingNode,
         HorizontalRuleNode,
@@ -85,8 +92,12 @@ export function EditorContainer(props) {
     });
     const [editor] = useLexicalComposerContext();
     const [activeEditor, setActiveEditor] = useState(editor);
-    const [_, setIsLinkEditMode] = useState(false);
+    const [isLinkEditMode, setIsLinkEditMode] = useState(false);
     const [floatingAnchorElem, setFloatingAnchorElem] = useState(null);
+    // Debug: Log when isLinkEditMode changes
+    useEffect(() => {
+        console.log('[Editor] isLinkEditMode changed to:', isLinkEditMode);
+    }, [isLinkEditMode]);
     const onRef = (_floatingAnchorElem) => {
         if (_floatingAnchorElem !== null) {
             setFloatingAnchorElem(_floatingAnchorElem);
@@ -95,12 +106,12 @@ export function EditorContainer(props) {
     function onChange(_editorState) {
         //    console.log('---', _editorState.toJSON());
     }
-    return (_jsxs("div", { className: "editor-container", children: [_jsx(ToolbarPlugin, { editor: editor, activeEditor: activeEditor, setActiveEditor: setActiveEditor, setIsLinkEditMode: setIsLinkEditMode }), _jsxs("div", { className: "editor-inner", children: [_jsx(RichTextPlugin, { contentEditable: _jsx("div", { className: "editor-scroller", children: _jsx("div", { className: "editor", ref: onRef, children: _jsx(ContentEditable, { className: "editor-input" }) }) }), placeholder: _jsx(Placeholder, {}), ErrorBoundary: LexicalErrorBoundary }), _jsx(OnChangePlugin, { onChange: onChange }), _jsx(HistoryPlugin, {}), _jsx(TreeViewPlugin, {}), _jsx(AutoFocusPlugin, {}), id && _jsx(LexicalStatePlugin, {}), _jsx(TablePlugin, {}), _jsx(ListPlugin, {}), _jsx(CheckListPlugin, {}), _jsx(LinkPlugin, {}), _jsx(AutoLinkPlugin, {}), _jsx(ListMaxIndentLevelPlugin, { maxDepth: 7 }), _jsx(MarkdownPlugin, {}), _jsx(JupyterInputOutputPlugin, { kernel: defaultKernel, onSessionConnection: onSessionConnection }), _jsx(ComponentPickerMenuPlugin, { kernel: defaultKernel }), _jsx(EquationsPlugin, {}), _jsx(ImagesPlugin, {}), _jsx(HashtagPlugin, {}), _jsx(HorizontalRulePlugin, {}), _jsx(YouTubePlugin, {}), _jsx(NbformatContentPlugin, { notebook: notebook }), _jsx(CodeActionMenuPlugin, {}), _jsx(AutoEmbedPlugin, {}), _jsx(EditorContextPlugin, {}), _jsx(TableOfContentsPlugin, {}), _jsx(CommentPlugin, { providerFactory: undefined }), floatingAnchorElem && (_jsxs(_Fragment, { children: [_jsx(DraggableBlockPlugin, { anchorElem: floatingAnchorElem }), _jsx(FloatingTextFormatToolbarPlugin, { anchorElem: floatingAnchorElem })] }))] })] }));
+    return (_jsxs("div", { className: "editor-container", children: [_jsx(ToolbarPlugin, { editor: editor, activeEditor: activeEditor, setActiveEditor: setActiveEditor, setIsLinkEditMode: setIsLinkEditMode }), _jsxs("div", { className: "editor-inner", children: [_jsx(RichTextPlugin, { contentEditable: _jsx("div", { className: "editor-scroller", children: _jsx("div", { className: "editor", ref: onRef, children: _jsx(ContentEditable, { className: "editor-input" }) }) }), placeholder: _jsx(Placeholder, {}), ErrorBoundary: LexicalErrorBoundary }), _jsx(OnChangePlugin, { onChange: onChange }), _jsx(HistoryPlugin, {}), _jsx(TreeViewPlugin, {}), _jsx(AutoFocusPlugin, {}), id && _jsx(LexicalStatePlugin, {}), _jsx(CollapsiblePlugin, {}), _jsx(TablePlugin, {}), _jsx(TableCellResizerPlugin, {}), _jsx(TableActionMenuPlugin, {}), _jsx(TableHoverActionsV2Plugin, {}), _jsx(ListPlugin, {}), _jsx(CheckListPlugin, {}), _jsx(LinkPlugin, {}), _jsx(AutoLinkPlugin, {}), _jsx(ListMaxIndentLevelPlugin, { maxDepth: 7 }), _jsx(MarkdownPlugin, {}), _jsx(JupyterInputOutputPlugin, { kernel: defaultKernel, onSessionConnection: onSessionConnection }), _jsx(ComponentPickerMenuPlugin, { kernel: defaultKernel }), _jsx(EquationsPlugin, {}), _jsx(ExcalidrawPlugin, {}), _jsx(ImagesPlugin, {}), _jsx(HashtagPlugin, {}), _jsx(LexicalHorizontalRulePlugin, {}), _jsx(YouTubePlugin, {}), _jsx(NbformatContentPlugin, { notebook: notebook }), _jsx(CodeActionMenuPlugin, {}), _jsx(CodeBlockHighlightPlugin, {}), _jsx(AutoEmbedPlugin, {}), _jsx(EditorContextPlugin, {}), _jsx(TableOfContentsPlugin, {}), _jsx(CommentPlugin, { providerFactory: undefined }), floatingAnchorElem && (_jsxs(_Fragment, { children: [_jsx(DraggableBlockPlugin, { anchorElem: floatingAnchorElem }), _jsx(FloatingLinkEditorPlugin, { anchorElem: floatingAnchorElem, isLinkEditMode: isLinkEditMode, setIsLinkEditMode: setIsLinkEditMode }), _jsx(FloatingTextFormatToolbarPlugin, { anchorElem: floatingAnchorElem, setIsLinkEditMode: setIsLinkEditMode })] }))] })] }));
 }
 export function Editor(props) {
     const { id, serviceManager } = props;
     // Wrap with LexicalConfigProvider if id is provided (for tool operations)
-    const content = (_jsx(LexicalComposer, { initialConfig: initialConfig, children: _jsx(ToolbarContext, { children: _jsx("div", { className: "editor-shell", children: _jsx(EditorContainer, { ...props }) }) }) }));
+    const content = (_jsx(LexicalComposer, { initialConfig: initialConfig, children: _jsx(CommentsProvider, { children: _jsx(ToolbarContext, { children: _jsx("div", { className: "editor-shell", children: _jsx(EditorContainer, { ...props }) }) }) }) }));
     // Only wrap with config provider if id is provided
     return id ? (_jsx(LexicalConfigProvider, { lexicalId: id, serviceManager: serviceManager, children: content })) : (content);
 }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js.map b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js.map
index bfb4b61..2806c13 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js.map
@@ -1 +1 @@
-{"version":3,"file":"Editor.js","sourceRoot":"","sources":["../../src/editor/Editor.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Editor.js","sourceRoot":"","sources":["../../src/editor/Editor.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/editor/index.js b/node_modules/@datalayer/jupyter-lexical/lib/editor/index.js
index 5c39f02..8626cd7 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/editor/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/editor/index.js
@@ -3,5 +3,5 @@
  *
  * MIT License
  */
-export * from './Editor.js';
+export * from './Editor';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppNbformat.js b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppNbformat.js
index 72dcf30..64851ea 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppNbformat.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppNbformat.js
@@ -12,8 +12,8 @@ import { Box } from '@datalayer/primer-addons';
 import { UnderlineNav, Button } from '@primer/react';
 import { ThreeBarsIcon } from '@primer/octicons-react';
 import { JSONTree } from 'react-json-tree';
-import { lexicalToNbformat } from './../index.js';
-import { useLexical, LexicalProvider, Editor } from './../index.js';
+import { lexicalToNbformat } from './..';
+import { useLexical, LexicalProvider, Editor } from './..';
 import INITIAL_LEXICAL_MODEL from './content/Example.lexical.json';
 import INITIAL_NBFORMAT_MODEL from './content/Example.ipynb.json';
 const NOTEBOOK_UID = 'notebook-uid-lexical';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js
index 4e2bbdc..082f43e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js
@@ -4,25 +4,34 @@ import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-run
  *
  * MIT License
  */
-import { useState } from 'react';
+import { useState, useEffect } from 'react';
 import { Button, ButtonGroup } from '@primer/react';
 import { Box } from '@datalayer/primer-addons';
 import { ThreeBarsIcon } from '@primer/octicons-react';
 import { JupyterReactTheme } from '@datalayer/jupyter-react';
-import { useLexical, Editor, LexicalProvider } from '../index.js';
+import { useLexical, Editor, LexicalProvider, nbformatToLexical } from '..';
 import LEXICAL_MODEL from './content/Example.lexical.json';
 import NBFORMAT_MODEL from './content/Example.ipynb.json';
 const LexicalEditor = () => {
     const { editor } = useLexical();
-    return (_jsx(Box, { className: "center", children: _jsxs(Box, { children: [_jsx(Editor, { notebook: NBFORMAT_MODEL, onSessionConnection: session => {
+    // Load the Lexical model on mount
+    useEffect(() => {
+        if (editor) {
+            // Defer setEditorState to avoid flushSync warning during React render
+            queueMicrotask(() => {
+                const editorState = editor.parseEditorState(LEXICAL_MODEL);
+                editor.setEditorState(editorState);
+            });
+        }
+    }, [editor]);
+    return (_jsx(Box, { className: "center", children: _jsxs(Box, { children: [_jsx(Editor, { onSessionConnection: session => {
                         console.log('Session changed:', session);
                     } }), _jsx(Button, { onClick: (e) => {
                         e.preventDefault();
                         if (editor) {
-                            const editorState = editor.parseEditorState(LEXICAL_MODEL);
-                            editor.setEditorState(editorState);
+                            nbformatToLexical(NBFORMAT_MODEL, editor);
                         }
-                    }, children: "Load Lexical Model" })] }) }));
+                    }, children: "Load Notebook Model" })] }) }));
 };
 export const AppSimple = () => {
     // Get initial state from URL or localStorage
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js.map b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js.map
index da3d317..7a8f415 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js.map
@@ -1 +1 @@
-{"version":3,"file":"AppSimple.js","sourceRoot":"","sources":["../../src/examples/AppSimple.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"AppSimple.js","sourceRoot":"","sources":["../../src/examples/AppSimple.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/content/Example.lexical.json b/node_modules/@datalayer/jupyter-lexical/lib/examples/content/Example.lexical.json
index 5573802..f31a282 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/content/Example.lexical.json
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/content/Example.lexical.json
@@ -3,15 +3,1839 @@
         "children": [
             {
                 "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Lexical Editor - Complete Feature Showcase",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h1"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "This example demonstrates ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "all major features",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " of the Lexical editor: rich text formatting, tables, collapsibles, Excalidraw diagrams, equations, images, code blocks, lists, and Jupyter code execution. Use ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 8,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "/",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " to open the command menu.",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "1. Text Formatting",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Text can be ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "bold",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ", ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 2,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "italic",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ", ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 8,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "underlined",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ", ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 4,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "strikethrough",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ", and ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 16,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "inline code",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ". You can also visit ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "https://datalayer.io",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "link",
+                        "version": 1,
+                        "rel": "noreferrer",
+                        "target": "_blank",
+                        "title": null,
+                        "url": "https://datalayer.io"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " (auto-linked URL).",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Heading 3",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h3"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Headings from H1 to H6 are supported.",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "2. Lists",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Bulleted List:",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "First item",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 1
+                    },
+                    {
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "Second item",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 2
+                    },
+                    {
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "Third item",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 3
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "list",
+                "version": 1,
+                "listType": "bullet",
+                "start": 1,
+                "tag": "ul"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Numbered List:",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "Step one",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 1
+                    },
+                    {
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "Step two",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 2
+                    },
+                    {
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "Step three",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 3
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "list",
+                "version": 1,
+                "listType": "number",
+                "start": 1,
+                "tag": "ol"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Checklist:",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "checked": true,
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "Tables working",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 1
+                    },
+                    {
+                        "checked": true,
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "Collapsibles working",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 2
+                    },
+                    {
+                        "checked": true,
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "Excalidraw working",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 3
+                    },
+                    {
+                        "checked": false,
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 0,
+                                "mode": "normal",
+                                "style": "",
+                                "text": "More features to explore!",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "listitem",
+                        "version": 1,
+                        "value": 4
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "list",
+                "version": 1,
+                "listType": "check",
+                "start": 1,
+                "tag": "ul"
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "3. Quote Blocks",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "The best way to predict the future is to invent it.",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "quote",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 2,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " Alan Kay",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "right",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "4. Code Blocks",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Python example:",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "def greet(name):\n    return f\"Hello, {name}!\"\n\nprint(greet(\"World\"))",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "code",
+                "version": 1,
+                "language": "python"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "JavaScript example:",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "const greet = (name) => {\n  return `Hello, ${name}!`;\n};\n\nconsole.log(greet(\"World\"));",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "code",
+                "version": 1,
+                "language": "javascript"
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "5. Math Equations",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Inline equation: ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "type": "equation",
+                        "version": 1,
+                        "equation": "E = mc^2",
+                        "inline": true
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " is Einstein's famous equation.",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Block equation (quadratic formula):",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "type": "equation",
+                        "version": 1,
+                        "equation": "x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}",
+                        "inline": false
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "6. Tables",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Hover over table cells to add rows and columns:",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "children": [
+                            {
+                                "children": [
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 1,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "Name",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 1,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 1,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "Age",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 1,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 1,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "City",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 1,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    }
+                                ],
+                                "type": "tablerow",
+                                "version": 1
+                            },
+                            {
+                                "children": [
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "Alice",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "25",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "Boston",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    }
+                                ],
+                                "type": "tablerow",
+                                "version": 1
+                            },
+                            {
+                                "children": [
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "Bob",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "30",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "New York",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    }
+                                ],
+                                "type": "tablerow",
+                                "version": 1
+                            },
+                            {
+                                "children": [
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "Carol",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "28",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "children": [
+                                                    {
+                                                        "detail": 0,
+                                                        "format": 0,
+                                                        "mode": "normal",
+                                                        "style": "",
+                                                        "text": "Seattle",
+                                                        "type": "text",
+                                                        "version": 1
+                                                    }
+                                                ],
+                                                "direction": "ltr",
+                                                "format": "",
+                                                "indent": 0,
+                                                "type": "paragraph",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "backgroundColor": null,
+                                        "colSpan": 1,
+                                        "headerState": 0,
+                                        "rowSpan": 1,
+                                        "type": "tablecell",
+                                        "version": 1
+                                    }
+                                ],
+                                "type": "tablerow",
+                                "version": 1
+                            }
+                        ],
+                        "type": "table",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "7. Collapsible Sections",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "children": [
+                            {
+                                "detail": 0,
+                                "format": 1,
+                                "mode": "normal",
+                                "style": "",
+                                "text": " Click to expand: Advanced Features",
+                                "type": "text",
+                                "version": 1
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "collapsible-title",
+                        "version": 1
+                    },
+                    {
+                        "children": [
+                            {
+                                "children": [
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "Collapsible sections can contain any content including:",
+                                        "type": "text",
+                                        "version": 1
+                                    }
+                                ],
+                                "direction": "ltr",
+                                "format": "",
+                                "indent": 0,
+                                "type": "paragraph",
+                                "version": 1
+                            },
+                            {
+                                "children": [
+                                    {
+                                        "children": [
+                                            {
+                                                "detail": 0,
+                                                "format": 0,
+                                                "mode": "normal",
+                                                "style": "",
+                                                "text": "Tables",
+                                                "type": "text",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "direction": "ltr",
+                                        "format": "",
+                                        "indent": 0,
+                                        "type": "listitem",
+                                        "version": 1,
+                                        "value": 1
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "detail": 0,
+                                                "format": 0,
+                                                "mode": "normal",
+                                                "style": "",
+                                                "text": "Code blocks",
+                                                "type": "text",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "direction": "ltr",
+                                        "format": "",
+                                        "indent": 0,
+                                        "type": "listitem",
+                                        "version": 1,
+                                        "value": 2
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "detail": 0,
+                                                "format": 0,
+                                                "mode": "normal",
+                                                "style": "",
+                                                "text": "Images and diagrams",
+                                                "type": "text",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "direction": "ltr",
+                                        "format": "",
+                                        "indent": 0,
+                                        "type": "listitem",
+                                        "version": 1,
+                                        "value": 3
+                                    },
+                                    {
+                                        "children": [
+                                            {
+                                                "detail": 0,
+                                                "format": 0,
+                                                "mode": "normal",
+                                                "style": "",
+                                                "text": "Jupyter code cells",
+                                                "type": "text",
+                                                "version": 1
+                                            }
+                                        ],
+                                        "direction": "ltr",
+                                        "format": "",
+                                        "indent": 0,
+                                        "type": "listitem",
+                                        "version": 1,
+                                        "value": 4
+                                    }
+                                ],
+                                "direction": "ltr",
+                                "format": "",
+                                "indent": 0,
+                                "type": "list",
+                                "version": 1,
+                                "listType": "bullet",
+                                "start": 1,
+                                "tag": "ul"
+                            },
+                            {
+                                "children": [
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "Example Python code:",
+                                        "type": "text",
+                                        "version": 1
+                                    }
+                                ],
+                                "direction": "ltr",
+                                "format": "",
+                                "indent": 0,
+                                "type": "paragraph",
+                                "version": 1
+                            },
+                            {
+                                "children": [
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "import",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "keyword"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": " ",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "whitespace"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "time",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "name"
+                                    },
+                                    {
+                                        "type": "linebreak",
+                                        "version": 1
+                                    },
+                                    {
+                                        "type": "linebreak",
+                                        "version": 1
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "print",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "keyword"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "(",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "punctuation"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "'Hidden content!'",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "string"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": ")",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "punctuation"
+                                    },
+                                    {
+                                        "type": "linebreak",
+                                        "version": 1
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "time",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "name"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": ".",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "punctuation"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "sleep",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "name"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "(",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "punctuation"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "2",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "number"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": ")",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "punctuation"
+                                    },
+                                    {
+                                        "type": "linebreak",
+                                        "version": 1
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "print",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "keyword"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "(",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "punctuation"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": "'After sleep!'",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "string"
+                                    },
+                                    {
+                                        "detail": 0,
+                                        "format": 0,
+                                        "mode": "normal",
+                                        "style": "",
+                                        "text": ")",
+                                        "type": "jupyter-input-highlight",
+                                        "version": 1,
+                                        "highlightType": "punctuation"
+                                    }
+                                ],
+                                "direction": "ltr",
+                                "format": "",
+                                "indent": 0,
+                                "type": "jupyter-input",
+                                "version": 1,
+                                "language": "python",
+                                "jupyterInputNodeUuid": "collapsible-demo-uuid"
+                            },
+                            {
+                                "format": "",
+                                "type": "jupyter-output",
+                                "version": 1,
+                                "source": "import time\n\nprint('Hidden content!')\ntime.sleep(2)\nprint('After sleep!')",
+                                "outputs": [
+                                    {
+                                        "name": "stdout",
+                                        "text": "Hidden content!\nAfter sleep!\n",
+                                        "output_type": "stream"
+                                    }
+                                ],
+                                "jupyterInputNodeUuid": "collapsible-demo-uuid",
+                                "jupyterOutputNodeUuid": "collapsible-demo-output-uuid"
+                            }
+                        ],
+                        "direction": "ltr",
+                        "format": "",
+                        "indent": 0,
+                        "type": "collapsible-content",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "collapsible-container",
+                "version": 1,
+                "open": true
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "8. Excalidraw Diagrams",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Double-click to edit the diagram:",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "type": "excalidraw",
+                        "version": 1,
+                        "data": "{\"elements\":[{\"type\":\"rectangle\",\"version\":1,\"versionNonce\":1,\"isDeleted\":false,\"id\":\"rect1\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":100,\"y\":100,\"strokeColor\":\"#1e1e1e\",\"backgroundColor\":\"#a5d8ff\",\"width\":200,\"height\":100,\"seed\":1,\"groupIds\":[],\"frameId\":null,\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"text1\"}],\"updated\":1,\"link\":null,\"locked\":false},{\"type\":\"text\",\"version\":1,\"versionNonce\":1,\"isDeleted\":false,\"id\":\"text1\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":150,\"y\":130,\"strokeColor\":\"#1e1e1e\",\"backgroundColor\":\"transparent\",\"width\":100,\"height\":40,\"seed\":1,\"groupIds\":[],\"frameId\":null,\"roundness\":null,\"boundElements\":[],\"updated\":1,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"Lexical\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"rect1\",\"originalText\":\"Lexical\",\"lineHeight\":1.25,\"baseline\":34},{\"type\":\"arrow\",\"version\":1,\"versionNonce\":1,\"isDeleted\":false,\"id\":\"arrow1\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":200,\"y\":200,\"strokeColor\":\"#1e1e1e\",\"backgroundColor\":\"transparent\",\"width\":0,\"height\":100,\"seed\":1,\"groupIds\":[],\"frameId\":null,\"roundness\":{\"type\":2},\"boundElements\":[],\"updated\":1,\"link\":null,\"locked\":false,\"startBinding\":null,\"endBinding\":null,\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[0,100]]},{\"type\":\"ellipse\",\"version\":1,\"versionNonce\":1,\"isDeleted\":false,\"id\":\"ellipse1\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":120,\"y\":320,\"strokeColor\":\"#1e1e1e\",\"backgroundColor\":\"#b2f2bb\",\"width\":160,\"height\":80,\"seed\":1,\"groupIds\":[],\"frameId\":null,\"roundness\":{\"type\":2},\"boundElements\":[{\"type\":\"text\",\"id\":\"text2\"}],\"updated\":1,\"link\":null,\"locked\":false},{\"type\":\"text\",\"version\":1,\"versionNonce\":1,\"isDeleted\":false,\"id\":\"text2\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":160,\"y\":340,\"strokeColor\":\"#1e1e1e\",\"backgroundColor\":\"transparent\",\"width\":80,\"height\":40,\"seed\":1,\"groupIds\":[],\"frameId\":null,\"roundness\":null,\"boundElements\":[],\"updated\":1,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"Features\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"ellipse1\",\"originalText\":\"Features\",\"lineHeight\":1.25,\"baseline\":34}],\"appState\":{\"gridSize\":null,\"viewBackgroundColor\":\"#ffffff\"},\"files\":{}}",
+                        "width": "inherit",
+                        "height": "inherit"
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "9. Jupyter Code Execution",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Execute Python code directly in the editor:",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "import",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "keyword"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " ",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "matplotlib.pyplot",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " ",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "as",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "keyword"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " ",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
                     {
                         "detail": 0,
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "print",
+                        "text": "plt\n",
                         "type": "jupyter-input-highlight",
                         "version": 1,
-                        "highlightType": "keyword"
+                        "highlightType": "plain"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "plt",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ".",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "punctuation"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "plot",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
                     },
                     {
                         "detail": 0,
@@ -28,81 +1852,87 @@
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "'Cell 1'",
+                        "text": "[",
                         "type": "jupyter-input-highlight",
                         "version": 1,
-                        "highlightType": "string"
+                        "highlightType": "punctuation"
                     },
                     {
                         "detail": 0,
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": ")",
+                        "text": "1",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "number"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ",",
                         "type": "jupyter-input-highlight",
                         "version": 1,
                         "highlightType": "punctuation"
-                    }
-                ],
-                "direction": "ltr",
-                "format": "",
-                "indent": 0,
-                "type": "jupyter-input",
-                "version": 1,
-                "language": "python",
-                "jupyterInputNodeUuid": "63cf52e9-1bff-4309-945b-68527dbb1c27"
-            },
-            {
-                "format": "",
-                "type": "jupyter-output",
-                "version": 1,
-                "source": "print('Cell 1')",
-                "outputs": [
+                    },
                     {
-                        "name": "stdout",
-                        "text": "Cell 1\n",
-                        "output_type": "stream"
-                    }
-                ],
-                "jupyterInputNodeUuid": "63cf52e9-1bff-4309-945b-68527dbb1c27",
-                "jupyterOutputNodeUuid": "25e7cca4-6f6a-4bbc-8a32-c3760b90dc2f"
-            },
-            {
-                "children": [
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " ",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
                     {
                         "detail": 0,
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "Next...",
-                        "type": "text",
-                        "version": 1
-                    }
-                ],
-                "direction": "ltr",
-                "format": "",
-                "indent": 0,
-                "type": "paragraph",
-                "version": 1
-            },
-            {
-                "children": [
+                        "text": "2",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "number"
+                    },
                     {
                         "detail": 0,
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "print",
+                        "text": ",",
                         "type": "jupyter-input-highlight",
                         "version": 1,
-                        "highlightType": "keyword"
+                        "highlightType": "punctuation"
                     },
                     {
                         "detail": 0,
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "(",
+                        "text": " ",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "3",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "number"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ",",
                         "type": "jupyter-input-highlight",
                         "version": 1,
                         "highlightType": "punctuation"
@@ -112,74 +1942,100 @@
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "'Cell 2'",
+                        "text": " ",
                         "type": "jupyter-input-highlight",
                         "version": 1,
-                        "highlightType": "string"
+                        "highlightType": "plain"
                     },
                     {
                         "detail": 0,
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": ")",
+                        "text": "4",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "number"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ",",
                         "type": "jupyter-input-highlight",
                         "version": 1,
                         "highlightType": "punctuation"
-                    }
-                ],
-                "direction": "ltr",
-                "format": "",
-                "indent": 0,
-                "type": "jupyter-input",
-                "version": 1,
-                "language": "python",
-                "jupyterInputNodeUuid": "1465bc96-0fbc-4327-9557-02b627ae6b23"
-            },
-            {
-                "format": "",
-                "type": "jupyter-output",
-                "version": 1,
-                "source": "print('Cell 2')",
-                "outputs": [
+                    },
                     {
-                        "name": "stdout",
-                        "text": "Cell 2\n",
-                        "output_type": "stream"
-                    }
-                ],
-                "jupyterInputNodeUuid": "1465bc96-0fbc-4327-9557-02b627ae6b23",
-                "jupyterOutputNodeUuid": "9c0d20d7-42a8-482f-80fa-31fd6f9c234b"
-            },
-            {
-                "children": [
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " ",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
                     {
                         "detail": 0,
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "More...",
-                        "type": "text",
-                        "version": 1
-                    }
-                ],
-                "direction": "ltr",
-                "format": "",
-                "indent": 0,
-                "type": "paragraph",
-                "version": 1
-            },
-            {
-                "children": [
+                        "text": "5",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "number"
+                    },
                     {
                         "detail": 0,
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "print",
+                        "text": "]",
                         "type": "jupyter-input-highlight",
                         "version": 1,
-                        "highlightType": "keyword"
+                        "highlightType": "punctuation"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ")\n",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "punctuation"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "plt",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": ".",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "punctuation"
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "title",
+                        "type": "jupyter-input-highlight",
+                        "version": 1,
+                        "highlightType": "plain"
                     },
                     {
                         "detail": 0,
@@ -196,7 +2052,7 @@
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "'Cell 3'",
+                        "text": "'Simple Plot'",
                         "type": "jupyter-input-highlight",
                         "version": 1,
                         "highlightType": "string"
@@ -218,22 +2074,48 @@
                 "type": "jupyter-input",
                 "version": 1,
                 "language": "python",
-                "jupyterInputNodeUuid": "d792c092-60df-4fec-ad16-dd36a0213159"
+                "jupyterInputNodeUuid": "plot-demo-uuid"
             },
             {
                 "format": "",
                 "type": "jupyter-output",
                 "version": 1,
-                "source": "print('Cell 3')",
+                "source": "import matplotlib.pyplot as plt\nplt.plot([1, 2, 3, 4, 5])\nplt.title('Simple Plot')",
                 "outputs": [
                     {
-                        "name": "stdout",
-                        "text": "Cell 3\n",
-                        "output_type": "stream"
+                        "data": {
+                            "text/plain": "Text(0.5, 1.0, 'Simple Plot')"
+                        },
+                        "execution_count": 1,
+                        "metadata": {},
+                        "output_type": "execute_result"
+                    }
+                ],
+                "jupyterInputNodeUuid": "plot-demo-uuid",
+                "jupyterOutputNodeUuid": "plot-demo-output-uuid"
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "10. YouTube Videos",
+                        "type": "text",
+                        "version": 1
                     }
                 ],
-                "jupyterInputNodeUuid": "d792c092-60df-4fec-ad16-dd36a0213159",
-                "jupyterOutputNodeUuid": "fc0cb97b-b295-4e5c-a70b-dab9222b3a78"
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
             },
             {
                 "children": [
@@ -242,7 +2124,7 @@
                         "format": 0,
                         "mode": "normal",
                         "style": "",
-                        "text": "Done!",
+                        "text": "Embed YouTube videos directly:",
                         "type": "text",
                         "version": 1
                     }
@@ -257,7 +2139,66 @@
                 "format": "",
                 "type": "youtube",
                 "version": 1,
-                "videoID": "dh2RK-c1dZA"
+                "videoID": "lO2p9LQB7ds"
+            },
+            {
+                "type": "horizontalrule",
+                "version": 1
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 1,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Try It Yourself!",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "heading",
+                "version": 1,
+                "tag": "h2"
+            },
+            {
+                "children": [
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "Type ",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 16,
+                        "mode": "normal",
+                        "style": "",
+                        "text": "/",
+                        "type": "text",
+                        "version": 1
+                    },
+                    {
+                        "detail": 0,
+                        "format": 0,
+                        "mode": "normal",
+                        "style": "",
+                        "text": " to open the insert menu and try these features yourself. Use the toolbar at the top for quick access to formatting options. Drag blocks by clicking the handle on the left side of any block.",
+                        "type": "text",
+                        "version": 1
+                    }
+                ],
+                "direction": "ltr",
+                "format": "",
+                "indent": 0,
+                "type": "paragraph",
+                "version": 1
             }
         ],
         "direction": "ltr",
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js b/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js
index 104ba76..5f8596d 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js
@@ -5,11 +5,11 @@ import { jsx as _jsx } from "react/jsx-runtime";
  * MIT License
  */
 // Setup Prism globally FIRST - must be before all other imports
-import './setup-prism.js';
+import './setup-prism';
 import { createRoot } from 'react-dom/client';
-import App from './AppSimple.js';
-// import App from './AppNbformat.js';
-// import { ManualKernelControlExample } from './ManualKernelControl.js';
+import App from './AppSimple';
+// import App from './AppNbformat';
+// import { ManualKernelControlExample } from './ManualKernelControl';
 import '../../style/index.css';
 const div = document.createElement('div');
 document.body.appendChild(div);
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/hooks/index.js b/node_modules/@datalayer/jupyter-lexical/lib/hooks/index.js
index f391fb7..8c3978c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/hooks/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/hooks/index.js
@@ -3,7 +3,7 @@
  *
  * MIT License
  */
-export * from './useDebounce.js';
-export * from './useLayoutEffect.js';
-export * from './useModal.js';
+export * from './useDebounce';
+export * from './useLayoutEffect';
+export * from './useModal';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/hooks/useLayoutEffect.js b/node_modules/@datalayer/jupyter-lexical/lib/hooks/useLayoutEffect.js
index 9640292..2e4d21f 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/hooks/useLayoutEffect.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/hooks/useLayoutEffect.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { useEffect, useLayoutEffect } from 'react';
-import { CAN_USE_DOM } from './../utils/index.js';
+import { CAN_USE_DOM } from './../utils';
 export const useLayoutEffectImpl = CAN_USE_DOM
     ? useLayoutEffect
     : useEffect;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/hooks/useModal.js b/node_modules/@datalayer/jupyter-lexical/lib/hooks/useModal.js
index d7d43c9..f3b50b3 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/hooks/useModal.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/hooks/useModal.js
@@ -5,7 +5,7 @@ import { jsx as _jsx } from "react/jsx-runtime";
  * MIT License
  */
 import { useCallback, useMemo, useState } from 'react';
-import Modal from '../components/Modal.js';
+import Modal from '../components/Modal';
 export const useModal = () => {
     const [modalContent, setModalContent] = useState(null);
     const onClose = useCallback(() => {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/images/icons/plus.svg b/node_modules/@datalayer/jupyter-lexical/lib/images/icons/plus.svg
new file mode 100644
index 0000000..1a26928
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/images/icons/plus.svg
@@ -0,0 +1 @@
+<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg>
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/index.d.ts
index deaa9a6..e0e48ec 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/index.d.ts
@@ -6,6 +6,7 @@ export * from './editor';
 export * from './hooks';
 export * from './nodes';
 export * from './plugins';
+export * from './state';
 export * from './themes';
 export * from './tools';
 export * from './utils';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/index.js b/node_modules/@datalayer/jupyter-lexical/lib/index.js
index 31e933f..d79f402 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/index.js
@@ -3,15 +3,16 @@
  *
  * MIT License
  */
-export * from './autoindent/index.js';
-export * from './components/index.js';
-export * from './context/index.js';
-export * from './convert/index.js';
-export * from './editor/index.js';
-export * from './hooks/index.js';
-export * from './nodes/index.js';
-export * from './plugins/index.js';
-export * from './themes/index.js';
-export * from './tools/index.js';
-export * from './utils/index.js';
+export * from './autoindent';
+export * from './components';
+export * from './context';
+export * from './convert';
+export * from './editor';
+export * from './hooks';
+export * from './nodes';
+export * from './plugins';
+export * from './state';
+export * from './themes';
+export * from './tools';
+export * from './utils';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/index.js.map
index 2637312..3dc0379 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,cAAc,CAAC;AAC7B,cAAc,cAAc,CAAC;AAC7B,cAAc,WAAW,CAAC;AAC1B,cAAc,WAAW,CAAC;AAC1B,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC;AACxB,cAAc,SAAS,CAAC;AACxB,cAAc,WAAW,CAAC;AAC1B,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC;AACxB,cAAc,SAAS,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,cAAc,CAAC;AAC7B,cAAc,cAAc,CAAC;AAC7B,cAAc,WAAW,CAAC;AAC1B,cAAc,WAAW,CAAC;AAC1B,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC;AACxB,cAAc,SAAS,CAAC;AACxB,cAAc,WAAW,CAAC;AAC1B,cAAc,SAAS,CAAC;AACxB,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC;AACxB,cAAc,SAAS,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/CounterComponent.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/CounterComponent.js
index 0caf84b..bb5d12f 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/CounterComponent.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/CounterComponent.js
@@ -6,7 +6,7 @@ import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
  */
 import { useCallback, useEffect, useMemo, useState } from 'react';
 import { $getNodeByKey, $getState, $setState, } from 'lexical';
-import { counterValueState } from './counterState.js';
+import { counterValueState } from './counterState';
 export function CounterComponent({ editor, nodeKey, }) {
     const [value, setValue] = useState(0);
     // On mount, sync with NodeState or node property
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/CounterNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/CounterNode.js
index 0f83142..91177c5 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/CounterNode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/CounterNode.js
@@ -5,8 +5,8 @@ import { jsx as _jsx } from "react/jsx-runtime";
  * MIT License
  */
 import { DecoratorNode, $setState, } from 'lexical';
-import { CounterComponent } from './CounterComponent.js';
-import { counterValueState } from './counterState.js';
+import { CounterComponent } from './CounterComponent';
+import { counterValueState } from './counterState';
 export class CounterNode extends DecoratorNode {
     __count;
     static getType() {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/EquationNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/EquationNode.js
index 39d6736..eec0d0b 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/EquationNode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/EquationNode.js
@@ -3,8 +3,8 @@ import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext
 import { mergeRegister } from '@lexical/utils';
 import { $getNodeByKey, $getSelection, $isNodeSelection, COMMAND_PRIORITY_HIGH, DecoratorNode, KEY_ESCAPE_COMMAND, SELECTION_CHANGE_COMMAND, } from 'lexical';
 import { useCallback, useEffect, useRef, useState } from 'react';
-import EquationEditor from '../components/EquationEditor.js';
-import KatexRenderer from '../components/KatexRenderer.js';
+import EquationEditor from '../components/EquationEditor';
+import KatexRenderer from '../components/KatexRenderer';
 function EquationComponent({ equation, inline, nodeKey, }) {
     const [editor] = useLexicalComposerContext();
     const [equationValue, setEquationValue] = useState(equation);
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.d.ts
new file mode 100644
index 0000000..f962c99
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.d.ts
@@ -0,0 +1,32 @@
+import type { DOMConversionMap, DOMExportOutput, EditorConfig, LexicalEditor, LexicalNode, NodeKey, SerializedLexicalNode, Spread } from 'lexical';
+import type { JSX } from 'react';
+import { DecoratorNode } from 'lexical';
+type Dimension = number | 'inherit';
+export type SerializedExcalidrawNode = Spread<{
+    data: string;
+    width?: Dimension;
+    height?: Dimension;
+}, SerializedLexicalNode>;
+export declare class ExcalidrawNode extends DecoratorNode<JSX.Element> {
+    __data: string;
+    __width: Dimension;
+    __height: Dimension;
+    static getType(): string;
+    static clone(node: ExcalidrawNode): ExcalidrawNode;
+    static importJSON(serializedNode: SerializedExcalidrawNode): ExcalidrawNode;
+    exportJSON(): SerializedExcalidrawNode;
+    constructor(data?: string, width?: Dimension, height?: Dimension, key?: NodeKey);
+    createDOM(config: EditorConfig): HTMLElement;
+    updateDOM(): false;
+    static importDOM(): DOMConversionMap<HTMLSpanElement> | null;
+    exportDOM(editor: LexicalEditor): DOMExportOutput;
+    setData(data: string): void;
+    getWidth(): Dimension;
+    setWidth(width: Dimension): void;
+    getHeight(): Dimension;
+    setHeight(height: Dimension): void;
+    decorate(_editor: LexicalEditor, _config: EditorConfig): JSX.Element;
+}
+export declare function $createExcalidrawNode(data?: string, width?: Dimension, height?: Dimension): ExcalidrawNode;
+export declare function $isExcalidrawNode(node: LexicalNode | null | undefined): node is ExcalidrawNode;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.js
new file mode 100644
index 0000000..de28faf
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.js
@@ -0,0 +1,118 @@
+import { jsx as _jsx } from "react/jsx-runtime";
+import { DecoratorNode } from 'lexical';
+import * as React from 'react';
+const ExcalidrawComponent = React.lazy(() => import('../components/ExcalidrawComponent'));
+function $convertExcalidrawElement(domNode) {
+    const excalidrawData = domNode.getAttribute('data-lexical-excalidraw-json');
+    const styleAttributes = window.getComputedStyle(domNode);
+    const heightStr = styleAttributes.getPropertyValue('height');
+    const widthStr = styleAttributes.getPropertyValue('width');
+    const height = !heightStr || heightStr === 'inherit' ? 'inherit' : parseInt(heightStr, 10);
+    const width = !widthStr || widthStr === 'inherit' ? 'inherit' : parseInt(widthStr, 10);
+    if (excalidrawData) {
+        const node = $createExcalidrawNode(excalidrawData, width, height);
+        return {
+            node,
+        };
+    }
+    return null;
+}
+export class ExcalidrawNode extends DecoratorNode {
+    __data;
+    __width;
+    __height;
+    static getType() {
+        return 'excalidraw';
+    }
+    static clone(node) {
+        return new ExcalidrawNode(node.__data, node.__width, node.__height, node.__key);
+    }
+    static importJSON(serializedNode) {
+        return new ExcalidrawNode(serializedNode.data, serializedNode.width ?? 'inherit', serializedNode.height ?? 'inherit').updateFromJSON(serializedNode);
+    }
+    exportJSON() {
+        return {
+            ...super.exportJSON(),
+            data: this.__data,
+            height: this.__height === 'inherit' ? undefined : this.__height,
+            width: this.__width === 'inherit' ? undefined : this.__width,
+        };
+    }
+    constructor(data = '[]', width = 'inherit', height = 'inherit', key) {
+        super(key);
+        this.__data = data;
+        this.__width = width;
+        this.__height = height;
+    }
+    // View
+    createDOM(config) {
+        const span = document.createElement('span');
+        const theme = config.theme;
+        const className = theme.image;
+        if (className !== undefined) {
+            span.className = className;
+        }
+        return span;
+    }
+    updateDOM() {
+        return false;
+    }
+    static importDOM() {
+        return {
+            span: (domNode) => {
+                if (!domNode.hasAttribute('data-lexical-excalidraw-json')) {
+                    return null;
+                }
+                return {
+                    conversion: $convertExcalidrawElement,
+                    priority: 1,
+                };
+            },
+        };
+    }
+    exportDOM(editor) {
+        const element = document.createElement('span');
+        element.style.display = 'inline-block';
+        const content = editor.getElementByKey(this.getKey());
+        if (content !== null) {
+            const svg = content.querySelector('svg');
+            if (svg !== null) {
+                element.innerHTML = svg.outerHTML;
+            }
+        }
+        element.style.width =
+            this.__width === 'inherit' ? 'inherit' : `${this.__width}px`;
+        element.style.height =
+            this.__height === 'inherit' ? 'inherit' : `${this.__height}px`;
+        element.setAttribute('data-lexical-excalidraw-json', this.__data);
+        return { element };
+    }
+    setData(data) {
+        const self = this.getWritable();
+        self.__data = data;
+    }
+    getWidth() {
+        return this.getLatest().__width;
+    }
+    setWidth(width) {
+        const self = this.getWritable();
+        self.__width = width;
+    }
+    getHeight() {
+        return this.getLatest().__height;
+    }
+    setHeight(height) {
+        const self = this.getWritable();
+        self.__height = height;
+    }
+    decorate(_editor, _config) {
+        return (_jsx(ExcalidrawComponent, { nodeKey: this.getKey(), data: this.__data, width: this.__width, height: this.__height }));
+    }
+}
+export function $createExcalidrawNode(data = '[]', width = 'inherit', height = 'inherit') {
+    return new ExcalidrawNode(data, width, height);
+}
+export function $isExcalidrawNode(node) {
+    return node instanceof ExcalidrawNode;
+}
+//# sourceMappingURL=ExcalidrawNode.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.js.map
new file mode 100644
index 0000000..3f497d7
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/ExcalidrawNode.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ExcalidrawNode.js","sourceRoot":"","sources":["../../src/nodes/ExcalidrawNode.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/ImageNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/ImageNode.js
index f13774a..0aae35e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/ImageNode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/ImageNode.js
@@ -17,10 +17,10 @@ import { useLexicalNodeSelection } from '@lexical/react/useLexicalNodeSelection'
 import { LexicalErrorBoundary } from '@lexical/react/LexicalErrorBoundary';
 import { mergeRegister } from '@lexical/utils';
 import { $createNodeSelection, $getNodeByKey, $getSelection, $isNodeSelection, $setSelection, CLICK_COMMAND, COMMAND_PRIORITY_LOW, createEditor, DecoratorNode, KEY_BACKSPACE_COMMAND, KEY_DELETE_COMMAND, KEY_ENTER_COMMAND, KEY_ESCAPE_COMMAND, SELECTION_CHANGE_COMMAND, } from 'lexical';
-import ImagesPlugin from '../plugins/ImagesPlugin.js';
-import ContentEditable from '../components/ContentEditable.js';
-import ImageResizer from '../components/ImageResizer.js';
-import Placeholder from '../components/Placeholder.js';
+import ImagesPlugin from '../plugins/ImagesPlugin';
+import ContentEditable from '../components/ContentEditable';
+import ImageResizer from '../components/ImageResizer';
+import Placeholder from '../components/Placeholder';
 const imageCache = new Set();
 function useSuspenseImage(src) {
     if (!imageCache.has(src)) {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterInputHighlighter.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterInputHighlighter.js
index 5ad094a..13d6896 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterInputHighlighter.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterInputHighlighter.js
@@ -6,8 +6,8 @@
 import * as Prism from 'prismjs';
 import { mergeRegister } from '@lexical/utils';
 import { $createLineBreakNode, $createTextNode, $getNodeByKey, $getSelection, $isLineBreakNode, $isRangeSelection, $isTextNode, COMMAND_PRIORITY_LOW, INDENT_CONTENT_COMMAND, KEY_ARROW_DOWN_COMMAND, KEY_ARROW_UP_COMMAND, MOVE_TO_END, MOVE_TO_START, OUTDENT_CONTENT_COMMAND, TextNode, } from 'lexical';
-import { $createJupyterInputHighlightNode, $isJupyterInputHighlightNode, JupyterInputHighlightNode, DEFAULT_CODE_LANGUAGE, getFirstJupyterInputHighlightNodeOfLine, getLastJupyterInputHighlightNodeOfLine, } from './JupyterInputHighlightNode.js';
-import { $isJupyterInputNode, JupyterInputNode } from './JupyterInputNode.js';
+import { $createJupyterInputHighlightNode, $isJupyterInputHighlightNode, JupyterInputHighlightNode, DEFAULT_CODE_LANGUAGE, getFirstJupyterInputHighlightNodeOfLine, getLastJupyterInputHighlightNodeOfLine, } from './JupyterInputHighlightNode';
+import { $isJupyterInputNode, JupyterInputNode } from './JupyterInputNode';
 function isSpaceOrTabChar(char) {
     return char === ' ' || char === '\t';
 }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterInputNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterInputNode.js
index d76fc31..c84d47a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterInputNode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterInputNode.js
@@ -6,8 +6,8 @@
 import { $createLineBreakNode, $createParagraphNode, $getSelection, $isRangeSelection, ElementNode, } from 'lexical';
 import { addClassNamesToElement } from '@lexical/utils';
 import { UUID } from '@lumino/coreutils';
-import { $createJupyterInputHighlightNode, getFirstJupyterInputHighlightNodeOfLine, } from './JupyterInputHighlightNode.js';
-import { INPUT_UUID_TO_CODE_KEY } from '../plugins/JupyterInputOutputPlugin.js';
+import { $createJupyterInputHighlightNode, getFirstJupyterInputHighlightNodeOfLine, } from './JupyterInputHighlightNode';
+import { INPUT_UUID_TO_CODE_KEY } from '../plugins/JupyterInputOutputPlugin';
 import * as Prism from 'prismjs';
 const mapToPrismLanguage = (language) => {
     const prismLangs = Prism?.languages;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js
index 82eb340..b46395a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js
@@ -6,9 +6,9 @@ import { jsx as _jsx } from "react/jsx-runtime";
  */
 import { DecoratorNode, } from 'lexical';
 import { UUID } from '@lumino/coreutils';
-import { OUTPUT_UUID_TO_CODE_UUID, INPUT_UUID_TO_OUTPUT_KEY, INPUT_UUID_TO_OUTPUT_UUID, OUTPUT_UUID_TO_OUTPUT_KEY, } from '../plugins/JupyterInputOutputPlugin.js';
+import { OUTPUT_UUID_TO_CODE_UUID, INPUT_UUID_TO_OUTPUT_KEY, INPUT_UUID_TO_OUTPUT_UUID, OUTPUT_UUID_TO_OUTPUT_KEY, } from '../plugins/JupyterInputOutputPlugin';
 import { Output, OutputAdapter, newUuid, } from '@datalayer/jupyter-react';
-import { isJupyterOutputNodeOrphaned } from './JupyterOutputNodeUtils.js';
+import { isJupyterOutputNodeOrphaned } from './JupyterOutputNodeUtils';
 export class JupyterOutputNode extends DecoratorNode {
     __code;
     __outputs;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js
index d3e2c47..fad9266 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js
@@ -3,7 +3,7 @@
  *
  * MIT License
  */
-import { INPUT_UUID_TO_CODE_KEY } from '../plugins/JupyterInputOutputPlugin.js';
+import { INPUT_UUID_TO_CODE_KEY } from '../plugins/JupyterInputOutputPlugin';
 /**
  * Check if a JupyterOutputNode is orphaned (its parent input node was deleted).
  *
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/YouTubeNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/YouTubeNode.js
index a0b7382..4dd2d47 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/YouTubeNode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/YouTubeNode.js
@@ -1,7 +1,71 @@
-import { jsx as _jsx } from "react/jsx-runtime";
+import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
 import { BlockWithAlignableContents } from '@lexical/react/LexicalBlockWithAlignableContents';
 import { DecoratorBlockNode, } from '@lexical/react/LexicalDecoratorBlockNode';
+import { useEffect, useState } from 'react';
+import { useEmbedHandlers } from '../context/EmbedHandlersContext';
+/**
+ * YouTube thumbnail component with play button overlay.
+ * Used when a custom click handler is provided via context.
+ */
+function YouTubeThumbnailComponent({ videoID, onClick, }) {
+    const [thumbnailUrl, setThumbnailUrl] = useState(`https://img.youtube.com/vi/${videoID}/maxresdefault.jpg`);
+    // Fallback to mqdefault if maxresdefault doesn't exist
+    useEffect(() => {
+        const img = new Image();
+        img.onload = () => {
+            // Check if we got the default thumbnail (120x90)
+            if (img.width === 120 && img.height === 90) {
+                setThumbnailUrl(`https://img.youtube.com/vi/${videoID}/mqdefault.jpg`);
+            }
+        };
+        img.src = thumbnailUrl;
+    }, [videoID, thumbnailUrl]);
+    return (_jsxs("div", { onClick: onClick, style: {
+            position: 'relative',
+            width: '560px',
+            height: '315px',
+            cursor: 'pointer',
+            backgroundColor: '#000',
+            display: 'flex',
+            alignItems: 'center',
+            justifyContent: 'center',
+        }, children: [_jsx("img", { src: thumbnailUrl, alt: "YouTube video thumbnail", style: {
+                    width: '100%',
+                    height: '100%',
+                    objectFit: 'cover',
+                } }), _jsx("div", { style: {
+                    position: 'absolute',
+                    top: '50%',
+                    left: '50%',
+                    transform: 'translate(-50%, -50%)',
+                    width: '68px',
+                    height: '48px',
+                    backgroundColor: 'rgba(255, 0, 0, 0.8)',
+                    borderRadius: '8px',
+                    display: 'flex',
+                    alignItems: 'center',
+                    justifyContent: 'center',
+                    transition: 'background-color 0.2s',
+                }, onMouseEnter: e => {
+                    e.currentTarget.style.backgroundColor = 'rgba(255, 0, 0, 1)';
+                }, onMouseLeave: e => {
+                    e.currentTarget.style.backgroundColor = 'rgba(255, 0, 0, 0.8)';
+                }, children: _jsx("div", { style: {
+                        width: 0,
+                        height: 0,
+                        borderLeft: '20px solid white',
+                        borderTop: '12px solid transparent',
+                        borderBottom: '12px solid transparent',
+                        marginLeft: '4px',
+                    } }) })] }));
+}
 function YouTubeComponent({ className, format, nodeKey, videoID, }) {
+    const { onYouTubeClick } = useEmbedHandlers();
+    // If a custom handler is provided, use thumbnail + handler
+    if (onYouTubeClick) {
+        return (_jsx(BlockWithAlignableContents, { className: className, format: format, nodeKey: nodeKey, children: _jsx(YouTubeThumbnailComponent, { videoID: videoID, onClick: () => onYouTubeClick(videoID) }) }));
+    }
+    // Default: standard iframe embed
     return (_jsx(BlockWithAlignableContents, { className: className, format: format, nodeKey: nodeKey, children: _jsx("iframe", { width: "560", height: "315", src: `https://www.youtube.com/embed/${videoID}`, frameBorder: "0", allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture", allowFullScreen: true, title: "YouTube video" }) }));
 }
 export class YouTubeNode extends DecoratorBlockNode {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/YouTubeNode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/nodes/YouTubeNode.js.map
index e09faf6..71db043 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/YouTubeNode.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/YouTubeNode.js.map
@@ -1 +1 @@
-{"version":3,"file":"YouTubeNode.js","sourceRoot":"","sources":["../../src/nodes/YouTubeNode.tsx"],"names":[],"mappings":";AAcA,OAAO,EAAE,0BAA0B,EAAE,MAAM,kDAAkD,CAAC;AAC9F,OAAO,EACL,kBAAkB,GAEnB,MAAM,0CAA0C,CAAC;AAYlD,SAAS,gBAAgB,CAAC,EACxB,SAAS,EACT,MAAM,EACN,OAAO,EACP,OAAO,GACe;IACtB,OAAO,CACL,KAAC,0BAA0B,IACzB,SAAS,EAAE,SAAS,EACpB,MAAM,EAAE,MAAM,EACd,OAAO,EAAE,OAAO,YAEhB,iBACE,KAAK,EAAC,KAAK,EACX,MAAM,EAAC,KAAK,EACZ,GAAG,EAAE,iCAAiC,OAAO,EAAE,EAC/C,WAAW,EAAC,GAAG,EACf,KAAK,EAAC,0FAA0F,EAChG,eAAe,QACf,KAAK,EAAC,eAAe,GACrB,GACyB,CAC9B,CAAC;AACJ,CAAC;AAWD,MAAM,OAAO,WAAY,SAAQ,kBAAkB;IACjD,IAAI,CAAS;IAEb,MAAM,CAAC,OAAO;QACZ,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,IAAiB;QAC5B,OAAO,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IAC/D,CAAC;IAED,MAAM,CAAC,UAAU,CAAC,cAAqC;QACrD,MAAM,IAAI,GAAG,kBAAkB,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACtC,OAAO,IAAI,CAAC;IACd,CAAC;IAED,UAAU;QACR,OAAO;YACL,GAAG,KAAK,CAAC,UAAU,EAAE;YACrB,IAAI,EAAE,SAAS;YACf,OAAO,EAAE,CAAC;YACV,OAAO,EAAE,IAAI,CAAC,IAAI;SACnB,CAAC;IACJ,CAAC;IAED,YAAY,EAAU,EAAE,MAA0B,EAAE,GAAa;QAC/D,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;IACjB,CAAC;IAED,SAAS;QACP,OAAO,KAAK,CAAC;IACf,CAAC;IAED,KAAK;QACH,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IAED,QAAQ,CAAC,OAAsB,EAAE,MAAoB;QACnD,MAAM,eAAe,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,IAAI,EAAE,CAAC;QACtD,MAAM,SAAS,GAAG;YAChB,IAAI,EAAE,eAAe,CAAC,IAAI,IAAI,EAAE;YAChC,KAAK,EAAE,eAAe,CAAC,KAAK,IAAI,EAAE;SACnC,CAAC;QACF,OAAO,CACL,KAAC,gBAAgB,IACf,SAAS,EAAE,SAAS,EACpB,MAAM,EAAE,IAAI,CAAC,QAAQ,EACrB,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,EACtB,OAAO,EAAE,IAAI,CAAC,IAAI,GAClB,CACH,CAAC;IACJ,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC;IACd,CAAC;CACF;AAED,MAAM,UAAU,kBAAkB,CAAC,OAAe;IAChD,OAAO,IAAI,WAAW,CAAC,OAAO,CAAC,CAAC;AAClC,CAAC;AAED,MAAM,UAAU,cAAc,CAC5B,IAAkD;IAElD,OAAO,IAAI,YAAY,WAAW,CAAC;AACrC,CAAC"}
\ No newline at end of file
+{"version":3,"file":"YouTubeNode.js","sourceRoot":"","sources":["../../src/nodes/YouTubeNode.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.d.ts
index 38817cf..51b8c14 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.d.ts
@@ -1,6 +1,7 @@
 export * from './CommentThreadNode';
 export * from './CounterNode';
 export * from './EquationNode';
+export * from './ExcalidrawNode';
 export * from './ImageNode';
 export * from './JupyterInputHighlightNode';
 export * from './JupyterInputHighlighter';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js
index c05ad8f..e68eb8a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js
@@ -3,15 +3,16 @@
  *
  * MIT License
  */
-export * from './CommentThreadNode.js';
-export * from './CounterNode.js';
-export * from './EquationNode.js';
-export * from './ImageNode.js';
-export * from './JupyterInputHighlightNode.js';
-export * from './JupyterInputHighlighter.js';
-export * from './JupyterInputNode.js';
-export * from './JupyterOutputNode.js';
-export * from './JupyterCellNode.js';
-export * from './YouTubeNode.js';
-export * from './InlineCompletionNode.js';
+export * from './CommentThreadNode';
+export * from './CounterNode';
+export * from './EquationNode';
+export * from './ExcalidrawNode';
+export * from './ImageNode';
+export * from './JupyterInputHighlightNode';
+export * from './JupyterInputHighlighter';
+export * from './JupyterInputNode';
+export * from './JupyterOutputNode';
+export * from './JupyterCellNode';
+export * from './YouTubeNode';
+export * from './InlineCompletionNode';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js.map
index 992f021..8308748 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/nodes/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,qBAAqB,CAAC;AACpC,cAAc,eAAe,CAAC;AAC9B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,6BAA6B,CAAC;AAC5C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,oBAAoB,CAAC;AACnC,cAAc,qBAAqB,CAAC;AACpC,cAAc,mBAAmB,CAAC;AAClC,cAAc,eAAe,CAAC;AAC9B,cAAc,wBAAwB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/nodes/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,qBAAqB,CAAC;AACpC,cAAc,eAAe,CAAC;AAC9B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,kBAAkB,CAAC;AACjC,cAAc,aAAa,CAAC;AAC5B,cAAc,6BAA6B,CAAC;AAC5C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,oBAAoB,CAAC;AACnC,cAAc,qBAAqB,CAAC;AACpC,cAAc,mBAAmB,CAAC;AAClC,cAAc,eAAe,CAAC;AAC9B,cAAc,wBAAwB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoEmbedPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoEmbedPlugin.js
index 9ff18bf..3773675 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoEmbedPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoEmbedPlugin.js
@@ -3,10 +3,10 @@ import { AutoEmbedOption, LexicalAutoEmbedPlugin, URL_MATCHER, } from '@lexical/
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
 import { useMemo, useState } from 'react';
 import * as ReactDOM from 'react-dom';
-import useModal from '../hooks/useModal.js';
-import Button from '../components/Button.js';
-import { DialogActions } from '../components/Dialog.js';
-import { INSERT_YOUTUBE_COMMAND } from './YouTubePlugin.js';
+import useModal from '../hooks/useModal';
+import Button from '../components/Button';
+import { DialogActions } from '../components/Dialog';
+import { INSERT_YOUTUBE_COMMAND } from './YouTubePlugin';
 export const YoutubeEmbedConfig = {
     contentName: 'Youtube Video',
     exampleUrl: 'https://www.youtube.com/watch?v=jNQXAC9IVRw',
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoIndentPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoIndentPlugin.js
index a66b573..1e98e5c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoIndentPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoIndentPlugin.js
@@ -15,11 +15,11 @@ import { useEffect, useRef } from 'react';
 import { $getSelection, $isRangeSelection, $isTextNode, COMMAND_PRIORITY_HIGH, INDENT_CONTENT_COMMAND, OUTDENT_CONTENT_COMMAND, KEY_TAB_COMMAND, KEY_ENTER_COMMAND, $createLineBreakNode, } from 'lexical';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
 import { mergeRegister } from '@lexical/utils';
-import { AutoIndentEngine } from '../autoindent/AutoIndentEngine.js';
-import { LanguageIndentRegistry } from '../autoindent/LanguageIndentRegistry.js';
-import { $isJupyterInputNode, } from '../nodes/JupyterInputNode.js';
-import { $createJupyterInputHighlightNode } from '../nodes/JupyterInputHighlightNode.js';
-import { $isInlineCompletionNode } from '../nodes/InlineCompletionNode.js';
+import { AutoIndentEngine } from '../autoindent/AutoIndentEngine';
+import { LanguageIndentRegistry } from '../autoindent/LanguageIndentRegistry';
+import { $isJupyterInputNode, } from '../nodes/JupyterInputNode';
+import { $createJupyterInputHighlightNode } from '../nodes/JupyterInputHighlightNode';
+import { $isInlineCompletionNode } from '../nodes/InlineCompletionNode';
 /**
  * Check if there's an active inline completion in the given JupyterInputNode
  * @param parentNode - The JupyterInputNode to check
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoLinkPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoLinkPlugin.js
index 9501baf..dcf6122 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoLinkPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoLinkPlugin.js
@@ -10,21 +10,34 @@ const EMAIL_MATCHER = /(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+")
 const MATCHERS = [
     (text) => {
         const match = URL_MATCHER.exec(text);
-        return (match && {
-            index: match.index,
-            length: match[0].length,
-            text: match[0],
-            url: match[0],
-        });
+        if (match) {
+            const url = match[0].startsWith('http')
+                ? match[0]
+                : `https://${match[0]}`;
+            return {
+                index: match.index,
+                length: match[0].length,
+                text: match[0],
+                url,
+                attributes: {
+                    rel: 'noopener noreferrer',
+                    target: '_blank',
+                },
+            };
+        }
+        return null;
     },
     (text) => {
         const match = EMAIL_MATCHER.exec(text);
-        return (match && {
-            index: match.index,
-            length: match[0].length,
-            text: match[0],
-            url: `mailto:${match[0]}`,
-        });
+        if (match) {
+            return {
+                index: match.index,
+                length: match[0].length,
+                text: match[0],
+                url: `mailto:${match[0]}`,
+            };
+        }
+        return null;
     },
 ];
 export const AutoLinkPlugin = () => {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoLinkPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoLinkPlugin.js.map
index 7843712..3b0d24c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoLinkPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/AutoLinkPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"AutoLinkPlugin.js","sourceRoot":"","sources":["../../src/plugins/AutoLinkPlugin.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,cAAc,IAAI,qBAAqB,EAAE,MAAM,sCAAsC,CAAC;AAE/F,MAAM,WAAW,GACf,iHAAiH,CAAC;AAEpH,MAAM,aAAa,GACjB,qJAAqJ,CAAC;AAExJ,MAAM,QAAQ,GAAG;IACf,CAAC,IAAY,EAAE,EAAE;QACf,MAAM,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrC,OAAO,CACL,KAAK,IAAI;YACP,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM;YACvB,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;YACd,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC;SACd,CACF,CAAC;IACJ,CAAC;IACD,CAAC,IAAY,EAAE,EAAE;QACf,MAAM,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC,OAAO,CACL,KAAK,IAAI;YACP,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM;YACvB,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;YACd,GAAG,EAAE,UAAU,KAAK,CAAC,CAAC,CAAC,EAAE;SAC1B,CACF,CAAC;IACJ,CAAC;CACF,CAAC;AAEF,MAAM,CAAC,MAAM,cAAc,GAAG,GAAG,EAAE;IACjC,OAAO,KAAC,qBAAqB,IAAC,QAAQ,EAAE,QAAQ,GAAI,CAAC;AACvD,CAAC,CAAC;AAEF,eAAe,cAAc,CAAC"}
\ No newline at end of file
+{"version":3,"file":"AutoLinkPlugin.js","sourceRoot":"","sources":["../../src/plugins/AutoLinkPlugin.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,cAAc,IAAI,qBAAqB,EAAE,MAAM,sCAAsC,CAAC;AAE/F,MAAM,WAAW,GACf,iHAAiH,CAAC;AAEpH,MAAM,aAAa,GACjB,qJAAqJ,CAAC;AAExJ,MAAM,QAAQ,GAAG;IACf,CAAC,IAAY,EAAE,EAAE;QACf,MAAM,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,KAAK,EAAE,CAAC;YACV,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC;gBACrC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACV,CAAC,CAAC,WAAW,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;YAC1B,OAAO;gBACL,KAAK,EAAE,KAAK,CAAC,KAAK;gBAClB,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM;gBACvB,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;gBACd,GAAG;gBACH,UAAU,EAAE;oBACV,GAAG,EAAE,qBAAqB;oBAC1B,MAAM,EAAE,QAAQ;iBACjB;aACF,CAAC;QACJ,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IACD,CAAC,IAAY,EAAE,EAAE;QACf,MAAM,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,KAAK,EAAE,CAAC;YACV,OAAO;gBACL,KAAK,EAAE,KAAK,CAAC,KAAK;gBAClB,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM;gBACvB,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;gBACd,GAAG,EAAE,UAAU,KAAK,CAAC,CAAC,CAAC,EAAE;aAC1B,CAAC;QACJ,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CACF,CAAC;AAEF,MAAM,CAAC,MAAM,cAAc,GAAG,GAAG,EAAE;IACjC,OAAO,KAAC,qBAAqB,IAAC,QAAQ,EAAE,QAAQ,GAAI,CAAC;AACvD,CAAC,CAAC;AAEF,eAAe,cAAc,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin.js
index 80134f7..009873c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin.js
@@ -9,9 +9,9 @@ import { createPortal } from 'react-dom';
 import { $isCodeNode, CodeNode, getLanguageFriendlyName, normalizeCodeLang, } from '@lexical/code';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
 import { $getNearestNodeFromDOMNode, isHTMLElement } from 'lexical';
-import { CopyButton } from '../components/CopyButton.js';
-import { canBePrettier, PrettierButton } from '../components/PrettierButton.js';
-import { useDebounce } from './../hooks/index.js';
+import { CopyButton } from '../components/CopyButton';
+import { canBePrettier, PrettierButton } from '../components/PrettierButton';
+import { useDebounce } from './../hooks';
 const CODE_PADDING = 8;
 function CodeActionMenuContainer({ anchorElem, }) {
     const [editor] = useLexicalComposerContext();
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.d.ts
new file mode 100644
index 0000000..3a2210d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.d.ts
@@ -0,0 +1,7 @@
+import { LexicalEditor } from 'lexical';
+interface Props {
+    editor: LexicalEditor;
+    getCodeDOMNode: () => HTMLElement | null;
+}
+export declare function CopyButton({ editor, getCodeDOMNode }: Props): import("react/jsx-runtime").JSX.Element;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.js
new file mode 100644
index 0000000..ef583aa
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.js
@@ -0,0 +1,48 @@
+import { jsx as _jsx } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ */
+import { $isCodeNode } from '@lexical/code';
+import { $getNearestNodeFromDOMNode, $getSelection, $setSelection, } from 'lexical';
+import { useState } from 'react';
+import { useDebounce } from '../../utils';
+export function CopyButton({ editor, getCodeDOMNode }) {
+    const [isCopyCompleted, setCopyCompleted] = useState(false);
+    const removeSuccessIcon = useDebounce(() => {
+        setCopyCompleted(false);
+    }, 1000);
+    async function handleClick() {
+        const codeDOMNode = getCodeDOMNode();
+        if (!codeDOMNode) {
+            return;
+        }
+        let content = '';
+        editor.update(() => {
+            const codeNode = $getNearestNodeFromDOMNode(codeDOMNode);
+            if ($isCodeNode(codeNode)) {
+                content = codeNode.getTextContent();
+            }
+            const selection = $getSelection();
+            $setSelection(selection);
+        });
+        try {
+            await navigator.clipboard.writeText(content);
+            setCopyCompleted(true);
+            removeSuccessIcon();
+        }
+        catch (err) {
+            console.error('Failed to copy: ', err);
+        }
+    }
+    return (_jsx("button", { className: "menu-item", onClick: handleClick, "aria-label": "copy", children: isCopyCompleted ? (_jsx("i", { className: "format success" })) : (_jsx("i", { className: "format copy" })) }));
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.js.map
new file mode 100644
index 0000000..a9324e6
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/CopyButton/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../src/plugins/CodeActionMenuPlugin/components/CopyButton/index.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH;;;;;;GAMG;AACH,OAAO,EAAE,WAAW,EAAE,MAAM,eAAe,CAAC;AAC5C,OAAO,EACL,0BAA0B,EAC1B,aAAa,EACb,aAAa,GAEd,MAAM,SAAS,CAAC;AACjB,OAAO,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAEjC,OAAO,EAAE,WAAW,EAAE,MAAM,aAAa,CAAC;AAO1C,MAAM,UAAU,UAAU,CAAC,EAAE,MAAM,EAAE,cAAc,EAAS;IAC1D,MAAM,CAAC,eAAe,EAAE,gBAAgB,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IAErE,MAAM,iBAAiB,GAAG,WAAW,CAAC,GAAG,EAAE;QACzC,gBAAgB,CAAC,KAAK,CAAC,CAAC;IAC1B,CAAC,EAAE,IAAI,CAAC,CAAC;IAET,KAAK,UAAU,WAAW;QACxB,MAAM,WAAW,GAAG,cAAc,EAAE,CAAC;QAErC,IAAI,CAAC,WAAW,EAAE,CAAC;YACjB,OAAO;QACT,CAAC;QAED,IAAI,OAAO,GAAG,EAAE,CAAC;QAEjB,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;YACjB,MAAM,QAAQ,GAAG,0BAA0B,CAAC,WAAW,CAAC,CAAC;YAEzD,IAAI,WAAW,CAAC,QAAQ,CAAC,EAAE,CAAC;gBAC1B,OAAO,GAAG,QAAQ,CAAC,cAAc,EAAE,CAAC;YACtC,CAAC;YAED,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,aAAa,CAAC,SAAS,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC;YACH,MAAM,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAC7C,gBAAgB,CAAC,IAAI,CAAC,CAAC;YACvB,iBAAiB,EAAE,CAAC;QACtB,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO,CAAC,KAAK,CAAC,kBAAkB,EAAE,GAAG,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,OAAO,CACL,iBAAQ,SAAS,EAAC,WAAW,EAAC,OAAO,EAAE,WAAW,gBAAa,MAAM,YAClE,eAAe,CAAC,CAAC,CAAC,CACjB,YAAG,SAAS,EAAC,gBAAgB,GAAG,CACjC,CAAC,CAAC,CAAC,CACF,YAAG,SAAS,EAAC,aAAa,GAAG,CAC9B,GACM,CACV,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.d.ts
new file mode 100644
index 0000000..f4f9abc
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.d.ts
@@ -0,0 +1,9 @@
+import { LexicalEditor } from 'lexical';
+interface Props {
+    lang: string;
+    editor: LexicalEditor;
+    getCodeDOMNode: () => HTMLElement | null;
+}
+export declare function canBePrettier(lang: string): boolean;
+export declare function PrettierButton({ lang, editor, getCodeDOMNode }: Props): import("react/jsx-runtime").JSX.Element;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.js
new file mode 100644
index 0000000..e0abb2b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.js
@@ -0,0 +1,116 @@
+import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ */
+import { $isCodeNode } from '@lexical/code';
+import { $getNearestNodeFromDOMNode } from 'lexical';
+import { useState } from 'react';
+const PRETTIER_PARSER_MODULES = {
+    css: [() => import('prettier/parser-postcss')],
+    html: [() => import('prettier/parser-html')],
+    js: [
+        () => import('prettier/parser-babel'),
+        //    () => import('prettier/plugins/estree'),
+    ],
+    markdown: [() => import('prettier/parser-markdown')],
+    typescript: [
+        () => import('prettier/parser-typescript'),
+        //    () => import('prettier/plugins/estree'),
+    ],
+};
+async function loadPrettierParserByLang(lang) {
+    const dynamicImports = PRETTIER_PARSER_MODULES[lang];
+    const modules = await Promise.all(dynamicImports.map(dynamicImport => dynamicImport()));
+    return modules;
+}
+async function loadPrettierFormat() {
+    const { format } = await import('prettier/standalone');
+    return format;
+}
+const PRETTIER_OPTIONS_BY_LANG = {
+    css: { parser: 'css' },
+    html: { parser: 'html' },
+    js: { parser: 'babel' },
+    markdown: { parser: 'markdown' },
+    typescript: { parser: 'typescript' },
+};
+const LANG_CAN_BE_PRETTIER = Object.keys(PRETTIER_OPTIONS_BY_LANG);
+export function canBePrettier(lang) {
+    return LANG_CAN_BE_PRETTIER.includes(lang);
+}
+function getPrettierOptions(lang) {
+    const options = PRETTIER_OPTIONS_BY_LANG[lang];
+    if (!options) {
+        throw new Error(`CodeActionMenuPlugin: Prettier does not support this language: ${lang}`);
+    }
+    return options;
+}
+export function PrettierButton({ lang, editor, getCodeDOMNode }) {
+    const [syntaxError, setSyntaxError] = useState('');
+    const [tipsVisible, setTipsVisible] = useState(false);
+    async function handleClick() {
+        const codeDOMNode = getCodeDOMNode();
+        if (!codeDOMNode) {
+            return;
+        }
+        let content = '';
+        editor.update(() => {
+            const codeNode = $getNearestNodeFromDOMNode(codeDOMNode);
+            if ($isCodeNode(codeNode)) {
+                content = codeNode.getTextContent();
+            }
+        });
+        if (content === '') {
+            return;
+        }
+        try {
+            const format = await loadPrettierFormat();
+            const options = getPrettierOptions(lang);
+            const prettierParsers = await loadPrettierParserByLang(lang);
+            options.plugins = prettierParsers.map(parser => parser.default || parser);
+            const formattedCode = await format(content, options);
+            editor.update(() => {
+                const codeNode = $getNearestNodeFromDOMNode(codeDOMNode);
+                if ($isCodeNode(codeNode)) {
+                    const selection = codeNode.select(0);
+                    selection.insertText(formattedCode);
+                    setSyntaxError('');
+                    setTipsVisible(false);
+                }
+            });
+        }
+        catch (error) {
+            setError(error);
+        }
+    }
+    function setError(error) {
+        if (error instanceof Error) {
+            setSyntaxError(error.message);
+            setTipsVisible(true);
+        }
+        else {
+            console.error('Unexpected error: ', error);
+        }
+    }
+    function handleMouseEnter() {
+        if (syntaxError !== '') {
+            setTipsVisible(true);
+        }
+    }
+    function handleMouseLeave() {
+        if (syntaxError !== '') {
+            setTipsVisible(false);
+        }
+    }
+    return (_jsxs("div", { className: "prettier-wrapper", children: [_jsx("button", { className: "menu-item", onClick: handleClick, onMouseEnter: handleMouseEnter, onMouseLeave: handleMouseLeave, "aria-label": "prettier", children: syntaxError ? (_jsx("i", { className: "format prettier-error" })) : (_jsx("i", { className: "format prettier" })) }), tipsVisible ? (_jsx("pre", { className: "code-error-tips", children: syntaxError })) : null] }));
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.js.map
new file mode 100644
index 0000000..941f0b0
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/components/PrettierButton/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../src/plugins/CodeActionMenuPlugin/components/PrettierButton/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.d.ts
new file mode 100644
index 0000000..5a7d5ac
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.d.ts
@@ -0,0 +1,4 @@
+import type { JSX } from 'react';
+export default function CodeActionMenuPlugin({ anchorElem, }: {
+    anchorElem?: HTMLElement;
+}): JSX.Element | null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.js
new file mode 100644
index 0000000..c539277
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.js
@@ -0,0 +1,104 @@
+import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
+import { $isCodeNode, CodeNode, getLanguageFriendlyName, normalizeCodeLang, } from '@lexical/code';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { $getNearestNodeFromDOMNode, isHTMLElement } from 'lexical';
+import { useEffect, useRef, useState } from 'react';
+import { createPortal } from 'react-dom';
+import { CopyButton } from './components/CopyButton';
+import { canBePrettier, PrettierButton } from './components/PrettierButton';
+import { useDebounce } from './utils';
+const CODE_PADDING = 8;
+function CodeActionMenuContainer({ anchorElem, }) {
+    const [editor] = useLexicalComposerContext();
+    const [lang, setLang] = useState('');
+    const [isShown, setShown] = useState(false);
+    const [shouldListenMouseMove, setShouldListenMouseMove] = useState(false);
+    const [position, setPosition] = useState({
+        right: '0',
+        top: '0',
+    });
+    const codeSetRef = useRef(new Set());
+    const codeDOMNodeRef = useRef(null);
+    function getCodeDOMNode() {
+        return codeDOMNodeRef.current;
+    }
+    const debouncedOnMouseMove = useDebounce((event) => {
+        const { codeDOMNode, isOutside } = getMouseInfo(event);
+        if (isOutside) {
+            setShown(false);
+            return;
+        }
+        if (!codeDOMNode) {
+            return;
+        }
+        codeDOMNodeRef.current = codeDOMNode;
+        let codeNode = null;
+        let _lang = '';
+        editor.update(() => {
+            const maybeCodeNode = $getNearestNodeFromDOMNode(codeDOMNode);
+            if ($isCodeNode(maybeCodeNode)) {
+                codeNode = maybeCodeNode;
+                _lang = codeNode.getLanguage() || '';
+            }
+        });
+        if (codeNode) {
+            const { y: editorElemY, right: editorElemRight } = anchorElem.getBoundingClientRect();
+            const { y, right } = codeDOMNode.getBoundingClientRect();
+            setLang(_lang);
+            setShown(true);
+            setPosition({
+                right: `${editorElemRight - right + CODE_PADDING}px`,
+                top: `${y - editorElemY}px`,
+            });
+        }
+    }, 50, 1000);
+    useEffect(() => {
+        if (!shouldListenMouseMove) {
+            return;
+        }
+        document.addEventListener('mousemove', debouncedOnMouseMove);
+        return () => {
+            setShown(false);
+            debouncedOnMouseMove.cancel();
+            document.removeEventListener('mousemove', debouncedOnMouseMove);
+        };
+    }, [shouldListenMouseMove, debouncedOnMouseMove]);
+    useEffect(() => {
+        return editor.registerMutationListener(CodeNode, mutations => {
+            editor.getEditorState().read(() => {
+                for (const [key, type] of mutations) {
+                    switch (type) {
+                        case 'created':
+                            codeSetRef.current.add(key);
+                            break;
+                        case 'destroyed':
+                            codeSetRef.current.delete(key);
+                            break;
+                        default:
+                            break;
+                    }
+                }
+            });
+            setShouldListenMouseMove(codeSetRef.current.size > 0);
+        }, { skipInitialization: false });
+    }, [editor]);
+    const normalizedLang = normalizeCodeLang(lang);
+    const codeFriendlyName = getLanguageFriendlyName(lang);
+    return (_jsx(_Fragment, { children: isShown ? (_jsxs("div", { className: "code-action-menu-container", style: { ...position }, children: [_jsx("div", { className: "code-highlight-language", children: codeFriendlyName }), _jsx(CopyButton, { editor: editor, getCodeDOMNode: getCodeDOMNode }), canBePrettier(normalizedLang) ? (_jsx(PrettierButton, { editor: editor, getCodeDOMNode: getCodeDOMNode, lang: normalizedLang })) : null] })) : null }));
+}
+function getMouseInfo(event) {
+    const target = event.target;
+    if (isHTMLElement(target)) {
+        const codeDOMNode = target.closest('code.PlaygroundEditorTheme__code');
+        const isOutside = !(codeDOMNode ||
+            target.closest('div.code-action-menu-container'));
+        return { codeDOMNode, isOutside };
+    }
+    else {
+        return { codeDOMNode: null, isOutside: true };
+    }
+}
+export default function CodeActionMenuPlugin({ anchorElem = document.body, }) {
+    return createPortal(_jsx(CodeActionMenuContainer, { anchorElem: anchorElem }), anchorElem);
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.js.map
new file mode 100644
index 0000000..07dbf2b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/CodeActionMenuPlugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.d.ts
new file mode 100644
index 0000000..eb17fcb
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.d.ts
@@ -0,0 +1 @@
+export declare function useDebounce<T extends (...args: never[]) => void>(fn: T, ms: number, maxWait?: number): import("lodash").DebouncedFunc<(...args: Parameters<T>) => void>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.js
new file mode 100644
index 0000000..088ace3
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.js
@@ -0,0 +1,24 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ */
+import { debounce } from 'lodash-es';
+import { useMemo, useRef } from 'react';
+export function useDebounce(fn, ms, maxWait) {
+    const funcRef = useRef(null);
+    funcRef.current = fn;
+    return useMemo(() => debounce((...args) => {
+        if (funcRef.current) {
+            funcRef.current(...args);
+        }
+    }, ms, { maxWait }), [ms, maxWait]);
+}
+//# sourceMappingURL=utils.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.js.map
new file mode 100644
index 0000000..bea7348
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeActionMenuPlugin/utils.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/plugins/CodeActionMenuPlugin/utils.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AACH,OAAO,EAAE,QAAQ,EAAE,MAAM,WAAW,CAAC;AACrC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAExC,MAAM,UAAU,WAAW,CACzB,EAAK,EACL,EAAU,EACV,OAAgB;IAEhB,MAAM,OAAO,GAAG,MAAM,CAAW,IAAI,CAAC,CAAC;IACvC,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC;IAErB,OAAO,OAAO,CACZ,GAAG,EAAE,CACH,QAAQ,CACN,CAAC,GAAG,IAAmB,EAAE,EAAE;QACzB,IAAI,OAAO,CAAC,OAAO,EAAE,CAAC;YACpB,OAAO,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;QAC3B,CAAC;IACH,CAAC,EACD,EAAE,EACF,EAAE,OAAO,EAAE,CACZ,EACH,CAAC,EAAE,EAAE,OAAO,CAAC,CACd,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.d.ts
new file mode 100644
index 0000000..4d06f66
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.d.ts
@@ -0,0 +1,5 @@
+/**
+ * Plugin component that registers code highlighting and line number gutters for CodeNode blocks.
+ * This is separate from JupyterInputNode highlighting which is handled by JupyterInputOutputPlugin.
+ */
+export declare function CodeBlockHighlightPlugin(): null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.js
new file mode 100644
index 0000000..2f20c40
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.js
@@ -0,0 +1,97 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Plugin to add syntax highlighting and line numbers to regular code blocks (CodeNode).
+ *
+ * This plugin:
+ * 1. Registers Prism-based syntax highlighting using @lexical/code's registerCodeHighlighting
+ * 2. Adds line number gutters to code blocks via data-gutter attribute
+ *
+ * Note: JupyterInputNode has its own highlighting via JupyterInputHighlighter.
+ * This plugin only affects regular code blocks (type: "code").
+ */
+import { useEffect } from 'react';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { registerCodeHighlighting } from '@lexical/code';
+import { CodeNode } from '@lexical/code';
+import { $isLineBreakNode, $getRoot, $isElementNode } from 'lexical';
+/**
+ * Update the gutter attribute on a code block to show line numbers.
+ * Similar to updateGutter in JupyterInputHighlighter.ts but for CodeNode.
+ */
+function updateCodeGutter(node, editor) {
+    const codeElement = editor.getElementByKey(node.getKey());
+    if (codeElement === null) {
+        return;
+    }
+    const children = node.getChildren();
+    const childrenLength = children.length;
+    // @ts-expect-error: internal field for caching
+    if (childrenLength === codeElement.__cachedChildrenLength) {
+        // Avoid updating the attribute if the children length hasn't changed.
+        return;
+    }
+    // @ts-expect-error: internal field for caching
+    codeElement.__cachedChildrenLength = childrenLength;
+    // Generate gutter line numbers
+    let gutter = '1';
+    let count = 1;
+    for (let i = 0; i < childrenLength; i++) {
+        if ($isLineBreakNode(children[i])) {
+            gutter += '\n' + ++count;
+        }
+    }
+    codeElement.setAttribute('data-gutter', gutter);
+}
+/**
+ * Recursively find all CodeNode instances in the editor tree
+ */
+function findAllCodeNodes(node) {
+    const codeNodes = [];
+    if (node instanceof CodeNode) {
+        codeNodes.push(node);
+    }
+    if ($isElementNode(node)) {
+        const children = node.getChildren();
+        for (const child of children) {
+            if ($isElementNode(child)) {
+                codeNodes.push(...findAllCodeNodes(child));
+            }
+        }
+    }
+    return codeNodes;
+}
+/**
+ * Plugin component that registers code highlighting and line number gutters for CodeNode blocks.
+ * This is separate from JupyterInputNode highlighting which is handled by JupyterInputOutputPlugin.
+ */
+export function CodeBlockHighlightPlugin() {
+    const [editor] = useLexicalComposerContext();
+    useEffect(() => {
+        // Register syntax highlighting with Prism
+        const removeHighlighting = registerCodeHighlighting(editor);
+        // Register node transform to update line number gutters
+        const removeGutterTransform = editor.registerNodeTransform(CodeNode, (node) => {
+            updateCodeGutter(node, editor);
+        });
+        // Process existing CodeNode blocks immediately
+        editor.getEditorState().read(() => {
+            const root = $getRoot();
+            const codeNodes = findAllCodeNodes(root);
+            // Trigger gutter updates for each existing CodeNode
+            codeNodes.forEach(node => {
+                updateCodeGutter(node, editor);
+            });
+        });
+        // Cleanup on unmount
+        return () => {
+            removeHighlighting();
+            removeGutterTransform();
+        };
+    }, [editor]);
+    return null;
+}
+//# sourceMappingURL=CodeHighlightPlugin.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.js.map
new file mode 100644
index 0000000..2fd9bbe
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CodeHighlightPlugin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"CodeHighlightPlugin.js","sourceRoot":"","sources":["../../src/plugins/CodeHighlightPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/Collapsible.css b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/Collapsible.css
new file mode 100644
index 0000000..4db824e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/Collapsible.css
@@ -0,0 +1,115 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+/**
+ * Generic collapsible styles - theme-agnostic
+ * Environment-specific overrides should be added separately
+ */
+
+.Collapsible__container {
+  background: #f8f8f8;
+  border: 1px solid #e0e0e0;
+  border-radius: 6px;
+  margin: 12px 0;
+  padding: 0;
+  overflow: hidden;
+}
+
+.Collapsible__title {
+  cursor: pointer;
+  padding: 12px 12px 12px 36px;
+  position: relative;
+  font-weight: 600;
+  font-size: 14px;
+  /* Aggressively remove list styling */
+  list-style: none;
+  list-style-type: none;
+  display: block;
+  outline: none;
+  color: #333;
+  user-select: none;
+  transition: background-color 0.15s ease;
+  margin: 0;
+  /* Remove browser default summary styling */
+  -webkit-appearance: none;
+  -moz-appearance: none;
+  appearance: none;
+}
+
+.Collapsible__title:hover {
+  background-color: rgba(0, 0, 0, 0.04);
+}
+
+/* Remove default paragraph margins inside title */
+.Collapsible__title p {
+  margin: 0 !important;
+  padding: 0 !important;
+  display: inline;
+}
+
+/* Aggressively hide default details marker */
+.Collapsible__title::marker,
+.Collapsible__title::-webkit-details-marker {
+  display: none !important;
+  content: none !important;
+}
+
+/* Remove the marker in all possible ways */
+summary.Collapsible__title {
+  list-style: none;
+}
+
+summary.Collapsible__title::-webkit-details-marker {
+  display: none;
+}
+
+summary.Collapsible__title::marker {
+  display: none;
+}
+
+/* Arrow icon - right arrow when closed () */
+.Collapsible__title::before {
+  content: '';
+  position: absolute;
+  left: 14px;
+  top: 50%;
+  transform: translateY(-50%);
+  font-size: 12px;
+  color: #555;
+  transition: all 0.15s ease;
+  opacity: 0.9;
+  display: inline-block;
+  width: 12px;
+  height: 12px;
+  line-height: 12px;
+  text-align: center;
+}
+
+/* Arrow icon - down arrow when open () */
+.Collapsible__container[open] > .Collapsible__title::before {
+  content: '';
+  opacity: 1;
+}
+
+/* Content area */
+.Collapsible__content {
+  padding: 12px 16px 16px 36px;
+}
+
+/* Remove default paragraph margins inside content */
+.Collapsible__content > p:first-child {
+  margin-top: 0;
+}
+
+.Collapsible__content > p:last-child {
+  margin-bottom: 0;
+}
+
+/* Collapsed state (for Chrome workaround) */
+.Collapsible__collapsed .Collapsible__content {
+  display: none;
+  user-select: none;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.d.ts
new file mode 100644
index 0000000..7f27fb2
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.d.ts
@@ -0,0 +1,25 @@
+import { DOMConversionMap, DOMConversionOutput, DOMExportOutput, EditorConfig, ElementNode, LexicalEditor, LexicalNode, NodeKey, RangeSelection, SerializedElementNode, Spread } from 'lexical';
+type SerializedCollapsibleContainerNode = Spread<{
+    open: boolean;
+}, SerializedElementNode>;
+export declare function $convertDetailsElement(domNode: HTMLDetailsElement): DOMConversionOutput | null;
+export declare class CollapsibleContainerNode extends ElementNode {
+    __open: boolean;
+    constructor(open: boolean, key?: NodeKey);
+    static getType(): string;
+    static clone(node: CollapsibleContainerNode): CollapsibleContainerNode;
+    isShadowRoot(): boolean;
+    collapseAtStart(_selection: RangeSelection): boolean;
+    createDOM(config: EditorConfig, editor: LexicalEditor): HTMLElement;
+    updateDOM(prevNode: this, dom: HTMLDetailsElement): boolean;
+    static importDOM(): DOMConversionMap<HTMLDetailsElement> | null;
+    static importJSON(serializedNode: SerializedCollapsibleContainerNode): CollapsibleContainerNode;
+    exportDOM(): DOMExportOutput;
+    exportJSON(): SerializedCollapsibleContainerNode;
+    setOpen(open: boolean): void;
+    getOpen(): boolean;
+    toggleOpen(): void;
+}
+export declare function $createCollapsibleContainerNode(isOpen: boolean): CollapsibleContainerNode;
+export declare function $isCollapsibleContainerNode(node: LexicalNode | null | undefined): node is CollapsibleContainerNode;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.js
new file mode 100644
index 0000000..d8a30c9
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.js
@@ -0,0 +1,137 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { IS_CHROME } from '@lexical/utils';
+import { $getSiblingCaret, $isElementNode, $rewindSiblingCaret, ElementNode, isHTMLElement, } from 'lexical';
+import { setDomHiddenUntilFound } from './CollapsibleUtils';
+export function $convertDetailsElement(domNode) {
+    const isOpen = domNode.open !== undefined ? domNode.open : true;
+    const node = $createCollapsibleContainerNode(isOpen);
+    return {
+        node,
+    };
+}
+export class CollapsibleContainerNode extends ElementNode {
+    __open;
+    constructor(open, key) {
+        super(key);
+        this.__open = open;
+    }
+    static getType() {
+        return 'collapsible-container';
+    }
+    static clone(node) {
+        return new CollapsibleContainerNode(node.__open, node.__key);
+    }
+    isShadowRoot() {
+        return true;
+    }
+    collapseAtStart(_selection) {
+        // Unwrap the CollapsibleContainerNode by replacing it with the children
+        // of its children (CollapsibleTitleNode, CollapsibleContentNode)
+        const nodesToInsert = [];
+        for (const child of this.getChildren()) {
+            if ($isElementNode(child)) {
+                nodesToInsert.push(...child.getChildren());
+            }
+        }
+        const caret = $rewindSiblingCaret($getSiblingCaret(this, 'previous'));
+        caret.splice(1, nodesToInsert);
+        // Merge the first child of the CollapsibleTitleNode with the
+        // previous sibling of the CollapsibleContainerNode
+        const [firstChild] = nodesToInsert;
+        if (firstChild) {
+            firstChild.selectStart().deleteCharacter(true);
+        }
+        return true;
+    }
+    createDOM(config, editor) {
+        // details is not well supported in Chrome #5582
+        let dom;
+        if (IS_CHROME) {
+            dom = document.createElement('div');
+            dom.setAttribute('open', '');
+        }
+        else {
+            const detailsDom = document.createElement('details');
+            detailsDom.open = this.__open;
+            detailsDom.addEventListener('toggle', () => {
+                const open = editor.getEditorState().read(() => this.getOpen());
+                if (open !== detailsDom.open) {
+                    editor.update(() => this.toggleOpen());
+                }
+            });
+            dom = detailsDom;
+        }
+        dom.classList.add('Collapsible__container');
+        return dom;
+    }
+    updateDOM(prevNode, dom) {
+        const currentOpen = this.__open;
+        if (prevNode.__open !== currentOpen) {
+            // details is not well supported in Chrome #5582
+            if (IS_CHROME) {
+                const contentDom = dom.children[1];
+                if (!isHTMLElement(contentDom)) {
+                    throw new Error('Expected contentDom to be an HTMLElement');
+                }
+                if (currentOpen) {
+                    dom.setAttribute('open', '');
+                    contentDom.hidden = false;
+                }
+                else {
+                    dom.removeAttribute('open');
+                    setDomHiddenUntilFound(contentDom);
+                }
+            }
+            else {
+                dom.open = this.__open;
+            }
+        }
+        return false;
+    }
+    static importDOM() {
+        return {
+            details: (_domNode) => {
+                return {
+                    conversion: $convertDetailsElement,
+                    priority: 1,
+                };
+            },
+        };
+    }
+    static importJSON(serializedNode) {
+        return $createCollapsibleContainerNode(serializedNode.open).updateFromJSON(serializedNode);
+    }
+    exportDOM() {
+        const element = document.createElement('details');
+        element.classList.add('Collapsible__container');
+        element.setAttribute('open', this.__open.toString());
+        return { element };
+    }
+    exportJSON() {
+        return {
+            ...super.exportJSON(),
+            open: this.__open,
+        };
+    }
+    setOpen(open) {
+        const writable = this.getWritable();
+        writable.__open = open;
+    }
+    getOpen() {
+        return this.getLatest().__open;
+    }
+    toggleOpen() {
+        this.setOpen(!this.getOpen());
+    }
+}
+export function $createCollapsibleContainerNode(isOpen) {
+    return new CollapsibleContainerNode(isOpen);
+}
+export function $isCollapsibleContainerNode(node) {
+    return node instanceof CollapsibleContainerNode;
+}
+//# sourceMappingURL=CollapsibleContainerNode.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.js.map
new file mode 100644
index 0000000..0c0ac54
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContainerNode.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"CollapsibleContainerNode.js","sourceRoot":"","sources":["../../../src/plugins/CollapsiblePlugin/CollapsibleContainerNode.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.d.ts
new file mode 100644
index 0000000..9e44cfb
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.d.ts
@@ -0,0 +1,16 @@
+import { DOMConversionMap, DOMConversionOutput, DOMExportOutput, EditorConfig, ElementNode, LexicalEditor, LexicalNode, SerializedElementNode } from 'lexical';
+type SerializedCollapsibleContentNode = SerializedElementNode;
+export declare function $convertCollapsibleContentElement(_domNode: HTMLElement): DOMConversionOutput | null;
+export declare class CollapsibleContentNode extends ElementNode {
+    static getType(): string;
+    static clone(node: CollapsibleContentNode): CollapsibleContentNode;
+    createDOM(config: EditorConfig, editor: LexicalEditor): HTMLElement;
+    updateDOM(_prevNode: this, _dom: HTMLElement): boolean;
+    static importDOM(): DOMConversionMap | null;
+    exportDOM(): DOMExportOutput;
+    static importJSON(serializedNode: SerializedCollapsibleContentNode): CollapsibleContentNode;
+    isShadowRoot(): boolean;
+}
+export declare function $createCollapsibleContentNode(): CollapsibleContentNode;
+export declare function $isCollapsibleContentNode(node: LexicalNode | null | undefined): node is CollapsibleContentNode;
+export {};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.js
new file mode 100644
index 0000000..98de42e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.js
@@ -0,0 +1,85 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { IS_CHROME } from '@lexical/utils';
+import { ElementNode, } from 'lexical';
+import { $isCollapsibleContainerNode } from './CollapsibleContainerNode';
+import { domOnBeforeMatch, setDomHiddenUntilFound } from './CollapsibleUtils';
+export function $convertCollapsibleContentElement(_domNode) {
+    const node = $createCollapsibleContentNode();
+    return {
+        node,
+    };
+}
+export class CollapsibleContentNode extends ElementNode {
+    static getType() {
+        return 'collapsible-content';
+    }
+    static clone(node) {
+        return new CollapsibleContentNode(node.__key);
+    }
+    createDOM(config, editor) {
+        const dom = document.createElement('div');
+        dom.classList.add('Collapsible__content');
+        if (IS_CHROME) {
+            editor.getEditorState().read(() => {
+                const containerNode = this.getParentOrThrow();
+                if (!$isCollapsibleContainerNode(containerNode)) {
+                    throw new Error('Expected parent node to be a CollapsibleContainerNode');
+                }
+                if (!containerNode.__open) {
+                    setDomHiddenUntilFound(dom);
+                }
+            });
+            domOnBeforeMatch(dom, () => {
+                editor.update(() => {
+                    const containerNode = this.getParentOrThrow().getLatest();
+                    if (!$isCollapsibleContainerNode(containerNode)) {
+                        throw new Error('Expected parent node to be a CollapsibleContainerNode');
+                    }
+                    if (!containerNode.__open) {
+                        containerNode.toggleOpen();
+                    }
+                });
+            });
+        }
+        return dom;
+    }
+    updateDOM(_prevNode, _dom) {
+        return false;
+    }
+    static importDOM() {
+        return {
+            div: (domNode) => {
+                if (!domNode.hasAttribute('data-lexical-collapsible-content')) {
+                    return null;
+                }
+                return {
+                    conversion: $convertCollapsibleContentElement,
+                    priority: 2,
+                };
+            },
+        };
+    }
+    exportDOM() {
+        const element = document.createElement('div');
+        element.classList.add('Collapsible__content');
+        element.setAttribute('data-lexical-collapsible-content', 'true');
+        return { element };
+    }
+    static importJSON(serializedNode) {
+        return $createCollapsibleContentNode().updateFromJSON(serializedNode);
+    }
+    isShadowRoot() {
+        return true;
+    }
+}
+export function $createCollapsibleContentNode() {
+    return new CollapsibleContentNode();
+}
+export function $isCollapsibleContentNode(node) {
+    return node instanceof CollapsibleContentNode;
+}
+//# sourceMappingURL=CollapsibleContentNode.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.js.map
new file mode 100644
index 0000000..c9d837c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleContentNode.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"CollapsibleContentNode.js","sourceRoot":"","sources":["../../../src/plugins/CollapsiblePlugin/CollapsibleContentNode.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.d.ts
new file mode 100644
index 0000000..1e24062
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.d.ts
@@ -0,0 +1,16 @@
+import { DOMConversionOutput, EditorConfig, ElementNode, LexicalEditor, LexicalNode, RangeSelection } from 'lexical';
+export declare function $convertSummaryElement(_domNode: HTMLElement): DOMConversionOutput | null;
+/** @noInheritDoc */
+export declare class CollapsibleTitleNode extends ElementNode {
+    /** @internal */
+    $config(): import("lexical").StaticNodeConfigRecord<"collapsible-title", {
+        $transform(node: CollapsibleTitleNode): void;
+        extends: typeof ElementNode;
+        importDOM: import("lexical").DOMConversionMap<HTMLElement>;
+    }>;
+    createDOM(config: EditorConfig, editor: LexicalEditor): HTMLElement;
+    updateDOM(_prevNode: this, _dom: HTMLElement): boolean;
+    insertNewAfter(_: RangeSelection, restoreSelection?: boolean): ElementNode;
+}
+export declare function $createCollapsibleTitleNode(): CollapsibleTitleNode;
+export declare function $isCollapsibleTitleNode(node: LexicalNode | null | undefined): node is CollapsibleTitleNode;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.js
new file mode 100644
index 0000000..7f63cbb
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.js
@@ -0,0 +1,87 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { IS_CHROME } from '@lexical/utils';
+import { $createParagraphNode, $isElementNode, buildImportMap, ElementNode, } from 'lexical';
+import { $isCollapsibleContainerNode } from './CollapsibleContainerNode';
+import { $isCollapsibleContentNode } from './CollapsibleContentNode';
+export function $convertSummaryElement(_domNode) {
+    const node = $createCollapsibleTitleNode();
+    return {
+        node,
+    };
+}
+/** @noInheritDoc */
+export class CollapsibleTitleNode extends ElementNode {
+    /** @internal */
+    $config() {
+        return this.config('collapsible-title', {
+            $transform(node) {
+                if (node.isEmpty()) {
+                    node.remove();
+                }
+            },
+            extends: ElementNode,
+            importDOM: buildImportMap({
+                summary: () => ({
+                    conversion: $convertSummaryElement,
+                    priority: 1,
+                }),
+            }),
+        });
+    }
+    createDOM(config, editor) {
+        const dom = document.createElement('summary');
+        dom.classList.add('Collapsible__title');
+        if (IS_CHROME) {
+            dom.addEventListener('click', () => {
+                editor.update(() => {
+                    const collapsibleContainer = this.getLatest().getParentOrThrow();
+                    if (!$isCollapsibleContainerNode(collapsibleContainer)) {
+                        throw new Error('Expected parent node to be a CollapsibleContainerNode');
+                    }
+                    collapsibleContainer.toggleOpen();
+                });
+            });
+        }
+        return dom;
+    }
+    updateDOM(_prevNode, _dom) {
+        return false;
+    }
+    insertNewAfter(_, restoreSelection = true) {
+        const containerNode = this.getParentOrThrow();
+        if (!$isCollapsibleContainerNode(containerNode)) {
+            throw new Error('CollapsibleTitleNode expects to be child of CollapsibleContainerNode');
+        }
+        if (containerNode.getOpen()) {
+            const contentNode = this.getNextSibling();
+            if (!$isCollapsibleContentNode(contentNode)) {
+                throw new Error('CollapsibleTitleNode expects to have CollapsibleContentNode sibling');
+            }
+            const firstChild = contentNode.getFirstChild();
+            if ($isElementNode(firstChild)) {
+                return firstChild;
+            }
+            else {
+                const paragraph = $createParagraphNode();
+                contentNode.append(paragraph);
+                return paragraph;
+            }
+        }
+        else {
+            const paragraph = $createParagraphNode();
+            containerNode.insertAfter(paragraph, restoreSelection);
+            return paragraph;
+        }
+    }
+}
+export function $createCollapsibleTitleNode() {
+    return new CollapsibleTitleNode();
+}
+export function $isCollapsibleTitleNode(node) {
+    return node instanceof CollapsibleTitleNode;
+}
+//# sourceMappingURL=CollapsibleTitleNode.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.js.map
new file mode 100644
index 0000000..4c8f877
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleTitleNode.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"CollapsibleTitleNode.js","sourceRoot":"","sources":["../../../src/plugins/CollapsiblePlugin/CollapsibleTitleNode.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.d.ts
new file mode 100644
index 0000000..39b72ca
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.d.ts
@@ -0,0 +1,2 @@
+export declare function setDomHiddenUntilFound(dom: HTMLElement): void;
+export declare function domOnBeforeMatch(dom: HTMLElement, callback: () => void): void;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.js
new file mode 100644
index 0000000..b5dc7ce
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.js
@@ -0,0 +1,14 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+export function setDomHiddenUntilFound(dom) {
+    // @ts-expect-error - TypeScript doesn't know about the 'until-found' value for HTMLElement.hidden (experimental HTML feature)
+    dom.hidden = 'until-found';
+}
+export function domOnBeforeMatch(dom, callback) {
+    // dom.onbeforematch = callback; // IGNORE
+    dom.addEventListener('beforematch', callback);
+}
+//# sourceMappingURL=CollapsibleUtils.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.js.map
new file mode 100644
index 0000000..0639c27
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/CollapsibleUtils.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"CollapsibleUtils.js","sourceRoot":"","sources":["../../../src/plugins/CollapsiblePlugin/CollapsibleUtils.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,MAAM,UAAU,sBAAsB,CAAC,GAAgB;IACrD,8HAA8H;IAC9H,GAAG,CAAC,MAAM,GAAG,aAAa,CAAC;AAC7B,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,GAAgB,EAAE,QAAoB;IACrE,0CAA0C;IAC1C,GAAG,CAAC,gBAAgB,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;AAChD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.d.ts
new file mode 100644
index 0000000..f97d88e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.d.ts
@@ -0,0 +1,7 @@
+import './Collapsible.css';
+export declare const INSERT_COLLAPSIBLE_COMMAND: import("lexical").LexicalCommand<void>;
+export { CollapsibleContainerNode, $createCollapsibleContainerNode, $isCollapsibleContainerNode, } from './CollapsibleContainerNode';
+export { CollapsibleContentNode, $createCollapsibleContentNode, $isCollapsibleContentNode, } from './CollapsibleContentNode';
+export { CollapsibleTitleNode, $createCollapsibleTitleNode, $isCollapsibleTitleNode, } from './CollapsibleTitleNode';
+export declare function CollapsiblePlugin(): null;
+export default CollapsiblePlugin;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.js
new file mode 100644
index 0000000..d81e363
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.js
@@ -0,0 +1,139 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import './Collapsible.css';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { $findMatchingParent, $insertNodeToNearestRoot, mergeRegister, } from '@lexical/utils';
+import { $createParagraphNode, $getSelection, $isRangeSelection, COMMAND_PRIORITY_LOW, createCommand, INSERT_PARAGRAPH_COMMAND, KEY_ARROW_DOWN_COMMAND, KEY_ARROW_LEFT_COMMAND, KEY_ARROW_RIGHT_COMMAND, KEY_ARROW_UP_COMMAND, } from 'lexical';
+import { useEffect } from 'react';
+import { $createCollapsibleContainerNode, $isCollapsibleContainerNode, CollapsibleContainerNode, } from './CollapsibleContainerNode';
+import { $createCollapsibleContentNode, $isCollapsibleContentNode, CollapsibleContentNode, } from './CollapsibleContentNode';
+import { $createCollapsibleTitleNode, $isCollapsibleTitleNode, CollapsibleTitleNode, } from './CollapsibleTitleNode';
+export const INSERT_COLLAPSIBLE_COMMAND = createCommand('INSERT_COLLAPSIBLE_COMMAND');
+// Re-export node classes and utilities
+export { CollapsibleContainerNode, $createCollapsibleContainerNode, $isCollapsibleContainerNode, } from './CollapsibleContainerNode';
+export { CollapsibleContentNode, $createCollapsibleContentNode, $isCollapsibleContentNode, } from './CollapsibleContentNode';
+export { CollapsibleTitleNode, $createCollapsibleTitleNode, $isCollapsibleTitleNode, } from './CollapsibleTitleNode';
+export function CollapsiblePlugin() {
+    const [editor] = useLexicalComposerContext();
+    useEffect(() => {
+        if (!editor.hasNodes([
+            CollapsibleContainerNode,
+            CollapsibleTitleNode,
+            CollapsibleContentNode,
+        ])) {
+            throw new Error('CollapsiblePlugin: CollapsibleContainerNode, CollapsibleTitleNode, or CollapsibleContentNode not registered on editor');
+        }
+        const $onEscapeUp = () => {
+            const selection = $getSelection();
+            if ($isRangeSelection(selection) &&
+                selection.isCollapsed() &&
+                selection.anchor.offset === 0) {
+                const container = $findMatchingParent(selection.anchor.getNode(), $isCollapsibleContainerNode);
+                if ($isCollapsibleContainerNode(container)) {
+                    const parent = container.getParent();
+                    if (parent !== null &&
+                        parent.getFirstChild() === container &&
+                        selection.anchor.key === container.getFirstDescendant()?.getKey()) {
+                        container.insertBefore($createParagraphNode());
+                    }
+                }
+            }
+            return false;
+        };
+        const $onEscapeDown = () => {
+            const selection = $getSelection();
+            if ($isRangeSelection(selection) && selection.isCollapsed()) {
+                const container = $findMatchingParent(selection.anchor.getNode(), $isCollapsibleContainerNode);
+                if ($isCollapsibleContainerNode(container)) {
+                    const parent = container.getParent();
+                    if (parent !== null && parent.getLastChild() === container) {
+                        const titleParagraph = container.getFirstDescendant();
+                        const contentParagraph = container.getLastDescendant();
+                        if ((contentParagraph !== null &&
+                            selection.anchor.key === contentParagraph.getKey() &&
+                            selection.anchor.offset ===
+                                contentParagraph.getTextContentSize()) ||
+                            (titleParagraph !== null &&
+                                selection.anchor.key === titleParagraph.getKey() &&
+                                selection.anchor.offset === titleParagraph.getTextContentSize())) {
+                            container.insertAfter($createParagraphNode());
+                        }
+                    }
+                }
+            }
+            return false;
+        };
+        return mergeRegister(
+        // Structure enforcing transformers for each node type. In case nesting structure is not
+        // "Container > Title + Content" it'll unwrap nodes and convert it back
+        // to regular content.
+        editor.registerNodeTransform(CollapsibleContentNode, node => {
+            const parent = node.getParent();
+            if (!$isCollapsibleContainerNode(parent)) {
+                const children = node.getChildren();
+                for (const child of children) {
+                    node.insertBefore(child);
+                }
+                node.remove();
+            }
+        }), editor.registerNodeTransform(CollapsibleTitleNode, node => {
+            const parent = node.getParent();
+            if (!$isCollapsibleContainerNode(parent)) {
+                node.replace($createParagraphNode().append(...node.getChildren()));
+                return;
+            }
+        }), editor.registerNodeTransform(CollapsibleContainerNode, node => {
+            const children = node.getChildren();
+            if (children.length !== 2 ||
+                !$isCollapsibleTitleNode(children[0]) ||
+                !$isCollapsibleContentNode(children[1])) {
+                for (const child of children) {
+                    node.insertBefore(child);
+                }
+                node.remove();
+            }
+        }),
+        // When collapsible is the last child pressing down/right arrow will insert paragraph
+        // below it to allow adding more content. It's similar what $insertBlockNode
+        // (mainly for decorators), except it'll always be possible to continue adding
+        // new content even if trailing paragraph is accidentally deleted
+        editor.registerCommand(KEY_ARROW_DOWN_COMMAND, $onEscapeDown, COMMAND_PRIORITY_LOW), editor.registerCommand(KEY_ARROW_RIGHT_COMMAND, $onEscapeDown, COMMAND_PRIORITY_LOW),
+        // When collapsible is the first child pressing up/left arrow will insert paragraph
+        // above it to allow adding more content. It's similar what $insertBlockNode
+        // (mainly for decorators), except it'll always be possible to continue adding
+        // new content even if leading paragraph is accidentally deleted
+        editor.registerCommand(KEY_ARROW_UP_COMMAND, $onEscapeUp, COMMAND_PRIORITY_LOW), editor.registerCommand(KEY_ARROW_LEFT_COMMAND, $onEscapeUp, COMMAND_PRIORITY_LOW),
+        // Enter goes from Title to Content rather than a new line inside Title
+        editor.registerCommand(INSERT_PARAGRAPH_COMMAND, () => {
+            const selection = $getSelection();
+            if ($isRangeSelection(selection)) {
+                const titleNode = $findMatchingParent(selection.anchor.getNode(), node => $isCollapsibleTitleNode(node));
+                if ($isCollapsibleTitleNode(titleNode)) {
+                    const container = titleNode.getParent();
+                    if (container && $isCollapsibleContainerNode(container)) {
+                        if (!container.getOpen()) {
+                            container.toggleOpen();
+                        }
+                        titleNode.getNextSibling()?.selectEnd();
+                        return true;
+                    }
+                }
+            }
+            return false;
+        }, COMMAND_PRIORITY_LOW), editor.registerCommand(INSERT_COLLAPSIBLE_COMMAND, () => {
+            editor.update(() => {
+                const title = $createCollapsibleTitleNode();
+                const paragraph = $createParagraphNode();
+                $insertNodeToNearestRoot($createCollapsibleContainerNode(true).append(title.append(paragraph), $createCollapsibleContentNode().append($createParagraphNode())));
+                paragraph.select();
+            });
+            return true;
+        }, COMMAND_PRIORITY_LOW));
+    }, [editor]);
+    return null;
+}
+export default CollapsiblePlugin;
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.js.map
new file mode 100644
index 0000000..c087d07
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CollapsiblePlugin/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/CollapsiblePlugin/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.d.ts
index 5b53794..517541e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.d.ts
@@ -2,11 +2,9 @@ import type { LexicalCommand } from 'lexical';
 import type { Doc } from 'yjs';
 import { WebsocketProvider } from 'y-websocket';
 export declare const INSERT_INLINE_COMMAND: LexicalCommand<void>;
-export declare function CommentPlugin({ providerFactory, showCommentsPanel, showFloatingAddButton, showToggleButton, commentsPanelContainer, }: {
+export declare function CommentPlugin({ providerFactory, showFloatingAddButton, commentsPanelContainer, }: {
     providerFactory?: (id: string, yjsDocMap: Map<string, Doc>) => WebsocketProvider;
-    showCommentsPanel?: boolean;
     showFloatingAddButton?: boolean;
-    showToggleButton?: boolean;
     commentsPanelContainer?: HTMLElement;
 }): JSX.Element;
 export default CommentPlugin;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.js
index 739de6d..7f0ee8e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.js
@@ -25,10 +25,11 @@ import { PlainTextPlugin } from '@lexical/react/LexicalPlainTextPlugin';
 import { createDOMRange, createRectsFromDOMRange } from '@lexical/selection';
 import { $isRootTextContentEmpty, $rootTextContent } from '@lexical/text';
 import { mergeRegister, registerNestedElementResolver } from '@lexical/utils';
-import { CommentStore, createComment, createThread, useCommentStore, } from '../components/index.js';
-import CommentEditorTheme from '../themes/CommentEditorTheme.js';
-import { useModal, Button, LexicalContentEditable as ContentEditable, Placeholder, } from '../index.js';
-import { useLayoutEffectImpl as useLayoutEffect } from '../index.js';
+import { CommentStore, createComment, createThread, useCommentStore, } from '../components';
+import CommentEditorTheme from '../themes/CommentEditorTheme';
+import { useModal, Button, LexicalContentEditable as ContentEditable, Placeholder, } from '..';
+import { useLayoutEffectImpl as useLayoutEffect } from '..';
+import { useComments } from '../context/CommentsContext';
 export const INSERT_INLINE_COMMAND = createCommand();
 function AddCommentBox({ anchorKey, editor, onAddComment, }) {
     const boxRef = useRef(null);
@@ -278,8 +279,9 @@ function useCollabAuthorName() {
     // No longer checking yjsDocMap since we're using Loro, not Yjs
     return name || 'User';
 }
-export function CommentPlugin({ providerFactory, showCommentsPanel = true, showFloatingAddButton = true, showToggleButton = true, commentsPanelContainer, }) {
+export function CommentPlugin({ providerFactory, showFloatingAddButton = true, commentsPanelContainer, }) {
     const [editor] = useLexicalComposerContext();
+    const { showComments, setShowComments } = useComments();
     const commentStore = useMemo(() => new CommentStore(editor), [editor]);
     const comments = useCommentStore(commentStore);
     const markNodeMap = useMemo(() => {
@@ -288,11 +290,6 @@ export function CommentPlugin({ providerFactory, showCommentsPanel = true, showF
     const [activeAnchorKey, setActiveAnchorKey] = useState();
     const [activeIDs, setActiveIDs] = useState([]);
     const [showCommentInput, setShowCommentInput] = useState(false);
-    const [showComments, setShowComments] = useState(false);
-    // Sync external showCommentsPanel prop with internal showComments state
-    useEffect(() => {
-        setShowComments(showCommentsPanel);
-    }, [showCommentsPanel]);
     const cancelAddComment = useCallback(() => {
         editor.update(() => {
             const selection = $getSelection();
@@ -472,8 +469,7 @@ export function CommentPlugin({ providerFactory, showCommentsPanel = true, showF
                 activeAnchorKey !== null &&
                 activeAnchorKey !== undefined &&
                 !showCommentInput &&
-                createPortal(_jsx(AddCommentBox, { anchorKey: activeAnchorKey, editor: editor, onAddComment: onAddComment }), document.body), showToggleButton &&
-                createPortal(_jsx(Button, { className: `CommentPlugin_ShowCommentsButton ${showComments ? 'active' : ''}`, onClick: () => setShowComments(!showComments), title: showComments ? 'Hide Comments' : 'Show Comments', children: _jsx("i", { className: "comments" }) }), document.body), showComments &&
+                createPortal(_jsx(AddCommentBox, { anchorKey: activeAnchorKey, editor: editor, onAddComment: onAddComment }), document.body), showComments &&
                 createPortal(_jsx(CommentsPanel, { comments: comments, submitAddComment: submitAddComment, deleteCommentOrThread: deleteCommentOrThread, activeIDs: activeIDs, markNodeMap: markNodeMap }), commentsPanelContainer || document.body)] }));
 }
 export default CommentPlugin;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.js.map
index bf72357..62f15d8 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/CommentPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"CommentPlugin.js","sourceRoot":"","sources":["../../src/plugins/CommentPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"CommentPlugin.js","sourceRoot":"","sources":["../../src/plugins/CommentPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js
index 60c6e30..747fb69 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js
@@ -7,22 +7,24 @@ import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-run
 import { $createCodeNode } from '@lexical/code';
 import { INSERT_CHECK_LIST_COMMAND, INSERT_ORDERED_LIST_COMMAND, INSERT_UNORDERED_LIST_COMMAND, } from '@lexical/list';
 import { INSERT_EMBED_COMMAND } from '@lexical/react/LexicalAutoEmbedPlugin';
-// import { INSERT_JUPYTER_CELL_COMMAND } from './JupyINSERT_JUPYTER_CELL_COMMANDterCellPlugin.js';
-import { INSERT_JUPYTER_INPUT_OUTPUT_COMMAND, DEFAULT_INITIAL_OUTPUTS, } from './JupyterInputOutputPlugin.js';
+// import { INSERT_JUPYTER_CELL_COMMAND } from './JupyINSERT_JUPYTER_CELL_COMMANDterCellPlugin';
+import { INSERT_JUPYTER_INPUT_OUTPUT_COMMAND, DEFAULT_INITIAL_OUTPUTS, } from './JupyterInputOutputPlugin';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
 import { INSERT_HORIZONTAL_RULE_COMMAND } from '@lexical/react/LexicalHorizontalRuleNode';
 import { LexicalTypeaheadMenuPlugin, MenuOption, useBasicTypeaheadTriggerMatch, } from '@lexical/react/LexicalTypeaheadMenuPlugin';
 import { $createHeadingNode, $createQuoteNode } from '@lexical/rich-text';
 import { $setBlocksType } from '@lexical/selection';
-import { INSERT_TABLE_COMMAND } from '@lexical/table';
+import { INSERT_COLLAPSIBLE_COMMAND } from './CollapsiblePlugin';
+import { INSERT_EXCALIDRAW_COMMAND } from './ExcalidrawPlugin';
+import { INSERT_TABLE_WITH_DIALOG_COMMAND } from './TablePlugin';
 import { $createParagraphNode, $getSelection, $isRangeSelection, FORMAT_ELEMENT_COMMAND, } from 'lexical';
 import { useCallback, useMemo, useState } from 'react';
 import * as ReactDOM from 'react-dom';
-import useModal from '../hooks/useModal.js';
+import useModal from '../hooks/useModal';
 import catTypingGif from '../images/yellow-flower-small.jpg';
-import { EmbedConfigs } from './AutoEmbedPlugin.js';
-import { InsertEquationDialog } from './EquationsPlugin.js';
-import { INSERT_IMAGE_COMMAND, InsertImageDialog } from './ImagesPlugin.js';
+import { EmbedConfigs } from './AutoEmbedPlugin';
+import { InsertEquationDialog } from './EquationsPlugin';
+import { INSERT_IMAGE_COMMAND, InsertImageDialog } from './ImagesPlugin';
 class ComponentPickerOption extends MenuOption {
     // What shows up in the editor
     title;
@@ -81,9 +83,7 @@ export const ComponentPickerMenuPlugin = ({ kernel, initCode = '', } = {}) => {
             options.push(new ComponentPickerOption(`${rows}x${columns} Table`, {
                 icon: _jsx("i", { className: "icon table" }),
                 keywords: ['table'],
-                onSelect: () =>
-                // @ts-expect-error Correct types, but since they're dynamic TS doesn't like it.
-                editor.dispatchCommand(INSERT_TABLE_COMMAND, { columns, rows }),
+                onSelect: () => editor.dispatchCommand(INSERT_TABLE_WITH_DIALOG_COMMAND, undefined),
             }));
         }
         else if (partialTableMatch) {
@@ -91,9 +91,7 @@ export const ComponentPickerMenuPlugin = ({ kernel, initCode = '', } = {}) => {
             options.push(...Array.from({ length: 5 }, (_, i) => i + 1).map(columns => new ComponentPickerOption(`${rows}x${columns} Table`, {
                 icon: _jsx("i", { className: "icon table" }),
                 keywords: ['table'],
-                onSelect: () =>
-                // @ts-expect-error Correct types, but since they're dynamic TS doesn't like it.
-                editor.dispatchCommand(INSERT_TABLE_COMMAND, { columns, rows }),
+                onSelect: () => editor.dispatchCommand(INSERT_TABLE_WITH_DIALOG_COMMAND, undefined),
             })));
         }
         return options;
@@ -159,6 +157,35 @@ export const ComponentPickerMenuPlugin = ({ kernel, initCode = '', } = {}) => {
                 keywords: ['check list', 'todo list'],
                 onSelect: () => editor.dispatchCommand(INSERT_CHECK_LIST_COMMAND, undefined),
             }),
+            new ComponentPickerOption('Table', {
+                icon: _jsx("i", { className: "icon table" }),
+                keywords: ['table', 'grid', 'spreadsheet'],
+                onSelect: () => editor.dispatchCommand(INSERT_TABLE_WITH_DIALOG_COMMAND, undefined),
+            }),
+            new ComponentPickerOption('Collapsible Container', {
+                icon: _jsx("i", { className: "icon chevron-down" }),
+                keywords: [
+                    'collapsible',
+                    'collapse',
+                    'expand',
+                    'toggle',
+                    'accordion',
+                    'container',
+                ],
+                onSelect: () => editor.dispatchCommand(INSERT_COLLAPSIBLE_COMMAND, undefined),
+            }),
+            new ComponentPickerOption('Excalidraw', {
+                icon: _jsx("i", { className: "icon diagram-2" }),
+                keywords: [
+                    'excalidraw',
+                    'drawing',
+                    'diagram',
+                    'sketch',
+                    'whiteboard',
+                    'draw',
+                ],
+                onSelect: () => editor.dispatchCommand(INSERT_EXCALIDRAW_COMMAND, undefined),
+            }),
             new ComponentPickerOption('Quote', {
                 icon: _jsx("i", { className: "icon quote" }),
                 keywords: ['block quote'],
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js.map
index cf85b86..52de504 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"ComponentPickerMenuPlugin.js","sourceRoot":"","sources":["../../src/plugins/ComponentPickerMenuPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"ComponentPickerMenuPlugin.js","sourceRoot":"","sources":["../../src/plugins/ComponentPickerMenuPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js
index 824ea52..b485ad0 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js
@@ -10,7 +10,7 @@ import { $getNearestNodeFromDOMNode, $getNodeByKey, $getRoot, COMMAND_PRIORITY_H
 import { eventFiles } from '@lexical/rich-text';
 import { calculateZoomLevel, mergeRegister } from '@lexical/utils';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
-import { isHTMLElement, Point, Rect } from '../utils/index.js';
+import { isHTMLElement, Point, Rect } from '../utils';
 const SPACE = 4;
 const TARGET_LINE_HALF_HEIGHT = 2;
 const DRAGGABLE_BLOCK_MENU_CLASSNAME = 'draggable-block-menu';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/EquationsPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/EquationsPlugin.js
index 905e5e1..c4d0c1c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/EquationsPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/EquationsPlugin.js
@@ -9,8 +9,8 @@ import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext
 import { $wrapNodeInElement } from '@lexical/utils';
 import { $createParagraphNode, $insertNodes, $isRootOrShadowRoot, COMMAND_PRIORITY_EDITOR, createCommand, } from 'lexical';
 import { useCallback, useEffect } from 'react';
-import { $createEquationNode, EquationNode } from '../nodes/EquationNode.js';
-import KatexEquationAlterer from '../components/KatexEquationAlterer.js';
+import { $createEquationNode, EquationNode } from '../nodes/EquationNode';
+import KatexEquationAlterer from '../components/KatexEquationAlterer';
 export const INSERT_EQUATION_COMMAND = createCommand('INSERT_EQUATION_COMMAND');
 export function InsertEquationDialog({ activeEditor, onClose, }) {
     const onEquationConfirm = useCallback((equation, inline) => {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.d.ts
new file mode 100644
index 0000000..cdb6330
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.d.ts
@@ -0,0 +1,3 @@
+import type { LexicalCommand } from 'lexical';
+export declare const INSERT_EXCALIDRAW_COMMAND: LexicalCommand<void>;
+export declare function ExcalidrawPlugin(): JSX.Element | null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.js
new file mode 100644
index 0000000..451f14f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.js
@@ -0,0 +1,45 @@
+import { jsx as _jsx } from "react/jsx-runtime";
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { $insertNodes, $isRootOrShadowRoot, COMMAND_PRIORITY_EDITOR, createCommand, } from 'lexical';
+import { useEffect, useState } from 'react';
+import ExcalidrawModal from '../components/ExcalidrawModal';
+import { $createExcalidrawNode, ExcalidrawNode } from '../nodes/ExcalidrawNode';
+import { $wrapNodeInElement } from '@lexical/utils';
+import { $createParagraphNode } from 'lexical';
+export const INSERT_EXCALIDRAW_COMMAND = createCommand();
+export function ExcalidrawPlugin() {
+    const [editor] = useLexicalComposerContext();
+    const [isModalOpen, setModalOpen] = useState(false);
+    useEffect(() => {
+        if (!editor.hasNodes([ExcalidrawNode])) {
+            throw new Error('ExcalidrawPlugin: ExcalidrawNode not registered');
+        }
+        return editor.registerCommand(INSERT_EXCALIDRAW_COMMAND, () => {
+            setModalOpen(true);
+            return true;
+        }, COMMAND_PRIORITY_EDITOR);
+    }, [editor]);
+    const onSave = (elements, appState, files) => {
+        editor.update(() => {
+            const excalidrawNode = $createExcalidrawNode();
+            excalidrawNode.setData(JSON.stringify({
+                elements,
+                appState,
+                files,
+            }));
+            $insertNodes([excalidrawNode]);
+            if ($isRootOrShadowRoot(excalidrawNode.getParentOrThrow())) {
+                $wrapNodeInElement(excalidrawNode, $createParagraphNode).selectEnd();
+            }
+        });
+        setModalOpen(false);
+    };
+    const onDelete = () => {
+        setModalOpen(false);
+    };
+    const onClose = () => {
+        setModalOpen(false);
+    };
+    return isModalOpen ? (_jsx(ExcalidrawModal, { initialElements: [], initialAppState: {}, initialFiles: {}, isShown: isModalOpen, onSave: onSave, onDelete: onDelete, onClose: onClose, closeOnClickOutside: false })) : null;
+}
+//# sourceMappingURL=ExcalidrawPlugin.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.js.map
new file mode 100644
index 0000000..417f7cc
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ExcalidrawPlugin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ExcalidrawPlugin.js","sourceRoot":"","sources":["../../src/plugins/ExcalidrawPlugin.tsx"],"names":[],"mappings":";AAcA,OAAO,EAAE,yBAAyB,EAAE,MAAM,uCAAuC,CAAC;AAClF,OAAO,EACL,YAAY,EACZ,mBAAmB,EACnB,uBAAuB,EACvB,aAAa,GACd,MAAM,SAAS,CAAC;AACjB,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAE5C,OAAO,eAAe,MAAM,+BAA+B,CAAC;AAE5D,OAAO,EAAE,qBAAqB,EAAE,cAAc,EAAE,MAAM,yBAAyB,CAAC;AAEhF,OAAO,EAAE,kBAAkB,EAAE,MAAM,gBAAgB,CAAC;AACpD,OAAO,EAAE,oBAAoB,EAAE,MAAM,SAAS,CAAC;AAE/C,MAAM,CAAC,MAAM,yBAAyB,GAAyB,aAAa,EAAE,CAAC;AAE/E,MAAM,UAAU,gBAAgB;IAC9B,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAC7C,MAAM,CAAC,WAAW,EAAE,YAAY,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IAE7D,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC;YACvC,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAC;QACrE,CAAC;QAED,OAAO,MAAM,CAAC,eAAe,CAC3B,yBAAyB,EACzB,GAAG,EAAE;YACH,YAAY,CAAC,IAAI,CAAC,CAAC;YACnB,OAAO,IAAI,CAAC;QACd,CAAC,EACD,uBAAuB,CACxB,CAAC;IACJ,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,MAAM,MAAM,GAAG,CACb,QAAmC,EACnC,QAA2B,EAC3B,KAAkB,EAClB,EAAE;QACF,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;YACjB,MAAM,cAAc,GAAG,qBAAqB,EAAE,CAAC;YAC/C,cAAc,CAAC,OAAO,CACpB,IAAI,CAAC,SAAS,CAAC;gBACb,QAAQ;gBACR,QAAQ;gBACR,KAAK;aACN,CAAC,CACH,CAAC;YACF,YAAY,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;YAC/B,IAAI,mBAAmB,CAAC,cAAc,CAAC,gBAAgB,EAAE,CAAC,EAAE,CAAC;gBAC3D,kBAAkB,CAAC,cAAc,EAAE,oBAAoB,CAAC,CAAC,SAAS,EAAE,CAAC;YACvE,CAAC;QACH,CAAC,CAAC,CAAC;QACH,YAAY,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,MAAM,QAAQ,GAAG,GAAG,EAAE;QACpB,YAAY,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,MAAM,OAAO,GAAG,GAAG,EAAE;QACnB,YAAY,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,OAAO,WAAW,CAAC,CAAC,CAAC,CACnB,KAAC,eAAe,IACd,eAAe,EAAE,EAAE,EACnB,eAAe,EAAE,EAAc,EAC/B,YAAY,EAAE,EAAE,EAChB,OAAO,EAAE,WAAW,EACpB,MAAM,EAAE,MAAM,EACd,QAAQ,EAAE,QAAQ,EAClB,OAAO,EAAE,OAAO,EAChB,mBAAmB,EAAE,KAAK,GAC1B,CACH,CAAC,CAAC,CAAC,IAAI,CAAC;AACX,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.css b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.css
new file mode 100644
index 0000000..927b3e7
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.css
@@ -0,0 +1,156 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+.link-editor {
+  position: absolute;
+  top: 0;
+  left: 0;
+  z-index: 10;
+  max-width: 400px;
+  width: 100%;
+  opacity: 0;
+  background-color: var(--vscode-editorWidget-background, #fff);
+  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
+  border-radius: 8px;
+  transition: opacity 0.5s;
+  will-change: transform;
+}
+
+.link-editor .link-editor-row {
+  display: flex;
+  align-items: center;
+  gap: 8px;
+  padding: 8px 12px;
+}
+
+.link-editor .link-input {
+  flex: 1;
+  box-sizing: border-box;
+  padding: 8px 12px;
+  border-radius: 15px;
+  background-color: var(--vscode-input-background, #eee);
+  font-size: 15px;
+  color: var(--vscode-input-foreground, rgb(5, 5, 5));
+  border: 0;
+  outline: 0;
+  font-family: inherit;
+}
+
+.link-editor .link-view {
+  flex: 1;
+  padding: 8px 12px;
+  border-radius: 15px;
+  font-size: 15px;
+  color: var(--vscode-editorWidget-foreground, rgb(5, 5, 5));
+  border: 0;
+  outline: 0;
+  font-family: inherit;
+}
+
+.link-editor .link-view a {
+  display: block;
+  word-break: break-word;
+  width: 100%;
+  color: var(--vscode-textLink-foreground, rgb(33, 111, 219));
+  text-decoration: none;
+}
+
+.link-editor .link-view a:hover {
+  text-decoration: underline;
+}
+
+.link-editor div.link-edit {
+  border: 0;
+  background-color: transparent;
+  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="%23666" d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/></svg>');
+  background-size: 16px;
+  background-position: center;
+  background-repeat: no-repeat;
+  border-radius: 4px;
+  display: flex;
+  align-items: center;
+  justify-content: center;
+  height: 35px;
+  width: 35px;
+  cursor: pointer;
+  flex-shrink: 0;
+}
+
+.link-editor div.link-edit:hover {
+  background-color: var(
+    --vscode-toolbar-hoverBackground,
+    rgba(90, 93, 94, 0.1)
+  );
+}
+
+.link-editor div.link-trash {
+  border: 0;
+  background-color: transparent;
+  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23666" d="M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"/></svg>');
+  background-size: 16px;
+  background-position: center;
+  background-repeat: no-repeat;
+  border-radius: 4px;
+  display: flex;
+  align-items: center;
+  justify-content: center;
+  height: 35px;
+  width: 35px;
+  cursor: pointer;
+  flex-shrink: 0;
+}
+
+.link-editor div.link-trash:hover {
+  background-color: var(
+    --vscode-toolbar-hoverBackground,
+    rgba(90, 93, 94, 0.1)
+  );
+}
+
+.link-editor .link-cancel {
+  border: 0;
+  background-color: transparent;
+  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23666" d="M23 20.168l-8.185-8.187 8.185-8.174-2.832-2.807-8.182 8.179-8.176-8.179-2.81 2.81 8.186 8.196-8.186 8.184 2.81 2.81 8.203-8.192 8.18 8.192z"/></svg>');
+  background-size: 16px;
+  background-position: center;
+  background-repeat: no-repeat;
+  border-radius: 4px;
+  display: flex;
+  align-items: center;
+  justify-content: center;
+  height: 35px;
+  width: 35px;
+  cursor: pointer;
+  flex-shrink: 0;
+}
+
+.link-editor .link-cancel:hover {
+  background-color: var(
+    --vscode-toolbar-hoverBackground,
+    rgba(90, 93, 94, 0.1)
+  );
+}
+
+.link-editor .link-confirm {
+  border: 1px solid var(--vscode-button-border, #007acc);
+  background-color: var(--vscode-button-background, #007acc);
+  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23fff" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>');
+  background-size: 16px;
+  background-position: center;
+  background-repeat: no-repeat;
+  border-radius: 4px;
+  display: flex;
+  align-items: center;
+  justify-content: center;
+  height: 35px;
+  width: 35px;
+  cursor: pointer;
+  flex-shrink: 0;
+}
+
+.link-editor .link-confirm:hover {
+  background-color: var(--vscode-button-hoverBackground, #005a9e);
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.d.ts
new file mode 100644
index 0000000..8ae431c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.d.ts
@@ -0,0 +1,15 @@
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ */
+import type { JSX } from 'react';
+import './index.css';
+import { Dispatch } from 'react';
+export default function FloatingLinkEditorPlugin({ anchorElem, isLinkEditMode, setIsLinkEditMode, }: {
+    anchorElem?: HTMLElement;
+    isLinkEditMode: boolean;
+    setIsLinkEditMode: Dispatch<boolean>;
+}): JSX.Element | null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.js
new file mode 100644
index 0000000..d43f96f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.js
@@ -0,0 +1,317 @@
+import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
+import './index.css';
+import { $createLinkNode, $isAutoLinkNode, $isLinkNode, TOGGLE_LINK_COMMAND, } from '@lexical/link';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { $findMatchingParent, mergeRegister } from '@lexical/utils';
+import { $getSelection, $isLineBreakNode, $isNodeSelection, $isRangeSelection, CLICK_COMMAND, COMMAND_PRIORITY_CRITICAL, COMMAND_PRIORITY_HIGH, COMMAND_PRIORITY_LOW, getDOMSelection, KEY_ESCAPE_COMMAND, SELECTION_CHANGE_COMMAND, } from 'lexical';
+import { useCallback, useEffect, useRef, useState } from 'react';
+import { createPortal } from 'react-dom';
+import { getSelectedNode } from '../../utils/getSelectedNode';
+import { setFloatingElemPositionForLinkEditor } from '../../utils/setFloatingElemPositionForLinkEditor';
+import { sanitizeUrl } from '../../utils/url';
+function preventDefault(event) {
+    event.preventDefault();
+}
+function FloatingLinkEditor({ editor, isLink, setIsLink, anchorElem, isLinkEditMode, setIsLinkEditMode, }) {
+    const editorRef = useRef(null);
+    const inputRef = useRef(null);
+    const [linkUrl, setLinkUrl] = useState('');
+    const [editedLinkUrl, setEditedLinkUrl] = useState('https://');
+    const [lastSelection, setLastSelection] = useState(null);
+    const $updateLinkEditor = useCallback(() => {
+        const selection = $getSelection();
+        if ($isRangeSelection(selection)) {
+            const node = getSelectedNode(selection);
+            const linkParent = $findMatchingParent(node, $isLinkNode);
+            if (linkParent) {
+                setLinkUrl(linkParent.getURL());
+            }
+            else if ($isLinkNode(node)) {
+                setLinkUrl(node.getURL());
+            }
+            else {
+                setLinkUrl('');
+            }
+            if (isLinkEditMode) {
+                setEditedLinkUrl(linkUrl);
+            }
+        }
+        else if ($isNodeSelection(selection)) {
+            const nodes = selection.getNodes();
+            if (nodes.length > 0) {
+                const node = nodes[0];
+                const parent = node.getParent();
+                if ($isLinkNode(parent)) {
+                    setLinkUrl(parent.getURL());
+                }
+                else if ($isLinkNode(node)) {
+                    setLinkUrl(node.getURL());
+                }
+                else {
+                    setLinkUrl('');
+                }
+                if (isLinkEditMode) {
+                    setEditedLinkUrl(linkUrl);
+                }
+            }
+        }
+        const editorElem = editorRef.current;
+        const nativeSelection = getDOMSelection(editor._window);
+        const activeElement = document.activeElement;
+        if (editorElem === null) {
+            return;
+        }
+        const rootElement = editor.getRootElement();
+        // CRITICAL: If in edit mode, show the element regardless of selection state
+        // Selection might be null when creating new links, but we still need the input dialog
+        if (isLinkEditMode) {
+            // Position at a reasonable default location if we don't have selection
+            let domRect;
+            if (selection !== null && rootElement !== null) {
+                if ($isNodeSelection(selection)) {
+                    const nodes = selection.getNodes();
+                    if (nodes.length > 0) {
+                        const element = editor.getElementByKey(nodes[0].getKey());
+                        if (element) {
+                            domRect = element.getBoundingClientRect();
+                        }
+                    }
+                }
+                else if (nativeSelection !== null &&
+                    rootElement.contains(nativeSelection.anchorNode)) {
+                    domRect =
+                        nativeSelection.focusNode?.parentElement?.getBoundingClientRect();
+                }
+            }
+            if (domRect) {
+                domRect.y += 40;
+                setFloatingElemPositionForLinkEditor(domRect, editorElem, anchorElem);
+            }
+            setLastSelection(selection);
+        }
+        else if (isLink &&
+            selection !== null &&
+            rootElement !== null &&
+            editor.isEditable()) {
+            let domRect;
+            if ($isNodeSelection(selection)) {
+                const nodes = selection.getNodes();
+                if (nodes.length > 0) {
+                    const element = editor.getElementByKey(nodes[0].getKey());
+                    if (element) {
+                        domRect = element.getBoundingClientRect();
+                    }
+                }
+            }
+            else if (nativeSelection !== null &&
+                rootElement.contains(nativeSelection.anchorNode)) {
+                domRect =
+                    nativeSelection.focusNode?.parentElement?.getBoundingClientRect();
+            }
+            if (domRect) {
+                domRect.y += 40;
+                setFloatingElemPositionForLinkEditor(domRect, editorElem, anchorElem);
+            }
+            setLastSelection(selection);
+        }
+        else if (!activeElement || activeElement.className !== 'link-input') {
+            if (rootElement !== null) {
+                setFloatingElemPositionForLinkEditor(null, editorElem, anchorElem);
+            }
+            setLastSelection(null);
+            setLinkUrl('');
+        }
+        return true;
+    }, [anchorElem, editor, isLinkEditMode, linkUrl, isLink]);
+    useEffect(() => {
+        const scrollerElem = anchorElem.parentElement;
+        const update = () => {
+            editor.getEditorState().read(() => {
+                $updateLinkEditor();
+            });
+        };
+        window.addEventListener('resize', update);
+        if (scrollerElem) {
+            scrollerElem.addEventListener('scroll', update);
+        }
+        return () => {
+            window.removeEventListener('resize', update);
+            if (scrollerElem) {
+                scrollerElem.removeEventListener('scroll', update);
+            }
+        };
+    }, [anchorElem.parentElement, editor, $updateLinkEditor]);
+    useEffect(() => {
+        return mergeRegister(editor.registerUpdateListener(({ editorState }) => {
+            editorState.read(() => {
+                $updateLinkEditor();
+            });
+        }), editor.registerCommand(SELECTION_CHANGE_COMMAND, () => {
+            $updateLinkEditor();
+            return true;
+        }, COMMAND_PRIORITY_LOW), editor.registerCommand(KEY_ESCAPE_COMMAND, () => {
+            if (isLink) {
+                setIsLink(false);
+                return true;
+            }
+            return false;
+        }, COMMAND_PRIORITY_HIGH));
+    }, [editor, $updateLinkEditor, setIsLink, isLink]);
+    useEffect(() => {
+        editor.getEditorState().read(() => {
+            $updateLinkEditor();
+        });
+    }, [editor, $updateLinkEditor]);
+    useEffect(() => {
+        // Trigger positioning when entering edit mode or when link state changes
+        editor.getEditorState().read(() => {
+            $updateLinkEditor();
+        });
+    }, [editor, $updateLinkEditor, isLinkEditMode, isLink]);
+    useEffect(() => {
+        if (isLinkEditMode && inputRef.current) {
+            inputRef.current.focus();
+        }
+    }, [isLinkEditMode, isLink]);
+    useEffect(() => {
+        const editorElement = editorRef.current;
+        if (editorElement === null) {
+            return;
+        }
+        const handleBlur = (event) => {
+            // Only close the link viewer when clicking outside
+            // Don't reset isLinkEditMode here - let toolbar and buttons manage it
+            if (!editorElement.contains(event.relatedTarget) && isLink) {
+                setIsLink(false);
+            }
+        };
+        editorElement.addEventListener('focusout', handleBlur);
+        return () => {
+            editorElement.removeEventListener('focusout', handleBlur);
+        };
+    }, [editorRef, setIsLink, setIsLinkEditMode, isLink, isLinkEditMode]);
+    const monitorInputInteraction = (event) => {
+        if (event.key === 'Enter') {
+            handleLinkSubmission(event);
+        }
+        else if (event.key === 'Escape') {
+            event.preventDefault();
+            setIsLinkEditMode(false);
+        }
+    };
+    const handleLinkSubmission = (event) => {
+        event.preventDefault();
+        if (lastSelection !== null) {
+            if (linkUrl !== '') {
+                editor.update(() => {
+                    editor.dispatchCommand(TOGGLE_LINK_COMMAND, sanitizeUrl(editedLinkUrl));
+                    const selection = $getSelection();
+                    if ($isRangeSelection(selection)) {
+                        const parent = getSelectedNode(selection).getParent();
+                        if ($isAutoLinkNode(parent)) {
+                            const linkNode = $createLinkNode(parent.getURL(), {
+                                rel: parent.__rel,
+                                target: parent.__target,
+                                title: parent.__title,
+                            });
+                            parent.replace(linkNode, true);
+                        }
+                    }
+                });
+            }
+            setEditedLinkUrl('https://');
+            setIsLinkEditMode(false);
+        }
+    };
+    return (_jsx("div", { ref: editorRef, className: "link-editor", children: !isLink ? null : isLinkEditMode ? (_jsxs("div", { className: "link-editor-row", children: [_jsx("input", { ref: inputRef, className: "link-input", value: editedLinkUrl, onChange: event => {
+                        setEditedLinkUrl(event.target.value);
+                    }, onKeyDown: event => {
+                        monitorInputInteraction(event);
+                    } }), _jsx("div", { className: "link-cancel", role: "button", tabIndex: 0, onMouseDown: preventDefault, onClick: () => {
+                        setIsLinkEditMode(false);
+                    } }), _jsx("div", { className: "link-confirm", role: "button", tabIndex: 0, onMouseDown: preventDefault, onClick: handleLinkSubmission })] })) : (_jsxs("div", { className: "link-editor-row", children: [_jsx("div", { className: "link-view", children: _jsx("a", { href: sanitizeUrl(linkUrl), target: "_blank", rel: "noopener noreferrer", children: linkUrl }) }), _jsx("div", { className: "link-edit", role: "button", tabIndex: 0, onMouseDown: preventDefault, onClick: event => {
+                        event.preventDefault();
+                        setEditedLinkUrl(linkUrl);
+                        setIsLinkEditMode(true);
+                    } }), _jsx("div", { className: "link-trash", role: "button", tabIndex: 0, onMouseDown: preventDefault, onClick: () => {
+                        editor.dispatchCommand(TOGGLE_LINK_COMMAND, null);
+                    } })] })) }));
+}
+function useFloatingLinkEditorToolbar(editor, anchorElem, isLinkEditMode, setIsLinkEditMode) {
+    const [activeEditor, setActiveEditor] = useState(editor);
+    const [isLink, setIsLink] = useState(false);
+    useEffect(() => {
+        function $updateToolbar() {
+            const selection = $getSelection();
+            if ($isRangeSelection(selection)) {
+                const focusNode = getSelectedNode(selection);
+                const focusLinkNode = $findMatchingParent(focusNode, $isLinkNode);
+                const focusAutoLinkNode = $findMatchingParent(focusNode, $isAutoLinkNode);
+                if (!(focusLinkNode || focusAutoLinkNode)) {
+                    setIsLink(false);
+                    return;
+                }
+                const badNode = selection
+                    .getNodes()
+                    .filter(node => !$isLineBreakNode(node))
+                    .find(node => {
+                    const linkNode = $findMatchingParent(node, $isLinkNode);
+                    const autoLinkNode = $findMatchingParent(node, $isAutoLinkNode);
+                    return ((focusLinkNode && !focusLinkNode.is(linkNode)) ||
+                        (linkNode && !linkNode.is(focusLinkNode)) ||
+                        (focusAutoLinkNode && !focusAutoLinkNode.is(autoLinkNode)) ||
+                        (autoLinkNode &&
+                            (!autoLinkNode.is(focusAutoLinkNode) ||
+                                autoLinkNode.getIsUnlinked())));
+                });
+                if (!badNode) {
+                    setIsLink(true);
+                }
+                else {
+                    setIsLink(false);
+                }
+            }
+            else if ($isNodeSelection(selection)) {
+                const nodes = selection.getNodes();
+                if (nodes.length === 0) {
+                    setIsLink(false);
+                    return;
+                }
+                const node = nodes[0];
+                const parent = node.getParent();
+                if ($isLinkNode(parent) || $isLinkNode(node)) {
+                    setIsLink(true);
+                }
+                else {
+                    setIsLink(false);
+                }
+            }
+        }
+        return mergeRegister(editor.registerUpdateListener(({ editorState }) => {
+            editorState.read(() => {
+                $updateToolbar();
+            });
+        }), editor.registerCommand(SELECTION_CHANGE_COMMAND, (_payload, newEditor) => {
+            $updateToolbar();
+            setActiveEditor(newEditor);
+            return false;
+        }, COMMAND_PRIORITY_CRITICAL), editor.registerCommand(CLICK_COMMAND, payload => {
+            const selection = $getSelection();
+            if ($isRangeSelection(selection)) {
+                const node = getSelectedNode(selection);
+                const linkNode = $findMatchingParent(node, $isLinkNode);
+                if ($isLinkNode(linkNode) && (payload.metaKey || payload.ctrlKey)) {
+                    window.open(linkNode.getURL(), '_blank');
+                    return true;
+                }
+            }
+            return false;
+        }, COMMAND_PRIORITY_LOW));
+    }, [editor]);
+    return createPortal(_jsx(FloatingLinkEditor, { editor: activeEditor, isLink: isLink, anchorElem: anchorElem, setIsLink: setIsLink, isLinkEditMode: isLinkEditMode, setIsLinkEditMode: setIsLinkEditMode }), anchorElem);
+}
+export default function FloatingLinkEditorPlugin({ anchorElem = document.body, isLinkEditMode, setIsLinkEditMode, }) {
+    const [editor] = useLexicalComposerContext();
+    return useFloatingLinkEditorToolbar(editor, anchorElem, isLinkEditMode, setIsLinkEditMode);
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.js.map
new file mode 100644
index 0000000..a511cd3
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingLinkEditorPlugin/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/FloatingLinkEditorPlugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.d.ts
index 5b8fde6..b4ecb74 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.d.ts
@@ -1,4 +1,5 @@
-export declare function FloatingTextFormatToolbarPlugin({ anchorElem, }: {
+export declare function FloatingTextFormatToolbarPlugin({ anchorElem, setIsLinkEditMode, }: {
     anchorElem?: HTMLElement;
+    setIsLinkEditMode: (value: boolean) => void;
 }): JSX.Element | null;
 export default FloatingTextFormatToolbarPlugin;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.js
index 1b8ca9d..937dff7 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.js
@@ -16,20 +16,22 @@ import { mergeRegister } from '@lexical/utils';
 import { $getSelection, $isRangeSelection, $isTextNode, COMMAND_PRIORITY_LOW, FORMAT_TEXT_COMMAND, SELECTION_CHANGE_COMMAND, } from 'lexical';
 import { useCallback, useEffect, useRef, useState } from 'react';
 import { createPortal } from 'react-dom';
-import { getDOMRangeRect } from '../utils/index.js';
-import { getSelectedNode } from '../utils/index.js';
-import { setFloatingElemPosition } from '../utils/index.js';
-import { INSERT_INLINE_COMMAND } from './CommentPlugin.js';
-function TextFormatFloatingToolbar({ editor, anchorElem, isLink, isBold, isItalic, isUnderline, isCode, isStrikethrough, isSubscript, isSuperscript, }) {
+import { getDOMRangeRect } from '../utils';
+import { getSelectedNode } from '../utils';
+import { setFloatingElemPosition } from '../utils';
+import { INSERT_INLINE_COMMAND } from './CommentPlugin';
+function TextFormatFloatingToolbar({ editor, anchorElem, isLink, isBold, isItalic, isUnderline, isCode, isStrikethrough, isSubscript, isSuperscript, setIsLinkEditMode, }) {
     const popupCharStylesEditorRef = useRef(null);
     const insertLink = useCallback(() => {
         if (!isLink) {
-            editor.dispatchCommand(TOGGLE_LINK_COMMAND, 'https://');
+            setIsLinkEditMode(true);
+            editor.dispatchCommand(TOGGLE_LINK_COMMAND, 'https://example.com');
         }
         else {
+            setIsLinkEditMode(false);
             editor.dispatchCommand(TOGGLE_LINK_COMMAND, null);
         }
-    }, [editor, isLink]);
+    }, [editor, isLink, setIsLinkEditMode]);
     const insertComment = () => {
         editor.dispatchCommand(INSERT_INLINE_COMMAND, undefined);
     };
@@ -97,7 +99,7 @@ function TextFormatFloatingToolbar({ editor, anchorElem, isLink, isBold, isItali
                             editor.dispatchCommand(FORMAT_TEXT_COMMAND, 'code');
                         }, className: 'popup-item spaced ' + (isCode ? 'active' : ''), "aria-label": "Insert code block", children: _jsx("i", { className: "format code" }) }), _jsx("button", { onClick: insertLink, className: 'popup-item spaced ' + (isLink ? 'active' : ''), "aria-label": "Insert link", children: _jsx("i", { className: "format link" }) })] })), _jsx("button", { onClick: insertComment, className: 'popup-item spaced', "aria-label": "Insert comment", children: _jsx("i", { className: "format add-comment" }) })] }));
 }
-function useFloatingTextFormatToolbar(editor, anchorElem) {
+function useFloatingTextFormatToolbar(editor, anchorElem, setIsLinkEditMode) {
     const [isText, setIsText] = useState(false);
     const [isLink, setIsLink] = useState(false);
     const [isBold, setIsBold] = useState(false);
@@ -170,11 +172,11 @@ function useFloatingTextFormatToolbar(editor, anchorElem) {
     if (!isText || isLink) {
         return null;
     }
-    return createPortal(_jsx(TextFormatFloatingToolbar, { editor: editor, anchorElem: anchorElem, isLink: isLink, isBold: isBold, isItalic: isItalic, isStrikethrough: isStrikethrough, isSubscript: isSubscript, isSuperscript: isSuperscript, isUnderline: isUnderline, isCode: isCode }), anchorElem);
+    return createPortal(_jsx(TextFormatFloatingToolbar, { editor: editor, anchorElem: anchorElem, isLink: isLink, isBold: isBold, isItalic: isItalic, isStrikethrough: isStrikethrough, isSubscript: isSubscript, isSuperscript: isSuperscript, isUnderline: isUnderline, isCode: isCode, setIsLinkEditMode: setIsLinkEditMode }), anchorElem);
 }
-export function FloatingTextFormatToolbarPlugin({ anchorElem = document.body, }) {
+export function FloatingTextFormatToolbarPlugin({ anchorElem = document.body, setIsLinkEditMode, }) {
     const [editor] = useLexicalComposerContext();
-    return useFloatingTextFormatToolbar(editor, anchorElem);
+    return useFloatingTextFormatToolbar(editor, anchorElem, setIsLinkEditMode);
 }
 export default FloatingTextFormatToolbarPlugin;
 //# sourceMappingURL=FloatingTextFormatToolbarPlugin.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.js.map
index cb6b6d3..c85904b 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/FloatingTextFormatToolbarPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"FloatingTextFormatToolbarPlugin.js","sourceRoot":"","sources":["../../src/plugins/FloatingTextFormatToolbarPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"FloatingTextFormatToolbarPlugin.js","sourceRoot":"","sources":["../../src/plugins/FloatingTextFormatToolbarPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/HorizontalRulePlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/HorizontalRulePlugin.js.map
index be981fc..8aaa5e4 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/HorizontalRulePlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/HorizontalRulePlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"HorizontalRulePlugin.js","sourceRoot":"","sources":["../../src/plugins/HorizontalRulePlugin.tsx"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,EAAE,yBAAyB,EAAE,MAAM,uCAAuC,CAAC;AAClF,OAAO,EACL,yBAAyB,EACzB,8BAA8B,GAC/B,MAAM,0CAA0C,CAAC;AAClD,OAAO,EACL,aAAa,EACb,iBAAiB,EACjB,uBAAuB,GACxB,MAAM,SAAS,CAAC;AACjB,OAAO,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAElC,MAAM,CAAC,MAAM,oBAAoB,GAAG,GAAS,EAAE;IAC7C,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAE7C,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,MAAM,CAAC,eAAe,CAC3B,8BAA8B,EAC9B,IAAI,CAAC,EAAE;YACL,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;gBAClC,OAAO,KAAK,CAAC;YACf,CAAC;YACD,MAAM,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;YAC5C,IAAI,SAAS,KAAK,IAAI,EAAE,CAAC;gBACvB,MAAM,kBAAkB,GAAG,yBAAyB,EAAE,CAAC;gBACvD,SAAS,CAAC,eAAe,EAAE,CAAC;gBAC5B,SAAS,CAAC,KAAK;qBACZ,OAAO,EAAE;qBACT,yBAAyB,EAAE;qBAC3B,YAAY,CAAC,kBAAkB,CAAC,CAAC;YACtC,CAAC;YACD,OAAO,IAAI,CAAC;QACd,CAAC,EACD,uBAAuB,CACxB,CAAC;IACJ,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IACb,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,eAAe,oBAAoB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"HorizontalRulePlugin.js","sourceRoot":"","sources":["../../src/plugins/HorizontalRulePlugin.tsx"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,EAAE,yBAAyB,EAAE,MAAM,uCAAuC,CAAC;AAClF,OAAO,EACL,yBAAyB,EACzB,8BAA8B,GAC/B,MAAM,0CAA0C,CAAC;AAClD,OAAO,EACL,aAAa,EACb,iBAAiB,EACjB,uBAAuB,GAExB,MAAM,SAAS,CAAC;AACjB,OAAO,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAElC,MAAM,CAAC,MAAM,oBAAoB,GAAG,GAAS,EAAE;IAC7C,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAE7C,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,MAAM,CAAC,eAAe,CAC3B,8BAA8B,EAC9B,IAAI,CAAC,EAAE;YACL,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;gBAClC,OAAO,KAAK,CAAC;YACf,CAAC;YACD,MAAM,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;YAC5C,IAAI,SAAS,KAAK,IAAI,EAAE,CAAC;gBACvB,MAAM,kBAAkB,GACtB,yBAAyB,EAA4B,CAAC;gBACxD,SAAS,CAAC,eAAe,EAAE,CAAC;gBAC5B,SAAS,CAAC,KAAK;qBACZ,OAAO,EAAE;qBACT,yBAAyB,EAAE;qBAC3B,YAAY,CAAC,kBAAkB,CAAC,CAAC;YACtC,CAAC;YACD,OAAO,IAAI,CAAC;QACd,CAAC,EACD,uBAAuB,CACxB,CAAC;IACJ,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IACb,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,eAAe,oBAAoB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ImagesPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ImagesPlugin.js
index c9e0780..dd564e9 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ImagesPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ImagesPlugin.js
@@ -8,13 +8,13 @@ import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext
 import { $wrapNodeInElement, mergeRegister } from '@lexical/utils';
 import { $createParagraphNode, $createRangeSelection, $getSelection, $insertNodes, $isNodeSelection, $isRootOrShadowRoot, $setSelection, COMMAND_PRIORITY_EDITOR, COMMAND_PRIORITY_HIGH, COMMAND_PRIORITY_LOW, createCommand, DRAGOVER_COMMAND, DRAGSTART_COMMAND, DROP_COMMAND, } from 'lexical';
 import { useEffect, useRef, useState } from 'react';
-import { CAN_USE_DOM } from './../utils/canUseDOM.js';
+import { CAN_USE_DOM } from './../utils/canUseDOM';
 import yellowFlowerImage from '../images/yellow-flower-small.jpg';
-import { $createImageNode, $isImageNode, ImageNode, } from '../nodes/ImageNode.js';
-import Button from '../components/Button.js';
-import { DialogActions, DialogButtonsList } from '../components/Dialog.js';
-import FileInput from '../components/FileInput.js';
-import TextInput from '../components/TextInput.js';
+import { $createImageNode, $isImageNode, ImageNode, } from '../nodes/ImageNode';
+import Button from '../components/Button';
+import { DialogActions, DialogButtonsList } from '../components/Dialog';
+import FileInput from '../components/FileInput';
+import TextInput from '../components/TextInput';
 const getDOMSelection = (targetWindow) => CAN_USE_DOM ? (targetWindow || window).getSelection() : null;
 export const INSERT_IMAGE_COMMAND = createCommand('INSERT_IMAGE_COMMAND');
 export function InsertImageUriDialogBody({ onClick, }) {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.d.ts
index 4c4558c..f4f4564 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.d.ts
@@ -68,15 +68,15 @@ export interface InlineCompletionConfig {
     debounceMs: number;
     /**
      * Keyboard shortcut for manual trigger.
-     * Format: "Modifier+Key" (e.g., "Ctrl+Alt+I", "Cmd+Shift+K")
-     * @default 'Ctrl+Alt+I'
+     * Format: "Modifier+Key" (e.g., "Ctrl+Space", "Cmd+I")
+     * @default 'Ctrl+Space'
      */
     manualTriggerKey: string;
 }
 /**
  * Default configuration with user-approved settings.
  * - Code: Auto-trigger with entire document context
- * - Prose: Manual trigger (Ctrl+Alt+I) with entire document context
+ * - Prose: Manual trigger (Ctrl+Space) with entire document context
  */
 export declare const DEFAULT_CONFIG: InlineCompletionConfig;
 /**
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.js
index f1a0f6e..280e2a3 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.js
@@ -6,7 +6,7 @@
 /**
  * Default configuration with user-approved settings.
  * - Code: Auto-trigger with entire document context
- * - Prose: Manual trigger (Ctrl+Alt+I) with entire document context
+ * - Prose: Manual trigger (Ctrl+Space) with entire document context
  */
 export const DEFAULT_CONFIG = {
     code: {
@@ -21,7 +21,7 @@ export const DEFAULT_CONFIG = {
         contextAfter: -1, // Entire document
     },
     debounceMs: 200,
-    manualTriggerKey: 'Ctrl+Alt+I', // Cross-platform: Cmd+Option+I on Mac, Ctrl+Alt+I elsewhere
+    manualTriggerKey: 'Cmd+Shift+,', // Command+Shift+Comma (Mac-friendly, unlikely to conflict)
 };
 /**
  * Merge user configuration with defaults.
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.js.map
index f2730f9..31b8f48 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/InlineCompletionConfig.js.map
@@ -1 +1 @@
-{"version":3,"file":"InlineCompletionConfig.js","sourceRoot":"","sources":["../../src/plugins/InlineCompletionConfig.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAyFH;;;;GAIG;AACH,MAAM,CAAC,MAAM,cAAc,GAA2B;IACpD,IAAI,EAAE;QACJ,WAAW,EAAE,MAAM;QACnB,aAAa,EAAE,CAAC,CAAC,EAAE,kBAAkB;QACrC,YAAY,EAAE,CAAC,CAAC,EAAE,kBAAkB;QACpC,QAAQ,EAAE,QAAQ;KACnB;IACD,KAAK,EAAE;QACL,WAAW,EAAE,QAAQ;QACrB,aAAa,EAAE,CAAC,CAAC,EAAE,kBAAkB;QACrC,YAAY,EAAE,CAAC,CAAC,EAAE,kBAAkB;KACrC;IACD,UAAU,EAAE,GAAG;IACf,gBAAgB,EAAE,YAAY,EAAE,4DAA4D;CAC7F,CAAC;AAaF;;;;;;;;;;;;;;GAcG;AACH,MAAM,UAAU,WAAW,CACzB,UAA0C;IAE1C,IAAI,CAAC,UAAU,EAAE,CAAC;QAChB,OAAO,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,CAAC;IAED,OAAO;QACL,IAAI,EAAE;YACJ,GAAG,cAAc,CAAC,IAAI;YACtB,GAAG,UAAU,CAAC,IAAI;SACnB;QACD,KAAK,EAAE;YACL,GAAG,cAAc,CAAC,KAAK;YACvB,GAAG,UAAU,CAAC,KAAK;SACpB;QACD,UAAU,EAAE,UAAU,CAAC,UAAU,IAAI,cAAc,CAAC,UAAU;QAC9D,gBAAgB,EACd,UAAU,CAAC,gBAAgB,IAAI,cAAc,CAAC,gBAAgB;KACjE,CAAC;AACJ,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,mBAAmB,CAAC,KAAa;IAC/C,OAAO,KAAK,KAAK,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;AACpC,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,iBAAiB,CAAC,MAAyB;IACzD,OAAO,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC;AACvC,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,mBAAmB,CAAC,MAAyB;IAC3D,OAAO,MAAM,CAAC,WAAW,KAAK,QAAQ,IAAI,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC;AAC1E,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,UAAU,CAAC,MAAyB;IAClD,OAAO,MAAM,CAAC,WAAW,KAAK,UAAU,CAAC;AAC3C,CAAC"}
\ No newline at end of file
+{"version":3,"file":"InlineCompletionConfig.js","sourceRoot":"","sources":["../../src/plugins/InlineCompletionConfig.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAyFH;;;;GAIG;AACH,MAAM,CAAC,MAAM,cAAc,GAA2B;IACpD,IAAI,EAAE;QACJ,WAAW,EAAE,MAAM;QACnB,aAAa,EAAE,CAAC,CAAC,EAAE,kBAAkB;QACrC,YAAY,EAAE,CAAC,CAAC,EAAE,kBAAkB;QACpC,QAAQ,EAAE,QAAQ;KACnB;IACD,KAAK,EAAE;QACL,WAAW,EAAE,QAAQ;QACrB,aAAa,EAAE,CAAC,CAAC,EAAE,kBAAkB;QACrC,YAAY,EAAE,CAAC,CAAC,EAAE,kBAAkB;KACrC;IACD,UAAU,EAAE,GAAG;IACf,gBAAgB,EAAE,aAAa,EAAE,2DAA2D;CAC7F,CAAC;AAaF;;;;;;;;;;;;;;GAcG;AACH,MAAM,UAAU,WAAW,CACzB,UAA0C;IAE1C,IAAI,CAAC,UAAU,EAAE,CAAC;QAChB,OAAO,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,CAAC;IAED,OAAO;QACL,IAAI,EAAE;YACJ,GAAG,cAAc,CAAC,IAAI;YACtB,GAAG,UAAU,CAAC,IAAI;SACnB;QACD,KAAK,EAAE;YACL,GAAG,cAAc,CAAC,KAAK;YACvB,GAAG,UAAU,CAAC,KAAK;SACpB;QACD,UAAU,EAAE,UAAU,CAAC,UAAU,IAAI,cAAc,CAAC,UAAU;QAC9D,gBAAgB,EACd,UAAU,CAAC,gBAAgB,IAAI,cAAc,CAAC,gBAAgB;KACjE,CAAC;AACJ,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,mBAAmB,CAAC,KAAa;IAC/C,OAAO,KAAK,KAAK,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;AACpC,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,iBAAiB,CAAC,MAAyB;IACzD,OAAO,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC;AACvC,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,mBAAmB,CAAC,MAAyB;IAC3D,OAAO,MAAM,CAAC,WAAW,KAAK,QAAQ,IAAI,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC;AAC1E,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,UAAU,CAAC,MAAyB;IAClD,OAAO,MAAM,CAAC,WAAW,KAAK,UAAU,CAAC;AAC3C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterCellPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterCellPlugin.js
index 8fbd37b..361cba4 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterCellPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterCellPlugin.js
@@ -6,7 +6,7 @@
 import { useEffect } from 'react';
 import { $insertNodes, COMMAND_PRIORITY_EDITOR, createCommand } from 'lexical';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
-import { JupyterCellNode, $createJupyterCellNode, } from '../nodes/JupyterCellNode.js';
+import { JupyterCellNode, $createJupyterCellNode, } from '../nodes/JupyterCellNode';
 import '@jupyterlab/theme-light-extension/style/variables.css';
 export const INSERT_JUPYTER_CELL_COMMAND = createCommand();
 export function JupyterCellPlugin() {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js
index 10108d2..d2beb74 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js
@@ -8,10 +8,11 @@ import { $getSelection, $isRangeSelection, createCommand, COMMAND_PRIORITY_EDITO
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
 import { OutputAdapter, newUuid, } from '@datalayer/jupyter-react';
 import { UUID } from '@lumino/coreutils';
-import { createNoRuntimeWarning } from '../nodes/jupyterUtils.js';
-import { $createJupyterInputNode, JupyterInputNode, $isJupyterInputNode, } from '../nodes/JupyterInputNode.js';
-import { registerCodeHighlighting } from '../nodes/JupyterInputHighlighter.js';
-import { JupyterOutputNode, $createJupyterOutputNode, } from '../nodes/JupyterOutputNode.js';
+import { createNoRuntimeWarning } from '../nodes/jupyterUtils';
+import { $createJupyterInputNode, JupyterInputNode, $isJupyterInputNode, } from '../nodes/JupyterInputNode';
+import { $createJupyterInputHighlightNode } from '../nodes/JupyterInputHighlightNode';
+import { registerCodeHighlighting } from '../nodes/JupyterInputHighlighter';
+import { JupyterOutputNode, $createJupyterOutputNode, } from '../nodes/JupyterOutputNode';
 export const INPUT_UUID_TO_OUTPUT_KEY = new Map();
 export const INPUT_UUID_TO_CODE_KEY = new Map();
 export const INPUT_UUID_TO_OUTPUT_UUID = new Map();
@@ -380,22 +381,58 @@ export const JupyterInputOutputPlugin = (props) => {
     }, [editor]);
     useEffect(() => {
         return editor.registerCommand(INSERT_JUPYTER_INPUT_OUTPUT_COMMAND, (props) => {
+            console.log('[JupyterInputOutputPlugin]  INSERT_JUPYTER_INPUT_OUTPUT_COMMAND triggered');
+            console.log('[JupyterInputOutputPlugin] Props:', props);
             const { code, outputs } = props;
             const selection = $getSelection();
+            console.log('[JupyterInputOutputPlugin] Selection exists?', !!selection);
+            console.log('[JupyterInputOutputPlugin] Is RangeSelection?', $isRangeSelection(selection));
             if ($isRangeSelection(selection)) {
-                // Clear any existing selection content
-                selection.removeText();
-                // Create the input node with the code content
+                // Don't remove text - marker was already removed and selection is collapsed
+                // Create the input node
                 const jupyterCodeNode = $createJupyterInputNode('python');
                 const jupyterCodeUuid = jupyterCodeNode.getJupyterInputNodeUuid();
-                selection.insertNodes([jupyterCodeNode]);
-                // Add the code content to the input node
+                console.log('[JupyterInputOutputPlugin]  Created JupyterInputNode');
+                console.log('[JupyterInputOutputPlugin] Node UUID:', jupyterCodeUuid);
+                console.log('[JupyterInputOutputPlugin] Node type:', jupyterCodeNode.getType());
+                console.log('[JupyterInputOutputPlugin] Node children before append:', jupyterCodeNode.getChildrenSize());
+                // Add code content BEFORE inserting the node
                 if (code) {
-                    selection.insertRawText(code);
+                    console.log('[JupyterInputOutputPlugin]  Code provided, length:', code.length);
+                    console.log('[JupyterInputOutputPlugin] Code content:', code.substring(0, 100));
+                    // Create a JupyterInputHighlightNode with the code text
+                    const codeNode = $createJupyterInputHighlightNode(code);
+                    console.log('[JupyterInputOutputPlugin]  Created JupyterInputHighlightNode');
+                    console.log('[JupyterInputOutputPlugin] CodeNode type:', codeNode.getType());
+                    console.log('[JupyterInputOutputPlugin] CodeNode text length:', codeNode.getTextContent().length);
+                    jupyterCodeNode.append(codeNode);
+                    console.log('[JupyterInputOutputPlugin]  Appended code to JupyterInputNode');
+                    console.log('[JupyterInputOutputPlugin] Node children after append:', jupyterCodeNode.getChildrenSize());
+                    console.log('[JupyterInputOutputPlugin] Node text content:', jupyterCodeNode.getTextContent());
+                }
+                else {
+                    console.log('[JupyterInputOutputPlugin]  No code provided');
                 }
+                console.log('[JupyterInputOutputPlugin]  Inserting node into document...');
+                console.log('[JupyterInputOutputPlugin] Selection before insert:', {
+                    anchorKey: selection.anchor.key,
+                    anchorOffset: selection.anchor.offset,
+                    focusKey: selection.focus.key,
+                    focusOffset: selection.focus.offset,
+                });
+                // Now insert the complete node with its content
+                selection.insertNodes([jupyterCodeNode]);
+                console.log('[JupyterInputOutputPlugin]  Node inserted');
+                console.log('[JupyterInputOutputPlugin] Node key after insert:', jupyterCodeNode.getKey());
+                console.log('[JupyterInputOutputPlugin] Node parent:', jupyterCodeNode.getParent()?.getType());
                 // Create the output node with kernel (may be undefined - that's OK!)
+                console.log('[JupyterInputOutputPlugin]  Creating output node...');
+                console.log('[JupyterInputOutputPlugin] Kernel available?', !!kernel);
+                console.log('[JupyterInputOutputPlugin] Outputs:', outputs);
                 const outputAdapter = new OutputAdapter(newUuid(), kernel, outputs);
                 const jupyterOutputNode = $createJupyterOutputNode(code, outputAdapter, outputs || [], true, jupyterCodeUuid, UUID.uuid4());
+                console.log('[JupyterInputOutputPlugin]  Created JupyterOutputNode');
+                console.log('[JupyterInputOutputPlugin] Output node type:', jupyterOutputNode.getType());
                 outputAdapter.outputArea.model.changed.connect((outputModel, _args) => {
                     editor.update(() => {
                         jupyterOutputNode.setOutputs(outputModel.toJSON());
@@ -403,12 +440,22 @@ export const JupyterInputOutputPlugin = (props) => {
                 });
                 // Get the parent to insert the output node
                 const parent = jupyterCodeNode.getParent();
+                console.log('[JupyterInputOutputPlugin] Parent node:', parent?.getType());
                 if (parent) {
-                    // Insert the output node immediately after the input node
+                    console.log('[JupyterInputOutputPlugin]  Inserting output node after input node...');
                     jupyterCodeNode.insertAfter(jupyterOutputNode);
+                    console.log('[JupyterInputOutputPlugin]  Output node inserted');
+                }
+                else {
+                    console.log('[JupyterInputOutputPlugin]  No parent found, cannot insert output node');
                 }
                 // Position cursor at the beginning of the jupyter-input node
+                console.log('[JupyterInputOutputPlugin]  Positioning cursor...');
                 jupyterCodeNode.selectStart();
+                console.log('[JupyterInputOutputPlugin]  INSERT_JUPYTER_INPUT_OUTPUT_COMMAND completed successfully');
+            }
+            else {
+                console.log('[JupyterInputOutputPlugin]  Selection is not a RangeSelection');
             }
             return true;
         }, COMMAND_PRIORITY_EDITOR);
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js.map
index 8c9dbea..05442dd 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"JupyterInputOutputPlugin.js","sourceRoot":"","sources":["../../src/plugins/JupyterInputOutputPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"JupyterInputOutputPlugin.js","sourceRoot":"","sources":["../../src/plugins/JupyterInputOutputPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.d.ts
new file mode 100644
index 0000000..99c049d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.d.ts
@@ -0,0 +1,24 @@
+import type { LSPCompletionItem } from './lspTypes';
+/**
+ * Props for LSPCompletionMenu component
+ */
+export interface LSPCompletionMenuProps {
+    /** Completion items to display */
+    items: LSPCompletionItem[];
+    /** Callback when item is selected */
+    onSelect: (item: LSPCompletionItem) => void;
+    /** Callback when menu should close */
+    onClose: () => void;
+    /** Position for the menu (top, left in pixels) */
+    position: {
+        top: number;
+        left: number;
+    };
+    /** Filter text to highlight in labels */
+    filterText?: string;
+}
+/**
+ * Custom LSP completion dropdown menu.
+ * Renders at cursor position with keyboard navigation.
+ */
+export declare function LSPCompletionMenu({ items, onSelect, onClose, position: initialPosition, filterText, }: LSPCompletionMenuProps): JSX.Element;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.js
new file mode 100644
index 0000000..df29f39
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.js
@@ -0,0 +1,194 @@
+import { Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Custom dropdown menu for LSP completions.
+ * Positioned at cursor, keyboard navigable, simple and reliable.
+ *
+ * @module lexical/plugins/LSPCompletionMenu
+ */
+import { useEffect, useRef, useState } from 'react';
+/**
+ * Get icon for completion kind
+ */
+function getCompletionIcon(kind) {
+    switch (kind) {
+        case 1: // Method
+        case 2: // Function
+            return '';
+        case 5: // Variable
+            return '';
+        case 6: // Class
+            return 'C';
+        case 8: // Module
+            return 'M';
+        case 9: // Property
+            return '';
+        case 13: // Keyword
+            return '';
+        default:
+            return '';
+    }
+}
+/**
+ * Highlight matching text in label.
+ * Returns an array of React elements with matching portions emphasized.
+ */
+function highlightMatches(label, filterText) {
+    // If no filter, return plain text
+    if (!filterText || filterText.length === 0) {
+        return _jsx(_Fragment, { children: label });
+    }
+    const lowerLabel = label.toLowerCase();
+    const lowerFilter = filterText.toLowerCase();
+    const index = lowerLabel.indexOf(lowerFilter);
+    // If no match found, return plain text
+    if (index === -1) {
+        return _jsx(_Fragment, { children: label });
+    }
+    // Split into parts: before, match, after
+    const before = label.substring(0, index);
+    const match = label.substring(index, index + filterText.length);
+    const after = label.substring(index + filterText.length);
+    return (_jsxs(_Fragment, { children: [before, _jsx("strong", { style: {
+                    color: 'var(--vscode-editorSuggestWidget-highlightForeground)',
+                    fontWeight: 'bold',
+                }, children: match }), after] }));
+}
+/**
+ * Custom LSP completion dropdown menu.
+ * Renders at cursor position with keyboard navigation.
+ */
+export function LSPCompletionMenu({ items, onSelect, onClose, position: initialPosition, filterText, }) {
+    const [selectedIndex, setSelectedIndex] = useState(0);
+    const [position, setPosition] = useState(initialPosition);
+    const menuRef = useRef(null);
+    const itemRefs = useRef([]);
+    const anchorElementRef = useRef(null);
+    // Store the anchor element (cursor position) on mount
+    useEffect(() => {
+        const selection = window.getSelection();
+        if (selection && selection.rangeCount > 0) {
+            const range = selection.getRangeAt(0);
+            anchorElementRef.current = range.startContainer.parentElement;
+        }
+    }, []);
+    // Update position on scroll to keep menu anchored to cursor
+    useEffect(() => {
+        const updatePosition = () => {
+            const selection = window.getSelection();
+            if (!selection || selection.rangeCount === 0) {
+                return;
+            }
+            const range = selection.getRangeAt(0);
+            const rect = range.getBoundingClientRect();
+            setPosition({
+                top: rect.bottom + window.scrollY,
+                left: rect.left + window.scrollX,
+            });
+        };
+        // Listen for scroll events on all scrollable ancestors
+        window.addEventListener('scroll', updatePosition, true); // Use capture phase
+        return () => window.removeEventListener('scroll', updatePosition, true);
+    }, []);
+    // Scroll selected item into view
+    useEffect(() => {
+        const selectedItem = itemRefs.current[selectedIndex];
+        if (selectedItem) {
+            selectedItem.scrollIntoView({ block: 'nearest' });
+        }
+    }, [selectedIndex]);
+    // Handle keyboard navigation
+    useEffect(() => {
+        const handleKeyDown = (e) => {
+            switch (e.key) {
+                case 'ArrowDown':
+                    e.preventDefault();
+                    setSelectedIndex(prev => Math.min(prev + 1, items.length - 1));
+                    break;
+                case 'ArrowUp':
+                    e.preventDefault();
+                    setSelectedIndex(prev => Math.max(prev - 1, 0));
+                    break;
+                case 'Enter':
+                    e.preventDefault();
+                    if (items[selectedIndex]) {
+                        onSelect(items[selectedIndex]);
+                    }
+                    break;
+                case 'Escape':
+                    e.preventDefault();
+                    onClose();
+                    break;
+                case 'Tab':
+                    e.preventDefault();
+                    if (items[selectedIndex]) {
+                        onSelect(items[selectedIndex]);
+                    }
+                    break;
+            }
+        };
+        window.addEventListener('keydown', handleKeyDown);
+        return () => window.removeEventListener('keydown', handleKeyDown);
+    }, [selectedIndex, items, onSelect, onClose]);
+    // Close on click outside
+    useEffect(() => {
+        const handleClickOutside = (e) => {
+            if (menuRef.current && !menuRef.current.contains(e.target)) {
+                onClose();
+            }
+        };
+        document.addEventListener('mousedown', handleClickOutside);
+        return () => document.removeEventListener('mousedown', handleClickOutside);
+    }, [onClose]);
+    if (items.length === 0) {
+        return _jsx(_Fragment, {});
+    }
+    return (_jsx("div", { ref: menuRef, style: {
+            position: 'fixed',
+            top: `${position.top}px`,
+            left: `${position.left}px`,
+            zIndex: 10000,
+            background: 'var(--vscode-editorSuggestWidget-background)',
+            border: '1px solid var(--vscode-editorSuggestWidget-border)',
+            borderRadius: '4px',
+            boxShadow: '0 2px 8px rgba(0, 0, 0, 0.2)',
+            maxHeight: '300px',
+            overflowY: 'auto',
+            minWidth: '300px',
+        }, children: _jsx("ul", { style: {
+                listStyle: 'none',
+                margin: 0,
+                padding: '4px 0',
+            }, children: items.map((item, index) => {
+                const isSelected = index === selectedIndex;
+                return (_jsxs("li", { ref: el => {
+                        itemRefs.current[index] = el;
+                    }, onClick: () => onSelect(item), onMouseEnter: () => setSelectedIndex(index), style: {
+                        padding: '4px 8px',
+                        cursor: 'pointer',
+                        display: 'flex',
+                        alignItems: 'center',
+                        gap: '8px',
+                        backgroundColor: isSelected
+                            ? 'var(--vscode-editorSuggestWidget-selectedBackground)'
+                            : 'transparent',
+                        color: isSelected
+                            ? 'var(--vscode-editorSuggestWidget-selectedForeground)'
+                            : 'var(--vscode-editorSuggestWidget-foreground)',
+                    }, children: [_jsx("span", { style: {
+                                opacity: 0.7,
+                                fontSize: '12px',
+                                minWidth: '16px',
+                                textAlign: 'center',
+                            }, children: getCompletionIcon(item.kind) }), _jsx("span", { style: { flex: 1 }, children: highlightMatches(item.label, filterText) }), item.detail && (_jsx("span", { style: {
+                                fontSize: '11px',
+                                opacity: 0.6,
+                                marginLeft: 'auto',
+                            }, children: item.detail }))] }, `${item.label}-${index}`));
+            }) }) }));
+}
+//# sourceMappingURL=LSPCompletionMenu.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.js.map
new file mode 100644
index 0000000..596d996
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPCompletionMenu.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LSPCompletionMenu.js","sourceRoot":"","sources":["../../src/plugins/LSPCompletionMenu.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.d.ts
new file mode 100644
index 0000000..0fb2a47
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.d.ts
@@ -0,0 +1,37 @@
+import type { CellLanguage } from './lspTypes';
+/**
+ * Document event data
+ */
+export interface DocumentEventData {
+    /** Cell/node UUID */
+    cellId: string;
+    /** Document/notebook ID */
+    notebookId: string;
+    /** Cell content */
+    content: string;
+    /** Cell language */
+    language: CellLanguage;
+    /** Content version timestamp */
+    version: number;
+}
+/**
+ * LSP Document Sync Plugin props
+ */
+export interface LSPDocumentSyncPluginProps {
+    /** Lexical document ID */
+    lexicalId: string;
+    /** Callback when a new document should be opened */
+    onDocumentOpen?: (data: DocumentEventData) => void;
+    /** Callback when document content changes */
+    onDocumentSync?: (data: DocumentEventData) => void;
+    /** Callback when a document should be closed */
+    onDocumentClose?: (cellId: string) => void;
+    /** Disable the plugin */
+    disabled?: boolean;
+}
+/**
+ * LSP Document Sync Plugin.
+ * Monitors editor state and sends sync messages to extension host.
+ * Tracks JupyterInputNodes and sends open/sync/close messages for LSP analysis.
+ */
+export declare function LSPDocumentSyncPlugin({ lexicalId, onDocumentOpen, onDocumentSync, onDocumentClose, disabled, }: LSPDocumentSyncPluginProps): null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.js
new file mode 100644
index 0000000..620665f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.js
@@ -0,0 +1,133 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * LSP Document Sync Plugin for Lexical editor.
+ * Synchronizes JupyterInputNode content with extension host for LSP analysis.
+ * Sends document open/sync/close messages to keep temp files up to date.
+ *
+ * @module lexical/plugins/LSPDocumentSyncPlugin
+ */
+import { useEffect, useRef } from 'react';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { $getRoot, $isElementNode } from 'lexical';
+import { $isJupyterInputNode, } from '../nodes/JupyterInputNode';
+/**
+ * Detect cell language from JupyterInputNode
+ */
+function detectCellLanguage(node) {
+    const language = node.getLanguage();
+    if (!language) {
+        return 'python'; // Default to Python
+    }
+    // Map Prism language identifiers to LSP languages
+    if (language === 'python' || language === 'py') {
+        return 'python';
+    }
+    else if (language === 'markdown' ||
+        language === 'md' ||
+        language === 'text') {
+        return 'markdown';
+    }
+    return 'unknown';
+}
+/**
+ * LSP Document Sync Plugin.
+ * Monitors editor state and sends sync messages to extension host.
+ * Tracks JupyterInputNodes and sends open/sync/close messages for LSP analysis.
+ */
+export function LSPDocumentSyncPlugin({ lexicalId, onDocumentOpen, onDocumentSync, onDocumentClose, disabled = false, }) {
+    const [editor] = useLexicalComposerContext();
+    // Track known nodes to detect additions/removals
+    const trackedNodesRef = useRef(new Set());
+    // Stable refs for callbacks to prevent useEffect from re-running
+    const onDocumentOpenRef = useRef(onDocumentOpen);
+    const onDocumentSyncRef = useRef(onDocumentSync);
+    const onDocumentCloseRef = useRef(onDocumentClose);
+    // Update refs when callbacks change
+    useEffect(() => {
+        onDocumentOpenRef.current = onDocumentOpen;
+        onDocumentSyncRef.current = onDocumentSync;
+        onDocumentCloseRef.current = onDocumentClose;
+    }, [onDocumentOpen, onDocumentSync, onDocumentClose]);
+    useEffect(() => {
+        if (disabled) {
+            return;
+        }
+        // Shared function to scan and sync nodes
+        const scanAndSyncNodes = () => {
+            const root = $getRoot();
+            // Find all JupyterInputNodes in the document
+            const currentNodes = new Map();
+            function traverse(node) {
+                if ($isJupyterInputNode(node)) {
+                    const uuid = node.getJupyterInputNodeUuid();
+                    const content = node.getTextContent();
+                    const language = detectCellLanguage(node);
+                    // Only track Python and Markdown cells
+                    if (language === 'python' || language === 'markdown') {
+                        currentNodes.set(uuid, { uuid, content, language });
+                    }
+                }
+                if ($isElementNode(node)) {
+                    node.getChildren().forEach(traverse);
+                }
+            }
+            traverse(root);
+            // Send document-open for new nodes
+            for (const [uuid, nodeData] of currentNodes) {
+                if (!trackedNodesRef.current.has(uuid)) {
+                    // New node - call onDocumentOpen callback
+                    onDocumentOpenRef.current?.({
+                        cellId: nodeData.uuid,
+                        notebookId: lexicalId,
+                        content: nodeData.content,
+                        language: nodeData.language,
+                        version: Date.now(),
+                    });
+                    trackedNodesRef.current.add(uuid);
+                }
+                else {
+                    // Existing node - call onDocumentSync callback
+                    onDocumentSyncRef.current?.({
+                        cellId: nodeData.uuid,
+                        notebookId: lexicalId,
+                        content: nodeData.content,
+                        language: nodeData.language,
+                        version: Date.now(),
+                    });
+                }
+            }
+            // Send document-close for removed nodes
+            // TEMPORARILY DISABLED - Debug why traverse fails to find nodes
+            // const currentUuids = new Set(currentNodes.keys());
+            // for (const trackedUuid of trackedNodesRef.current) {
+            //   if (!currentUuids.has(trackedUuid)) {
+            //     onDocumentCloseRef.current?.(trackedUuid);
+            //     trackedNodesRef.current.delete(trackedUuid);
+            //   }
+            // }
+        };
+        //  PROACTIVE: Scan immediately on mount for fast completions!
+        // Don't wait for first editor update - Pylance needs time to analyze
+        editor.getEditorState().read(scanAndSyncNodes);
+        // Register update listener to sync on subsequent changes
+        const unregisterUpdateListener = editor.registerUpdateListener(({ editorState }) => {
+            editorState.read(scanAndSyncNodes);
+        });
+        return () => {
+            // Clean up on unmount
+            unregisterUpdateListener();
+            // Send close callbacks for all tracked nodes
+            // TEMPORARILY DISABLED - Testing if close messages are causing issues
+            // for (const uuid of trackedNodesRef.current) {
+            //   onDocumentCloseRef.current?.(uuid);
+            // }
+            trackedNodesRef.current.clear();
+        };
+    }, [editor, lexicalId, disabled]); // vscodeRef is stable, no need in deps
+    return null;
+}
+//# sourceMappingURL=LSPDocumentSyncPlugin.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.js.map
new file mode 100644
index 0000000..00d1c9a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPDocumentSyncPlugin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LSPDocumentSyncPlugin.js","sourceRoot":"","sources":["../../src/plugins/LSPDocumentSyncPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.d.ts
new file mode 100644
index 0000000..5a6a541
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.d.ts
@@ -0,0 +1,22 @@
+import { type LexicalCommand } from 'lexical';
+import type { ILSPCompletionProvider } from './lspTypes';
+/**
+ * Command to signal LSP completion menu state change.
+ * Payload: true = menu opened, false = menu closed
+ */
+export declare const LSP_MENU_STATE_COMMAND: LexicalCommand<boolean>;
+/**
+ * Command to signal LSP completion was inserted.
+ * Dispatched after inserting completion text to suppress inline completions.
+ */
+export declare const LSP_COMPLETION_INSERTED_COMMAND: LexicalCommand<void>;
+/**
+ * LSP Tab completion plugin props
+ */
+export interface LSPTabCompletionPluginProps {
+    /** LSP completion providers */
+    providers: ILSPCompletionProvider[];
+    /** Disable the plugin */
+    disabled?: boolean;
+}
+export declare function LSPTabCompletionPlugin({ providers, disabled, }: LSPTabCompletionPluginProps): JSX.Element | null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.js
new file mode 100644
index 0000000..32360ff
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.js
@@ -0,0 +1,388 @@
+import { jsx as _jsx } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * LSP Tab completion plugin for Lexical editor.
+ * Provides dropdown menu completions from Pylance and Markdown language servers.
+ * Triggered by Tab key or Ctrl+Space in code blocks.
+ *
+ * @module lexical/plugins/LSPTabCompletionPlugin
+ */
+import { useCallback, useEffect, useState, useRef } from 'react';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { $getSelection, $isRangeSelection, $isElementNode, COMMAND_PRIORITY_CRITICAL, KEY_TAB_COMMAND, createCommand, } from 'lexical';
+import { $isJupyterInputNode, } from '../nodes/JupyterInputNode';
+import { $isInlineCompletionNode } from '../nodes/InlineCompletionNode';
+import { LSPCompletionMenu } from './LSPCompletionMenu';
+/**
+ * Command to signal LSP completion menu state change.
+ * Payload: true = menu opened, false = menu closed
+ */
+export const LSP_MENU_STATE_COMMAND = createCommand('LSP_MENU_STATE_COMMAND');
+/**
+ * Command to signal LSP completion was inserted.
+ * Dispatched after inserting completion text to suppress inline completions.
+ */
+export const LSP_COMPLETION_INSERTED_COMMAND = createCommand('LSP_COMPLETION_INSERTED_COMMAND');
+/**
+ * Calculate absolute offset from start of JupyterInputNode to current selection position.
+ * selection.anchor.offset gives offset within current text node, not within entire node.
+ */
+function getAbsoluteOffset(jupyterInputNode, anchorNode, anchorOffset) {
+    // Walk through children to find cumulative offset
+    let cumulativeOffset = 0;
+    function traverse(node) {
+        if (node === anchorNode) {
+            // Found the anchor node - add its internal offset
+            cumulativeOffset += anchorOffset;
+            return true;
+        }
+        // If this is an element node, traverse its children
+        if ($isElementNode(node)) {
+            const children = node.getChildren();
+            for (const child of children) {
+                if (traverse(child)) {
+                    return true;
+                }
+            }
+        }
+        else {
+            // Text or other leaf node - add its length
+            cumulativeOffset += node.getTextContent().length;
+        }
+        return false;
+    }
+    // Start traversal from JupyterInputNode's children
+    const children = jupyterInputNode.getChildren();
+    for (const child of children) {
+        if (traverse(child)) {
+            break;
+        }
+    }
+    return cumulativeOffset;
+}
+/**
+ * Check if there's an active inline completion in the given JupyterInputNode.
+ * If inline completion is active, let it handle Tab (higher priority).
+ */
+function hasActiveInlineCompletion(parentNode) {
+    const children = parentNode.getChildren();
+    for (const child of children) {
+        if ($isInlineCompletionNode(child)) {
+            return true;
+        }
+    }
+    return false;
+}
+/**
+ * Find the JupyterInputNode parent of a node
+ */
+function findJupyterInputParent(node) {
+    let current = node;
+    while (current) {
+        if ($isJupyterInputNode(current)) {
+            return current;
+        }
+        current = current.getParent();
+    }
+    return null;
+}
+/**
+ * Convert character offset to line/character position
+ */
+function offsetToPosition(text, offset) {
+    let line = 0;
+    let character = 0;
+    for (let i = 0; i < offset && i < text.length; i++) {
+        if (text[i] === '\n') {
+            line++;
+            character = 0;
+        }
+        else {
+            character++;
+        }
+    }
+    return { line, character };
+}
+/**
+ * Detect cell language from JupyterInputNode
+ */
+function detectCellLanguage(node) {
+    const language = node.getLanguage();
+    if (!language) {
+        return 'python'; // Default to Python
+    }
+    // Map Prism language identifiers to LSP languages
+    if (language === 'python' || language === 'py') {
+        return 'python';
+    }
+    else if (language === 'markdown' ||
+        language === 'md' ||
+        language === 'text') {
+        return 'markdown';
+    }
+    return 'unknown';
+}
+/**
+ * LSP Tab completion plugin.
+ * Shows dropdown menu with LSP completions when Tab is pressed in code blocks.
+ * Coexists with inline LLM completions (inline takes precedence).
+ */
+/**
+ * Filter and sort completion items based on typed text.
+ * Prioritizes exact prefix matches over partial matches.
+ */
+function filterAndSortCompletions(items, filterText) {
+    if (!filterText) {
+        return items;
+    }
+    const lowerFilter = filterText.toLowerCase();
+    // Separate exact prefix matches from partial matches
+    const exactMatches = [];
+    const partialMatches = [];
+    for (const item of items) {
+        const searchText = (item.filterText || item.label).toLowerCase();
+        if (searchText.startsWith(lowerFilter)) {
+            exactMatches.push(item);
+        }
+        else if (searchText.includes(lowerFilter)) {
+            partialMatches.push(item);
+        }
+        // Non-matches are excluded
+    }
+    // Return exact matches first, then partial matches
+    return [...exactMatches, ...partialMatches];
+}
+export function LSPTabCompletionPlugin({ providers, disabled = false, }) {
+    const [editor] = useLexicalComposerContext();
+    const [allCompletions, setAllCompletions] = useState([]); // Cache all fetched completions
+    const [filteredCompletions, setFilteredCompletions] = useState([]); // Displayed completions
+    const [isMenuOpen, setIsMenuOpen] = useState(false);
+    const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 });
+    const [currentFilterText, setCurrentFilterText] = useState(''); // Current filter text for highlighting
+    // Track the cursor offset when menu first opens (to calculate filter text)
+    const menuOpenOffsetRef = useRef(0);
+    const jupyterInputNodeRef = useRef(null);
+    // Get cursor position for menu placement
+    const getCursorPosition = useCallback(() => {
+        const selection = window.getSelection();
+        if (!selection || selection.rangeCount === 0) {
+            return { top: 0, left: 0 };
+        }
+        const range = selection.getRangeAt(0);
+        const rect = range.getBoundingClientRect();
+        return {
+            top: rect.bottom + window.scrollY,
+            left: rect.left + window.scrollX,
+        };
+    }, []);
+    // Handle menu close
+    const handleCloseMenu = useCallback(() => {
+        setIsMenuOpen(false);
+        setAllCompletions([]);
+        setFilteredCompletions([]);
+        setCurrentFilterText('');
+        menuOpenOffsetRef.current = 0;
+        jupyterInputNodeRef.current = null;
+        // Signal to other plugins that menu is closed
+        editor.dispatchCommand(LSP_MENU_STATE_COMMAND, false);
+    }, [editor]);
+    // Handle completion selection
+    const handleSelectCompletion = useCallback((item) => {
+        editor.update(() => {
+            const selection = $getSelection();
+            if (!$isRangeSelection(selection)) {
+                return;
+            }
+            // Get current text to calculate how much to replace
+            const anchorNode = selection.anchor.getNode();
+            const anchorOffset = selection.anchor.offset;
+            const jupyterInputNode = jupyterInputNodeRef.current;
+            if (jupyterInputNode) {
+                // Calculate current absolute offset
+                const currentOffset = getAbsoluteOffset(jupyterInputNode, anchorNode, anchorOffset);
+                const filterTextLength = currentOffset - menuOpenOffsetRef.current;
+                // If user typed text after menu opened, we need to delete it before inserting completion
+                if (filterTextLength > 0) {
+                    const deleteStart = anchorOffset - filterTextLength;
+                    if (deleteStart >= 0) {
+                        // Select the typed text to replace it
+                        const nodeKey = anchorNode.getKey();
+                        selection.anchor.set(nodeKey, deleteStart, 'text');
+                        selection.focus.set(nodeKey, anchorOffset, 'text');
+                    }
+                }
+            }
+            // Insert completion text (replaces the selected text if any)
+            selection.insertText(item.insertText);
+        });
+        // Signal that LSP completion was inserted (suppresses inline completions)
+        editor.dispatchCommand(LSP_COMPLETION_INSERTED_COMMAND, undefined);
+        // Close menu - use handleCloseMenu to dispatch state command
+        handleCloseMenu();
+    }, [editor, handleCloseMenu]);
+    // Listen for text changes while menu is open to filter completions dynamically
+    useEffect(() => {
+        if (!isMenuOpen || allCompletions.length === 0) {
+            return;
+        }
+        return editor.registerUpdateListener(({ editorState }) => {
+            editorState.read(() => {
+                const selection = $getSelection();
+                if (!$isRangeSelection(selection) || !selection.isCollapsed()) {
+                    handleCloseMenu();
+                    return;
+                }
+                const anchorNode = selection.anchor.getNode();
+                const jupyterInputNode = jupyterInputNodeRef.current;
+                if (!jupyterInputNode) {
+                    return;
+                }
+                // Check if we're still in the same JupyterInputNode (compare by UUID, not reference)
+                const currentJupyterNode = findJupyterInputParent(anchorNode);
+                if (!currentJupyterNode) {
+                    handleCloseMenu();
+                    return;
+                }
+                // Compare by UUID instead of reference (Lexical may recreate nodes)
+                const currentUuid = currentJupyterNode.getJupyterInputNodeUuid();
+                const originalUuid = jupyterInputNode.getJupyterInputNodeUuid();
+                if (currentUuid !== originalUuid) {
+                    handleCloseMenu();
+                    return;
+                }
+                // Update ref to current node (Lexical may have recreated it)
+                jupyterInputNodeRef.current = currentJupyterNode;
+                // Calculate current absolute offset
+                const anchorOffset = selection.anchor.offset;
+                const currentOffset = getAbsoluteOffset(currentJupyterNode, anchorNode, anchorOffset);
+                // If cursor moved before the menu open position, close menu
+                if (currentOffset < menuOpenOffsetRef.current) {
+                    handleCloseMenu();
+                    return;
+                }
+                // Extract the text typed after menu opened (filter text)
+                const content = currentJupyterNode.getTextContent();
+                const filterText = content.substring(menuOpenOffsetRef.current, currentOffset);
+                // Filter and sort completions
+                const filtered = filterAndSortCompletions(allCompletions, filterText);
+                // Update filtered completions and filter text for highlighting
+                setFilteredCompletions(filtered);
+                setCurrentFilterText(filterText);
+                // Close menu if no matches
+                if (filtered.length === 0) {
+                    handleCloseMenu();
+                }
+            });
+        });
+    }, [editor, isMenuOpen, allCompletions, handleCloseMenu]);
+    // Fetch completions from providers
+    const fetchCompletions = useCallback(async (node, offset) => {
+        if (providers.length === 0 || disabled) {
+            return;
+        }
+        const nodeUuid = node.getJupyterInputNodeUuid();
+        const content = node.getTextContent();
+        const language = detectCellLanguage(node);
+        // Only fetch for supported languages
+        if (language === 'unknown') {
+            return;
+        }
+        const position = offsetToPosition(content, offset);
+        // Fetch from all providers (typically just one)
+        const results = await Promise.all(providers.map(provider => provider.fetchCompletions(nodeUuid, content, position, language)));
+        // Merge results from all providers
+        const fetchedCompletions = results.flat();
+        // Handle completions based on count
+        if (fetchedCompletions.length === 1) {
+            // Single completion - insert directly without showing menu
+            const item = fetchedCompletions[0];
+            editor.update(() => {
+                const selection = $getSelection();
+                if ($isRangeSelection(selection)) {
+                    // Get the text before cursor to find the prefix to replace
+                    const anchorNode = selection.anchor.getNode();
+                    const anchorOffset = selection.anchor.offset;
+                    const textContent = anchorNode.getTextContent();
+                    // Find the start of the current word (scan backward until non-identifier char)
+                    let wordStart = anchorOffset;
+                    while (wordStart > 0 &&
+                        /[a-zA-Z0-9_]/.test(textContent[wordStart - 1])) {
+                        wordStart--;
+                    }
+                    const prefixLength = anchorOffset - wordStart;
+                    if (prefixLength > 0) {
+                        // Select the prefix by setting anchor at word start and focus at cursor
+                        const nodeKey = anchorNode.getKey();
+                        selection.anchor.set(nodeKey, wordStart, 'text');
+                        selection.focus.set(nodeKey, anchorOffset, 'text');
+                    }
+                    // Insert completion text (replaces the selected prefix)
+                    selection.insertText(item.insertText);
+                }
+            });
+            // Signal that LSP completion was inserted (suppresses inline completions)
+            editor.dispatchCommand(LSP_COMPLETION_INSERTED_COMMAND, undefined);
+        }
+        else if (fetchedCompletions.length > 1) {
+            // Multiple completions - show menu with dynamic filtering
+            const position = getCursorPosition();
+            setMenuPosition(position);
+            // Store all completions for filtering
+            setAllCompletions(fetchedCompletions);
+            // Initially show all completions (no filter text yet)
+            setFilteredCompletions(fetchedCompletions);
+            setCurrentFilterText('');
+            // Track where the menu opened (for calculating filter text)
+            menuOpenOffsetRef.current = offset;
+            jupyterInputNodeRef.current = node;
+            setIsMenuOpen(true);
+            // Signal to other plugins that menu is opened
+            editor.dispatchCommand(LSP_MENU_STATE_COMMAND, true);
+        }
+    }, [providers, disabled, getCursorPosition, editor]);
+    // Register Tab key command with VERY_HIGH priority
+    useEffect(() => {
+        if (disabled) {
+            return;
+        }
+        return editor.registerCommand(KEY_TAB_COMMAND, (event) => {
+            const selection = $getSelection();
+            if (!$isRangeSelection(selection) || !selection.isCollapsed()) {
+                return false;
+            }
+            const node = selection.anchor.getNode();
+            const jupyterInputNode = findJupyterInputParent(node);
+            if (!jupyterInputNode) {
+                return false; // Not in a code block
+            }
+            // If inline completion is active, let it handle Tab
+            if (hasActiveInlineCompletion(jupyterInputNode)) {
+                return false;
+            }
+            // If menu is already open, LSPCompletionMenu will handle Tab navigation/selection
+            // We return true to prevent default Tab behavior (inserting tab character)
+            if (isMenuOpen) {
+                event?.preventDefault();
+                return true; // Let LSPCompletionMenu's keydown handler do the actual selection
+            }
+            // Prevent default Tab behavior and fetch completions
+            event?.preventDefault();
+            // Calculate absolute offset from start of JupyterInputNode
+            const anchorNode = selection.anchor.getNode();
+            const anchorOffset = selection.anchor.offset;
+            const absoluteOffset = getAbsoluteOffset(jupyterInputNode, anchorNode, anchorOffset);
+            // Fetch completions
+            fetchCompletions(jupyterInputNode, absoluteOffset);
+            return true; // Command handled
+        }, COMMAND_PRIORITY_CRITICAL);
+    }, [editor, disabled, isMenuOpen, fetchCompletions]);
+    if (disabled || providers.length === 0) {
+        return null;
+    }
+    return isMenuOpen && filteredCompletions.length > 0 ? (_jsx(LSPCompletionMenu, { items: filteredCompletions, onSelect: handleSelectCompletion, onClose: handleCloseMenu, position: menuPosition, filterText: currentFilterText })) : null;
+}
+//# sourceMappingURL=LSPTabCompletionPlugin.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.js.map
new file mode 100644
index 0000000..54a9a4e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionPlugin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LSPTabCompletionPlugin.js","sourceRoot":"","sources":["../../src/plugins/LSPTabCompletionPlugin.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,OAAO,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AACjE,OAAO,EAAE,yBAAyB,EAAE,MAAM,uCAAuC,CAAC;AAClF,OAAO,EACL,aAAa,EACb,iBAAiB,EACjB,cAAc,EACd,yBAAyB,EACzB,eAAe,EACf,aAAa,GAGd,MAAM,SAAS,CAAC;AAEjB,OAAO,EACL,mBAAmB,GAEpB,MAAM,2BAA2B,CAAC;AACnC,OAAO,EAAE,uBAAuB,EAAE,MAAM,+BAA+B,CAAC;AACxE,OAAO,EAAE,iBAAiB,EAAE,MAAM,qBAAqB,CAAC;AAOxD;;;GAGG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAA4B,aAAa,CAC1E,wBAAwB,CACzB,CAAC;AAEF;;;GAGG;AACH,MAAM,CAAC,MAAM,+BAA+B,GAC1C,aAAa,CAAC,iCAAiC,CAAC,CAAC;AAEnD;;;GAGG;AACH,SAAS,iBAAiB,CACxB,gBAAkC,EAClC,UAAuB,EACvB,YAAoB;IAEpB,kDAAkD;IAClD,IAAI,gBAAgB,GAAG,CAAC,CAAC;IAEzB,SAAS,QAAQ,CAAC,IAAiB;QACjC,IAAI,IAAI,KAAK,UAAU,EAAE,CAAC;YACxB,kDAAkD;YAClD,gBAAgB,IAAI,YAAY,CAAC;YACjC,OAAO,IAAI,CAAC;QACd,CAAC;QAED,oDAAoD;QACpD,IAAI,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC;YACzB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACpC,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE,CAAC;gBAC7B,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;oBACpB,OAAO,IAAI,CAAC;gBACd,CAAC;YACH,CAAC;QACH,CAAC;aAAM,CAAC;YACN,2CAA2C;YAC3C,gBAAgB,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC,MAAM,CAAC;QACnD,CAAC;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED,mDAAmD;IACnD,MAAM,QAAQ,GAAG,gBAAgB,CAAC,WAAW,EAAE,CAAC;IAChD,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE,CAAC;QAC7B,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;YACpB,MAAM;QACR,CAAC;IACH,CAAC;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAED;;;GAGG;AACH,SAAS,yBAAyB,CAAC,UAA4B;IAC7D,MAAM,QAAQ,GAAG,UAAU,CAAC,WAAW,EAAE,CAAC;IAE1C,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE,CAAC;QAC7B,IAAI,uBAAuB,CAAC,KAAK,CAAC,EAAE,CAAC;YACnC,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAED;;GAEG;AACH,SAAS,sBAAsB,CAAC,IAAiB;IAC/C,IAAI,OAAO,GAAuB,IAAI,CAAC;IAEvC,OAAO,OAAO,EAAE,CAAC;QACf,IAAI,mBAAmB,CAAC,OAAO,CAAC,EAAE,CAAC;YACjC,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,OAAO,GAAG,OAAO,CAAC,SAAS,EAAE,CAAC;IAChC,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAED;;GAEG;AACH,SAAS,gBAAgB,CACvB,IAAY,EACZ,MAAc;IAEd,IAAI,IAAI,GAAG,CAAC,CAAC;IACb,IAAI,SAAS,GAAG,CAAC,CAAC;IAElB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QACnD,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC;YACrB,IAAI,EAAE,CAAC;YACP,SAAS,GAAG,CAAC,CAAC;QAChB,CAAC;aAAM,CAAC;YACN,SAAS,EAAE,CAAC;QACd,CAAC;IACH,CAAC;IAED,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;AAC7B,CAAC;AAED;;GAEG;AACH,SAAS,kBAAkB,CAAC,IAAsB;IAChD,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IAEpC,IAAI,CAAC,QAAQ,EAAE,CAAC;QACd,OAAO,QAAQ,CAAC,CAAC,oBAAoB;IACvC,CAAC;IAED,kDAAkD;IAClD,IAAI,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,IAAI,EAAE,CAAC;QAC/C,OAAO,QAAQ,CAAC;IAClB,CAAC;SAAM,IACL,QAAQ,KAAK,UAAU;QACvB,QAAQ,KAAK,IAAI;QACjB,QAAQ,KAAK,MAAM,EACnB,CAAC;QACD,OAAO,UAAU,CAAC;IACpB,CAAC;IAED,OAAO,SAAS,CAAC;AACnB,CAAC;AAaD;;;;GAIG;AACH;;;GAGG;AACH,SAAS,wBAAwB,CAC/B,KAA0B,EAC1B,UAAkB;IAElB,IAAI,CAAC,UAAU,EAAE,CAAC;QAChB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,MAAM,WAAW,GAAG,UAAU,CAAC,WAAW,EAAE,CAAC;IAE7C,qDAAqD;IACrD,MAAM,YAAY,GAAwB,EAAE,CAAC;IAC7C,MAAM,cAAc,GAAwB,EAAE,CAAC;IAE/C,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;QACzB,MAAM,UAAU,GAAG,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC;QAEjE,IAAI,UAAU,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC;YACvC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;aAAM,IAAI,UAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC;YAC5C,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;QACD,2BAA2B;IAC7B,CAAC;IAED,mDAAmD;IACnD,OAAO,CAAC,GAAG,YAAY,EAAE,GAAG,cAAc,CAAC,CAAC;AAC9C,CAAC;AAED,MAAM,UAAU,sBAAsB,CAAC,EACrC,SAAS,EACT,QAAQ,GAAG,KAAK,GACY;IAC5B,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAC7C,MAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,GAAG,QAAQ,CAAsB,EAAE,CAAC,CAAC,CAAC,gCAAgC;IAC/G,MAAM,CAAC,mBAAmB,EAAE,sBAAsB,CAAC,GAAG,QAAQ,CAE5D,EAAE,CAAC,CAAC,CAAC,wBAAwB;IAC/B,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IACpD,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAG7C,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;IACxB,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAS,EAAE,CAAC,CAAC,CAAC,uCAAuC;IAE/G,2EAA2E;IAC3E,MAAM,iBAAiB,GAAG,MAAM,CAAS,CAAC,CAAC,CAAC;IAC5C,MAAM,mBAAmB,GAAG,MAAM,CAA0B,IAAI,CAAC,CAAC;IAElE,yCAAyC;IACzC,MAAM,iBAAiB,GAAG,WAAW,CAAC,GAAkC,EAAE;QACxE,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;QACxC,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,UAAU,KAAK,CAAC,EAAE,CAAC;YAC7C,OAAO,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC;QAC7B,CAAC;QAED,MAAM,KAAK,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,IAAI,GAAG,KAAK,CAAC,qBAAqB,EAAE,CAAC;QAE3C,OAAO;YACL,GAAG,EAAE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO;YACjC,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,OAAO;SACjC,CAAC;IACJ,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,oBAAoB;IACpB,MAAM,eAAe,GAAG,WAAW,CAAC,GAAG,EAAE;QACvC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrB,iBAAiB,CAAC,EAAE,CAAC,CAAC;QACtB,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAC3B,oBAAoB,CAAC,EAAE,CAAC,CAAC;QACzB,iBAAiB,CAAC,OAAO,GAAG,CAAC,CAAC;QAC9B,mBAAmB,CAAC,OAAO,GAAG,IAAI,CAAC;QACnC,8CAA8C;QAC9C,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,KAAK,CAAC,CAAC;IACxD,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,8BAA8B;IAC9B,MAAM,sBAAsB,GAAG,WAAW,CACxC,CAAC,IAAuB,EAAE,EAAE;QAC1B,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;YACjB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;gBAClC,OAAO;YACT,CAAC;YAED,oDAAoD;YACpD,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YAC9C,MAAM,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;YAC7C,MAAM,gBAAgB,GAAG,mBAAmB,CAAC,OAAO,CAAC;YAErD,IAAI,gBAAgB,EAAE,CAAC;gBACrB,oCAAoC;gBACpC,MAAM,aAAa,GAAG,iBAAiB,CACrC,gBAAgB,EAChB,UAAU,EACV,YAAY,CACb,CAAC;gBACF,MAAM,gBAAgB,GAAG,aAAa,GAAG,iBAAiB,CAAC,OAAO,CAAC;gBAEnE,yFAAyF;gBACzF,IAAI,gBAAgB,GAAG,CAAC,EAAE,CAAC;oBACzB,MAAM,WAAW,GAAG,YAAY,GAAG,gBAAgB,CAAC;oBAEpD,IAAI,WAAW,IAAI,CAAC,EAAE,CAAC;wBACrB,sCAAsC;wBACtC,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC;wBACpC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC;wBACnD,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,YAAY,EAAE,MAAM,CAAC,CAAC;oBACrD,CAAC;gBACH,CAAC;YACH,CAAC;YAED,6DAA6D;YAC7D,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,0EAA0E;QAC1E,MAAM,CAAC,eAAe,CAAC,+BAA+B,EAAE,SAAS,CAAC,CAAC;QAEnE,6DAA6D;QAC7D,eAAe,EAAE,CAAC;IACpB,CAAC,EACD,CAAC,MAAM,EAAE,eAAe,CAAC,CAC1B,CAAC;IAEF,+EAA+E;IAC/E,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,UAAU,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC/C,OAAO;QACT,CAAC;QAED,OAAO,MAAM,CAAC,sBAAsB,CAAC,CAAC,EAAE,WAAW,EAAE,EAAE,EAAE;YACvD,WAAW,CAAC,IAAI,CAAC,GAAG,EAAE;gBACpB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;gBAClC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,EAAE,CAAC;oBAC9D,eAAe,EAAE,CAAC;oBAClB,OAAO;gBACT,CAAC;gBAED,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gBAC9C,MAAM,gBAAgB,GAAG,mBAAmB,CAAC,OAAO,CAAC;gBAErD,IAAI,CAAC,gBAAgB,EAAE,CAAC;oBACtB,OAAO;gBACT,CAAC;gBAED,qFAAqF;gBACrF,MAAM,kBAAkB,GAAG,sBAAsB,CAAC,UAAU,CAAC,CAAC;gBAC9D,IAAI,CAAC,kBAAkB,EAAE,CAAC;oBACxB,eAAe,EAAE,CAAC;oBAClB,OAAO;gBACT,CAAC;gBAED,oEAAoE;gBACpE,MAAM,WAAW,GAAG,kBAAkB,CAAC,uBAAuB,EAAE,CAAC;gBACjE,MAAM,YAAY,GAAG,gBAAgB,CAAC,uBAAuB,EAAE,CAAC;gBAChE,IAAI,WAAW,KAAK,YAAY,EAAE,CAAC;oBACjC,eAAe,EAAE,CAAC;oBAClB,OAAO;gBACT,CAAC;gBAED,6DAA6D;gBAC7D,mBAAmB,CAAC,OAAO,GAAG,kBAAkB,CAAC;gBAEjD,oCAAoC;gBACpC,MAAM,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;gBAC7C,MAAM,aAAa,GAAG,iBAAiB,CACrC,kBAAkB,EAClB,UAAU,EACV,YAAY,CACb,CAAC;gBAEF,4DAA4D;gBAC5D,IAAI,aAAa,GAAG,iBAAiB,CAAC,OAAO,EAAE,CAAC;oBAC9C,eAAe,EAAE,CAAC;oBAClB,OAAO;gBACT,CAAC;gBAED,yDAAyD;gBACzD,MAAM,OAAO,GAAG,kBAAkB,CAAC,cAAc,EAAE,CAAC;gBACpD,MAAM,UAAU,GAAG,OAAO,CAAC,SAAS,CAClC,iBAAiB,CAAC,OAAO,EACzB,aAAa,CACd,CAAC;gBAEF,8BAA8B;gBAC9B,MAAM,QAAQ,GAAG,wBAAwB,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;gBAEtE,+DAA+D;gBAC/D,sBAAsB,CAAC,QAAQ,CAAC,CAAC;gBACjC,oBAAoB,CAAC,UAAU,CAAC,CAAC;gBAEjC,2BAA2B;gBAC3B,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBAC1B,eAAe,EAAE,CAAC;gBACpB,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,eAAe,CAAC,CAAC,CAAC;IAE1D,mCAAmC;IACnC,MAAM,gBAAgB,GAAG,WAAW,CAClC,KAAK,EAAE,IAAsB,EAAE,MAAc,EAAE,EAAE;QAC/C,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,IAAI,QAAQ,EAAE,CAAC;YACvC,OAAO;QACT,CAAC;QAED,MAAM,QAAQ,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAChD,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QACtC,MAAM,QAAQ,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC;QAE1C,qCAAqC;QACrC,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YAC3B,OAAO;QACT,CAAC;QAED,MAAM,QAAQ,GAAG,gBAAgB,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAEnD,gDAAgD;QAChD,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAC/B,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CACvB,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC,CACjE,CACF,CAAC;QAEF,mCAAmC;QACnC,MAAM,kBAAkB,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QAE1C,oCAAoC;QACpC,IAAI,kBAAkB,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACpC,2DAA2D;YAC3D,MAAM,IAAI,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC;YACnC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;gBACjB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;gBAClC,IAAI,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;oBACjC,2DAA2D;oBAC3D,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;oBAC9C,MAAM,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;oBAC7C,MAAM,WAAW,GAAG,UAAU,CAAC,cAAc,EAAE,CAAC;oBAEhD,+EAA+E;oBAC/E,IAAI,SAAS,GAAG,YAAY,CAAC;oBAC7B,OACE,SAAS,GAAG,CAAC;wBACb,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,EAC/C,CAAC;wBACD,SAAS,EAAE,CAAC;oBACd,CAAC;oBAED,MAAM,YAAY,GAAG,YAAY,GAAG,SAAS,CAAC;oBAE9C,IAAI,YAAY,GAAG,CAAC,EAAE,CAAC;wBACrB,wEAAwE;wBACxE,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC;wBACpC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;wBACjD,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,YAAY,EAAE,MAAM,CAAC,CAAC;oBACrD,CAAC;oBAED,wDAAwD;oBACxD,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACxC,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,0EAA0E;YAC1E,MAAM,CAAC,eAAe,CAAC,+BAA+B,EAAE,SAAS,CAAC,CAAC;QACrE,CAAC;aAAM,IAAI,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACzC,0DAA0D;YAC1D,MAAM,QAAQ,GAAG,iBAAiB,EAAE,CAAC;YACrC,eAAe,CAAC,QAAQ,CAAC,CAAC;YAE1B,sCAAsC;YACtC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC;YAEtC,sDAAsD;YACtD,sBAAsB,CAAC,kBAAkB,CAAC,CAAC;YAC3C,oBAAoB,CAAC,EAAE,CAAC,CAAC;YAEzB,4DAA4D;YAC5D,iBAAiB,CAAC,OAAO,GAAG,MAAM,CAAC;YACnC,mBAAmB,CAAC,OAAO,GAAG,IAAI,CAAC;YAEnC,aAAa,CAAC,IAAI,CAAC,CAAC;YACpB,8CAA8C;YAC9C,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;QACvD,CAAC;IACH,CAAC,EACD,CAAC,SAAS,EAAE,QAAQ,EAAE,iBAAiB,EAAE,MAAM,CAAC,CACjD,CAAC;IAEF,mDAAmD;IACnD,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,QAAQ,EAAE,CAAC;YACb,OAAO;QACT,CAAC;QAED,OAAO,MAAM,CAAC,eAAe,CAC3B,eAAe,EACf,CAAC,KAA2B,EAAE,EAAE;YAC9B,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,EAAE,CAAC;gBAC9D,OAAO,KAAK,CAAC;YACf,CAAC;YAED,MAAM,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YACxC,MAAM,gBAAgB,GAAG,sBAAsB,CAAC,IAAI,CAAC,CAAC;YAEtD,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACtB,OAAO,KAAK,CAAC,CAAC,sBAAsB;YACtC,CAAC;YAED,oDAAoD;YACpD,IAAI,yBAAyB,CAAC,gBAAgB,CAAC,EAAE,CAAC;gBAChD,OAAO,KAAK,CAAC;YACf,CAAC;YAED,kFAAkF;YAClF,2EAA2E;YAC3E,IAAI,UAAU,EAAE,CAAC;gBACf,KAAK,EAAE,cAAc,EAAE,CAAC;gBACxB,OAAO,IAAI,CAAC,CAAC,kEAAkE;YACjF,CAAC;YAED,qDAAqD;YACrD,KAAK,EAAE,cAAc,EAAE,CAAC;YAExB,2DAA2D;YAC3D,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YAC9C,MAAM,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;YAC7C,MAAM,cAAc,GAAG,iBAAiB,CACtC,gBAAgB,EAChB,UAAU,EACV,YAAY,CACb,CAAC;YAEF,oBAAoB;YACpB,gBAAgB,CAAC,gBAAgB,EAAE,cAAc,CAAC,CAAC;YAEnD,OAAO,IAAI,CAAC,CAAC,kBAAkB;QACjC,CAAC,EACD,yBAAyB,CAC1B,CAAC;IACJ,CAAC,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAErD,IAAI,QAAQ,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;QACvC,OAAO,IAAI,CAAC;IACd,CAAC;IAED,OAAO,UAAU,IAAI,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CACpD,KAAC,iBAAiB,IAChB,KAAK,EAAE,mBAAmB,EAC1B,QAAQ,EAAE,sBAAsB,EAChC,OAAO,EAAE,eAAe,EACxB,QAAQ,EAAE,YAAY,EACtB,UAAU,EAAE,iBAAiB,GAC7B,CACH,CAAC,CAAC,CAAC,IAAI,CAAC;AACX,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.d.ts
new file mode 100644
index 0000000..68c5232
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.d.ts
@@ -0,0 +1,48 @@
+/**
+ * LSP Tab completion provider for Lexical editor.
+ * Communicates with extension host to fetch LSP completions from Pylance and Markdown language servers.
+ *
+ * @module lexical/plugins/LSPTabCompletionProvider
+ */
+import type { ILSPCompletionProvider, LSPCompletionItem, CellLanguage } from './lspTypes';
+/**
+ * LSP Tab completion provider for Lexical code blocks.
+ * Fetches completions from extension host via postMessage.
+ * Supports Python (via Pylance) and Markdown (via built-in VS Code markdown LSP).
+ */
+export declare class LexicalLSPCompletionProvider implements ILSPCompletionProvider {
+    /** Human-readable provider name */
+    readonly name = "LSP (Python & Markdown)";
+    /** Map of pending requests (requestId -> resolve function) */
+    private pendingRequests;
+    /** Request counter for generating unique IDs */
+    private requestCounter;
+    /** Lexical document ID for context */
+    private lexicalId;
+    /** VS Code API for postMessage communication */
+    private vscodeAPI;
+    /** Bound message handler for proper cleanup */
+    private boundHandleMessage;
+    constructor(lexicalId: string, vscodeAPI?: any);
+    /**
+     * Fetch completions for a code block at a specific position.
+     *
+     * @param nodeUuid - JupyterInputNode UUID
+     * @param content - Full code block content
+     * @param position - Cursor position (line/character)
+     * @param language - Cell language ('python' | 'markdown')
+     * @returns Promise resolving to completion items
+     */
+    fetchCompletions(nodeUuid: string, content: string, position: {
+        line: number;
+        character: number;
+    }, language: CellLanguage): Promise<LSPCompletionItem[]>;
+    /**
+     * Handle messages from extension host.
+     */
+    private handleMessage;
+    /**
+     * Dispose of the provider and clean up resources.
+     */
+    dispose(): void;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.js
new file mode 100644
index 0000000..980a999
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.js
@@ -0,0 +1,118 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * LSP Tab completion provider for Lexical code blocks.
+ * Fetches completions from extension host via postMessage.
+ * Supports Python (via Pylance) and Markdown (via built-in VS Code markdown LSP).
+ */
+export class LexicalLSPCompletionProvider {
+    /** Human-readable provider name */
+    name = 'LSP (Python & Markdown)';
+    /** Map of pending requests (requestId -> resolve function) */
+    pendingRequests = new Map();
+    /** Request counter for generating unique IDs */
+    requestCounter = 0;
+    /** Lexical document ID for context */
+    lexicalId;
+    /** VS Code API for postMessage communication */
+    vscodeAPI;
+    /** Bound message handler for proper cleanup */
+    boundHandleMessage;
+    constructor(lexicalId, vscodeAPI) {
+        this.lexicalId = lexicalId;
+        // Use provided VS Code API or global one
+        this.vscodeAPI =
+            vscodeAPI || (typeof window !== 'undefined' && window.vscode);
+        if (!this.vscodeAPI) {
+            console.warn('[LSP-Lexical] VS Code API not available, LSP completions disabled');
+        }
+        // Bind message handler once for proper cleanup
+        this.boundHandleMessage = this.handleMessage.bind(this);
+        // Listen for LSP responses from extension host
+        if (typeof window !== 'undefined') {
+            window.addEventListener('message', this.boundHandleMessage);
+        }
+    }
+    /**
+     * Fetch completions for a code block at a specific position.
+     *
+     * @param nodeUuid - JupyterInputNode UUID
+     * @param content - Full code block content
+     * @param position - Cursor position (line/character)
+     * @param language - Cell language ('python' | 'markdown')
+     * @returns Promise resolving to completion items
+     */
+    async fetchCompletions(nodeUuid, content, position, language) {
+        // Validate VS Code API
+        if (!this.vscodeAPI) {
+            console.error('[LSP-Lexical-Provider] VS Code API not available');
+            return [];
+        }
+        // Only fetch completions for supported languages
+        if (language !== 'python' && language !== 'markdown') {
+            return [];
+        }
+        const requestId = `lsp-lexical-${++this.requestCounter}`;
+        // Send request to extension host
+        const message = {
+            type: 'lsp-completion-request',
+            requestId,
+            cellId: nodeUuid,
+            language,
+            position,
+            source: 'lexical',
+            lexicalId: this.lexicalId,
+        };
+        // Wait for response with timeout
+        return new Promise(resolve => {
+            const timeout = setTimeout(() => {
+                console.warn('[LSP-Lexical-Provider] Request timed out:', requestId);
+                this.pendingRequests.delete(requestId);
+                resolve([]);
+            }, 15000); // 15 second timeout (Pylance needs time to analyze files)
+            // CRITICAL: Register resolver BEFORE sending message to avoid race condition
+            this.pendingRequests.set(requestId, (completions) => {
+                clearTimeout(timeout);
+                resolve(completions);
+            });
+            this.vscodeAPI.postMessage(message);
+        });
+    }
+    /**
+     * Handle messages from extension host.
+     */
+    handleMessage(event) {
+        const message = event.data;
+        if (message.type === 'lsp-completion-response') {
+            const resolver = this.pendingRequests.get(message.requestId);
+            if (resolver) {
+                resolver(message.completions || []);
+                this.pendingRequests.delete(message.requestId);
+            }
+            else {
+                console.warn('[LSP-Lexical-Provider] No resolver found for requestId:', message.requestId);
+            }
+        }
+        else if (message.type === 'lsp-error') {
+            console.error('[LSP-Lexical-Provider] LSP error received', message);
+            const resolver = this.pendingRequests.get(message.requestId);
+            if (resolver) {
+                resolver([]); // Return empty on error
+                this.pendingRequests.delete(message.requestId);
+            }
+        }
+    }
+    /**
+     * Dispose of the provider and clean up resources.
+     */
+    dispose() {
+        this.pendingRequests.clear();
+        if (typeof window !== 'undefined' && this.boundHandleMessage) {
+            window.removeEventListener('message', this.boundHandleMessage);
+        }
+    }
+}
+//# sourceMappingURL=LSPTabCompletionProvider.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.js.map
new file mode 100644
index 0000000..87b33ae
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LSPTabCompletionProvider.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LSPTabCompletionProvider.js","sourceRoot":"","sources":["../../src/plugins/LSPTabCompletionProvider.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.d.ts
index fb6e139..f535400 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.d.ts
@@ -41,6 +41,10 @@ export interface CompletionContext {
     before: string;
     /** Text after cursor */
     after: string;
+    /** Whether the cursor is in a code cell (jupyter-cell) */
+    inCodeCell?: boolean;
+    /** Trigger kind (auto or manual) */
+    triggerKind?: 'auto' | 'manual';
 }
 /**
  * List of completion suggestions from provider.
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js
index b1e7f39..30ee112 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js
@@ -34,14 +34,15 @@
  * </LexicalComposer>
  * ```
  */
-import { useEffect, useState, useRef, useCallback } from 'react';
+import { useEffect, useState, useRef, useCallback, useMemo } from 'react';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
 import { $getSelection, $isRangeSelection, $getNodeByKey, $createTextNode, COMMAND_PRIORITY_LOW, COMMAND_PRIORITY_HIGH, KEY_TAB_COMMAND, KEY_ESCAPE_COMMAND, createCommand, } from 'lexical';
-import { $isJupyterInputNode, JupyterInputNode, } from '../nodes/JupyterInputNode.js';
-import { $isJupyterInputHighlightNode } from '../nodes/JupyterInputHighlightNode.js';
-import { $createInlineCompletionNode, $isInlineCompletionNode, } from '../nodes/InlineCompletionNode.js';
-import { mergeConfig, } from './InlineCompletionConfig.js';
-import { extractContext } from './InlineCompletionContextExtractor.js';
+import { $isJupyterInputNode, JupyterInputNode, } from '../nodes/JupyterInputNode';
+import { $isJupyterInputHighlightNode } from '../nodes/JupyterInputHighlightNode';
+import { $createInlineCompletionNode, $isInlineCompletionNode, } from '../nodes/InlineCompletionNode';
+import { mergeConfig, } from './InlineCompletionConfig';
+import { extractContext } from './InlineCompletionContextExtractor';
+import { LSP_MENU_STATE_COMMAND, LSP_COMPLETION_INSERTED_COMMAND, } from './LSPTabCompletionPlugin';
 /**
  * Command to manually trigger inline completion.
  * Dispatched by keyboard shortcut (e.g., Ctrl+Space).
@@ -57,16 +58,21 @@ export const TRIGGER_INLINE_COMPLETION_COMMAND = createCommand('TRIGGER_INLINE_C
 export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecatedDebounceMs, enabled = true, config: userConfig, }) {
     const [editor] = useLexicalComposerContext();
     const [currentCompletion, setCurrentCompletion] = useState(null);
-    // Merge user config with defaults
-    const config = mergeConfig(userConfig);
+    const [lspMenuOpen, setLspMenuOpen] = useState(false);
+    // Merge user config with defaults (recompute when userConfig changes)
+    const config = useMemo(() => mergeConfig(userConfig), [userConfig]);
     // Debounce precedence: userConfig (new) > deprecatedDebounceMs (old) > default
     // Note: Using ?? operator, so 0 values will fall through (not a realistic use case)
-    const debounceMs = userConfig?.debounceMs ?? deprecatedDebounceMs ?? config.debounceMs;
+    // INCREASED DEFAULT: 500ms instead of 200ms for better typing experience
+    const debounceMs = userConfig?.debounceMs ??
+        deprecatedDebounceMs ??
+        Math.max(config.debounceMs, 500);
     const debounceTimerRef = useRef(null);
     const lastRequestRef = useRef('');
     const lastCellTextRef = useRef('');
     const completionNodeKeyRef = useRef(null);
     const requestCompletionRef = useRef(null);
+    const lspInsertionTimeRef = useRef(0); // Timestamp of last LSP completion insertion
     /**
      * Cleanup on unmount
      */
@@ -78,10 +84,46 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
             }
         };
     }, []); // Only on mount/unmount
+    /**
+     * Listen for LSP menu state changes.
+     * When LSP dropdown opens, cancel pending inline completions and clear current completion.
+     */
+    useEffect(() => {
+        if (!enabled)
+            return;
+        return editor.registerCommand(LSP_MENU_STATE_COMMAND, (isOpen) => {
+            setLspMenuOpen(isOpen);
+            if (isOpen) {
+                // LSP menu opened - cancel pending inline completion request
+                if (debounceTimerRef.current) {
+                    clearTimeout(debounceTimerRef.current);
+                    debounceTimerRef.current = null;
+                }
+                // Clear any visible inline completion
+                setCurrentCompletion(null);
+            }
+            return false; // Don't prevent other listeners
+        }, COMMAND_PRIORITY_LOW);
+    }, [editor, enabled]);
+    /**
+     * Listen for LSP completion insertion.
+     * When LSP completion is inserted, suppress inline completions briefly.
+     */
+    useEffect(() => {
+        if (!enabled)
+            return;
+        return editor.registerCommand(LSP_COMPLETION_INSERTED_COMMAND, () => {
+            // Record timestamp of LSP insertion
+            lspInsertionTimeRef.current = Date.now();
+            // Clear any visible inline completion
+            setCurrentCompletion(null);
+            return false; // Don't prevent other listeners
+        }, COMMAND_PRIORITY_LOW);
+    }, [editor, enabled]);
     /**
      * Request completion from providers
      */
-    const requestCompletion = useCallback(async (cellText, cursorOffset, language, contentType = 'code') => {
+    const requestCompletion = useCallback(async (cellText, cursorOffset, language, contentType = 'code', trigger = 'auto') => {
         if (!providers || providers.length === 0) {
             return;
         }
@@ -89,7 +131,12 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
         try {
             const before = cellText.substring(0, cursorOffset);
             const after = cellText.substring(cursorOffset);
-            const result = await provider.fetch({ text: cellText, offset: cursorOffset, language, contentType }, { before, after });
+            const result = await provider.fetch({ text: cellText, offset: cursorOffset, language, contentType }, {
+                before,
+                after,
+                inCodeCell: contentType === 'code',
+                triggerKind: trigger,
+            });
             if (result && result.items && result.items.length > 0) {
                 const completion = result.items[0].insertText;
                 setCurrentCompletion(completion);
@@ -115,6 +162,25 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
             return;
         return editor.registerUpdateListener(({ editorState }) => {
             editorState.read(() => {
+                // Don't trigger if config is not yet available (prevents race condition on mount)
+                if (!config) {
+                    console.log('[InlineCompletionPlugin] Config not ready, skipping auto-trigger');
+                    setCurrentCompletion(null);
+                    return;
+                }
+                // Don't request inline completions if LSP dropdown menu is active
+                if (lspMenuOpen) {
+                    setCurrentCompletion(null);
+                    return;
+                }
+                // Suppress inline completions for 300ms after LSP completion insertion
+                // This prevents inline completion from appearing immediately after accepting LSP completion
+                const timeSinceLspInsertion = Date.now() - lspInsertionTimeRef.current;
+                const LSP_SUPPRESSION_MS = 300;
+                if (timeSinceLspInsertion < LSP_SUPPRESSION_MS) {
+                    setCurrentCompletion(null);
+                    return;
+                }
                 const selection = $getSelection();
                 if (!$isRangeSelection(selection) || !selection.isCollapsed()) {
                     setCurrentCompletion(null);
@@ -125,8 +191,14 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
                 const contentType = detectContentType(anchorNode);
                 // Check if auto-trigger is enabled for this content type
                 const contentConfig = contentType === 'code' ? config.code : config.prose;
+                console.log('[InlineCompletionPlugin] Auto-trigger check:', {
+                    contentType,
+                    triggerMode: contentConfig.triggerMode,
+                    willTrigger: contentConfig.triggerMode === 'auto',
+                });
                 if (contentConfig.triggerMode !== 'auto') {
-                    setCurrentCompletion(null);
+                    // Manual mode - don't auto-trigger, but preserve existing completions
+                    // (Manual completions are triggered via keyboard shortcut command)
                     return;
                 }
                 // For code: require JupyterInputNode (backward compatibility)
@@ -192,7 +264,7 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
                     debounceTimerRef.current = setTimeout(() => {
                         if (requestKey !== lastRequestRef.current) {
                             lastRequestRef.current = requestKey;
-                            requestCompletionRef.current?.(cellText, cursorOffset, contentConfig.language || 'python', 'code');
+                            requestCompletionRef.current?.(cellText, cursorOffset, contentConfig.language || 'python', 'code', 'auto');
                         }
                     }, debounceMs);
                 }
@@ -220,13 +292,13 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
                             lastRequestRef.current = requestKey;
                             // Request prose completion with extracted context
                             requestCompletionRef.current?.(context.fullText, context.before.length, // Cursor offset is at end of "before" text
-                            contentConfig.language || 'markdown', 'prose');
+                            contentConfig.language || 'markdown', 'prose', 'auto');
                         }
                     }, debounceMs);
                 }
             });
         });
-    }, [editor, enabled, debounceMs, config.code, config.prose]);
+    }, [editor, enabled, debounceMs, config.code, config.prose, lspMenuOpen]);
     /**
      * Insert/update/remove the InlineCompletionNode based on currentCompletion
      */
@@ -339,6 +411,15 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
                         const textNode = $createTextNode(currentCompletion);
                         completionNode.replace(textNode);
                         completionNodeKeyRef.current = null;
+                        // FIX: Move cursor to end of inserted text
+                        // Select the entire inserted text node
+                        textNode.select();
+                        // Then collapse the selection to the end
+                        const newSelection = $getSelection();
+                        if ($isRangeSelection(newSelection)) {
+                            newSelection.anchor.set(textNode.getKey(), currentCompletion.length, 'text');
+                            newSelection.focus.set(textNode.getKey(), currentCompletion.length, 'text');
+                        }
                     }
                 }
                 setCurrentCompletion(null);
@@ -432,7 +513,7 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
                     const cursorOffset = getCursorOffset(jupyterInputNode, selection);
                     const requestKey = `${cellText}:${cursorOffset}`;
                     lastRequestRef.current = requestKey;
-                    requestCompletionRef.current?.(cellText, cursorOffset, contentConfig.language || 'python', 'code');
+                    requestCompletionRef.current?.(cellText, cursorOffset, contentConfig.language || 'python', 'code', 'manual');
                 }
                 else {
                     // Prose manual trigger
@@ -443,7 +524,7 @@ export function LexicalInlineCompletionPlugin({ providers, debounceMs: deprecate
                     }
                     const requestKey = `prose:manual:${context.fullText.length}`;
                     lastRequestRef.current = requestKey;
-                    requestCompletionRef.current?.(context.fullText, context.before.length, contentConfig.language || 'markdown', 'prose');
+                    requestCompletionRef.current?.(context.fullText, context.before.length, contentConfig.language || 'markdown', 'prose', 'manual');
                 }
             });
             return true;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js.map
index 83242fb..2535f6d 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"LexicalInlineCompletionPlugin.js","sourceRoot":"","sources":["../../src/plugins/LexicalInlineCompletionPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"LexicalInlineCompletionPlugin.js","sourceRoot":"","sources":["../../src/plugins/LexicalInlineCompletionPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js
index ab5b7c7..63ce460 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js
@@ -16,9 +16,9 @@
  */
 import { useEffect } from 'react';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
-import { useLexicalConfig } from '../context/LexicalConfigContext.js';
-import { LexicalAdapter } from '../state/LexicalAdapter.js';
-import { lexicalStore } from '../state/LexicalState.js';
+import { useLexicalConfig } from '../context/LexicalConfigContext';
+import { LexicalAdapter } from '../state/LexicalAdapter';
+import { lexicalStore } from '../state/LexicalState';
 /**
  * Plugin that initializes the LexicalAdapter and registers it in the state store.
  *
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/MarkdownPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/MarkdownPlugin.js
index e083933..400b7a8 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/MarkdownPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/MarkdownPlugin.js
@@ -5,7 +5,7 @@ import { jsx as _jsx } from "react/jsx-runtime";
  * MIT License
  */
 import { MarkdownShortcutPlugin } from '@lexical/react/LexicalMarkdownShortcutPlugin';
-import { PLAYGROUND_TRANSFORMERS } from '../convert/transformers/MarkdownTransformers.js';
+import { PLAYGROUND_TRANSFORMERS } from '../convert/transformers/MarkdownTransformers';
 export const MarkdownPlugin = () => {
     return _jsx(MarkdownShortcutPlugin, { transformers: PLAYGROUND_TRANSFORMERS });
 };
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/NbformatContentPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/NbformatContentPlugin.js
index 2b066dd..2d85880 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/NbformatContentPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/NbformatContentPlugin.js
@@ -5,7 +5,7 @@
  */
 import { useEffect } from 'react';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
-import { nbformatToLexical } from '../convert/index.js';
+import { nbformatToLexical } from '../convert';
 export const NbformatContentPlugin = (props) => {
     const { notebook } = props;
     const [editor] = useLexicalComposerContext();
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/index.js
index 9a95068..817484b 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/index.js
@@ -13,11 +13,11 @@
 import { TOGGLE_LINK_COMMAND } from '@lexical/link';
 import { COMMAND_PRIORITY_NORMAL, FORMAT_ELEMENT_COMMAND, FORMAT_TEXT_COMMAND, INDENT_CONTENT_COMMAND, isModifierMatch, KEY_DOWN_COMMAND, OUTDENT_CONTENT_COMMAND, } from 'lexical';
 import { useEffect } from 'react';
-import { useToolbarState } from '../../context/ToolbarContext.js';
-import { sanitizeUrl } from '../../utils/url.js';
-import { INSERT_INLINE_COMMAND } from '../CommentPlugin.js';
-import { clearFormatting, formatBulletList, formatCheckList, formatCode, formatHeading, formatNumberedList, formatParagraph, formatQuote, updateFontSize, UpdateFontSizeType, } from '../ToolbarPlugin/utils.js';
-import { isAddComment, isCapitalize, isCenterAlign, isClearFormatting, isDecreaseFontSize, isFormatBulletList, isFormatCheckList, isFormatCode, isFormatHeading, isFormatNumberedList, isFormatParagraph, isFormatQuote, isIncreaseFontSize, isIndent, isInsertCodeBlock, isInsertLink, isJustifyAlign, isLeftAlign, isLowercase, isOutdent, isRightAlign, isStrikeThrough, isSubscript, isSuperscript, isUppercase, } from './shortcuts.js';
+import { useToolbarState } from '../../context/ToolbarContext';
+import { sanitizeUrl } from '../../utils/url';
+import { INSERT_INLINE_COMMAND } from '../CommentPlugin';
+import { clearFormatting, formatBulletList, formatCheckList, formatCode, formatHeading, formatNumberedList, formatParagraph, formatQuote, updateFontSize, UpdateFontSizeType, } from '../ToolbarPlugin/utils';
+import { isAddComment, isCapitalize, isCenterAlign, isClearFormatting, isDecreaseFontSize, isFormatBulletList, isFormatCheckList, isFormatCode, isFormatHeading, isFormatNumberedList, isFormatParagraph, isFormatQuote, isIncreaseFontSize, isIndent, isInsertCodeBlock, isInsertLink, isJustifyAlign, isLeftAlign, isLowercase, isOutdent, isRightAlign, isStrikeThrough, isSubscript, isSuperscript, isUppercase, } from './shortcuts';
 export default function ShortcutsPlugin({ editor, setIsLinkEditMode, }) {
     const { toolbarState } = useToolbarState();
     useEffect(() => {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.d.ts
new file mode 100644
index 0000000..615e077
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.d.ts
@@ -0,0 +1,5 @@
+import { ReactPortal } from 'react';
+export default function TableActionMenuPlugin({ anchorElem, cellMerge, }: {
+    anchorElem?: HTMLElement;
+    cellMerge?: boolean;
+}): null | ReactPortal;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.js
new file mode 100644
index 0000000..025470c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.js
@@ -0,0 +1,503 @@
+import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { useLexicalEditable } from '@lexical/react/useLexicalEditable';
+import { $computeTableMapSkipCellCheck, $deleteTableColumnAtSelection, $deleteTableRowAtSelection, $getNodeTriplet, $getTableCellNodeFromLexicalNode, $getTableColumnIndexFromTableCellNode, $getTableNodeFromLexicalNodeOrThrow, $getTableRowIndexFromTableCellNode, $insertTableColumnAtSelection, $insertTableRowAtSelection, $isTableCellNode, $isTableSelection, $mergeCells, $unmergeCell, getTableElement, getTableObserverFromTableElement, TableCellHeaderStates, TableCellNode, } from '@lexical/table';
+import { mergeRegister } from '@lexical/utils';
+import { $getSelection, $isElementNode, $isRangeSelection, $isTextNode, $setSelection, COMMAND_PRIORITY_CRITICAL, getDOMSelection, isDOMNode, SELECTION_CHANGE_COMMAND, } from 'lexical';
+import { useCallback, useEffect, useRef, useState } from 'react';
+import { createPortal } from 'react-dom';
+import useModal from '../../hooks/useModal';
+import ColorPicker from '../../components/ColorPicker';
+import DropDown, { DropDownItem } from '../../components/DropDown';
+function computeSelectionCount(selection) {
+    const selectionShape = selection.getShape();
+    return {
+        columns: selectionShape.toX - selectionShape.fromX + 1,
+        rows: selectionShape.toY - selectionShape.fromY + 1,
+    };
+}
+function $canUnmerge() {
+    const selection = $getSelection();
+    if (($isRangeSelection(selection) && !selection.isCollapsed()) ||
+        ($isTableSelection(selection) && !selection.anchor.is(selection.focus)) ||
+        (!$isRangeSelection(selection) && !$isTableSelection(selection))) {
+        return false;
+    }
+    const [cell] = $getNodeTriplet(selection.anchor);
+    return cell.__colSpan > 1 || cell.__rowSpan > 1;
+}
+function $selectLastDescendant(node) {
+    const lastDescendant = node.getLastDescendant();
+    if ($isTextNode(lastDescendant)) {
+        lastDescendant.select();
+    }
+    else if ($isElementNode(lastDescendant)) {
+        lastDescendant.selectEnd();
+    }
+    else if (lastDescendant !== null) {
+        lastDescendant.selectNext();
+    }
+}
+function currentCellBackgroundColor(editor) {
+    return editor.getEditorState().read(() => {
+        const selection = $getSelection();
+        if ($isRangeSelection(selection) || $isTableSelection(selection)) {
+            const [cell] = $getNodeTriplet(selection.anchor);
+            if ($isTableCellNode(cell)) {
+                return cell.getBackgroundColor();
+            }
+        }
+        return null;
+    });
+}
+function TableActionMenu({ onClose, tableCellNode: _tableCellNode, setIsMenuOpen, contextRef, cellMerge, showColorPickerModal, }) {
+    const [editor] = useLexicalComposerContext();
+    const dropDownRef = useRef(null);
+    const [tableCellNode, updateTableCellNode] = useState(_tableCellNode);
+    const [selectionCounts, updateSelectionCounts] = useState({
+        columns: 1,
+        rows: 1,
+    });
+    const [canMergeCells, setCanMergeCells] = useState(false);
+    const [canUnmergeCell, setCanUnmergeCell] = useState(false);
+    const [backgroundColor, setBackgroundColor] = useState(() => currentCellBackgroundColor(editor) || '');
+    useEffect(() => {
+        return editor.registerMutationListener(TableCellNode, nodeMutations => {
+            const nodeUpdated = nodeMutations.get(tableCellNode.getKey()) === 'updated';
+            if (nodeUpdated) {
+                editor.getEditorState().read(() => {
+                    updateTableCellNode(tableCellNode.getLatest());
+                });
+                setBackgroundColor(currentCellBackgroundColor(editor) || '');
+            }
+        }, { skipInitialization: true });
+    }, [editor, tableCellNode]);
+    useEffect(() => {
+        editor.getEditorState().read(() => {
+            const selection = $getSelection();
+            // Merge cells
+            if ($isTableSelection(selection)) {
+                const currentSelectionCounts = computeSelectionCount(selection);
+                updateSelectionCounts(computeSelectionCount(selection));
+                setCanMergeCells(currentSelectionCounts.columns > 1 || currentSelectionCounts.rows > 1);
+            }
+            // Unmerge cell
+            setCanUnmergeCell($canUnmerge());
+        });
+    }, [editor]);
+    useEffect(() => {
+        const menuButtonElement = contextRef.current;
+        const dropDownElement = dropDownRef.current;
+        const rootElement = editor.getRootElement();
+        if (menuButtonElement != null &&
+            dropDownElement != null &&
+            rootElement != null) {
+            const rootEleRect = rootElement.getBoundingClientRect();
+            const menuButtonRect = menuButtonElement.getBoundingClientRect();
+            dropDownElement.style.opacity = '1';
+            const dropDownElementRect = dropDownElement.getBoundingClientRect();
+            const margin = 5;
+            let leftPosition = menuButtonRect.right + margin;
+            if (leftPosition + dropDownElementRect.width > window.innerWidth ||
+                leftPosition + dropDownElementRect.width > rootEleRect.right) {
+                const position = menuButtonRect.left - dropDownElementRect.width - margin;
+                leftPosition = (position < 0 ? margin : position) + window.pageXOffset;
+            }
+            dropDownElement.style.left = `${leftPosition + window.pageXOffset}px`;
+            let topPosition = menuButtonRect.top;
+            if (topPosition + dropDownElementRect.height > window.innerHeight) {
+                const position = menuButtonRect.bottom - dropDownElementRect.height;
+                topPosition = position < 0 ? margin : position;
+            }
+            dropDownElement.style.top = `${topPosition}px`;
+        }
+    }, [contextRef, dropDownRef, editor]);
+    useEffect(() => {
+        function handleClickOutside(event) {
+            if (dropDownRef.current != null &&
+                contextRef.current != null &&
+                isDOMNode(event.target) &&
+                !dropDownRef.current.contains(event.target) &&
+                !contextRef.current.contains(event.target)) {
+                setIsMenuOpen(false);
+            }
+        }
+        window.addEventListener('click', handleClickOutside);
+        return () => window.removeEventListener('click', handleClickOutside);
+    }, [setIsMenuOpen, contextRef]);
+    const clearTableSelection = useCallback(() => {
+        editor.update(() => {
+            if (tableCellNode.isAttached()) {
+                const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+                const tableElement = getTableElement(tableNode, editor.getElementByKey(tableNode.getKey()));
+                if (tableElement === null) {
+                    throw new Error('TableActionMenu: Expected to find tableElement in DOM');
+                }
+                const tableObserver = getTableObserverFromTableElement(tableElement);
+                if (tableObserver !== null) {
+                    tableObserver.$clearHighlight();
+                }
+                tableNode.markDirty();
+                updateTableCellNode(tableCellNode.getLatest());
+            }
+            $setSelection(null);
+        });
+    }, [editor, tableCellNode]);
+    const mergeTableCellsAtSelection = () => {
+        editor.update(() => {
+            const selection = $getSelection();
+            if (!$isTableSelection(selection)) {
+                return;
+            }
+            const nodes = selection.getNodes();
+            const tableCells = nodes.filter($isTableCellNode);
+            const targetCell = $mergeCells(tableCells);
+            if (targetCell) {
+                $selectLastDescendant(targetCell);
+                onClose();
+            }
+        });
+    };
+    const unmergeTableCellsAtSelection = () => {
+        editor.update(() => {
+            $unmergeCell();
+        });
+    };
+    const insertTableRowAtSelection = useCallback((shouldInsertAfter) => {
+        editor.update(() => {
+            for (let i = 0; i < selectionCounts.rows; i++) {
+                $insertTableRowAtSelection(shouldInsertAfter);
+            }
+            onClose();
+        });
+    }, [editor, onClose, selectionCounts.rows]);
+    const insertTableColumnAtSelection = useCallback((shouldInsertAfter) => {
+        editor.update(() => {
+            for (let i = 0; i < selectionCounts.columns; i++) {
+                $insertTableColumnAtSelection(shouldInsertAfter);
+            }
+            onClose();
+        });
+    }, [editor, onClose, selectionCounts.columns]);
+    const deleteTableRowAtSelection = useCallback(() => {
+        editor.update(() => {
+            $deleteTableRowAtSelection();
+            onClose();
+        });
+    }, [editor, onClose]);
+    const deleteTableAtSelection = useCallback(() => {
+        editor.update(() => {
+            const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+            tableNode.remove();
+            clearTableSelection();
+            onClose();
+        });
+    }, [editor, tableCellNode, clearTableSelection, onClose]);
+    const deleteTableColumnAtSelection = useCallback(() => {
+        editor.update(() => {
+            $deleteTableColumnAtSelection();
+            onClose();
+        });
+    }, [editor, onClose]);
+    const toggleTableRowIsHeader = useCallback(() => {
+        editor.update(() => {
+            const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+            const tableRowIndex = $getTableRowIndexFromTableCellNode(tableCellNode);
+            const [gridMap] = $computeTableMapSkipCellCheck(tableNode, null, null);
+            const rowCells = new Set();
+            const newStyle = tableCellNode.getHeaderStyles() ^ TableCellHeaderStates.ROW;
+            for (let col = 0; col < gridMap[tableRowIndex].length; col++) {
+                const mapCell = gridMap[tableRowIndex][col];
+                if (!mapCell?.cell) {
+                    continue;
+                }
+                if (!rowCells.has(mapCell.cell)) {
+                    rowCells.add(mapCell.cell);
+                    mapCell.cell.setHeaderStyles(newStyle, TableCellHeaderStates.ROW);
+                }
+            }
+            clearTableSelection();
+            onClose();
+        });
+    }, [editor, tableCellNode, clearTableSelection, onClose]);
+    const toggleTableColumnIsHeader = useCallback(() => {
+        editor.update(() => {
+            const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+            const tableColumnIndex = $getTableColumnIndexFromTableCellNode(tableCellNode);
+            const [gridMap] = $computeTableMapSkipCellCheck(tableNode, null, null);
+            const columnCells = new Set();
+            const newStyle = tableCellNode.getHeaderStyles() ^ TableCellHeaderStates.COLUMN;
+            for (let row = 0; row < gridMap.length; row++) {
+                const mapCell = gridMap[row][tableColumnIndex];
+                if (!mapCell?.cell) {
+                    continue;
+                }
+                if (!columnCells.has(mapCell.cell)) {
+                    columnCells.add(mapCell.cell);
+                    mapCell.cell.setHeaderStyles(newStyle, TableCellHeaderStates.COLUMN);
+                }
+            }
+            clearTableSelection();
+            onClose();
+        });
+    }, [editor, tableCellNode, clearTableSelection, onClose]);
+    const toggleRowStriping = useCallback(() => {
+        editor.update(() => {
+            if (tableCellNode.isAttached()) {
+                const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+                if (tableNode) {
+                    tableNode.setRowStriping(!tableNode.getRowStriping());
+                }
+            }
+            clearTableSelection();
+            onClose();
+        });
+    }, [editor, tableCellNode, clearTableSelection, onClose]);
+    const toggleFirstRowFreeze = useCallback(() => {
+        editor.update(() => {
+            if (tableCellNode.isAttached()) {
+                const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+                if (tableNode) {
+                    tableNode.setFrozenRows(tableNode.getFrozenRows() === 0 ? 1 : 0);
+                }
+            }
+            clearTableSelection();
+            onClose();
+        });
+    }, [editor, tableCellNode, clearTableSelection, onClose]);
+    const toggleFirstColumnFreeze = useCallback(() => {
+        editor.update(() => {
+            if (tableCellNode.isAttached()) {
+                const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+                if (tableNode) {
+                    tableNode.setFrozenColumns(tableNode.getFrozenColumns() === 0 ? 1 : 0);
+                }
+            }
+            clearTableSelection();
+            onClose();
+        });
+    }, [editor, tableCellNode, clearTableSelection, onClose]);
+    const handleCellBackgroundColor = useCallback((value) => {
+        editor.update(() => {
+            const selection = $getSelection();
+            if ($isRangeSelection(selection) || $isTableSelection(selection)) {
+                const [cell] = $getNodeTriplet(selection.anchor);
+                if ($isTableCellNode(cell)) {
+                    cell.setBackgroundColor(value);
+                }
+                if ($isTableSelection(selection)) {
+                    const nodes = selection.getNodes();
+                    for (let i = 0; i < nodes.length; i++) {
+                        const node = nodes[i];
+                        if ($isTableCellNode(node)) {
+                            node.setBackgroundColor(value);
+                        }
+                    }
+                }
+            }
+        });
+    }, [editor]);
+    const formatVerticalAlign = (value) => {
+        editor.update(() => {
+            const selection = $getSelection();
+            if ($isRangeSelection(selection) || $isTableSelection(selection)) {
+                const [cell] = $getNodeTriplet(selection.anchor);
+                if ($isTableCellNode(cell)) {
+                    cell.setVerticalAlign(value);
+                }
+                if ($isTableSelection(selection)) {
+                    const nodes = selection.getNodes();
+                    for (let i = 0; i < nodes.length; i++) {
+                        const node = nodes[i];
+                        if ($isTableCellNode(node)) {
+                            node.setVerticalAlign(value);
+                        }
+                    }
+                }
+            }
+        });
+    };
+    let mergeCellButton = null;
+    if (cellMerge) {
+        if (canMergeCells) {
+            mergeCellButton = (_jsx("button", { type: "button", className: "item", onClick: () => mergeTableCellsAtSelection(), "data-test-id": "table-merge-cells", children: _jsx("span", { className: "text", children: "Merge cells" }) }));
+        }
+        else if (canUnmergeCell) {
+            mergeCellButton = (_jsx("button", { type: "button", className: "item", onClick: () => unmergeTableCellsAtSelection(), "data-test-id": "table-unmerge-cells", children: _jsx("span", { className: "text", children: "Unmerge cells" }) }));
+        }
+    }
+    return createPortal(_jsxs("div", { className: "dropdown", ref: dropDownRef, onClick: e => {
+            e.stopPropagation();
+        }, children: [mergeCellButton, _jsx("button", { type: "button", className: "item", onClick: () => showColorPickerModal('Cell background color', () => (_jsx(ColorPicker, { color: backgroundColor, onChange: handleCellBackgroundColor }))), "data-test-id": "table-background-color", children: _jsx("span", { className: "text", children: "Background color" }) }), _jsx("button", { type: "button", className: "item", onClick: () => toggleRowStriping(), "data-test-id": "table-row-striping", children: _jsx("span", { className: "text", children: "Toggle Row Striping" }) }), _jsxs(DropDown, { buttonLabel: "Vertical Align", buttonClassName: "item", buttonAriaLabel: "Formatting options for vertical alignment", children: [_jsx(DropDownItem, { onClick: () => {
+                            formatVerticalAlign('top');
+                        }, className: "item wide", children: _jsxs("div", { className: "icon-text-container", children: [_jsx("i", { className: "icon vertical-top" }), _jsx("span", { className: "text", children: "Top Align" })] }) }), _jsx(DropDownItem, { onClick: () => {
+                            formatVerticalAlign('middle');
+                        }, className: "item wide", children: _jsxs("div", { className: "icon-text-container", children: [_jsx("i", { className: "icon vertical-middle" }), _jsx("span", { className: "text", children: "Middle Align" })] }) }), _jsx(DropDownItem, { onClick: () => {
+                            formatVerticalAlign('bottom');
+                        }, className: "item wide", children: _jsxs("div", { className: "icon-text-container", children: [_jsx("i", { className: "icon vertical-bottom" }), _jsx("span", { className: "text", children: "Bottom Align" })] }) })] }), _jsx("button", { type: "button", className: "item", onClick: () => toggleFirstRowFreeze(), "data-test-id": "table-freeze-first-row", children: _jsx("span", { className: "text", children: "Toggle First Row Freeze" }) }), _jsx("button", { type: "button", className: "item", onClick: () => toggleFirstColumnFreeze(), "data-test-id": "table-freeze-first-column", children: _jsx("span", { className: "text", children: "Toggle First Column Freeze" }) }), _jsx("hr", {}), _jsx("button", { type: "button", className: "item", onClick: () => insertTableRowAtSelection(false), "data-test-id": "table-insert-row-above", children: _jsxs("span", { className: "text", children: ["Insert", ' ', selectionCounts.rows === 1 ? 'row' : `${selectionCounts.rows} rows`, ' ', "above"] }) }), _jsx("button", { type: "button", className: "item", onClick: () => insertTableRowAtSelection(true), "data-test-id": "table-insert-row-below", children: _jsxs("span", { className: "text", children: ["Insert", ' ', selectionCounts.rows === 1 ? 'row' : `${selectionCounts.rows} rows`, ' ', "below"] }) }), _jsx("hr", {}), _jsx("button", { type: "button", className: "item", onClick: () => insertTableColumnAtSelection(false), "data-test-id": "table-insert-column-before", children: _jsxs("span", { className: "text", children: ["Insert", ' ', selectionCounts.columns === 1
+                            ? 'column'
+                            : `${selectionCounts.columns} columns`, ' ', "left"] }) }), _jsx("button", { type: "button", className: "item", onClick: () => insertTableColumnAtSelection(true), "data-test-id": "table-insert-column-after", children: _jsxs("span", { className: "text", children: ["Insert", ' ', selectionCounts.columns === 1
+                            ? 'column'
+                            : `${selectionCounts.columns} columns`, ' ', "right"] }) }), _jsx("hr", {}), _jsx("button", { type: "button", className: "item", onClick: () => deleteTableColumnAtSelection(), "data-test-id": "table-delete-columns", children: _jsx("span", { className: "text", children: "Delete column" }) }), _jsx("button", { type: "button", className: "item", onClick: () => deleteTableRowAtSelection(), "data-test-id": "table-delete-rows", children: _jsx("span", { className: "text", children: "Delete row" }) }), _jsx("button", { type: "button", className: "item", onClick: () => deleteTableAtSelection(), "data-test-id": "table-delete", children: _jsx("span", { className: "text", children: "Delete table" }) }), _jsx("hr", {}), _jsx("button", { type: "button", className: "item", onClick: () => toggleTableRowIsHeader(), "data-test-id": "table-row-header", children: _jsxs("span", { className: "text", children: [(tableCellNode.__headerState & TableCellHeaderStates.ROW) ===
+                            TableCellHeaderStates.ROW
+                            ? 'Remove'
+                            : 'Add', ' ', "row header"] }) }), _jsx("button", { type: "button", className: "item", onClick: () => toggleTableColumnIsHeader(), "data-test-id": "table-column-header", children: _jsxs("span", { className: "text", children: [(tableCellNode.__headerState & TableCellHeaderStates.COLUMN) ===
+                            TableCellHeaderStates.COLUMN
+                            ? 'Remove'
+                            : 'Add', ' ', "column header"] }) })] }), document.body);
+}
+function TableCellActionMenuContainer({ anchorElem, cellMerge, }) {
+    const [editor] = useLexicalComposerContext();
+    const menuButtonRef = useRef(null);
+    const menuRootRef = useRef(null);
+    const [isMenuOpen, setIsMenuOpen] = useState(false);
+    const [tableCellNode, setTableMenuCellNode] = useState(null);
+    const [colorPickerModal, showColorPickerModal] = useModal();
+    const checkTableCellOverflow = useCallback((tableCellParentNodeDOM) => {
+        const scrollableContainer = tableCellParentNodeDOM.closest('.PlaygroundEditorTheme__tableScrollableWrapper');
+        if (scrollableContainer) {
+            const containerRect = scrollableContainer.getBoundingClientRect();
+            const cellRect = tableCellParentNodeDOM.getBoundingClientRect();
+            // Calculate where the action button would be positioned (5px from right edge of cell)
+            // Also account for the button width and table cell padding (8px)
+            const actionButtonRight = cellRect.right - 5;
+            const actionButtonLeft = actionButtonRight - 28; // 20px width + 8px padding
+            // Only hide if the action button would overflow the container
+            if (actionButtonRight > containerRect.right ||
+                actionButtonLeft < containerRect.left) {
+                return true;
+            }
+        }
+        return false;
+    }, []);
+    const $moveMenu = useCallback(() => {
+        const menu = menuButtonRef.current;
+        const selection = $getSelection();
+        const nativeSelection = getDOMSelection(editor._window);
+        const activeElement = document.activeElement;
+        function disable() {
+            if (menu) {
+                menu.classList.remove('PlaygroundEditorTheme__tableCellActionButtonContainer--active');
+                menu.classList.add('PlaygroundEditorTheme__tableCellActionButtonContainer--inactive');
+            }
+            setTableMenuCellNode(null);
+        }
+        if (selection == null || menu == null) {
+            return disable();
+        }
+        const rootElement = editor.getRootElement();
+        let tableObserver = null;
+        let tableCellParentNodeDOM = null;
+        if ($isRangeSelection(selection) &&
+            rootElement !== null &&
+            nativeSelection !== null &&
+            rootElement.contains(nativeSelection.anchorNode)) {
+            const tableCellNodeFromSelection = $getTableCellNodeFromLexicalNode(selection.anchor.getNode());
+            if (tableCellNodeFromSelection == null) {
+                return disable();
+            }
+            tableCellParentNodeDOM = editor.getElementByKey(tableCellNodeFromSelection.getKey());
+            if (tableCellParentNodeDOM == null ||
+                !tableCellNodeFromSelection.isAttached()) {
+                return disable();
+            }
+            if (checkTableCellOverflow(tableCellParentNodeDOM)) {
+                return disable();
+            }
+            const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNodeFromSelection);
+            const tableElement = getTableElement(tableNode, editor.getElementByKey(tableNode.getKey()));
+            if (tableElement === null) {
+                throw new Error('TableActionMenu: Expected to find tableElement in DOM');
+            }
+            tableObserver = getTableObserverFromTableElement(tableElement);
+            setTableMenuCellNode(tableCellNodeFromSelection);
+        }
+        else if ($isTableSelection(selection)) {
+            const anchorNode = $getTableCellNodeFromLexicalNode(selection.anchor.getNode());
+            if (!$isTableCellNode(anchorNode)) {
+                throw new Error('TableSelection anchorNode must be a TableCellNode');
+            }
+            const tableNode = $getTableNodeFromLexicalNodeOrThrow(anchorNode);
+            const tableElement = getTableElement(tableNode, editor.getElementByKey(tableNode.getKey()));
+            if (tableElement === null) {
+                throw new Error('TableActionMenu: Expected to find tableElement in DOM');
+            }
+            tableObserver = getTableObserverFromTableElement(tableElement);
+            tableCellParentNodeDOM = editor.getElementByKey(anchorNode.getKey());
+            if (tableCellParentNodeDOM === null) {
+                return disable();
+            }
+            if (checkTableCellOverflow(tableCellParentNodeDOM)) {
+                return disable();
+            }
+        }
+        else if (!activeElement) {
+            return disable();
+        }
+        if (tableObserver === null || tableCellParentNodeDOM === null) {
+            return disable();
+        }
+        const enabled = !tableObserver || !tableObserver.isSelecting;
+        menu.classList.toggle('PlaygroundEditorTheme__tableCellActionButtonContainer--active', enabled);
+        menu.classList.toggle('PlaygroundEditorTheme__tableCellActionButtonContainer--inactive', !enabled);
+        if (enabled) {
+            const tableCellRect = tableCellParentNodeDOM.getBoundingClientRect();
+            const anchorRect = anchorElem.getBoundingClientRect();
+            const top = tableCellRect.top - anchorRect.top + 6; // 6px from top edge
+            const left = tableCellRect.right - anchorRect.left - 29; // 24px button + 5px padding from right edge
+            menu.style.transform = `translate(${left}px, ${top}px)`;
+        }
+    }, [editor, anchorElem, checkTableCellOverflow]);
+    useEffect(() => {
+        // We call the $moveMenu callback every time the selection changes,
+        // once up front, and once after each pointerUp
+        let timeoutId = undefined;
+        const callback = () => {
+            timeoutId = undefined;
+            editor.getEditorState().read($moveMenu);
+        };
+        const delayedCallback = () => {
+            if (timeoutId === undefined) {
+                timeoutId = setTimeout(callback, 0);
+            }
+            return false;
+        };
+        // Update position on scroll - catch all scroll events
+        const handleScroll = () => {
+            delayedCallback();
+        };
+        // Add scroll listeners to document and window to catch all scrolls
+        document.addEventListener('scroll', handleScroll, true);
+        window.addEventListener('scroll', handleScroll, true);
+        const cleanup = mergeRegister(editor.registerUpdateListener(delayedCallback), editor.registerCommand(SELECTION_CHANGE_COMMAND, delayedCallback, COMMAND_PRIORITY_CRITICAL), editor.registerRootListener((rootElement, prevRootElement) => {
+            if (prevRootElement) {
+                prevRootElement.removeEventListener('pointerup', delayedCallback);
+            }
+            if (rootElement) {
+                rootElement.addEventListener('pointerup', delayedCallback);
+                delayedCallback();
+            }
+        }), () => {
+            clearTimeout(timeoutId);
+            document.removeEventListener('scroll', handleScroll, true);
+            window.removeEventListener('scroll', handleScroll, true);
+        });
+        return cleanup;
+    });
+    const prevTableCellDOM = useRef(tableCellNode);
+    useEffect(() => {
+        if (prevTableCellDOM.current !== tableCellNode) {
+            setIsMenuOpen(false);
+        }
+        prevTableCellDOM.current = tableCellNode;
+    }, [prevTableCellDOM, tableCellNode]);
+    return (_jsx("div", { className: "PlaygroundEditorTheme__tableCellActionButtonContainer", ref: menuButtonRef, children: tableCellNode != null && (_jsxs(_Fragment, { children: [_jsx("button", { type: "button", className: "PlaygroundEditorTheme__tableCellActionButton chevron-down", onClick: e => {
+                        e.stopPropagation();
+                        setIsMenuOpen(!isMenuOpen);
+                    }, ref: menuRootRef }), colorPickerModal, isMenuOpen && (_jsx(TableActionMenu, { contextRef: menuRootRef, setIsMenuOpen: setIsMenuOpen, onClose: () => setIsMenuOpen(false), tableCellNode: tableCellNode, cellMerge: cellMerge, showColorPickerModal: showColorPickerModal }))] })) }));
+}
+export default function TableActionMenuPlugin({ anchorElem = document.body, cellMerge = false, }) {
+    const isEditable = useLexicalEditable();
+    return createPortal(isEditable ? (_jsx(TableCellActionMenuContainer, { anchorElem: anchorElem, cellMerge: cellMerge })) : null, anchorElem);
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.js.map
new file mode 100644
index 0000000..d9c987e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableActionMenuPlugin/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/TableActionMenuPlugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.css b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.css
new file mode 100644
index 0000000..1ac40f0
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.css
@@ -0,0 +1,26 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ *
+ */
+
+.TableCellResizer__resizer {
+  position: absolute;
+  touch-action: none;
+}
+
+@media (pointer: coarse) {
+  .TableCellResizer__resizer {
+    background-color: #adf;
+    mix-blend-mode: color;
+  }
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.d.ts
new file mode 100644
index 0000000..3de934b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.d.ts
@@ -0,0 +1,2 @@
+import { ReactPortal } from 'react';
+export default function TableCellResizerPlugin(): null | ReactPortal;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.js
new file mode 100644
index 0000000..6f39a7a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.js
@@ -0,0 +1,298 @@
+import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-runtime";
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { useLexicalEditable } from '@lexical/react/useLexicalEditable';
+import { $computeTableMapSkipCellCheck, $getTableNodeFromLexicalNodeOrThrow, $getTableRowIndexFromTableCellNode, $isTableCellNode, $isTableRowNode, getDOMCellFromTarget, getTableElement, TableNode, } from '@lexical/table';
+import { calculateZoomLevel, mergeRegister } from '@lexical/utils';
+import { $getNearestNodeFromDOMNode, isHTMLElement, SKIP_SCROLL_INTO_VIEW_TAG, } from 'lexical';
+import { useCallback, useEffect, useMemo, useRef, useState, } from 'react';
+import { createPortal } from 'react-dom';
+const MIN_ROW_HEIGHT = 33;
+const MIN_COLUMN_WIDTH = 92;
+function TableCellResizer({ editor }) {
+    const targetRef = useRef(null);
+    const resizerRef = useRef(null);
+    const tableRectRef = useRef(null);
+    const [hasTable, setHasTable] = useState(false);
+    const pointerStartPosRef = useRef(null);
+    const [pointerCurrentPos, updatePointerCurrentPos] = useState(null);
+    const [activeCell, updateActiveCell] = useState(null);
+    const [draggingDirection, updateDraggingDirection] = useState(null);
+    const resetState = useCallback(() => {
+        updateActiveCell(null);
+        targetRef.current = null;
+        updateDraggingDirection(null);
+        pointerStartPosRef.current = null;
+        tableRectRef.current = null;
+    }, []);
+    useEffect(() => {
+        const tableKeys = new Set();
+        return mergeRegister(editor.registerMutationListener(TableNode, nodeMutations => {
+            for (const [nodeKey, mutation] of nodeMutations) {
+                if (mutation === 'destroyed') {
+                    tableKeys.delete(nodeKey);
+                }
+                else {
+                    tableKeys.add(nodeKey);
+                }
+            }
+            const hasTableNow = tableKeys.size > 0;
+            setHasTable(hasTableNow);
+        }), editor.registerNodeTransform(TableNode, tableNode => {
+            if (tableNode.getColWidths()) {
+                return tableNode;
+            }
+            const numColumns = tableNode.getColumnCount();
+            const columnWidth = MIN_COLUMN_WIDTH;
+            tableNode.setColWidths(Array(numColumns).fill(columnWidth));
+            return tableNode;
+        }));
+    }, [editor]);
+    useEffect(() => {
+        if (!hasTable) {
+            return;
+        }
+        const onPointerMove = (event) => {
+            const target = event.target;
+            if (!isHTMLElement(target)) {
+                return;
+            }
+            if (draggingDirection) {
+                event.preventDefault();
+                event.stopPropagation();
+                updatePointerCurrentPos({
+                    x: event.clientX,
+                    y: event.clientY,
+                });
+                return;
+            }
+            if (resizerRef.current && resizerRef.current.contains(target)) {
+                return;
+            }
+            if (targetRef.current !== target) {
+                targetRef.current = target;
+                const cell = getDOMCellFromTarget(target);
+                if (cell && activeCell !== cell) {
+                    editor.getEditorState().read(() => {
+                        const tableCellNode = $getNearestNodeFromDOMNode(cell.elem);
+                        if (!tableCellNode) {
+                            throw new Error('TableCellResizer: Table cell node not found.');
+                        }
+                        const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+                        const tableElement = getTableElement(tableNode, editor.getElementByKey(tableNode.getKey()));
+                        if (!tableElement) {
+                            throw new Error('TableCellResizer: Table element not found.');
+                        }
+                        targetRef.current = target;
+                        tableRectRef.current = tableElement.getBoundingClientRect();
+                        updateActiveCell(cell);
+                    }, { editor });
+                }
+                else if (cell == null) {
+                    resetState();
+                }
+            }
+        };
+        const onPointerDown = (event) => {
+            const isTouchEvent = event.pointerType === 'touch';
+            if (isTouchEvent) {
+                onPointerMove(event);
+            }
+        };
+        const resizerContainer = resizerRef.current;
+        resizerContainer?.addEventListener('pointermove', onPointerMove, {
+            capture: true,
+        });
+        const removeRootListener = editor.registerRootListener((rootElement, prevRootElement) => {
+            prevRootElement?.removeEventListener('pointermove', onPointerMove);
+            prevRootElement?.removeEventListener('pointerdown', onPointerDown);
+            rootElement?.addEventListener('pointermove', onPointerMove);
+            rootElement?.addEventListener('pointerdown', onPointerDown);
+        });
+        return () => {
+            removeRootListener();
+            resizerContainer?.removeEventListener('pointermove', onPointerMove);
+        };
+    }, [activeCell, draggingDirection, editor, resetState, hasTable]);
+    const isHeightChanging = (direction) => {
+        if (direction === 'bottom') {
+            return true;
+        }
+        return false;
+    };
+    const updateRowHeight = useCallback((heightChange) => {
+        if (!activeCell) {
+            throw new Error('TableCellResizer: Expected active cell.');
+        }
+        editor.update(() => {
+            const tableCellNode = $getNearestNodeFromDOMNode(activeCell.elem);
+            if (!$isTableCellNode(tableCellNode)) {
+                throw new Error('TableCellResizer: Table cell node not found.');
+            }
+            const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+            const baseRowIndex = $getTableRowIndexFromTableCellNode(tableCellNode);
+            const tableRows = tableNode.getChildren();
+            // Determine if this is a full row merge by checking colspan
+            const isFullRowMerge = tableCellNode.getColSpan() === tableNode.getColumnCount();
+            // For full row merges, apply to first row. For partial merges, apply to last row
+            const tableRowIndex = isFullRowMerge
+                ? baseRowIndex
+                : baseRowIndex + tableCellNode.getRowSpan() - 1;
+            if (tableRowIndex >= tableRows.length || tableRowIndex < 0) {
+                throw new Error('Expected table cell to be inside of table row.');
+            }
+            const tableRow = tableRows[tableRowIndex];
+            if (!$isTableRowNode(tableRow)) {
+                throw new Error('Expected table row');
+            }
+            let height = tableRow.getHeight();
+            if (height === undefined) {
+                const rowCells = tableRow.getChildren();
+                height = Math.min(...rowCells.map(cell => getCellNodeHeight(cell, editor) ?? Infinity));
+            }
+            const newHeight = Math.max(height + heightChange, MIN_ROW_HEIGHT);
+            tableRow.setHeight(newHeight);
+        }, { tag: SKIP_SCROLL_INTO_VIEW_TAG });
+    }, [activeCell, editor]);
+    const getCellNodeHeight = (cell, activeEditor) => {
+        const domCellNode = activeEditor.getElementByKey(cell.getKey());
+        return domCellNode?.clientHeight;
+    };
+    const getCellColumnIndex = (tableCellNode, tableMap) => {
+        for (let row = 0; row < tableMap.length; row++) {
+            for (let column = 0; column < tableMap[row].length; column++) {
+                if (tableMap[row][column].cell === tableCellNode) {
+                    return column;
+                }
+            }
+        }
+    };
+    const updateColumnWidth = useCallback((widthChange) => {
+        if (!activeCell) {
+            throw new Error('TableCellResizer: Expected active cell.');
+        }
+        editor.update(() => {
+            const tableCellNode = $getNearestNodeFromDOMNode(activeCell.elem);
+            if (!$isTableCellNode(tableCellNode)) {
+                throw new Error('TableCellResizer: Table cell node not found.');
+            }
+            const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode);
+            const [tableMap] = $computeTableMapSkipCellCheck(tableNode, null, null);
+            const columnIndex = getCellColumnIndex(tableCellNode, tableMap);
+            if (columnIndex === undefined) {
+                throw new Error('TableCellResizer: Table column not found.');
+            }
+            const colWidths = tableNode.getColWidths();
+            if (!colWidths) {
+                return;
+            }
+            const width = colWidths[columnIndex];
+            if (width === undefined) {
+                return;
+            }
+            const newColWidths = [...colWidths];
+            const newWidth = Math.max(width + widthChange, MIN_COLUMN_WIDTH);
+            newColWidths[columnIndex] = newWidth;
+            tableNode.setColWidths(newColWidths);
+        }, { tag: SKIP_SCROLL_INTO_VIEW_TAG });
+    }, [activeCell, editor]);
+    const pointerUpHandler = useCallback((direction) => {
+        const handler = (event) => {
+            event.preventDefault();
+            event.stopPropagation();
+            if (!activeCell) {
+                throw new Error('TableCellResizer: Expected active cell.');
+            }
+            if (pointerStartPosRef.current) {
+                const { x, y } = pointerStartPosRef.current;
+                if (activeCell === null) {
+                    return;
+                }
+                const zoom = calculateZoomLevel(event.target);
+                if (isHeightChanging(direction)) {
+                    const heightChange = (event.clientY - y) / zoom;
+                    updateRowHeight(heightChange);
+                }
+                else {
+                    const widthChange = (event.clientX - x) / zoom;
+                    updateColumnWidth(widthChange);
+                }
+                resetState();
+                document.removeEventListener('pointerup', handler);
+            }
+        };
+        return handler;
+    }, [activeCell, resetState, updateColumnWidth, updateRowHeight]);
+    const toggleResize = useCallback((direction) => event => {
+        event.preventDefault();
+        event.stopPropagation();
+        if (!activeCell) {
+            throw new Error('TableCellResizer: Expected active cell.');
+        }
+        pointerStartPosRef.current = {
+            x: event.clientX,
+            y: event.clientY,
+        };
+        updatePointerCurrentPos(pointerStartPosRef.current);
+        updateDraggingDirection(direction);
+        document.addEventListener('pointerup', pointerUpHandler(direction));
+    }, [activeCell, pointerUpHandler]);
+    const getResizers = useCallback(() => {
+        if (activeCell) {
+            const { height, width, top, left } = activeCell.elem.getBoundingClientRect();
+            const zoom = calculateZoomLevel(activeCell.elem);
+            const zoneWidth = 4; // Pixel width of the zone where you can drag the edge
+            const styles = {
+                bottom: {
+                    backgroundColor: 'none',
+                    cursor: 'row-resize',
+                    height: `${zoneWidth}px`,
+                    left: `${window.scrollX + left}px`,
+                    top: `${window.scrollY + top + height - zoneWidth / 2}px`,
+                    width: `${width}px`,
+                },
+                right: {
+                    backgroundColor: 'none',
+                    cursor: 'col-resize',
+                    height: `${height}px`,
+                    left: `${window.scrollX + left + width - zoneWidth / 2}px`,
+                    top: `${window.scrollY + top}px`,
+                    width: `${zoneWidth}px`,
+                },
+            };
+            const tableRect = tableRectRef.current;
+            if (draggingDirection && pointerCurrentPos && tableRect) {
+                if (isHeightChanging(draggingDirection)) {
+                    styles[draggingDirection].left = `${window.scrollX + tableRect.left}px`;
+                    styles[draggingDirection].top = `${window.scrollY + pointerCurrentPos.y / zoom}px`;
+                    styles[draggingDirection].height = '3px';
+                    styles[draggingDirection].width = `${tableRect.width}px`;
+                }
+                else {
+                    styles[draggingDirection].top = `${window.scrollY + tableRect.top}px`;
+                    styles[draggingDirection].left = `${window.scrollX + pointerCurrentPos.x / zoom}px`;
+                    styles[draggingDirection].width = '3px';
+                    styles[draggingDirection].height = `${tableRect.height}px`;
+                }
+                styles[draggingDirection].backgroundColor = '#adf';
+                styles[draggingDirection].mixBlendMode = 'unset';
+            }
+            return styles;
+        }
+        return {
+            bottom: null,
+            left: null,
+            right: null,
+            top: null,
+        };
+    }, [activeCell, draggingDirection, pointerCurrentPos]);
+    const resizerStyles = getResizers();
+    return (_jsx("div", { ref: resizerRef, children: activeCell != null && (_jsxs(_Fragment, { children: [_jsx("div", { className: "TableCellResizer__resizer TableCellResizer__ui", style: resizerStyles.right || undefined, onPointerDown: toggleResize('right') }), _jsx("div", { className: "TableCellResizer__resizer TableCellResizer__ui", style: resizerStyles.bottom || undefined, onPointerDown: toggleResize('bottom') })] })) }));
+}
+export default function TableCellResizerPlugin() {
+    const [editor] = useLexicalComposerContext();
+    const isEditable = useLexicalEditable();
+    return useMemo(() => isEditable
+        ? createPortal(_jsx(TableCellResizer, { editor: editor }), document.body)
+        : null, [editor, isEditable]);
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.js.map
new file mode 100644
index 0000000..d2c4dba
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableCellResizer/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/TableCellResizer/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.d.ts
new file mode 100644
index 0000000..83360bf
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.d.ts
@@ -0,0 +1,4 @@
+import * as React from 'react';
+export default function TableHoverActionsPlugin({ anchorElem, }: {
+    anchorElem?: HTMLElement;
+}): React.ReactPortal | null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.js
new file mode 100644
index 0000000..73fdc15
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.js
@@ -0,0 +1,198 @@
+import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-runtime";
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { useLexicalEditable } from '@lexical/react/useLexicalEditable';
+import { $getTableAndElementByKey, $getTableColumnIndexFromTableCellNode, $getTableRowIndexFromTableCellNode, $insertTableColumnAtSelection, $insertTableRowAtSelection, $isTableCellNode, $isTableNode, getTableElement, TableNode, } from '@lexical/table';
+import { $findMatchingParent, mergeRegister } from '@lexical/utils';
+import { $getNearestNodeFromDOMNode, isHTMLElement, } from 'lexical';
+import { useEffect, useMemo, useRef, useState } from 'react';
+import { createPortal } from 'react-dom';
+import { getThemeSelector } from '../../utils/getThemeSelector';
+import { useDebounce } from '../CodeActionMenuPlugin/utils';
+const BUTTON_WIDTH_PX = 20;
+function TableHoverActionsContainer({ anchorElem, }) {
+    const [editor, { getTheme }] = useLexicalComposerContext();
+    const isEditable = useLexicalEditable();
+    const [isShownRow, setShownRow] = useState(false);
+    const [isShownColumn, setShownColumn] = useState(false);
+    const [shouldListenMouseMove, setShouldListenMouseMove] = useState(false);
+    const [position, setPosition] = useState({});
+    const tableSetRef = useRef(new Set());
+    const tableCellDOMNodeRef = useRef(null);
+    const debouncedOnMouseMove = useDebounce((event) => {
+        const { isOutside, tableDOMNode } = getMouseInfo(event, getTheme);
+        if (isOutside) {
+            setShownRow(false);
+            setShownColumn(false);
+            return;
+        }
+        if (!tableDOMNode) {
+            return;
+        }
+        tableCellDOMNodeRef.current = tableDOMNode;
+        let hoveredRowNode = null;
+        let hoveredColumnNode = null;
+        let tableDOMElement = null;
+        editor.getEditorState().read(() => {
+            const maybeTableCell = $getNearestNodeFromDOMNode(tableDOMNode);
+            if ($isTableCellNode(maybeTableCell)) {
+                const table = $findMatchingParent(maybeTableCell, node => $isTableNode(node));
+                if (!$isTableNode(table)) {
+                    return;
+                }
+                tableDOMElement = getTableElement(table, editor.getElementByKey(table.getKey()));
+                if (tableDOMElement) {
+                    const rowCount = table.getChildrenSize();
+                    const colCount = table.getChildAtIndex(0)?.getChildrenSize();
+                    const rowIndex = $getTableRowIndexFromTableCellNode(maybeTableCell);
+                    const colIndex = $getTableColumnIndexFromTableCellNode(maybeTableCell);
+                    if (rowIndex === rowCount - 1) {
+                        hoveredRowNode = maybeTableCell;
+                    }
+                    else if (colIndex === colCount - 1) {
+                        hoveredColumnNode = maybeTableCell;
+                    }
+                }
+            }
+        }, { editor });
+        if (tableDOMElement) {
+            const { width: tableElemWidth, y: tableElemY, right: tableElemRight, left: tableElemLeft, bottom: tableElemBottom, height: tableElemHeight, } = tableDOMElement.getBoundingClientRect();
+            // Adjust for using the scrollable table container
+            const parentElement = tableDOMElement
+                .parentElement;
+            let tableHasScroll = false;
+            if (parentElement &&
+                parentElement.classList.contains('PlaygroundEditorTheme__tableScrollableWrapper')) {
+                tableHasScroll =
+                    parentElement.scrollWidth > parentElement.clientWidth;
+            }
+            const { y: editorElemY, left: editorElemLeft } = anchorElem.getBoundingClientRect();
+            if (hoveredRowNode) {
+                const rowPosition = {
+                    height: BUTTON_WIDTH_PX,
+                    left: tableHasScroll && parentElement
+                        ? parentElement.offsetLeft
+                        : tableElemLeft - editorElemLeft,
+                    top: tableElemBottom - editorElemY,
+                    width: tableHasScroll && parentElement
+                        ? parentElement.offsetWidth
+                        : tableElemWidth,
+                };
+                setShownColumn(false);
+                setShownRow(true);
+                setPosition(rowPosition);
+            }
+            else if (hoveredColumnNode) {
+                const colPosition = {
+                    height: tableElemHeight,
+                    left: tableElemRight - editorElemLeft,
+                    top: tableElemY - editorElemY,
+                    width: BUTTON_WIDTH_PX,
+                };
+                setShownColumn(true);
+                setShownRow(false);
+                setPosition(colPosition);
+            }
+        }
+    }, 50, 250);
+    // Hide the buttons on any table dimensions change to prevent last row cells
+    // overlap behind the 'Add Row' button when text entry changes cell height
+    const tableResizeObserver = useMemo(() => {
+        return new ResizeObserver(() => {
+            setShownRow(false);
+            setShownColumn(false);
+        });
+    }, []);
+    useEffect(() => {
+        if (!shouldListenMouseMove) {
+            return;
+        }
+        // Hide buttons on scroll to prevent misalignment
+        const handleScroll = () => {
+            setShownRow(false);
+            setShownColumn(false);
+        };
+        document.addEventListener('mousemove', debouncedOnMouseMove);
+        document.addEventListener('scroll', handleScroll, true); // Use capture to catch all scrolls
+        return () => {
+            setShownRow(false);
+            setShownColumn(false);
+            debouncedOnMouseMove.cancel();
+            document.removeEventListener('mousemove', debouncedOnMouseMove);
+            document.removeEventListener('scroll', handleScroll, true);
+        };
+    }, [shouldListenMouseMove, debouncedOnMouseMove]);
+    useEffect(() => {
+        return mergeRegister(editor.registerMutationListener(TableNode, mutations => {
+            editor.getEditorState().read(() => {
+                let resetObserver = false;
+                for (const [key, type] of mutations) {
+                    switch (type) {
+                        case 'created': {
+                            tableSetRef.current.add(key);
+                            resetObserver = true;
+                            break;
+                        }
+                        case 'destroyed': {
+                            tableSetRef.current.delete(key);
+                            resetObserver = true;
+                            break;
+                        }
+                        default:
+                            break;
+                    }
+                }
+                if (resetObserver) {
+                    // Reset resize observers
+                    tableResizeObserver.disconnect();
+                    for (const tableKey of tableSetRef.current) {
+                        const { tableElement } = $getTableAndElementByKey(tableKey);
+                        tableResizeObserver.observe(tableElement);
+                    }
+                    setShouldListenMouseMove(tableSetRef.current.size > 0);
+                }
+            }, { editor });
+        }, { skipInitialization: false }));
+    }, [editor, tableResizeObserver]);
+    const insertAction = (insertRow) => {
+        editor.update(() => {
+            if (tableCellDOMNodeRef.current) {
+                const maybeTableNode = $getNearestNodeFromDOMNode(tableCellDOMNodeRef.current);
+                maybeTableNode?.selectEnd();
+                if (insertRow) {
+                    $insertTableRowAtSelection();
+                    setShownRow(false);
+                }
+                else {
+                    $insertTableColumnAtSelection();
+                    setShownColumn(false);
+                }
+            }
+        });
+    };
+    if (!isEditable) {
+        return null;
+    }
+    return (_jsxs(_Fragment, { children: [isShownRow && (_jsx("button", { className: `${getTheme()?.tableAddRows}`, style: { ...position }, onClick: () => insertAction(true) })), isShownColumn && (_jsx("button", { className: `${getTheme()?.tableAddColumns}`, style: { ...position }, onClick: () => insertAction(false) }))] }));
+}
+function getMouseInfo(event, getTheme) {
+    const target = event.target;
+    const tableCellClass = getThemeSelector(getTheme, 'tableCell');
+    if (isHTMLElement(target)) {
+        const tableDOMNode = target.closest(`td${tableCellClass}, th${tableCellClass}`);
+        const isOutside = !(tableDOMNode ||
+            target.closest(`button${getThemeSelector(getTheme, 'tableAddRows')}`) ||
+            target.closest(`button${getThemeSelector(getTheme, 'tableAddColumns')}`) ||
+            target.closest('div.TableCellResizer__resizer'));
+        return { isOutside, tableDOMNode };
+    }
+    else {
+        return { isOutside: true, tableDOMNode: null };
+    }
+}
+export default function TableHoverActionsPlugin({ anchorElem = document.body, }) {
+    const isEditable = useLexicalEditable();
+    return isEditable
+        ? createPortal(_jsx(TableHoverActionsContainer, { anchorElem: anchorElem }), anchorElem)
+        : null;
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.js.map
new file mode 100644
index 0000000..84a9ca6
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsPlugin/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/TableHoverActionsPlugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.css b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.css
new file mode 100644
index 0000000..d329600
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.css
@@ -0,0 +1,83 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ */
+
+.floating-add-indicator {
+  background-image: url(../../../style/lexical/icons/plus.svg);
+  background-color: #ffffff;
+  background-position: center;
+  background-repeat: no-repeat;
+  background-size: 12px 12px;
+  border: 1px solid #d0d0d0;
+  border-radius: 2px;
+  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
+  box-sizing: border-box;
+  height: 18px;
+  pointer-events: auto;
+  transition: opacity 80ms ease;
+  width: 18px;
+  z-index: 10;
+  cursor: pointer;
+}
+
+.floating-filter-indicator {
+  background-image: url(../../../style/lexical/icons/chevron-down.svg);
+  background-color: #ffffff;
+  background-position: center;
+  background-repeat: no-repeat;
+  background-size: 12px 12px;
+  border: 1px solid #d0d0d0;
+  border-radius: 2px;
+  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
+  box-sizing: border-box;
+  height: 18px;
+  pointer-events: auto;
+  transition: opacity 80ms ease;
+  width: 18px;
+  z-index: 10;
+  cursor: pointer;
+}
+
+.floating-filter-indicator:hover {
+  background-color: #f3f3f3;
+}
+
+.floating-add-indicator:hover {
+  background-color: #f3f3f3;
+}
+
+.floating-top-actions {
+  display: flex;
+  align-items: center;
+  gap: 4px;
+  position: relative;
+}
+
+.floating-filter-container {
+  position: relative;
+}
+
+.floating-sort-menu__item {
+  width: 100%;
+  padding: 6px 12px;
+  background: transparent;
+  border: none;
+  text-align: left;
+  font-size: 12px;
+  color: #1f1f1f;
+  cursor: pointer;
+}
+
+.floating-sort-menu__item:hover {
+  background-color: #f3f3f3;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.d.ts
new file mode 100644
index 0000000..74fd837
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.d.ts
@@ -0,0 +1,4 @@
+import './index.css';
+export default function TableHoverActionsV2Plugin({ anchorElem, }: {
+    anchorElem?: HTMLElement;
+}): React.ReactPortal | null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.js
new file mode 100644
index 0000000..9999ea6
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.js
@@ -0,0 +1,306 @@
+import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
+import './index.css';
+import { autoUpdate, offset, shift, useFloating, } from '@floating-ui/react';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { useLexicalEditable } from '@lexical/react/useLexicalEditable';
+import { $computeTableMapSkipCellCheck, $insertTableColumnAtSelection, $insertTableRowAtSelection, $isTableCellNode, $isTableNode, $isTableRowNode, } from '@lexical/table';
+import { $getChildCaret, $getNearestNodeFromDOMNode, $getSiblingCaret, isHTMLElement, } from 'lexical';
+import { useEffect, useRef, useState } from 'react';
+import { createPortal } from 'react-dom';
+import DropDown, { DropDownItem } from '../../components/DropDown';
+import { getThemeSelector } from '../../utils/getThemeSelector';
+const INDICATOR_SIZE_PX = 18;
+const SIDE_INDICATOR_SIZE_PX = 18;
+const TOP_BUTTON_OVERHANG = INDICATOR_SIZE_PX / 2;
+const LEFT_BUTTON_OVERHANG = SIDE_INDICATOR_SIZE_PX / 2;
+/**
+ * Checks if the table does not have any merged cells.
+ *
+ * @param table Table to check for if it has any merged cells.
+ * @returns True if the table does not have any merged cells, false otherwise.
+ */
+function $isSimpleTable(table) {
+    const rows = table.getChildren();
+    let columns = null;
+    for (const row of rows) {
+        if (!$isTableRowNode(row)) {
+            return false;
+        }
+        if (columns === null) {
+            columns = row.getChildrenSize();
+        }
+        if (row.getChildrenSize() !== columns) {
+            return false;
+        }
+        const cells = row.getChildren();
+        for (const cell of cells) {
+            if (!$isTableCellNode(cell) ||
+                cell.getRowSpan() !== 1 ||
+                cell.getColSpan() !== 1) {
+                return false;
+            }
+        }
+    }
+    return (columns || 0) > 0;
+}
+function getTableFromMouseEvent(event, getTheme) {
+    if (!isHTMLElement(event.target)) {
+        return { isOutside: true, tableElement: null };
+    }
+    const cellSelector = `td${getThemeSelector(getTheme, 'tableCell')}, th${getThemeSelector(getTheme, 'tableCell')}`;
+    const cell = event.target.closest(cellSelector);
+    const tableElement = cell?.closest('table') ?? null;
+    return {
+        isOutside: tableElement == null,
+        tableElement,
+    };
+}
+function getClosestTopCellPosition(tableElement, clientX) {
+    const firstRow = tableElement.rows[0];
+    if (!firstRow) {
+        return null;
+    }
+    let closest = null;
+    let smallestDelta = Number.POSITIVE_INFINITY;
+    for (const cell of Array.from(firstRow.cells)) {
+        const rect = cell.getBoundingClientRect();
+        const centerX = rect.left + rect.width / 2;
+        const delta = Math.abs(centerX - clientX);
+        if (delta < smallestDelta) {
+            smallestDelta = delta;
+            closest = { cell, centerX, top: rect.top };
+        }
+    }
+    return closest;
+}
+function TableHoverActionsV2({ anchorElem, }) {
+    const [editor, { getTheme }] = useLexicalComposerContext();
+    const isEditable = useLexicalEditable();
+    const [isVisible, setIsVisible] = useState(false);
+    const [isLeftVisible, setIsLeftVisible] = useState(false);
+    const virtualRef = useRef({
+        getBoundingClientRect: () => new DOMRect(),
+    });
+    const leftVirtualRef = useRef({
+        getBoundingClientRect: () => new DOMRect(),
+    });
+    const floatingElemRef = useRef(null);
+    const leftFloatingElemRef = useRef(null);
+    const hoveredLeftCellRef = useRef(null);
+    const hoveredTopCellRef = useRef(null);
+    const handleMouseLeaveRef = useRef(null);
+    const { refs, floatingStyles, update } = useFloating({
+        middleware: [
+            offset({ mainAxis: -TOP_BUTTON_OVERHANG }),
+            shift({
+                padding: 8,
+            }),
+        ],
+        placement: 'top',
+        strategy: 'fixed',
+        whileElementsMounted: autoUpdate,
+    });
+    const { refs: leftRefs, floatingStyles: leftFloatingStyles, update: updateLeft, } = useFloating({
+        middleware: [
+            offset({ mainAxis: -LEFT_BUTTON_OVERHANG }),
+            shift({
+                padding: 8,
+            }),
+        ],
+        placement: 'left',
+        strategy: 'fixed',
+        whileElementsMounted: autoUpdate,
+    });
+    useEffect(() => {
+        if (!isEditable) {
+            return;
+        }
+        const handleMouseMove = (event) => {
+            if ((floatingElemRef.current &&
+                event.target instanceof Node &&
+                floatingElemRef.current.contains(event.target)) ||
+                (leftFloatingElemRef.current &&
+                    event.target instanceof Node &&
+                    leftFloatingElemRef.current.contains(event.target))) {
+                return;
+            }
+            const { tableElement, isOutside } = getTableFromMouseEvent(event, getTheme);
+            if (isOutside ||
+                tableElement == null ||
+                (anchorElem && !anchorElem.contains(tableElement))) {
+                setIsVisible(false);
+                setIsLeftVisible(false);
+                return;
+            }
+            const cellSelector = `td${getThemeSelector(getTheme, 'tableCell')}, th${getThemeSelector(getTheme, 'tableCell')}`;
+            const hoveredCell = isHTMLElement(event.target)
+                ? event.target.closest(cellSelector)
+                : null;
+            if (!hoveredCell) {
+                setIsVisible(false);
+                setIsLeftVisible(false);
+                hoveredTopCellRef.current = null;
+                hoveredLeftCellRef.current = null;
+                return;
+            }
+            const rowIndex = hoveredCell.parentElement instanceof HTMLTableRowElement
+                ? hoveredCell.parentElement.rowIndex
+                : -1;
+            const colIndex = hoveredCell.cellIndex ?? -1;
+            const closestTopCell = getClosestTopCellPosition(tableElement, event.clientX);
+            if (!closestTopCell || rowIndex !== 0) {
+                setIsVisible(false);
+                hoveredTopCellRef.current = null;
+            }
+            else {
+                hoveredTopCellRef.current = closestTopCell.cell;
+                virtualRef.current.getBoundingClientRect = () => new DOMRect(closestTopCell.centerX, closestTopCell.top, 0, 0);
+                refs.setReference(virtualRef.current);
+                setIsVisible(true);
+                update?.();
+            }
+            const tableRect = tableElement.getBoundingClientRect();
+            if (colIndex !== 0) {
+                setIsLeftVisible(false);
+                hoveredLeftCellRef.current = null;
+            }
+            else {
+                const { top, height } = hoveredCell.getBoundingClientRect();
+                const centerY = top + height / 2;
+                hoveredLeftCellRef.current = hoveredCell;
+                leftVirtualRef.current.getBoundingClientRect = () => new DOMRect(tableRect.left, centerY, 0, 0);
+                leftRefs.setReference(leftVirtualRef.current);
+                setIsLeftVisible(true);
+                updateLeft?.();
+            }
+        };
+        document.addEventListener('mousemove', handleMouseMove);
+        return () => {
+            document.removeEventListener('mousemove', handleMouseMove);
+            setIsVisible(false);
+            setIsLeftVisible(false);
+        };
+    }, [anchorElem, getTheme, isEditable, leftRefs, refs, update, updateLeft]);
+    useEffect(() => {
+        const handleMouseLeave = (event) => {
+            const nextTarget = event.relatedTarget;
+            if (nextTarget &&
+                floatingElemRef.current &&
+                floatingElemRef.current.contains(nextTarget)) {
+                return;
+            }
+            if (nextTarget &&
+                leftFloatingElemRef.current &&
+                leftFloatingElemRef.current.contains(nextTarget)) {
+                return;
+            }
+            setIsVisible(false);
+            setIsLeftVisible(false);
+        };
+        handleMouseLeaveRef.current = handleMouseLeave;
+        return editor.registerRootListener((rootElement, prevRootElement) => {
+            if (prevRootElement && handleMouseLeaveRef.current) {
+                prevRootElement.removeEventListener('mouseleave', handleMouseLeaveRef.current);
+            }
+            if (rootElement && handleMouseLeaveRef.current) {
+                rootElement.addEventListener('mouseleave', handleMouseLeaveRef.current);
+            }
+        });
+    }, [editor]);
+    if (!isEditable) {
+        return null;
+    }
+    const handleAddColumn = () => {
+        const targetCell = hoveredTopCellRef.current;
+        if (!targetCell) {
+            return;
+        }
+        editor.update(() => {
+            const maybeCellNode = $getNearestNodeFromDOMNode(targetCell);
+            if ($isTableCellNode(maybeCellNode)) {
+                maybeCellNode.selectEnd();
+                $insertTableColumnAtSelection();
+            }
+        });
+    };
+    const handleAddRow = () => {
+        const targetCell = hoveredLeftCellRef.current;
+        if (!targetCell) {
+            return;
+        }
+        editor.update(() => {
+            const maybeCellNode = $getNearestNodeFromDOMNode(targetCell);
+            if ($isTableCellNode(maybeCellNode)) {
+                maybeCellNode.selectEnd();
+                $insertTableRowAtSelection();
+            }
+        });
+    };
+    const handleSortColumn = (direction) => {
+        const targetCell = hoveredTopCellRef.current;
+        if (!targetCell) {
+            return;
+        }
+        editor.update(() => {
+            const cellNode = $getNearestNodeFromDOMNode(targetCell);
+            if (!$isTableCellNode(cellNode)) {
+                return;
+            }
+            const rowNode = cellNode.getParent();
+            if (!rowNode || !$isTableRowNode(rowNode)) {
+                return;
+            }
+            const tableNode = rowNode.getParent();
+            if (!$isTableNode(tableNode) || !$isSimpleTable(tableNode)) {
+                return;
+            }
+            const colIndex = cellNode.getIndexWithinParent();
+            const rows = tableNode.getChildren().filter($isTableRowNode);
+            const [tableMap] = $computeTableMapSkipCellCheck(tableNode, cellNode, cellNode);
+            const headerCell = tableMap[0]?.[colIndex]?.cell;
+            const shouldSkipTopRow = headerCell?.hasHeader() ?? false;
+            const sortableRows = shouldSkipTopRow ? rows.slice(1) : rows;
+            if (sortableRows.length <= 1) {
+                return;
+            }
+            sortableRows.sort((a, b) => {
+                const aRowIndex = rows.indexOf(a);
+                const bRowIndex = rows.indexOf(b);
+                const aMapRow = tableMap[aRowIndex] ?? [];
+                const bMapRow = tableMap[bRowIndex] ?? [];
+                const aCellValue = aMapRow[colIndex];
+                const bCellValue = bMapRow[colIndex];
+                const aText = aCellValue?.cell.getTextContent() ?? '';
+                const bText = bCellValue?.cell.getTextContent() ?? '';
+                const result = aText.localeCompare(bText, undefined, { numeric: true });
+                return direction === 'asc' ? -result : result;
+            });
+            const insertionCaret = shouldSkipTopRow
+                ? $getSiblingCaret(rows[0], 'next')
+                : $getChildCaret(tableNode, 'next');
+            insertionCaret?.splice(0, sortableRows);
+        });
+    };
+    return (_jsxs(_Fragment, { children: [_jsxs("div", { ref: node => {
+                    floatingElemRef.current = node;
+                    refs.setFloating(node);
+                }, style: {
+                    ...floatingStyles,
+                    opacity: isVisible ? 1 : 0,
+                    display: isVisible ? 'block' : 'none',
+                }, className: "floating-top-actions", children: [_jsxs(DropDown, { buttonAriaLabel: "Sort column", buttonClassName: "floating-filter-indicator", children: [_jsx(DropDownItem, { className: "item", onClick: () => handleSortColumn('desc'), children: "Sort Ascending" }), _jsx(DropDownItem, { className: "item", onClick: () => handleSortColumn('asc'), children: "Sort Descending" })] }), _jsx("button", { className: "floating-add-indicator", "aria-label": "Add column", type: "button", onClick: handleAddColumn })] }), _jsx("button", { ref: node => {
+                    leftFloatingElemRef.current = node;
+                    leftRefs.setFloating(node);
+                }, style: {
+                    ...leftFloatingStyles,
+                    opacity: isLeftVisible ? 1 : 0,
+                    display: isLeftVisible ? 'block' : 'none',
+                }, className: "floating-add-indicator", "aria-label": "Add row", type: "button", onClick: handleAddRow })] }));
+}
+export default function TableHoverActionsV2Plugin({ anchorElem = document.body, }) {
+    const isEditable = useLexicalEditable();
+    return isEditable
+        ? createPortal(_jsx(TableHoverActionsV2, { anchorElem: anchorElem }), anchorElem)
+        : null;
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.js.map
new file mode 100644
index 0000000..b294a1c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableHoverActionsV2Plugin/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/TableHoverActionsV2Plugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.d.ts
new file mode 100644
index 0000000..e08287c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.d.ts
@@ -0,0 +1,4 @@
+import { LexicalCommand } from 'lexical';
+export declare const INSERT_TABLE_WITH_DIALOG_COMMAND: LexicalCommand<void>;
+export declare function TablePlugin(): JSX.Element;
+export default TablePlugin;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.js
new file mode 100644
index 0000000..34e3323
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.js
@@ -0,0 +1,41 @@
+import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Copyright (c) 2021-2025 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { TablePlugin as LexicalTablePlugin } from '@lexical/react/LexicalTablePlugin';
+import { INSERT_TABLE_COMMAND } from '@lexical/table';
+import { COMMAND_PRIORITY_EDITOR, createCommand, } from 'lexical';
+import { useEffect, useState } from 'react';
+import TableInsertModal from '../components/TableInsertModal';
+export const INSERT_TABLE_WITH_DIALOG_COMMAND = createCommand();
+export function TablePlugin() {
+    const [editor] = useLexicalComposerContext();
+    const [isModalOpen, setModalOpen] = useState(false);
+    useEffect(() => {
+        return editor.registerCommand(INSERT_TABLE_WITH_DIALOG_COMMAND, () => {
+            setModalOpen(true);
+            return true;
+        }, COMMAND_PRIORITY_EDITOR);
+    }, [editor]);
+    const handleConfirm = (rows, columns) => {
+        editor.dispatchCommand(INSERT_TABLE_COMMAND, {
+            rows: rows.toString(),
+            columns: columns.toString(),
+        });
+        setModalOpen(false);
+    };
+    const handleClose = () => {
+        setModalOpen(false);
+    };
+    return (_jsxs(_Fragment, { children: [_jsx(LexicalTablePlugin, {}), isModalOpen && (_jsx(TableInsertModal, { onConfirm: handleConfirm, onClose: handleClose }))] }));
+}
+export default TablePlugin;
+//# sourceMappingURL=TablePlugin.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.js.map
new file mode 100644
index 0000000..eb2d032
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TablePlugin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"TablePlugin.js","sourceRoot":"","sources":["../../src/plugins/TablePlugin.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,yBAAyB,EAAE,MAAM,uCAAuC,CAAC;AAClF,OAAO,EAAE,WAAW,IAAI,kBAAkB,EAAE,MAAM,mCAAmC,CAAC;AACtF,OAAO,EAAE,oBAAoB,EAAE,MAAM,gBAAgB,CAAC;AACtD,OAAO,EACL,uBAAuB,EACvB,aAAa,GAEd,MAAM,SAAS,CAAC;AACjB,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAE5C,OAAO,gBAAgB,MAAM,gCAAgC,CAAC;AAE9D,MAAM,CAAC,MAAM,gCAAgC,GAC3C,aAAa,EAAE,CAAC;AAElB,MAAM,UAAU,WAAW;IACzB,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAC7C,MAAM,CAAC,WAAW,EAAE,YAAY,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IAE7D,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,MAAM,CAAC,eAAe,CAC3B,gCAAgC,EAChC,GAAG,EAAE;YACH,YAAY,CAAC,IAAI,CAAC,CAAC;YACnB,OAAO,IAAI,CAAC;QACd,CAAC,EACD,uBAAuB,CACxB,CAAC;IACJ,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,MAAM,aAAa,GAAG,CAAC,IAAY,EAAE,OAAe,EAAE,EAAE;QACtD,MAAM,CAAC,eAAe,CAAC,oBAAoB,EAAE;YAC3C,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE;YACrB,OAAO,EAAE,OAAO,CAAC,QAAQ,EAAE;SAC5B,CAAC,CAAC;QACH,YAAY,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,MAAM,WAAW,GAAG,GAAG,EAAE;QACvB,YAAY,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,OAAO,CACL,8BACE,KAAC,kBAAkB,KAAG,EACrB,WAAW,IAAI,CACd,KAAC,gBAAgB,IAAC,SAAS,EAAE,aAAa,EAAE,OAAO,EAAE,WAAW,GAAI,CACrE,IACA,CACJ,CAAC;AACJ,CAAC;AAED,eAAe,WAAW,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.d.ts
new file mode 100644
index 0000000..a5b4dd4
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.d.ts
@@ -0,0 +1 @@
+export default function TableScrollShadowPlugin(): null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.js
new file mode 100644
index 0000000..8b827d9
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.js
@@ -0,0 +1,120 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ */
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { useEffect } from 'react';
+const SCROLLABLE_WRAPPER_CLASS = 'PlaygroundEditorTheme__tableScrollableWrapper';
+const HAS_SCROLL_RIGHT_CLASS = 'PlaygroundEditorTheme__tableScrollRight';
+const HAS_SCROLL_LEFT_CLASS = 'PlaygroundEditorTheme__tableScrollLeft';
+const HAS_SCROLL_MIDDLE_CLASS = 'PlaygroundEditorTheme__tableScrollMiddle';
+function updateTableScrollState(element) {
+    const hasScroll = element.scrollWidth > element.clientWidth;
+    // Adding and removing 1 and -1 for floating point precision
+    const isScrolledToRight = element.scrollLeft + element.clientWidth >= element.scrollWidth - 1;
+    const isScrolledToLeft = element.scrollLeft <= 1;
+    // Remove all scroll classes first
+    element.classList.remove(HAS_SCROLL_RIGHT_CLASS);
+    element.classList.remove(HAS_SCROLL_LEFT_CLASS);
+    element.classList.remove(HAS_SCROLL_MIDDLE_CLASS);
+    if (hasScroll) {
+        // Middle state: not at either edge
+        if (!isScrolledToLeft && !isScrolledToRight) {
+            element.classList.add(HAS_SCROLL_MIDDLE_CLASS);
+        }
+        // Right edge
+        else if (isScrolledToLeft && !isScrolledToRight) {
+            element.classList.add(HAS_SCROLL_RIGHT_CLASS);
+        }
+        // Left edge
+        else if (!isScrolledToLeft && isScrolledToRight) {
+            element.classList.add(HAS_SCROLL_LEFT_CLASS);
+        }
+    }
+}
+export default function TableScrollShadowPlugin() {
+    const [editor] = useLexicalComposerContext();
+    useEffect(() => {
+        const editorElement = editor.getRootElement();
+        if (!editorElement) {
+            return;
+        }
+        const updateAllTableScrollStates = () => {
+            const wrappers = editorElement.querySelectorAll(`.${SCROLLABLE_WRAPPER_CLASS}`);
+            wrappers.forEach(updateTableScrollState);
+        };
+        // Initial check
+        updateAllTableScrollStates();
+        // Watch for new table wrappers being added
+        const observer = new MutationObserver(() => {
+            updateAllTableScrollStates();
+        });
+        observer.observe(editorElement, {
+            childList: true,
+            subtree: true,
+        });
+        // Also watch for resize events on the wrappers themselves
+        const resizeObserver = new ResizeObserver(() => {
+            updateAllTableScrollStates();
+        });
+        const scrollHandlers = new Map();
+        const addScrollListener = (wrapper) => {
+            if (scrollHandlers.has(wrapper)) {
+                return; // Already has a listener
+            }
+            const handler = () => {
+                updateTableScrollState(wrapper);
+            };
+            wrapper.addEventListener('scroll', handler, { passive: true });
+            scrollHandlers.set(wrapper, handler);
+        };
+        const wrappers = editorElement.querySelectorAll(`.${SCROLLABLE_WRAPPER_CLASS}`);
+        wrappers.forEach(wrapper => {
+            resizeObserver.observe(wrapper);
+            addScrollListener(wrapper);
+        });
+        // Watch for new wrappers to observe
+        const wrapperObserver = new MutationObserver(mutations => {
+            mutations.forEach(mutation => {
+                mutation.addedNodes.forEach(node => {
+                    if (node instanceof HTMLElement) {
+                        if (node.classList.contains(SCROLLABLE_WRAPPER_CLASS)) {
+                            resizeObserver.observe(node);
+                            addScrollListener(node);
+                            updateTableScrollState(node);
+                        }
+                        const childWrappers = node.querySelectorAll(`.${SCROLLABLE_WRAPPER_CLASS}`);
+                        childWrappers.forEach(wrapper => {
+                            resizeObserver.observe(wrapper);
+                            addScrollListener(wrapper);
+                            updateTableScrollState(wrapper);
+                        });
+                    }
+                });
+            });
+        });
+        wrapperObserver.observe(editorElement, {
+            childList: true,
+            subtree: true,
+        });
+        return () => {
+            observer.disconnect();
+            resizeObserver.disconnect();
+            wrapperObserver.disconnect();
+            scrollHandlers.forEach((handler, wrapper) => {
+                wrapper.removeEventListener('scroll', handler);
+            });
+            scrollHandlers.clear();
+        };
+    }, [editor]);
+    return null;
+}
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.js.map
new file mode 100644
index 0000000..534e9ba
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/TableScrollShadowPlugin/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/TableScrollShadowPlugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/fontSize.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/fontSize.js
index 9d2ba8a..ce48ada 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/fontSize.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/fontSize.js
@@ -1,8 +1,8 @@
 import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-runtime";
 import * as React from 'react';
-import { MAX_ALLOWED_FONT_SIZE, MIN_ALLOWED_FONT_SIZE, } from '../../context/ToolbarContext.js';
-import { SHORTCUTS } from '../ShortcutsPlugin/shortcuts.js';
-import { updateFontSize, updateFontSizeInSelection, UpdateFontSizeType, } from './utils.js';
+import { MAX_ALLOWED_FONT_SIZE, MIN_ALLOWED_FONT_SIZE, } from '../../context/ToolbarContext';
+import { SHORTCUTS } from '../ShortcutsPlugin/shortcuts';
+import { updateFontSize, updateFontSizeInSelection, UpdateFontSizeType, } from './utils';
 function parseFontSize(input) {
     const match = input.match(/^(\d+(?:\.\d+)?)(px|pt)$/);
     return match ? [Number(match[1]), match[2]] : null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js
index ab557dc..539d5f2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js
@@ -11,24 +11,28 @@ import { $isListNode, ListNode } from '@lexical/list';
 import { INSERT_EMBED_COMMAND } from '@lexical/react/LexicalAutoEmbedPlugin';
 import { INSERT_HORIZONTAL_RULE_COMMAND } from '@lexical/react/LexicalHorizontalRuleNode';
 import { $isHeadingNode } from '@lexical/rich-text';
+import { INSERT_COLLAPSIBLE_COMMAND } from '../CollapsiblePlugin';
+import { INSERT_EXCALIDRAW_COMMAND } from '../ExcalidrawPlugin';
+import { INSERT_TABLE_WITH_DIALOG_COMMAND } from '../TablePlugin';
 import { $getSelectionStyleValueForProperty, $isParentElementRTL, $patchStyleText, } from '@lexical/selection';
 import { $isTableNode, $isTableSelection } from '@lexical/table';
 import { $findMatchingParent, $getNearestNodeOfType, $isEditorIsNestedEditor, IS_APPLE, mergeRegister, } from '@lexical/utils';
 import { $getNodeByKey, $getSelection, $isElementNode, $isNodeSelection, $isRangeSelection, $isRootOrShadowRoot, CAN_REDO_COMMAND, CAN_UNDO_COMMAND, COMMAND_PRIORITY_CRITICAL, FORMAT_ELEMENT_COMMAND, FORMAT_TEXT_COMMAND, INDENT_CONTENT_COMMAND, OUTDENT_CONTENT_COMMAND, REDO_COMMAND, SELECTION_CHANGE_COMMAND, UNDO_COMMAND, } from 'lexical';
 import { useCallback, useEffect, useState } from 'react';
-import { useSettings } from '../../context/SettingsContext.js';
-import { blockTypeToBlockName, useToolbarState, } from '../../context/ToolbarContext.js';
-import useModal from '../../hooks/useModal.js';
+import { useSettings } from '../../context/SettingsContext';
+import { blockTypeToBlockName, useToolbarState, } from '../../context/ToolbarContext';
+import { useComments } from '../../context/CommentsContext';
+import useModal from '../../hooks/useModal';
 import catTypingGif from '../../images/yellow-flower-small.jpg';
-import { DropDown, DropDownItem } from '../../index.js';
-import { getSelectedNode } from '../../utils/getSelectedNode.js';
-import { sanitizeUrl } from '../../utils/url.js';
-import { EmbedConfigs } from '../AutoEmbedPlugin.js';
-import { InsertEquationDialog } from '../EquationsPlugin.js';
-import { INSERT_IMAGE_COMMAND, InsertImageDialog, } from '../ImagesPlugin.js';
-import { SHORTCUTS } from '../ShortcutsPlugin/shortcuts.js';
+import { DropDown, DropDownItem } from '../..';
+import { getSelectedNode } from '../../utils/getSelectedNode';
+import { sanitizeUrl } from '../../utils/url';
+import { EmbedConfigs } from '../AutoEmbedPlugin';
+import { InsertEquationDialog } from '../EquationsPlugin';
+import { INSERT_IMAGE_COMMAND, InsertImageDialog, } from '../ImagesPlugin';
+import { SHORTCUTS } from '../ShortcutsPlugin/shortcuts';
 import FontSize, { parseFontSizeForToolbar } from './fontSize';
-import { clearFormatting, formatBulletList, formatCheckList, formatCode, formatHeading, formatNumberedList, formatParagraph, formatQuote, } from './utils.js';
+import { clearFormatting, formatBulletList, formatCheckList, formatCode, formatHeading, formatNumberedList, formatParagraph, formatQuote, } from './utils';
 // eslint-disable-next-line @typescript-eslint/no-unused-vars
 const rootTypeToRootName = {
     root: 'Root',
@@ -383,10 +387,14 @@ export function ToolbarPlugin({ editor, activeEditor, setActiveEditor, setIsLink
     }, [$updateToolbar, activeEditor, editor, updateToolbarState]);
     const insertLink = useCallback(() => {
         if (!toolbarState.isLink) {
+            console.log('[ToolbarPlugin] Creating new link, calling setIsLinkEditMode(true)');
             setIsLinkEditMode(true);
+            console.log('[ToolbarPlugin] setIsLinkEditMode(true) called, now dispatching TOGGLE_LINK_COMMAND');
             activeEditor.dispatchCommand(TOGGLE_LINK_COMMAND, sanitizeUrl('https://'));
+            console.log('[ToolbarPlugin] TOGGLE_LINK_COMMAND dispatched');
         }
         else {
+            console.log('[ToolbarPlugin] Removing link, setting edit mode false');
             setIsLinkEditMode(false);
             activeEditor.dispatchCommand(TOGGLE_LINK_COMMAND, null);
         }
@@ -455,6 +463,12 @@ export function ToolbarPlugin({ editor, activeEditor, setActiveEditor, setIsLink
                                 }, className: 'item wide ' + dropDownActiveClass(toolbarState.isHighlight), title: "Highlight", "aria-label": "Format text with a highlight", children: _jsxs("div", { className: "icon-text-container", children: [_jsx("i", { className: "icon highlight" }), _jsx("span", { className: "text", children: "Highlight" })] }) }), _jsxs(DropDownItem, { onClick: () => clearFormatting(activeEditor), className: "item wide", title: "Clear text formatting", "aria-label": "Clear all text formatting", children: [_jsxs("div", { className: "icon-text-container", children: [_jsx("i", { className: "icon clear" }), _jsx("span", { className: "text", children: "Clear Formatting" })] }), _jsx("span", { className: "shortcut", children: SHORTCUTS.CLEAR_FORMATTING })] })] }), canViewerSeeInsertDropdown && (_jsxs(_Fragment, { children: [_jsx(Divider, {}), _jsxs(DropDown, { disabled: !isEditable, buttonClassName: "toolbar-item spaced", buttonLabel: "Insert", buttonAriaLabel: "Insert specialized editor node", buttonIconClassName: "icon plus", children: [_jsxs(DropDownItem, { onClick: () => {
                                             activeEditor.dispatchCommand(INSERT_HORIZONTAL_RULE_COMMAND, undefined);
                                         }, className: "item", children: [_jsx("i", { className: "icon horizontal-rule" }), _jsx("span", { className: "text", children: "Horizontal Rule" })] }), _jsxs(DropDownItem, { onClick: () => {
+                                            activeEditor.dispatchCommand(INSERT_TABLE_WITH_DIALOG_COMMAND, undefined);
+                                        }, className: "item", children: [_jsx("i", { className: "icon table" }), _jsx("span", { className: "text", children: "Table" })] }), _jsxs(DropDownItem, { onClick: () => {
+                                            activeEditor.dispatchCommand(INSERT_COLLAPSIBLE_COMMAND, undefined);
+                                        }, className: "item", children: [_jsx("i", { className: "icon chevron-down" }), _jsx("span", { className: "text", children: "Collapsible" })] }), _jsxs(DropDownItem, { onClick: () => {
+                                            activeEditor.dispatchCommand(INSERT_EXCALIDRAW_COMMAND, undefined);
+                                        }, className: "item", children: [_jsx("i", { className: "icon diagram-2" }), _jsx("span", { className: "text", children: "Excalidraw" })] }), _jsxs(DropDownItem, { onClick: () => {
                                             showModal('Insert Image', onClose => (_jsx(InsertImageDialog, { activeEditor: activeEditor, onClose: onClose })));
                                         }, className: "item", children: [_jsx("i", { className: "icon image" }), _jsx("span", { className: "text", children: "Image" })] }), _jsxs(DropDownItem, { onClick: () => insertGifOnClick({
                                             altText: 'Cat typing on a laptop',
@@ -463,7 +477,11 @@ export function ToolbarPlugin({ editor, activeEditor, setActiveEditor, setIsLink
                                             showModal('Insert Equation', onClose => (_jsx(InsertEquationDialog, { activeEditor: activeEditor, onClose: onClose })));
                                         }, className: "item", children: [_jsx("i", { className: "icon equation" }), _jsx("span", { className: "text", children: "Equation" })] }), EmbedConfigs.map(embedConfig => (_jsxs(DropDownItem, { onClick: () => {
                                             activeEditor.dispatchCommand(INSERT_EMBED_COMMAND, embedConfig.type);
-                                        }, className: "item", children: [embedConfig.icon, _jsx("span", { className: "text", children: embedConfig.contentName })] }, embedConfig.type)))] })] }))] })), _jsx(Divider, {}), _jsx(ElementFormatDropdown, { disabled: !isEditable, value: toolbarState.elementFormat, editor: activeEditor, isRTL: toolbarState.isRTL }), modal] }));
+                                        }, className: "item", children: [embedConfig.icon, _jsx("span", { className: "text", children: embedConfig.contentName })] }, embedConfig.type)))] })] }))] })), _jsx(Divider, {}), _jsx(ElementFormatDropdown, { disabled: !isEditable, value: toolbarState.elementFormat, editor: activeEditor, isRTL: toolbarState.isRTL }), _jsx(Divider, {}), _jsx(CommentsToggleButton, {}), modal] }));
+}
+function CommentsToggleButton() {
+    const { showComments, toggleComments } = useComments();
+    return (_jsx("button", { onClick: toggleComments, className: "toolbar-item spaced", "aria-label": showComments ? 'Hide Comments' : 'Show Comments', title: showComments ? 'Hide Comments' : 'Show Comments', type: "button", children: _jsx("i", { className: showComments ? 'format comments-active' : 'format comments' }) }));
 }
 export default ToolbarPlugin;
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js.map
index 0ffa045..a35aaea 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/ToolbarPlugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/ToolbarPlugin/index.tsx"],"names":[],"mappings":";AAeA,OAAO,EACL,WAAW,EACX,sBAAsB,IAAI,2BAA2B,EACrD,qBAAqB,IAAI,0BAA0B,GACpD,MAAM,eAAe,CAAC;AACvB,gFAAgF;AAChF,WAAW;AACX,2DAA2D;AAC3D,qDAAqD;AACrD,yDAAyD;AACzD,gCAAgC;AAChC,OAAO,EAAE,WAAW,EAAE,mBAAmB,EAAE,MAAM,eAAe,CAAC;AACjE,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AACtD,OAAO,EAAE,oBAAoB,EAAE,MAAM,uCAAuC,CAAC;AAC7E,OAAO,EAAE,8BAA8B,EAAE,MAAM,0CAA0C,CAAC;AAC1F,OAAO,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAC;AACpD,OAAO,EAAE,0BAA0B,EAAE,MAAM,sBAAsB,CAAC;AAClE,OAAO,EAAE,yBAAyB,EAAE,MAAM,qBAAqB,CAAC;AAChE,OAAO,EAAE,gCAAgC,EAAE,MAAM,gBAAgB,CAAC;AAClE,OAAO,EACL,kCAAkC,EAClC,mBAAmB,EACnB,eAAe,GAChB,MAAM,oBAAoB,CAAC;AAC5B,OAAO,EAAE,YAAY,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AACjE,OAAO,EACL,mBAAmB,EACnB,qBAAqB,EACrB,uBAAuB,EACvB,QAAQ,EACR,aAAa,GACd,MAAM,gBAAgB,CAAC;AACxB,OAAO,EACL,aAAa,EACb,aAAa,EACb,cAAc,EACd,gBAAgB,EAChB,iBAAiB,EACjB,mBAAmB,EACnB,gBAAgB,EAChB,gBAAgB,EAChB,yBAAyB,EAEzB,sBAAsB,EACtB,mBAAmB,EACnB,sBAAsB,EAItB,uBAAuB,EACvB,YAAY,EACZ,wBAAwB,EACxB,YAAY,GACb,MAAM,SAAS,CAAC;AACjB,OAAO,EAAY,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACnE,OAAO,EAAE,WAAW,EAAE,MAAM,+BAA+B,CAAC;AAC5D,OAAO,EACL,oBAAoB,EACpB,eAAe,GAChB,MAAM,8BAA8B,CAAC;AACtC,OAAO,EAAE,WAAW,EAAE,MAAM,+BAA+B,CAAC;AAC5D,OAAO,QAAQ,MAAM,sBAAsB,CAAC;AAC5C,OAAO,YAAY,MAAM,sCAAsC,CAAC;AAChE,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,OAAO,CAAC;AAC/C,OAAO,EAAE,eAAe,EAAE,MAAM,6BAA6B,CAAC;AAC9D,OAAO,EAAE,WAAW,EAAE,MAAM,iBAAiB,CAAC;AAC9C,OAAO,EAAE,YAAY,EAAE,MAAM,oBAAoB,CAAC;AAClD,OAAO,EAAE,oBAAoB,EAAE,MAAM,oBAAoB,CAAC;AAC1D,OAAO,EACL,oBAAoB,EACpB,iBAAiB,GAElB,MAAM,iBAAiB,CAAC;AACzB,OAAO,EAAE,SAAS,EAAE,MAAM,8BAA8B,CAAC;AACzD,OAAO,QAAQ,EAAE,EAAE,uBAAuB,EAAE,MAAM,YAAY,CAAC;AAC/D,OAAO,EACL,eAAe,EACf,gBAAgB,EAChB,eAAe,EACf,UAAU,EACV,aAAa,EACb,kBAAkB,EAClB,eAAe,EACf,WAAW,GACZ,MAAM,SAAS,CAAC;AAEjB,6DAA6D;AAC7D,MAAM,kBAAkB,GAAG;IACzB,IAAI,EAAE,MAAM;IACZ,KAAK,EAAE,OAAO;CACf,CAAC;AAEF,MAAM,2BAA2B,GAC/B,2BAA2B,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAC5C;IACE,GAAG;IACH,OAAO;IACP,KAAK;IACL,KAAK;IACL,MAAM;IACN,MAAM;IACN,IAAI;IACJ,YAAY;IACZ,UAAU;IACV,MAAM;IACN,aAAa;IACb,OAAO;IACP,YAAY;IACZ,IAAI;IACJ,QAAQ;IACR,MAAM;IACN,KAAK;IACL,OAAO;IACP,YAAY;IACZ,KAAK;CACN,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CACtB,CAAC;AAEJ,mEAAmE;AACnE,MAAM,oCAAoC,GACxC,2BAA2B,CAAC;AAE9B,yEAAyE;AACzE,MAAM,0BAA0B,GAAG,0BAA0B,CAAC;AAE9D,MAAM,wBAAwB,GAAuB;IACnD,CAAC,OAAO,EAAE,iBAAiB,CAAC;CAC7B,CAAC;AAEF,4EAA4E;AAC5E,0DAA0D;AAC1D,uEAAuE;AACvE,QAAQ;AACR,aAAa;AACb,iBAAiB;AACjB,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB,gBAAgB;AAChB,cAAc;AACd,sBAAsB;AACtB,oBAAoB;AACpB,gBAAgB;AAChB,uBAAuB;AACvB,iBAAiB;AACjB,sBAAsB;AACtB,cAAc;AACd,kBAAkB;AAClB,gBAAgB;AAChB,eAAe;AACf,sBAAsB;AACtB,eAAe;AACf,6BAA6B;AAC7B,OAAO;AAEP,uDAAuD;AACvD,oEAAoE;AACpE,QAAQ;AACR,4BAA4B;AAC5B,4BAA4B;AAC5B,wBAAwB;AACxB,gCAAgC;AAChC,0BAA0B;AAC1B,qBAAqB;AACrB,sBAAsB;AACtB,kCAAkC;AAClC,qBAAqB;AACrB,qBAAqB;AACrB,0BAA0B;AAC1B,uBAAuB;AACvB,wBAAwB;AACxB,2BAA2B;AAC3B,yBAAyB;AACzB,6BAA6B;AAC7B,OAAO;AAEP,MAAM,mBAAmB,GAAuB;IAC9C,CAAC,OAAO,EAAE,OAAO,CAAC;IAClB,CAAC,aAAa,EAAE,aAAa,CAAC;IAC9B,CAAC,SAAS,EAAE,SAAS,CAAC;IACtB,CAAC,iBAAiB,EAAE,iBAAiB,CAAC;IACtC,CAAC,cAAc,EAAE,cAAc,CAAC;IAChC,CAAC,SAAS,EAAE,SAAS,CAAC;CACvB,CAAC;AAEF,MAAM,iBAAiB,GAAuB;IAC5C,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;IAChB,CAAC,MAAM,EAAE,MAAM,CAAC;CACjB,CAAC;AAEF,MAAM,sBAAsB,GAMxB;IACF,MAAM,EAAE;QACN,IAAI,EAAE,cAAc;QACpB,OAAO,EAAE,cAAc;QACvB,IAAI,EAAE,cAAc;KACrB;IACD,GAAG,EAAE;QACH,IAAI,EAAE,aAAa;QACnB,OAAO,EAAE,YAAY;QACrB,IAAI,EAAE,WAAW;KAClB;IACD,OAAO,EAAE;QACP,IAAI,EAAE,eAAe;QACrB,OAAO,EAAE,eAAe;QACxB,IAAI,EAAE,eAAe;KACtB;IACD,IAAI,EAAE;QACJ,IAAI,EAAE,YAAY;QAClB,OAAO,EAAE,YAAY;QACrB,IAAI,EAAE,YAAY;KACnB;IACD,KAAK,EAAE;QACL,IAAI,EAAE,aAAa;QACnB,OAAO,EAAE,aAAa;QACtB,IAAI,EAAE,aAAa;KACpB;IACD,KAAK,EAAE;QACL,IAAI,EAAE,YAAY;QAClB,OAAO,EAAE,aAAa;QACtB,IAAI,EAAE,aAAa;KACpB;CACF,CAAC;AAEF,SAAS,mBAAmB,CAAC,MAAe;IAC1C,IAAI,MAAM,EAAE,CAAC;QACX,OAAO,6BAA6B,CAAC;IACvC,CAAC;SAAM,CAAC;QACN,OAAO,EAAE,CAAC;IACZ,CAAC;AACH,CAAC;AAED,SAAS,mBAAmB,CAAC,EAC3B,MAAM,EACN,SAAS,EACT,QAAQ,EACR,QAAQ,GAAG,KAAK,GAMjB;IACC,OAAO,CACL,MAAC,QAAQ,IACP,QAAQ,EAAE,QAAQ,EAClB,eAAe,EAAC,6BAA6B,EAC7C,mBAAmB,EAAE,kBAAkB,GAAG,SAAS,EACnD,WAAW,EAAE,oBAAoB,CAAC,SAAS,CAAC,EAC5C,eAAe,EAAC,mCAAmC,aAEnD,MAAC,YAAY,IACX,SAAS,EACP,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,WAAW,CAAC,EAE/D,OAAO,EAAE,GAAG,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,aAEtC,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,gBAAgB,GAAG,EAChC,eAAM,SAAS,EAAC,MAAM,uBAAc,IAChC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,MAAM,GAAQ,IACvC,EACf,MAAC,YAAY,IACX,SAAS,EAAE,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,IAAI,CAAC,EACjE,OAAO,EAAE,GAAG,EAAE,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,EAAE,IAAI,CAAC,aAErD,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,SAAS,GAAG,EACzB,eAAM,SAAS,EAAC,MAAM,0BAAiB,IACnC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,QAAQ,GAAQ,IACzC,EACf,MAAC,YAAY,IACX,SAAS,EAAE,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,IAAI,CAAC,EACjE,OAAO,EAAE,GAAG,EAAE,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,EAAE,IAAI,CAAC,aAErD,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,SAAS,GAAG,EACzB,eAAM,SAAS,EAAC,MAAM,0BAAiB,IACnC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,QAAQ,GAAQ,IACzC,EACf,MAAC,YAAY,IACX,SAAS,EAAE,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,IAAI,CAAC,EACjE,OAAO,EAAE,GAAG,EAAE,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,EAAE,IAAI,CAAC,aAErD,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,SAAS,GAAG,EACzB,eAAM,SAAS,EAAC,MAAM,0BAAiB,IACnC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,QAAQ,GAAQ,IACzC,EACf,MAAC,YAAY,IACX,SAAS,EAAE,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,QAAQ,CAAC,EACrE,OAAO,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAC,MAAM,EAAE,SAAS,CAAC,aAEpD,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,oBAAoB,GAAG,EACpC,eAAM,SAAS,EAAC,MAAM,8BAAqB,IACvC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,aAAa,GAAQ,IAC9C,EACf,MAAC,YAAY,IACX,SAAS,EAAE,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,QAAQ,CAAC,EACrE,OAAO,EAAE,GAAG,EAAE,CAAC,gBAAgB,CAAC,MAAM,EAAE,SAAS,CAAC,aAElD,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,kBAAkB,GAAG,EAClC,eAAM,SAAS,EAAC,MAAM,4BAAmB,IACrC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,WAAW,GAAQ,IAC5C,EACf,MAAC,YAAY,IACX,SAAS,EAAE,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,OAAO,CAAC,EACpE,OAAO,EAAE,GAAG,EAAE,CAAC,eAAe,CAAC,MAAM,EAAE,SAAS,CAAC,aAEjD,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,iBAAiB,GAAG,EACjC,eAAM,SAAS,EAAC,MAAM,2BAAkB,IACpC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,UAAU,GAAQ,IAC3C,EACf,MAAC,YAAY,IACX,SAAS,EAAE,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,OAAO,CAAC,EACpE,OAAO,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,MAAM,EAAE,SAAS,CAAC,aAE7C,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,YAAY,GAAG,EAC5B,eAAM,SAAS,EAAC,MAAM,sBAAa,IAC/B,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,KAAK,GAAQ,IACtC,EACf,MAAC,YAAY,IACX,SAAS,EAAE,YAAY,GAAG,mBAAmB,CAAC,SAAS,KAAK,MAAM,CAAC,EACnE,OAAO,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC,MAAM,EAAE,SAAS,CAAC,aAE5C,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,WAAW,GAAG,EAC3B,eAAM,SAAS,EAAC,MAAM,2BAAkB,IACpC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,UAAU,GAAQ,IAC3C,IACN,CACZ,CAAC;AACJ,CAAC;AAED,SAAS,OAAO;IACd,OAAO,cAAK,SAAS,EAAC,SAAS,GAAG,CAAC;AACrC,CAAC;AAED,SAAS,YAAY,CAAC,EACpB,MAAM,EACN,KAAK,EACL,KAAK,EACL,QAAQ,GAAG,KAAK,GAMjB;IACC,MAAM,WAAW,GAAG,WAAW,CAC7B,CAAC,MAAc,EAAE,EAAE;QACjB,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;YACjB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,IAAI,SAAS,KAAK,IAAI,EAAE,CAAC;gBACvB,eAAe,CAAC,SAAS,EAAE;oBACzB,CAAC,KAAK,CAAC,EAAE,MAAM;iBAChB,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,EACD,CAAC,MAAM,EAAE,KAAK,CAAC,CAChB,CAAC;IAEF,MAAM,eAAe,GACnB,KAAK,KAAK,aAAa;QACrB,CAAC,CAAC,oCAAoC;QACtC,CAAC,CAAC,kCAAkC,CAAC;IAEzC,OAAO,CACL,KAAC,QAAQ,IACP,QAAQ,EAAE,QAAQ,EAClB,eAAe,EAAE,eAAe,GAAG,KAAK,EACxC,WAAW,EAAE,KAAK,EAClB,mBAAmB,EACjB,KAAK,KAAK,aAAa,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAAC,CAAC,EAAE,EAE9D,eAAe,EAAE,eAAe,YAE/B,CAAC,KAAK,KAAK,aAAa,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,GAAG,CACtE,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAClB,KAAC,YAAY,IACX,SAAS,EAAE,QAAQ,mBAAmB,CAAC,KAAK,KAAK,MAAM,CAAC,IACtD,KAAK,KAAK,WAAW,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,EAC5C,EAAE,EACF,OAAO,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,YAGlC,eAAM,SAAS,EAAC,MAAM,YAAE,IAAI,GAAQ,IAF/B,MAAM,CAGE,CAChB,CACF,GACQ,CACZ,CAAC;AACJ,CAAC;AAED,SAAS,qBAAqB,CAAC,EAC7B,MAAM,EACN,KAAK,EACL,KAAK,EACL,QAAQ,GAAG,KAAK,GAMjB;IACC,MAAM,YAAY,GAAG,sBAAsB,CAAC,KAAK,IAAI,MAAM,CAAC,CAAC;IAE7D,OAAO,CACL,MAAC,QAAQ,IACP,QAAQ,EAAE,QAAQ,EAClB,WAAW,EAAE,YAAY,CAAC,IAAI,EAC9B,mBAAmB,EAAE,QACnB,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,YAAY,CAAC,IAC9C,EAAE,EACF,eAAe,EAAC,+BAA+B,EAC/C,eAAe,EAAC,uCAAuC,aAEvD,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oBACZ,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,MAAM,CAAC,CAAC;gBACzD,CAAC,EACD,SAAS,EAAC,WAAW,aAErB,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,iBAAiB,GAAG,EACjC,eAAM,SAAS,EAAC,MAAM,2BAAkB,IACpC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,UAAU,GAAQ,IAC3C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oBACZ,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,QAAQ,CAAC,CAAC;gBAC3D,CAAC,EACD,SAAS,EAAC,WAAW,aAErB,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,mBAAmB,GAAG,EACnC,eAAM,SAAS,EAAC,MAAM,6BAAoB,IACtC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,YAAY,GAAQ,IAC7C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oBACZ,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,OAAO,CAAC,CAAC;gBAC1D,CAAC,EACD,SAAS,EAAC,WAAW,aAErB,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,kBAAkB,GAAG,EAClC,eAAM,SAAS,EAAC,MAAM,4BAAmB,IACrC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,WAAW,GAAQ,IAC5C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oBACZ,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC;gBAC5D,CAAC,EACD,SAAS,EAAC,WAAW,aAErB,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,oBAAoB,GAAG,EACpC,eAAM,SAAS,EAAC,MAAM,8BAAqB,IACvC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,aAAa,GAAQ,IAC9C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oBACZ,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,OAAO,CAAC,CAAC;gBAC1D,CAAC,EACD,SAAS,EAAC,WAAW,aAErB,YACE,SAAS,EAAE,QACT,KAAK;4BACH,CAAC,CAAC,sBAAsB,CAAC,KAAK,CAAC,OAAO;4BACtC,CAAC,CAAC,sBAAsB,CAAC,KAAK,CAAC,IACnC,EAAE,GACF,EACF,eAAM,SAAS,EAAC,MAAM,4BAAmB,IAC5B,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oBACZ,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,KAAK,CAAC,CAAC;gBACxD,CAAC,EACD,SAAS,EAAC,WAAW,aAErB,YACE,SAAS,EAAE,QACT,KAAK;4BACH,CAAC,CAAC,sBAAsB,CAAC,GAAG,CAAC,OAAO;4BACpC,CAAC,CAAC,sBAAsB,CAAC,GAAG,CAAC,IACjC,EAAE,GACF,EACF,eAAM,SAAS,EAAC,MAAM,0BAAiB,IAC1B,EACf,KAAC,OAAO,KAAG,EACX,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oBACZ,MAAM,CAAC,eAAe,CAAC,uBAAuB,EAAE,SAAS,CAAC,CAAC;gBAC7D,CAAC,EACD,SAAS,EAAC,WAAW,aAErB,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAE,OAAO,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,GAAI,EAC1D,eAAM,SAAS,EAAC,MAAM,wBAAe,IACjC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,OAAO,GAAQ,IACxC,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oBACZ,MAAM,CAAC,eAAe,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC;gBAC5D,CAAC,EACD,SAAS,EAAC,WAAW,aAErB,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAE,OAAO,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAI,EAC1D,eAAM,SAAS,EAAC,MAAM,uBAAc,IAChC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,MAAM,GAAQ,IACvC,IACN,CACZ,CAAC;AACJ,CAAC;AAED,SAAS,oBAAoB,CAAC,IAAiB;IAC7C,IAAI,eAAe,GACjB,IAAI,CAAC,MAAM,EAAE,KAAK,MAAM;QACtB,CAAC,CAAC,IAAI;QACN,CAAC,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;YAC5B,MAAM,MAAM,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC;YAC7B,OAAO,MAAM,KAAK,IAAI,IAAI,mBAAmB,CAAC,MAAM,CAAC,CAAC;QACxD,CAAC,CAAC,CAAC;IAET,IAAI,eAAe,KAAK,IAAI,EAAE,CAAC;QAC7B,eAAe,GAAG,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACrD,CAAC;IACD,OAAO,eAAe,CAAC;AACzB,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,EAC5B,MAAM,EACN,YAAY,EACZ,eAAe,EACf,iBAAiB,GAMlB;IACC,MAAM,CAAC,kBAAkB,EAAE,qBAAqB,CAAC,GAAG,QAAQ,CAC1D,IAAI,CACL,CAAC;IACF,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,GAAG,QAAQ,EAAE,CAAC;IACtC,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC;IACxE,MAAM,EAAE,YAAY,EAAE,kBAAkB,EAAE,GAAG,eAAe,EAAE,CAAC;IAE/D,MAAM,kBAAkB,GAAG,WAAW,CACpC,CAAC,eAA4B,EAAE,EAAE;QAC/B,MAAM,IAAI,GAAG,cAAc,CAAC,eAAe,CAAC;YAC1C,CAAC,CAAC,eAAe,CAAC,MAAM,EAAE;YAC1B,CAAC,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QAE9B,IAAI,IAAI,IAAI,oBAAoB,EAAE,CAAC;YACjC,kBAAkB,CAChB,WAAW,EACX,IAAyC,CAC1C,CAAC;QACJ,CAAC;IACH,CAAC,EACD,CAAC,kBAAkB,CAAC,CACrB,CAAC;IAEF,MAAM,EACJ,QAAQ,EAAE,EAAE,iBAAiB,EAAE,WAAW,EAAE,GAC7C,GAAG,WAAW,EAAE,CAAC;IAElB,MAAM,eAAe,GAAG,WAAW,CACjC,CAAC,OAAoB,EAAE,EAAE;QACvB,IAAI,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;YACzB,MAAM,QAAQ,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;YACvC,kBAAkB,CAChB,cAAc,EACd,QAAQ;gBACN,CAAC,CAAC,CAAC,iBAAiB;oBAChB,CAAC,WAAW;wBACV,CAAC,CAAC,0BAA0B,CAAC,QAAQ,CAAC;wBACtC,CAAC,CAAC,0BAA0B,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAC1C,QAAQ;gBACZ,CAAC,CAAC,EAAE,CACP,CAAC;YACF,MAAM,KAAK,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC;YACjC,kBAAkB,CAAC,WAAW,EAAE,KAAK,IAAI,EAAE,CAAC,CAAC;YAC7C,OAAO;QACT,CAAC;IACH,CAAC,EACD,CAAC,kBAAkB,EAAE,iBAAiB,EAAE,WAAW,CAAC,CACrD,CAAC;IAEF,MAAM,cAAc,GAAG,WAAW,CAAC,GAAG,EAAE;QACtC,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;QAClC,IAAI,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;YACjC,IAAI,YAAY,KAAK,MAAM,IAAI,uBAAuB,CAAC,YAAY,CAAC,EAAE,CAAC;gBACrE,MAAM,WAAW,GAAG,YAAY,CAAC,cAAc,EAAE,CAAC;gBAClD,kBAAkB,CAChB,gBAAgB,EAChB,CAAC,CAAC,WAAW,EAAE,aAAa,EAAE,SAAS,CAAC,QAAQ,CAC9C,yBAAyB,CAC1B,CACF,CAAC;YACJ,CAAC;iBAAM,CAAC;gBACN,kBAAkB,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;YAC9C,CAAC;YAED,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YAC9C,MAAM,OAAO,GAAG,oBAAoB,CAAC,UAAU,CAAC,CAAC;YACjD,MAAM,UAAU,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;YACpC,MAAM,UAAU,GAAG,YAAY,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;YAE5D,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC;YAE5D,eAAe;YACf,MAAM,IAAI,GAAG,eAAe,CAAC,SAAS,CAAC,CAAC;YACxC,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAChC,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;YACxD,kBAAkB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAErC,MAAM,SAAS,GAAG,mBAAmB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;YAC1D,IAAI,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC;gBAC5B,kBAAkB,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;YAC1C,CAAC;iBAAM,CAAC;gBACN,kBAAkB,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;YACzC,CAAC;YAED,IAAI,UAAU,KAAK,IAAI,EAAE,CAAC;gBACxB,qBAAqB,CAAC,UAAU,CAAC,CAAC;gBAClC,IAAI,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;oBACzB,MAAM,UAAU,GAAG,qBAAqB,CACtC,UAAU,EACV,QAAQ,CACT,CAAC;oBACF,MAAM,IAAI,GAAG,UAAU;wBACrB,CAAC,CAAC,UAAU,CAAC,WAAW,EAAE;wBAC1B,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;oBAE1B,kBAAkB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBACxC,CAAC;qBAAM,CAAC;oBACN,kBAAkB,CAAC,OAAO,CAAC,CAAC;oBAC5B,eAAe,CAAC,OAAO,CAAC,CAAC;gBAC3B,CAAC;YACH,CAAC;YAED,iBAAiB;YACjB,kBAAkB,CAChB,WAAW,EACX,kCAAkC,CAAC,SAAS,EAAE,OAAO,EAAE,MAAM,CAAC,CAC/D,CAAC;YACF,kBAAkB,CAChB,SAAS,EACT,kCAAkC,CAChC,SAAS,EACT,kBAAkB,EAClB,MAAM,CACP,CACF,CAAC;YACF,kBAAkB,CAChB,YAAY,EACZ,kCAAkC,CAAC,SAAS,EAAE,aAAa,EAAE,OAAO,CAAC,CACtE,CAAC;YACF,IAAI,cAAc,CAAC;YACnB,IAAI,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC;gBACxB,8EAA8E;gBAC9E,cAAc,GAAG,mBAAmB,CAClC,IAAI,EACJ,UAAU,CAAC,EAAE,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CACnE,CAAC;YACJ,CAAC;YAED,2DAA2D;YAC3D,kBAAkB,CAChB,eAAe,EACf,cAAc,CAAC,cAAc,CAAC;gBAC5B,CAAC,CAAC,cAAc,CAAC,aAAa,EAAE;gBAChC,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC;oBACpB,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE;oBACtB,CAAC,CAAC,MAAM,EAAE,aAAa,EAAE,IAAI,MAAM,CACxC,CAAC;QACJ,CAAC;QACD,IAAI,iBAAiB,CAAC,SAAS,CAAC,IAAI,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;YACjE,qBAAqB;YACrB,kBAAkB,CAAC,QAAQ,EAAE,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAC1D,kBAAkB,CAAC,UAAU,EAAE,SAAS,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC9D,kBAAkB,CAAC,aAAa,EAAE,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;YACpE,kBAAkB,CAChB,iBAAiB,EACjB,SAAS,CAAC,SAAS,CAAC,eAAe,CAAC,CACrC,CAAC;YACF,kBAAkB,CAAC,aAAa,EAAE,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;YACpE,kBAAkB,CAAC,eAAe,EAAE,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YACxE,kBAAkB,CAAC,aAAa,EAAE,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;YACpE,kBAAkB,CAAC,QAAQ,EAAE,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAC1D,kBAAkB,CAChB,UAAU,EACV,kCAAkC,CAAC,SAAS,EAAE,WAAW,EAAE,MAAM,CAAC,CACnE,CAAC;YACF,kBAAkB,CAAC,aAAa,EAAE,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;YACpE,kBAAkB,CAAC,aAAa,EAAE,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;YACpE,kBAAkB,CAAC,cAAc,EAAE,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;QACxE,CAAC;QACD,IAAI,gBAAgB,CAAC,SAAS,CAAC,EAAE,CAAC;YAChC,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;YACnC,KAAK,MAAM,YAAY,IAAI,KAAK,EAAE,CAAC;gBACjC,MAAM,UAAU,GAAG,qBAAqB,CACtC,YAAY,EACZ,QAAQ,CACT,CAAC;gBACF,IAAI,UAAU,EAAE,CAAC;oBACf,MAAM,IAAI,GAAG,UAAU,CAAC,WAAW,EAAE,CAAC;oBACtC,kBAAkB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBACxC,CAAC;qBAAM,CAAC;oBACN,MAAM,eAAe,GAAG,oBAAoB,CAAC,YAAY,CAAC,CAAC;oBAC3D,kBAAkB,CAAC,eAAe,CAAC,CAAC;oBACpC,eAAe,CAAC,eAAe,CAAC,CAAC;oBACjC,yDAAyD;oBACzD,IAAI,cAAc,CAAC,eAAe,CAAC,EAAE,CAAC;wBACpC,kBAAkB,CAChB,eAAe,EACf,eAAe,CAAC,aAAa,EAAE,CAChC,CAAC;oBACJ,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC,EAAE;QACD,YAAY;QACZ,MAAM;QACN,kBAAkB;QAClB,kBAAkB;QAClB,eAAe;KAChB,CAAC,CAAC;IAEH,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,MAAM,CAAC,eAAe,CAC3B,wBAAwB,EACxB,CAAC,QAAQ,EAAE,SAAS,EAAE,EAAE;YACtB,eAAe,CAAC,SAAS,CAAC,CAAC;YAC3B,cAAc,EAAE,CAAC;YACjB,OAAO,KAAK,CAAC;QACf,CAAC,EACD,yBAAyB,CAC1B,CAAC;IACJ,CAAC,EAAE,CAAC,MAAM,EAAE,cAAc,EAAE,eAAe,CAAC,CAAC,CAAC;IAE9C,SAAS,CAAC,GAAG,EAAE;QACb,YAAY,CAAC,cAAc,EAAE,CAAC,IAAI,CAChC,GAAG,EAAE;YACH,cAAc,EAAE,CAAC;QACnB,CAAC,EACD,EAAE,MAAM,EAAE,YAAY,EAAE,CACzB,CAAC;IACJ,CAAC,EAAE,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC,CAAC;IAEnC,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,aAAa,CAClB,MAAM,CAAC,wBAAwB,CAAC,QAAQ,CAAC,EAAE;YACzC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC1B,CAAC,CAAC,EACF,YAAY,CAAC,sBAAsB,CAAC,CAAC,EAAE,WAAW,EAAE,EAAE,EAAE;YACtD,WAAW,CAAC,IAAI,CACd,GAAG,EAAE;gBACH,cAAc,EAAE,CAAC;YACnB,CAAC,EACD,EAAE,MAAM,EAAE,YAAY,EAAE,CACzB,CAAC;QACJ,CAAC,CAAC,EACF,YAAY,CAAC,eAAe,CAC1B,gBAAgB,EAChB,OAAO,CAAC,EAAE;YACR,kBAAkB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YACvC,OAAO,KAAK,CAAC;QACf,CAAC,EACD,yBAAyB,CAC1B,EACD,YAAY,CAAC,eAAe,CAC1B,gBAAgB,EAChB,OAAO,CAAC,EAAE;YACR,kBAAkB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YACvC,OAAO,KAAK,CAAC;QACf,CAAC,EACD,yBAAyB,CAC1B,CACF,CAAC;IACJ,CAAC,EAAE,CAAC,cAAc,EAAE,YAAY,EAAE,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;IAE/D,MAAM,UAAU,GAAG,WAAW,CAAC,GAAG,EAAE;QAClC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;YACzB,OAAO,CAAC,GAAG,CACT,oEAAoE,CACrE,CAAC;YACF,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACxB,OAAO,CAAC,GAAG,CACT,qFAAqF,CACtF,CAAC;YACF,YAAY,CAAC,eAAe,CAC1B,mBAAmB,EACnB,WAAW,CAAC,UAAU,CAAC,CACxB,CAAC;YACF,OAAO,CAAC,GAAG,CAAC,gDAAgD,CAAC,CAAC;QAChE,CAAC;aAAM,CAAC;YACN,OAAO,CAAC,GAAG,CAAC,wDAAwD,CAAC,CAAC;YACtE,iBAAiB,CAAC,KAAK,CAAC,CAAC;YACzB,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;QAC1D,CAAC;IACH,CAAC,EAAE,CAAC,YAAY,EAAE,iBAAiB,EAAE,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;IAE3D,MAAM,oBAAoB,GAAG,WAAW,CACtC,CAAC,KAAa,EAAE,EAAE;QAChB,YAAY,CAAC,MAAM,CAAC,GAAG,EAAE;YACvB,IAAI,kBAAkB,KAAK,IAAI,EAAE,CAAC;gBAChC,MAAM,IAAI,GAAG,aAAa,CAAC,kBAAkB,CAAC,CAAC;gBAC/C,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC;oBACtB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAC1B,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,EACD,CAAC,YAAY,EAAE,kBAAkB,CAAC,CACnC,CAAC;IACF,MAAM,iBAAiB,GAAG,WAAW,CACnC,CAAC,KAAa,EAAE,EAAE;QAChB,YAAY,CAAC,MAAM,CAAC,GAAG,EAAE;YACvB,IAAI,kBAAkB,KAAK,IAAI,EAAE,CAAC;gBAChC,MAAM,IAAI,GAAG,aAAa,CAAC,kBAAkB,CAAC,CAAC;gBAC/C,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC;oBACtB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACvB,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,EACD,CAAC,YAAY,EAAE,kBAAkB,CAAC,CACnC,CAAC;IACF,MAAM,gBAAgB,GAAG,CAAC,OAA2B,EAAE,EAAE;QACvD,YAAY,CAAC,eAAe,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC;IAC9D,CAAC,CAAC;IAEF,MAAM,0BAA0B,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC;IAChE,MAAM,4BAA4B,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC;IAElE,OAAO,CACL,eAAK,SAAS,EAAC,SAAS,aACtB,iBACE,QAAQ,EAAE,CAAC,YAAY,CAAC,OAAO,IAAI,CAAC,UAAU,EAC9C,OAAO,EAAE,GAAG,EAAE;oBACZ,YAAY,CAAC,eAAe,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;gBACxD,CAAC,EACD,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,eAAe,EAC/C,IAAI,EAAC,QAAQ,EACb,SAAS,EAAC,qBAAqB,gBACpB,MAAM,YAEjB,YAAG,SAAS,EAAC,aAAa,GAAG,GACtB,EACT,iBACE,QAAQ,EAAE,CAAC,YAAY,CAAC,OAAO,IAAI,CAAC,UAAU,EAC9C,OAAO,EAAE,GAAG,EAAE;oBACZ,YAAY,CAAC,eAAe,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;gBACxD,CAAC,EACD,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,eAAe,EAChD,IAAI,EAAC,QAAQ,EACb,SAAS,EAAC,cAAc,gBACb,MAAM,YAEjB,YAAG,SAAS,EAAC,aAAa,GAAG,GACtB,EACT,KAAC,OAAO,KAAG,EACV,YAAY,CAAC,SAAS,IAAI,oBAAoB;gBAC7C,YAAY,KAAK,MAAM,IAAI,CACzB,8BACE,KAAC,mBAAmB,IAClB,QAAQ,EAAE,CAAC,UAAU,EACrB,SAAS,EAAE,YAAY,CAAC,SAAS,EACjC,QAAQ,EAAE,YAAY,CAAC,QAAQ,EAC/B,MAAM,EAAE,YAAY,GACpB,EACF,KAAC,OAAO,KAAG,IACV,CACJ,EACF,YAAY,CAAC,SAAS,KAAK,MAAM,IAAI,iBAAiB,CAAC,CAAC,CAAC,CACxD,8BACG,CAAC,WAAW,IAAI,CACf,KAAC,QAAQ,IACP,QAAQ,EAAE,CAAC,UAAU,EACrB,eAAe,EAAC,4BAA4B,EAC5C,WAAW,EACT,CAAC,2BAA2B,CAAC,IAAI,CAC/B,GAAG,CAAC,EAAE,CACJ,GAAG,CAAC,CAAC,CAAC;4BACN,0BAA0B,CAAC,YAAY,CAAC,YAAY,CAAC,CACxD,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAEnB,eAAe,EAAC,iBAAiB,YAEhC,2BAA2B,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,EAAE;4BACjD,OAAO,CACL,KAAC,YAAY,IACX,SAAS,EAAE,QAAQ,mBAAmB,CACpC,KAAK,KAAK,YAAY,CAAC,YAAY,CACpC,EAAE,EACH,OAAO,EAAE,GAAG,EAAE,CAAC,oBAAoB,CAAC,KAAK,CAAC,YAG1C,eAAM,SAAS,EAAC,MAAM,YAAE,IAAI,GAAQ,IAF/B,KAAK,CAGG,CAChB,CAAC;wBACJ,CAAC,CAAC,GACO,CACZ,EACA,WAAW,IAAI,CACd,8BACE,KAAC,QAAQ,IACP,QAAQ,EAAE,CAAC,UAAU,EACrB,eAAe,EAAC,4BAA4B,EAC5C,WAAW,EACT,CAAC,oCAAoC,CAAC,IAAI,CACxC,GAAG,CAAC,EAAE,CACJ,GAAG,CAAC,CAAC,CAAC;oCACN,0BAA0B,CAAC,YAAY,CAAC,YAAY,CAAC,CACxD,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAEnB,eAAe,EAAC,iBAAiB,YAEhC,oCAAoC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,EAAE;oCAC1D,OAAO,CACL,KAAC,YAAY,IACX,SAAS,EAAE,QAAQ,mBAAmB,CACpC,KAAK,KAAK,YAAY,CAAC,YAAY,CACpC,EAAE,EACH,OAAO,EAAE,GAAG,EAAE,CAAC,oBAAoB,CAAC,KAAK,CAAC,YAG1C,eAAM,SAAS,EAAC,MAAM,YAAE,IAAI,GAAQ,IAF/B,KAAK,CAGG,CAChB,CAAC;gCACJ,CAAC,CAAC,GACO,EACX,KAAC,QAAQ,IACP,QAAQ,EAAE,CAAC,UAAU,EACrB,eAAe,EAAC,4BAA4B,EAC5C,WAAW,EACT,CAAC,wBAAwB,CAAC,IAAI,CAC5B,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,YAAY,CAAC,SAAS,CACzC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAEnB,eAAe,EAAC,cAAc,YAE7B,wBAAwB,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,EAAE;oCAC9C,OAAO,CACL,KAAC,YAAY,IACX,SAAS,EAAE,QAAQ,mBAAmB,CACpC,KAAK,KAAK,YAAY,CAAC,SAAS,CACjC,EAAE,EACH,OAAO,EAAE,GAAG,EAAE,CAAC,iBAAiB,CAAC,KAAK,CAAC,YAGvC,eAAM,SAAS,EAAC,MAAM,YAAE,IAAI,GAAQ,IAF/B,KAAK,CAGG,CAChB,CAAC;gCACJ,CAAC,CAAC,GACO,IACV,CACJ,IACA,CACJ,CAAC,CAAC,CAAC,CACF,8BACE,KAAC,YAAY,IACX,QAAQ,EAAE,CAAC,UAAU,EACrB,KAAK,EAAE,aAAa,EACpB,KAAK,EAAE,YAAY,CAAC,UAAU,EAC9B,MAAM,EAAE,YAAY,GACpB,EACF,KAAC,OAAO,KAAG,EACX,KAAC,QAAQ,IACP,iBAAiB,EAAE,uBAAuB,CACxC,YAAY,CAAC,QAAQ,CACtB,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EACd,MAAM,EAAE,YAAY,EACpB,QAAQ,EAAE,CAAC,UAAU,GACrB,EACF,KAAC,OAAO,KAAG,EACX,iBACE,QAAQ,EAAE,CAAC,UAAU,EACrB,OAAO,EAAE,GAAG,EAAE;4BACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;wBAC5D,CAAC,EACD,SAAS,EACP,sBAAsB,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAEhE,KAAK,EAAE,SAAS,SAAS,CAAC,IAAI,GAAG,EACjC,IAAI,EAAC,QAAQ,gBACD,kCAAkC,SAAS,CAAC,IAAI,EAAE,YAE9D,YAAG,SAAS,EAAC,aAAa,GAAG,GACtB,EACT,iBACE,QAAQ,EAAE,CAAC,UAAU,EACrB,OAAO,EAAE,GAAG,EAAE;4BACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,QAAQ,CAAC,CAAC;wBAC9D,CAAC,EACD,SAAS,EACP,sBAAsB,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAElE,KAAK,EAAE,WAAW,SAAS,CAAC,MAAM,GAAG,EACrC,IAAI,EAAC,QAAQ,gBACD,qCAAqC,SAAS,CAAC,MAAM,EAAE,YAEnE,YAAG,SAAS,EAAC,eAAe,GAAG,GACxB,EACT,iBACE,QAAQ,EAAE,CAAC,UAAU,EACrB,OAAO,EAAE,GAAG,EAAE;4BACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,WAAW,CAAC,CAAC;wBACjE,CAAC,EACD,SAAS,EACP,sBAAsB;4BACtB,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAE5C,KAAK,EAAE,cAAc,SAAS,CAAC,SAAS,GAAG,EAC3C,IAAI,EAAC,QAAQ,gBACD,wCAAwC,SAAS,CAAC,SAAS,EAAE,YAEzE,YAAG,SAAS,EAAC,kBAAkB,GAAG,GAC3B,EACR,4BAA4B,IAAI,CAC/B,iBACE,QAAQ,EAAE,CAAC,UAAU,EACrB,OAAO,EAAE,GAAG,EAAE;4BACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;wBAC5D,CAAC,EACD,SAAS,EACP,sBAAsB,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAEhE,KAAK,EAAE,sBAAsB,SAAS,CAAC,iBAAiB,GAAG,EAC3D,IAAI,EAAC,QAAQ,gBACF,mBAAmB,YAE9B,YAAG,SAAS,EAAC,aAAa,GAAG,GACtB,CACV,EACD,iBACE,QAAQ,EAAE,CAAC,UAAU,EACrB,OAAO,EAAE,UAAU,EACnB,SAAS,EACP,sBAAsB,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,gBAErD,aAAa,EACxB,KAAK,EAAE,gBAAgB,SAAS,CAAC,WAAW,GAAG,EAC/C,IAAI,EAAC,QAAQ,YAEb,YAAG,SAAS,EAAC,aAAa,GAAG,GACtB,EACT,MAAC,QAAQ,IACP,QAAQ,EAAE,CAAC,UAAU,EACrB,eAAe,EAAC,qBAAqB,EACrC,WAAW,EAAC,EAAE,EACd,eAAe,EAAC,+CAA+C,EAC/D,mBAAmB,EAAC,oBAAoB,aAExC,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oCACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,WAAW,CAAC,CAAC;gCACjE,CAAC,EACD,SAAS,EACP,YAAY,GAAG,mBAAmB,CAAC,YAAY,CAAC,WAAW,CAAC,EAE9D,KAAK,EAAC,WAAW,gBACN,0BAA0B,aAErC,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,gBAAgB,GAAG,EAChC,eAAM,SAAS,EAAC,MAAM,0BAAiB,IACnC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,SAAS,GAAQ,IAC1C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oCACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,WAAW,CAAC,CAAC;gCACjE,CAAC,EACD,SAAS,EACP,YAAY,GAAG,mBAAmB,CAAC,YAAY,CAAC,WAAW,CAAC,EAE9D,KAAK,EAAC,WAAW,gBACN,0BAA0B,aAErC,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,gBAAgB,GAAG,EAChC,eAAM,SAAS,EAAC,MAAM,0BAAiB,IACnC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,SAAS,GAAQ,IAC1C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oCACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,YAAY,CAAC,CAAC;gCAClE,CAAC,EACD,SAAS,EACP,YAAY,GAAG,mBAAmB,CAAC,YAAY,CAAC,YAAY,CAAC,EAE/D,KAAK,EAAC,YAAY,gBACP,2BAA2B,aAEtC,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,iBAAiB,GAAG,EACjC,eAAM,SAAS,EAAC,MAAM,2BAAkB,IACpC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,UAAU,GAAQ,IAC3C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oCACZ,YAAY,CAAC,eAAe,CAC1B,mBAAmB,EACnB,eAAe,CAChB,CAAC;gCACJ,CAAC,EACD,SAAS,EACP,YAAY,GAAG,mBAAmB,CAAC,YAAY,CAAC,eAAe,CAAC,EAElE,KAAK,EAAC,eAAe,gBACV,kCAAkC,aAE7C,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,oBAAoB,GAAG,EACpC,eAAM,SAAS,EAAC,MAAM,8BAAqB,IACvC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,aAAa,GAAQ,IAC9C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oCACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,WAAW,CAAC,CAAC;gCACjE,CAAC,EACD,SAAS,EACP,YAAY,GAAG,mBAAmB,CAAC,YAAY,CAAC,WAAW,CAAC,EAE9D,KAAK,EAAC,WAAW,gBACN,8BAA8B,aAEzC,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,gBAAgB,GAAG,EAChC,eAAM,SAAS,EAAC,MAAM,0BAAiB,IACnC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,SAAS,GAAQ,IAC1C,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oCACZ,YAAY,CAAC,eAAe,CAC1B,mBAAmB,EACnB,aAAa,CACd,CAAC;gCACJ,CAAC,EACD,SAAS,EACP,YAAY,GAAG,mBAAmB,CAAC,YAAY,CAAC,aAAa,CAAC,EAEhE,KAAK,EAAC,aAAa,gBACR,gCAAgC,aAE3C,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,kBAAkB,GAAG,EAClC,eAAM,SAAS,EAAC,MAAM,4BAAmB,IACrC,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,WAAW,GAAQ,IAC5C,EACf,KAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;oCACZ,YAAY,CAAC,eAAe,CAAC,mBAAmB,EAAE,WAAW,CAAC,CAAC;gCACjE,CAAC,EACD,SAAS,EACP,YAAY,GAAG,mBAAmB,CAAC,YAAY,CAAC,WAAW,CAAC,EAE9D,KAAK,EAAC,WAAW,gBACN,8BAA8B,YAEzC,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,gBAAgB,GAAG,EAChC,eAAM,SAAS,EAAC,MAAM,0BAAiB,IACnC,GACO,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE,CAAC,eAAe,CAAC,YAAY,CAAC,EAC5C,SAAS,EAAC,WAAW,EACrB,KAAK,EAAC,uBAAuB,gBAClB,2BAA2B,aAEtC,eAAK,SAAS,EAAC,qBAAqB,aAClC,YAAG,SAAS,EAAC,YAAY,GAAG,EAC5B,eAAM,SAAS,EAAC,MAAM,iCAAwB,IAC1C,EACN,eAAM,SAAS,EAAC,UAAU,YAAE,SAAS,CAAC,gBAAgB,GAAQ,IACjD,IACN,EACV,0BAA0B,IAAI,CAC7B,8BACE,KAAC,OAAO,KAAG,EACX,MAAC,QAAQ,IACP,QAAQ,EAAE,CAAC,UAAU,EACrB,eAAe,EAAC,qBAAqB,EACrC,WAAW,EAAC,QAAQ,EACpB,eAAe,EAAC,gCAAgC,EAChD,mBAAmB,EAAC,WAAW,aAE/B,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;4CACZ,YAAY,CAAC,eAAe,CAC1B,8BAA8B,EAC9B,SAAS,CACV,CAAC;wCACJ,CAAC,EACD,SAAS,EAAC,MAAM,aAEhB,YAAG,SAAS,EAAC,sBAAsB,GAAG,EACtC,eAAM,SAAS,EAAC,MAAM,gCAAuB,IAChC,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;4CACZ,YAAY,CAAC,eAAe,CAC1B,gCAAgC,EAChC,SAAS,CACV,CAAC;wCACJ,CAAC,EACD,SAAS,EAAC,MAAM,aAEhB,YAAG,SAAS,EAAC,YAAY,GAAG,EAC5B,eAAM,SAAS,EAAC,MAAM,sBAAa,IACtB,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;4CACZ,YAAY,CAAC,eAAe,CAC1B,0BAA0B,EAC1B,SAAS,CACV,CAAC;wCACJ,CAAC,EACD,SAAS,EAAC,MAAM,aAEhB,YAAG,SAAS,EAAC,mBAAmB,GAAG,EACnC,eAAM,SAAS,EAAC,MAAM,4BAAmB,IAC5B,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;4CACZ,YAAY,CAAC,eAAe,CAC1B,yBAAyB,EACzB,SAAS,CACV,CAAC;wCACJ,CAAC,EACD,SAAS,EAAC,MAAM,aAEhB,YAAG,SAAS,EAAC,gBAAgB,GAAG,EAChC,eAAM,SAAS,EAAC,MAAM,2BAAkB,IAC3B,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;4CACZ,SAAS,CAAC,cAAc,EAAE,OAAO,CAAC,EAAE,CAAC,CACnC,KAAC,iBAAiB,IAChB,YAAY,EAAE,YAAY,EAC1B,OAAO,EAAE,OAAO,GAChB,CACH,CAAC,CAAC;wCACL,CAAC,EACD,SAAS,EAAC,MAAM,aAEhB,YAAG,SAAS,EAAC,YAAY,GAAG,EAC5B,eAAM,SAAS,EAAC,MAAM,sBAAa,IACtB,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE,CACZ,gBAAgB,CAAC;4CACf,OAAO,EAAE,wBAAwB;4CACjC,GAAG,EAAE,YAAY;yCAClB,CAAC,EAEJ,SAAS,EAAC,MAAM,aAEhB,YAAG,SAAS,EAAC,UAAU,GAAG,EAC1B,eAAM,SAAS,EAAC,MAAM,oBAAW,IACpB,EACf,MAAC,YAAY,IACX,OAAO,EAAE,GAAG,EAAE;4CACZ,SAAS,CAAC,iBAAiB,EAAE,OAAO,CAAC,EAAE,CAAC,CACtC,KAAC,oBAAoB,IACnB,YAAY,EAAE,YAAY,EAC1B,OAAO,EAAE,OAAO,GAChB,CACH,CAAC,CAAC;wCACL,CAAC,EACD,SAAS,EAAC,MAAM,aAEhB,YAAG,SAAS,EAAC,eAAe,GAAG,EAC/B,eAAM,SAAS,EAAC,MAAM,yBAAgB,IACzB,EACd,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAC/B,MAAC,YAAY,IAEX,OAAO,EAAE,GAAG,EAAE;4CACZ,YAAY,CAAC,eAAe,CAC1B,oBAAoB,EACpB,WAAW,CAAC,IAAI,CACjB,CAAC;wCACJ,CAAC,EACD,SAAS,EAAC,MAAM,aAEf,WAAW,CAAC,IAAI,EACjB,eAAM,SAAS,EAAC,MAAM,YAAE,WAAW,CAAC,WAAW,GAAQ,KAVlD,WAAW,CAAC,IAAI,CAWR,CAChB,CAAC,IACO,IACV,CACJ,IACA,CACJ,EACD,KAAC,OAAO,KAAG,EACX,KAAC,qBAAqB,IACpB,QAAQ,EAAE,CAAC,UAAU,EACrB,KAAK,EAAE,YAAY,CAAC,aAAa,EACjC,MAAM,EAAE,YAAY,EACpB,KAAK,EAAE,YAAY,CAAC,KAAK,GACzB,EACF,KAAC,OAAO,KAAG,EACX,KAAC,oBAAoB,KAAG,EAEvB,KAAK,IACF,CACP,CAAC;AACJ,CAAC;AAED,SAAS,oBAAoB;IAC3B,MAAM,EAAE,YAAY,EAAE,cAAc,EAAE,GAAG,WAAW,EAAE,CAAC;IAEvD,OAAO,CACL,iBACE,OAAO,EAAE,cAAc,EACvB,SAAS,EAAC,qBAAqB,gBACnB,YAAY,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,eAAe,EAC5D,KAAK,EAAE,YAAY,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,eAAe,EACvD,IAAI,EAAC,QAAQ,YAEb,YACE,SAAS,EAAE,YAAY,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC,iBAAiB,GACtE,GACK,CACV,CAAC;AACJ,CAAC;AAED,eAAe,aAAa,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js
index 29608d1..23a6128 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js
@@ -18,7 +18,7 @@ import { $patchStyleText, $setBlocksType } from '@lexical/selection';
 import { $isTableSelection } from '@lexical/table';
 import { $getNearestBlockElementAncestorOrThrow } from '@lexical/utils';
 import { $createParagraphNode, $getSelection, $isRangeSelection, $isTextNode, } from 'lexical';
-import { DEFAULT_FONT_SIZE, MAX_ALLOWED_FONT_SIZE, MIN_ALLOWED_FONT_SIZE, } from '../../context/ToolbarContext.js';
+import { DEFAULT_FONT_SIZE, MAX_ALLOWED_FONT_SIZE, MIN_ALLOWED_FONT_SIZE, } from '../../context/ToolbarContext';
 export var UpdateFontSizeType;
 (function (UpdateFontSizeType) {
     UpdateFontSizeType[UpdateFontSizeType["increment"] = 1] = "increment";
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/YouTubePlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/YouTubePlugin.js
index e58b6b3..4dfed74 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/YouTubePlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/YouTubePlugin.js
@@ -7,7 +7,7 @@ import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext
 import { $insertNodeToNearestRoot } from '@lexical/utils';
 import { COMMAND_PRIORITY_EDITOR, createCommand, } from 'lexical';
 import { useEffect } from 'react';
-import { $createYouTubeNode, YouTubeNode } from '../nodes/YouTubeNode.js';
+import { $createYouTubeNode, YouTubeNode } from '../nodes/YouTubeNode';
 export const INSERT_YOUTUBE_COMMAND = createCommand();
 export const YouTubePlugin = () => {
     const [editor] = useLexicalComposerContext();
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.d.ts
index 85aa819..fd6023e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.d.ts
@@ -1,11 +1,15 @@
 export * from './AutoEmbedPlugin';
 export * from './AutoIndentPlugin';
 export * from './AutoLinkPlugin';
-export * from './CodeActionMenuPlugin';
+export { default as FloatingLinkEditorPlugin } from './FloatingLinkEditorPlugin';
+export { default as CodeActionMenuPlugin } from './CodeActionMenuPlugin';
+export { CodeBlockHighlightPlugin } from './CodeHighlightPlugin';
+export * from './CollapsiblePlugin';
 export * from './CommentPlugin';
 export * from './ComponentPickerMenuPlugin';
 export * from './DraggableBlockPlugin';
 export * from './EquationsPlugin';
+export * from './ExcalidrawPlugin';
 export * from './FloatingTextFormatToolbarPlugin';
 export * from './HorizontalRulePlugin';
 export * from './ImagesPlugin';
@@ -14,11 +18,21 @@ export * from './JupyterCellPlugin';
 export * from './JupyterInputOutputPlugin';
 export * from './LexicalInlineCompletionPlugin';
 export * from './LexicalStatePlugin';
+export * from './LSPTabCompletionPlugin';
+export * from './LSPTabCompletionProvider';
+export * from './LSPDocumentSyncPlugin';
+export * from './lspTypes';
 export * from './ListMaxIndentLevelPlugin';
 export * from './MarkdownPlugin';
 export * from './NbformatContentPlugin';
 export * from './ShortcutsPlugin';
 export * from './TableOfContentsPlugin';
+export * from './TablePlugin';
+export { default as TableActionMenuPlugin } from './TableActionMenuPlugin';
+export { default as TableHoverActionsPlugin } from './TableHoverActionsPlugin';
+export { default as TableHoverActionsV2Plugin } from './TableHoverActionsV2Plugin';
+export { default as TableScrollShadowPlugin } from './TableScrollShadowPlugin';
+export { default as TableCellResizerPlugin } from './TableCellResizer';
 export * from './ToolbarPlugin';
 export * from './TreeViewPlugin';
 export * from './YouTubePlugin';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js
index e83f14d..5bc8640 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js
@@ -3,28 +3,42 @@
  *
  * MIT License
  */
-export * from './AutoEmbedPlugin.js';
-export * from './AutoIndentPlugin.js';
-export * from './AutoLinkPlugin.js';
-export * from './CodeActionMenuPlugin.js';
-export * from './CommentPlugin.js';
-export * from './ComponentPickerMenuPlugin.js';
-export * from './DraggableBlockPlugin.js';
-export * from './EquationsPlugin.js';
-export * from './FloatingTextFormatToolbarPlugin.js';
-export * from './HorizontalRulePlugin.js';
-export * from './ImagesPlugin.js';
-export * from './InlineCompletionConfig.js';
-export * from './JupyterCellPlugin.js';
-export * from './JupyterInputOutputPlugin.js';
-export * from './LexicalInlineCompletionPlugin.js';
-export * from './LexicalStatePlugin.js';
-export * from './ListMaxIndentLevelPlugin.js';
-export * from './MarkdownPlugin.js';
-export * from './NbformatContentPlugin.js';
-export * from './ShortcutsPlugin/index.js';
-export * from './TableOfContentsPlugin.js';
-export * from './ToolbarPlugin/index.js';
-export * from './TreeViewPlugin.js';
-export * from './YouTubePlugin.js';
+export * from './AutoEmbedPlugin';
+export * from './AutoIndentPlugin';
+export * from './AutoLinkPlugin';
+export { default as FloatingLinkEditorPlugin } from './FloatingLinkEditorPlugin';
+export { default as CodeActionMenuPlugin } from './CodeActionMenuPlugin';
+export { CodeBlockHighlightPlugin } from './CodeHighlightPlugin';
+export * from './CollapsiblePlugin';
+export * from './CommentPlugin';
+export * from './ComponentPickerMenuPlugin';
+export * from './DraggableBlockPlugin';
+export * from './EquationsPlugin';
+export * from './ExcalidrawPlugin';
+export * from './FloatingTextFormatToolbarPlugin';
+export * from './HorizontalRulePlugin';
+export * from './ImagesPlugin';
+export * from './InlineCompletionConfig';
+export * from './JupyterCellPlugin';
+export * from './JupyterInputOutputPlugin';
+export * from './LexicalInlineCompletionPlugin';
+export * from './LexicalStatePlugin';
+export * from './LSPTabCompletionPlugin';
+export * from './LSPTabCompletionProvider';
+export * from './LSPDocumentSyncPlugin';
+export * from './lspTypes';
+export * from './ListMaxIndentLevelPlugin';
+export * from './MarkdownPlugin';
+export * from './NbformatContentPlugin';
+export * from './ShortcutsPlugin';
+export * from './TableOfContentsPlugin';
+export * from './TablePlugin';
+export { default as TableActionMenuPlugin } from './TableActionMenuPlugin';
+export { default as TableHoverActionsPlugin } from './TableHoverActionsPlugin';
+export { default as TableHoverActionsV2Plugin } from './TableHoverActionsV2Plugin';
+export { default as TableScrollShadowPlugin } from './TableScrollShadowPlugin';
+export { default as TableCellResizerPlugin } from './TableCellResizer';
+export * from './ToolbarPlugin';
+export * from './TreeViewPlugin';
+export * from './YouTubePlugin';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js.map
index 4951aed..6c75e29 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/plugins/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,mBAAmB,CAAC;AAClC,cAAc,oBAAoB,CAAC;AACnC,cAAc,kBAAkB,CAAC;AACjC,cAAc,wBAAwB,CAAC;AACvC,cAAc,iBAAiB,CAAC;AAChC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,wBAAwB,CAAC;AACvC,cAAc,mBAAmB,CAAC;AAClC,cAAc,mCAAmC,CAAC;AAClD,cAAc,wBAAwB,CAAC;AACvC,cAAc,gBAAgB,CAAC;AAC/B,cAAc,0BAA0B,CAAC;AACzC,cAAc,qBAAqB,CAAC;AACpC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,iCAAiC,CAAC;AAChD,cAAc,sBAAsB,CAAC;AACrC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,kBAAkB,CAAC;AACjC,cAAc,yBAAyB,CAAC;AACxC,cAAc,mBAAmB,CAAC;AAClC,cAAc,yBAAyB,CAAC;AACxC,cAAc,iBAAiB,CAAC;AAChC,cAAc,kBAAkB,CAAC;AACjC,cAAc,iBAAiB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/plugins/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,mBAAmB,CAAC;AAClC,cAAc,oBAAoB,CAAC;AACnC,cAAc,kBAAkB,CAAC;AACjC,OAAO,EAAE,OAAO,IAAI,wBAAwB,EAAE,MAAM,4BAA4B,CAAC;AACjF,OAAO,EAAE,OAAO,IAAI,oBAAoB,EAAE,MAAM,wBAAwB,CAAC;AACzE,OAAO,EAAE,wBAAwB,EAAE,MAAM,uBAAuB,CAAC;AACjE,cAAc,qBAAqB,CAAC;AACpC,cAAc,iBAAiB,CAAC;AAChC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,wBAAwB,CAAC;AACvC,cAAc,mBAAmB,CAAC;AAClC,cAAc,oBAAoB,CAAC;AACnC,cAAc,mCAAmC,CAAC;AAClD,cAAc,wBAAwB,CAAC;AACvC,cAAc,gBAAgB,CAAC;AAC/B,cAAc,0BAA0B,CAAC;AACzC,cAAc,qBAAqB,CAAC;AACpC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,iCAAiC,CAAC;AAChD,cAAc,sBAAsB,CAAC;AACrC,cAAc,0BAA0B,CAAC;AACzC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,yBAAyB,CAAC;AACxC,cAAc,YAAY,CAAC;AAC3B,cAAc,4BAA4B,CAAC;AAC3C,cAAc,kBAAkB,CAAC;AACjC,cAAc,yBAAyB,CAAC;AACxC,cAAc,mBAAmB,CAAC;AAClC,cAAc,yBAAyB,CAAC;AACxC,cAAc,eAAe,CAAC;AAC9B,OAAO,EAAE,OAAO,IAAI,qBAAqB,EAAE,MAAM,yBAAyB,CAAC;AAC3E,OAAO,EAAE,OAAO,IAAI,uBAAuB,EAAE,MAAM,2BAA2B,CAAC;AAC/E,OAAO,EAAE,OAAO,IAAI,yBAAyB,EAAE,MAAM,6BAA6B,CAAC;AACnF,OAAO,EAAE,OAAO,IAAI,uBAAuB,EAAE,MAAM,2BAA2B,CAAC;AAC/E,OAAO,EAAE,OAAO,IAAI,sBAAsB,EAAE,MAAM,oBAAoB,CAAC;AACvE,cAAc,iBAAiB,CAAC;AAChC,cAAc,kBAAkB,CAAC;AACjC,cAAc,iBAAiB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.d.ts
new file mode 100644
index 0000000..5869b5c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.d.ts
@@ -0,0 +1,138 @@
+/**
+ * LSP completion types for Lexical editor integration.
+ * @module lexical/plugins/lspTypes
+ */
+/**
+ * Cell language type supported by LSP
+ */
+export type CellLanguage = 'python' | 'markdown' | 'unknown';
+/**
+ * VS Code CompletionItemKind enum values
+ * https://code.visualstudio.com/api/references/vscode-api#CompletionItemKind
+ */
+export declare enum LSPCompletionItemKind {
+    Text = 0,
+    Method = 1,
+    Function = 2,
+    Constructor = 3,
+    Field = 4,
+    Variable = 5,
+    Class = 6,
+    Interface = 7,
+    Module = 8,
+    Property = 9,
+    Unit = 10,
+    Value = 11,
+    Enum = 12,
+    Keyword = 13,
+    Snippet = 14,
+    Color = 15,
+    File = 16,
+    Reference = 17,
+    Folder = 18,
+    EnumMember = 19,
+    Constant = 20,
+    Struct = 21,
+    Event = 22,
+    Operator = 23,
+    TypeParameter = 24
+}
+/**
+ * LSP completion item returned from extension host
+ */
+export interface LSPCompletionItem {
+    /** Display label for the completion */
+    label: string;
+    /** Completion kind (method, function, variable, etc.) */
+    kind?: LSPCompletionItemKind;
+    /** Additional details about the completion */
+    detail?: string;
+    /** Documentation string or markdown */
+    documentation?: string;
+    /** Text to insert when selected */
+    insertText: string;
+    /** Text used for sorting completions */
+    sortText?: string;
+    /** Text used for filtering completions */
+    filterText?: string;
+    /** Range to replace in the document */
+    range?: {
+        start: {
+            line: number;
+            character: number;
+        };
+        end: {
+            line: number;
+            character: number;
+        };
+    };
+}
+/**
+ * Provider interface for fetching LSP completions
+ */
+export interface ILSPCompletionProvider {
+    /** Human-readable provider name */
+    readonly name: string;
+    /**
+     * Fetch completions for a code block at a specific position.
+     * @param nodeUuid - JupyterInputNode UUID
+     * @param content - Full code block content
+     * @param position - Cursor position (line/character)
+     * @param language - Cell language ('python' | 'markdown')
+     * @returns Promise resolving to completion items
+     */
+    fetchCompletions(nodeUuid: string, content: string, position: {
+        line: number;
+        character: number;
+    }, language: CellLanguage): Promise<LSPCompletionItem[]>;
+    /** Dispose of the provider and clean up resources */
+    dispose(): void;
+}
+/**
+ * Message types for LSP communication with extension host
+ */
+export type LSPMessage = LSPCompletionRequestMessage | LSPCompletionResponseMessage | LSPDocumentSyncMessage | LSPDocumentOpenMessage | LSPDocumentCloseMessage | LSPErrorMessage;
+export interface LSPCompletionRequestMessage {
+    type: 'lsp-completion-request';
+    requestId: string;
+    cellId: string;
+    language: CellLanguage;
+    position: {
+        line: number;
+        character: number;
+    };
+    trigger?: string;
+    source?: 'lexical';
+    lexicalId?: string;
+}
+export interface LSPCompletionResponseMessage {
+    type: 'lsp-completion-response';
+    requestId: string;
+    completions: LSPCompletionItem[];
+}
+export interface LSPDocumentSyncMessage {
+    type: 'lsp-document-sync';
+    cellId: string;
+    content: string;
+    version: number;
+    source?: 'lexical';
+    lexicalId?: string;
+}
+export interface LSPDocumentOpenMessage {
+    type: 'lsp-document-open';
+    cellId: string;
+    notebookId: string;
+    content: string;
+    language: CellLanguage;
+    source?: 'lexical';
+}
+export interface LSPDocumentCloseMessage {
+    type: 'lsp-document-close';
+    cellId: string;
+    source?: 'lexical';
+}
+export interface LSPErrorMessage {
+    type: 'lsp-error';
+    requestId: string;
+    error: string;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.js
new file mode 100644
index 0000000..1c03fad
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.js
@@ -0,0 +1,38 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * VS Code CompletionItemKind enum values
+ * https://code.visualstudio.com/api/references/vscode-api#CompletionItemKind
+ */
+export var LSPCompletionItemKind;
+(function (LSPCompletionItemKind) {
+    LSPCompletionItemKind[LSPCompletionItemKind["Text"] = 0] = "Text";
+    LSPCompletionItemKind[LSPCompletionItemKind["Method"] = 1] = "Method";
+    LSPCompletionItemKind[LSPCompletionItemKind["Function"] = 2] = "Function";
+    LSPCompletionItemKind[LSPCompletionItemKind["Constructor"] = 3] = "Constructor";
+    LSPCompletionItemKind[LSPCompletionItemKind["Field"] = 4] = "Field";
+    LSPCompletionItemKind[LSPCompletionItemKind["Variable"] = 5] = "Variable";
+    LSPCompletionItemKind[LSPCompletionItemKind["Class"] = 6] = "Class";
+    LSPCompletionItemKind[LSPCompletionItemKind["Interface"] = 7] = "Interface";
+    LSPCompletionItemKind[LSPCompletionItemKind["Module"] = 8] = "Module";
+    LSPCompletionItemKind[LSPCompletionItemKind["Property"] = 9] = "Property";
+    LSPCompletionItemKind[LSPCompletionItemKind["Unit"] = 10] = "Unit";
+    LSPCompletionItemKind[LSPCompletionItemKind["Value"] = 11] = "Value";
+    LSPCompletionItemKind[LSPCompletionItemKind["Enum"] = 12] = "Enum";
+    LSPCompletionItemKind[LSPCompletionItemKind["Keyword"] = 13] = "Keyword";
+    LSPCompletionItemKind[LSPCompletionItemKind["Snippet"] = 14] = "Snippet";
+    LSPCompletionItemKind[LSPCompletionItemKind["Color"] = 15] = "Color";
+    LSPCompletionItemKind[LSPCompletionItemKind["File"] = 16] = "File";
+    LSPCompletionItemKind[LSPCompletionItemKind["Reference"] = 17] = "Reference";
+    LSPCompletionItemKind[LSPCompletionItemKind["Folder"] = 18] = "Folder";
+    LSPCompletionItemKind[LSPCompletionItemKind["EnumMember"] = 19] = "EnumMember";
+    LSPCompletionItemKind[LSPCompletionItemKind["Constant"] = 20] = "Constant";
+    LSPCompletionItemKind[LSPCompletionItemKind["Struct"] = 21] = "Struct";
+    LSPCompletionItemKind[LSPCompletionItemKind["Event"] = 22] = "Event";
+    LSPCompletionItemKind[LSPCompletionItemKind["Operator"] = 23] = "Operator";
+    LSPCompletionItemKind[LSPCompletionItemKind["TypeParameter"] = 24] = "TypeParameter";
+})(LSPCompletionItemKind || (LSPCompletionItemKind = {}));
+//# sourceMappingURL=lspTypes.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.js.map
new file mode 100644
index 0000000..7530af6
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/lspTypes.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"lspTypes.js","sourceRoot":"","sources":["../../src/plugins/lspTypes.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAYH;;;GAGG;AACH,MAAM,CAAN,IAAY,qBA0BX;AA1BD,WAAY,qBAAqB;IAC/B,iEAAQ,CAAA;IACR,qEAAU,CAAA;IACV,yEAAY,CAAA;IACZ,+EAAe,CAAA;IACf,mEAAS,CAAA;IACT,yEAAY,CAAA;IACZ,mEAAS,CAAA;IACT,2EAAa,CAAA;IACb,qEAAU,CAAA;IACV,yEAAY,CAAA;IACZ,kEAAS,CAAA;IACT,oEAAU,CAAA;IACV,kEAAS,CAAA;IACT,wEAAY,CAAA;IACZ,wEAAY,CAAA;IACZ,oEAAU,CAAA;IACV,kEAAS,CAAA;IACT,4EAAc,CAAA;IACd,sEAAW,CAAA;IACX,8EAAe,CAAA;IACf,0EAAa,CAAA;IACb,sEAAW,CAAA;IACX,oEAAU,CAAA;IACV,0EAAa,CAAA;IACb,oFAAkB,CAAA;AACpB,CAAC,EA1BW,qBAAqB,KAArB,qBAAqB,QA0BhC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.d.ts
index 3be4f4a..2200925 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.d.ts
@@ -36,6 +36,7 @@ export declare class LexicalAdapter {
     private _editor;
     private _defaultBlockType;
     private _serviceManager?;
+    private _runAllAbortController;
     constructor(editor: LexicalEditor, serviceManager?: any);
     /**
      * Get the underlying Lexical editor instance.
@@ -87,9 +88,21 @@ export declare class LexicalAdapter {
      */
     insertBlock(block: LexicalBlock, afterBlockId: string): Promise<OperationResult>;
     /**
-     * Delete a block by ID
+     * Delete multiple blocks by their IDs.
+     * Handles complex logic including validation, sorting, and cascading deletions.
+     *
+     * @param blockIds - Array of block IDs to delete
+     * @returns Promise with operation result including deleted blocks info
+     */
+    deleteBlock(blockIds: string[]): Promise<OperationResult & {
+        deletedBlocks?: Array<{
+            id: string;
+        }>;
+    }>;
+    /**
+     * Delete a single block by ID (internal helper).
      */
-    deleteBlock(blockId: string): Promise<OperationResult>;
+    private _deleteSingleBlock;
     /**
      * Update a block by ID
      */
@@ -115,6 +128,11 @@ export declare class LexicalAdapter {
      * @returns Promise with operation result
      */
     clearAllOutputs(): Promise<OperationResult>;
+    /**
+     * Restart the Jupyter kernel.
+     * Dispatches the RESTART_JUPYTER_KERNEL_COMMAND which is handled by JupyterInputOutputPlugin.
+     */
+    restartKernel(): Promise<OperationResult>;
     /**
      * Check if a block type requires command-based insertion
      */
@@ -131,6 +149,18 @@ export declare class LexicalAdapter {
      * Create a simple Lexical node from a block
      */
     private createSimpleNode;
+    /**
+     * Check if text contains block-level markdown that should be split into multiple blocks
+     */
+    private containsBlockLevelMarkdown;
+    /**
+     * Parse markdown text into multiple LexicalBlock objects
+     */
+    private parseMarkdownToBlocks;
+    /**
+     * Create a LexicalBlock from parsed markdown
+     */
+    private createBlockFromParsed;
     /**
      * Execute code directly in the kernel without creating a block.
      *
@@ -156,4 +186,26 @@ export declare class LexicalAdapter {
         executionCount?: number;
         error?: string;
     }>;
+    /**
+     * Insert a block using marker technique (for command-based insertion).
+     * This ensures correct positioning when commands don't support afterId.
+     */
+    private insertWithMarker;
+    /**
+     * Insert a node at a specific position (for direct node insertion).
+     */
+    private insertNodeAtPosition;
+    /**
+     * List available block types with their schemas.
+     * This operation returns static block type definitions and doesn't require editor access.
+     *
+     * @param category - Optional category filter
+     * @returns Promise with available block types, count, and categories
+     */
+    listAvailableBlocks(): Promise<{
+        success: boolean;
+        types?: any[];
+        count?: number;
+        error?: string;
+    }>;
 }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js
index 4c34169..b27f652 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js
@@ -3,12 +3,13 @@
  *
  * MIT License
  */
-import { $getRoot, $getSelection, $createParagraphNode, $createTextNode, } from 'lexical';
+import { $getRoot, $getSelection, $createParagraphNode, $createTextNode, $getNodeByKey, } from 'lexical';
 import { $createHeadingNode, $createQuoteNode, } from '@lexical/rich-text';
 import { $createCodeNode } from '@lexical/code';
 import { $createListNode, $createListItemNode } from '@lexical/list';
 import { $createHorizontalRuleNode } from '@lexical/react/LexicalHorizontalRuleNode';
-import { editorStateToBlocks } from '../tools/utils/blocks.js';
+import { editorStateToBlocks, parseMarkdownFormatting, } from '../tools/utils/blocks';
+import { INPUT_UUID_TO_OUTPUT_KEY } from '../plugins/JupyterInputOutputPlugin';
 /**
  * Adapter for high-level Lexical document operations.
  * Wraps the LexicalEditor and provides a clean API for tool operations.
@@ -22,6 +23,7 @@ export class LexicalAdapter {
     _editor;
     _defaultBlockType = 'paragraph';
     _serviceManager; // ServiceManager from @jupyterlab/services
+    _runAllAbortController = null;
     constructor(editor, serviceManager) {
         this._editor = editor;
         this._serviceManager = serviceManager;
@@ -107,8 +109,134 @@ export class LexicalAdapter {
      * @param afterBlockId - Insert after this block ID ('TOP', 'BOTTOM', or actual ID)
      */
     async insertBlock(block, afterBlockId) {
-        // Debug logging removed to satisfy ESLint no-console rule
-        // console.log(`[LexicalAdapter] insertBlock: type=${block.block_type}, afterBlockId=${afterBlockId}`);
+        // STEP 0: Check if source contains block-level markdown
+        // IMPORTANT: Skip markdown parsing for block types that are NOT prose
+        // (jupyter-cell, code, etc. contain # characters that aren't markdown headings)
+        const sourceText = Array.isArray(block.source)
+            ? block.source.join('\n')
+            : block.source;
+        const shouldParseMarkdown = block.block_type === 'paragraph' || block.block_type === 'text';
+        if (shouldParseMarkdown && this.containsBlockLevelMarkdown(sourceText)) {
+            // Parse into multiple blocks
+            const parsedBlocks = this.parseMarkdownToBlocks(sourceText);
+            if (parsedBlocks.length > 1) {
+                // Insert each block sequentially
+                let currentAfterBlockId = afterBlockId;
+                let lastBlockId;
+                for (const parsedBlock of parsedBlocks) {
+                    // Preserve original block's metadata (e.g., collapsible)
+                    parsedBlock.metadata = {
+                        ...parsedBlock.metadata,
+                        ...block.metadata,
+                    };
+                    // Insert block
+                    const result = await this.insertBlock(parsedBlock, currentAfterBlockId);
+                    if (!result.success) {
+                        return result; // Return first error
+                    }
+                    // Chain insertions: next block goes after this one
+                    if (result.blockId) {
+                        lastBlockId = result.blockId;
+                        currentAfterBlockId = result.blockId;
+                    }
+                }
+                return {
+                    success: true,
+                    blockId: lastBlockId,
+                    message: `Inserted ${parsedBlocks.length} blocks from markdown`,
+                };
+            }
+        }
+        // Special case: block belongs inside a collapsible
+        if (block.metadata?.collapsible) {
+            const collapsibleId = block.metadata.collapsible;
+            // Detect common mistake: using position markers as collapsible IDs
+            if (collapsibleId === 'TOP' || collapsibleId === 'BOTTOM') {
+                return Promise.resolve({
+                    success: false,
+                    error: `Invalid collapsible ID: "${collapsibleId}". ` +
+                        `To insert blocks inside a collapsible: ` +
+                        `1) First insert the collapsible container (returns blockId), ` +
+                        `2) Then insert nested blocks with properties.collapsible set to that blockId. ` +
+                        `Use afterId for positioning (TOP/BOTTOM/blockId), not properties.collapsible.`,
+                });
+            }
+            return new Promise(resolve => {
+                this._editor.update(() => {
+                    const root = $getRoot();
+                    const children = root.getChildren();
+                    // Find the collapsible container
+                    const collapsible = children.find(c => c.getKey() === collapsibleId);
+                    if (!collapsible ||
+                        collapsible.getType() !== 'collapsible-container') {
+                        resolve({
+                            success: false,
+                            error: `Collapsible container ${collapsibleId} not found`,
+                        });
+                        return;
+                    }
+                    // Find the collapsible-content node
+                    const containerChildren = collapsible.getChildren?.() || [];
+                    const contentNode = containerChildren.find((c) => c.getType() === 'collapsible-content');
+                    if (!contentNode) {
+                        resolve({
+                            success: false,
+                            error: `Collapsible content node not found in ${collapsibleId}`,
+                        });
+                        return;
+                    }
+                    // Strategy: Insert the block normally (at root level), then move it into the collapsible-content
+                    // This works for both simple and complex block types
+                    // Remove collapsible from metadata to avoid recursion
+                    const blockForInsertion = {
+                        ...block,
+                        metadata: { ...block.metadata, collapsible: undefined },
+                    };
+                    // Insert at root level using normal insertion logic
+                    this.insertBlock(blockForInsertion, 'BOTTOM')
+                        .then(result => {
+                        if (!result.success || !result.blockId) {
+                            resolve({
+                                success: false,
+                                error: `Failed to insert ${block.block_type}: ${result.error || 'Unknown error'}`,
+                            });
+                            return;
+                        }
+                        // Now move the inserted node into the collapsible-content
+                        setTimeout(() => {
+                            this._editor.update(() => {
+                                const root = $getRoot();
+                                const children = root.getChildren();
+                                // Find the node we just inserted
+                                const insertedNode = children.find(c => c.getKey() === result.blockId);
+                                if (!insertedNode) {
+                                    resolve({
+                                        success: false,
+                                        error: `Could not find inserted node ${result.blockId}`,
+                                    });
+                                    return;
+                                }
+                                // Remove from root
+                                insertedNode.remove();
+                                // Append to collapsible content
+                                contentNode.append(insertedNode);
+                                resolve({
+                                    success: true,
+                                    blockId: result.blockId,
+                                    message: `Block of type '${block.block_type}' inserted inside collapsible ${collapsibleId}`,
+                                });
+                            });
+                        }, 50); // Wait a bit longer to ensure command-based insertions complete
+                    })
+                        .catch(error => {
+                        resolve({
+                            success: false,
+                            error: `Failed to insert block: ${error.message || String(error)}`,
+                        });
+                    });
+                });
+            });
+        }
         // Handle special block types that require commands
         if (this.requiresCommand(block.block_type)) {
             return this.insertViaCommand(block, afterBlockId);
@@ -117,15 +245,93 @@ export class LexicalAdapter {
         return this.insertViaNode(block, afterBlockId);
     }
     /**
-     * Delete a block by ID
+     * Delete multiple blocks by their IDs.
+     * Handles complex logic including validation, sorting, and cascading deletions.
+     *
+     * @param blockIds - Array of block IDs to delete
+     * @returns Promise with operation result including deleted blocks info
      */
-    async deleteBlock(blockId) {
+    async deleteBlock(blockIds) {
+        try {
+            // Read all blocks to validate IDs exist and get positions
+            const blocks = await this.getBlocks('detailed');
+            const blockIdSet = new Set(blocks.map(block => block.block_id));
+            // Validate ALL IDs exist
+            const missingIds = [];
+            for (const id of blockIds) {
+                if (!blockIdSet.has(id)) {
+                    missingIds.push(id);
+                }
+            }
+            if (missingIds.length > 0) {
+                return {
+                    success: false,
+                    error: `Block ID(s) not found: ${missingIds.join(', ')}. Document has ${blocks.length} blocks.`,
+                };
+            }
+            // Sort IDs in reverse order to delete children before parents (collapsibles last)
+            // This prevents cascading deletions from causing "block not found" errors
+            const sortedIds = [...blockIds].sort((a, b) => {
+                const indexA = blocks.findIndex(block => block.block_id === a);
+                const indexB = blocks.findIndex(block => block.block_id === b);
+                // Sort in reverse order (higher index first)
+                return indexB - indexA;
+            });
+            const deletedBlocks = [];
+            // Delete each block in reverse order
+            for (const blockId of sortedIds) {
+                const result = await this._deleteSingleBlock(blockId);
+                if (result.success) {
+                    deletedBlocks.push({ id: blockId });
+                }
+                else if (result.error?.includes('not found')) {
+                    // Block was already deleted by cascading deletion (parent collapsible removed)
+                    // This is expected behavior, skip and continue
+                    continue;
+                }
+                else {
+                    // Other errors should propagate
+                    return result;
+                }
+            }
+            return {
+                success: true,
+                deletedBlocks,
+            };
+        }
+        catch (error) {
+            return {
+                success: false,
+                error: error instanceof Error ? error.message : String(error),
+            };
+        }
+    }
+    /**
+     * Delete a single block by ID (internal helper).
+     */
+    async _deleteSingleBlock(blockId) {
         return new Promise(resolve => {
             this._editor.update(() => {
                 try {
                     const root = $getRoot();
-                    const children = root.getChildren();
-                    const node = children.find(child => child.getKey() === blockId);
+                    // Helper function to recursively search for node by key
+                    const findNodeByKey = (node, targetKey) => {
+                        if (node.getKey() === targetKey) {
+                            return node;
+                        }
+                        // Check children if the node has them
+                        if ('getChildren' in node) {
+                            const children = node.getChildren();
+                            for (const child of children) {
+                                const found = findNodeByKey(child, targetKey);
+                                if (found)
+                                    return found;
+                            }
+                        }
+                        return null;
+                    };
+                    // Search for the node recursively
+                    const node = findNodeByKey(root, blockId);
                     if (!node) {
                         resolve({
                             success: false,
@@ -133,7 +339,20 @@ export class LexicalAdapter {
                         });
                         return;
                     }
-                    node.remove();
+                    const nodeType = node.getType();
+                    const parent = node.getParent();
+                    // For equation and excalidraw nodes, always remove the parent paragraph wrapper
+                    // These are always wrapped in paragraphs by their respective plugins
+                    if ((nodeType === 'equation' || nodeType === 'excalidraw') &&
+                        parent &&
+                        parent.getType() === 'paragraph') {
+                        // Remove the paragraph wrapper
+                        parent.remove();
+                    }
+                    else {
+                        // Normal node - remove it directly
+                        node.remove();
+                    }
                     resolve({ success: true });
                 }
                 catch (error) {
@@ -150,7 +369,7 @@ export class LexicalAdapter {
      */
     async updateBlock(blockId, block) {
         // For now, implement as delete + insert
-        const deleteResult = await this.deleteBlock(blockId);
+        const deleteResult = await this.deleteBlock([blockId]);
         if (!deleteResult.success) {
             return deleteResult;
         }
@@ -223,7 +442,7 @@ export class LexicalAdapter {
                         const root = $getRoot();
                         let jupyterOutputNode = null;
                         let code = '';
-                        // Find the jupyter-input and jupyter-output nodes
+                        // Find the jupyter-input and jupyter-output nodes (recursively)
                         const findNodes = (node) => {
                             if (node.getType() === 'jupyter-cell' &&
                                 node.getKey() === blockId) {
@@ -237,23 +456,34 @@ export class LexicalAdapter {
                                         jupyterOutputNode = child;
                                     }
                                 });
+                                return true; // Found it
                             }
                             else if (node.getType() === 'jupyter-input' &&
                                 node.getKey() === blockId) {
                                 code = node.getTextContent();
-                                // Find corresponding output node (sibling)
-                                const parent = node.getParent();
-                                if (parent) {
-                                    parent.getChildren().forEach((sibling) => {
-                                        if (sibling.getType() === 'jupyter-output') {
-                                            jupyterOutputNode = sibling;
-                                        }
-                                    });
+                                // Find corresponding output node using UUID map (prevents output mixing!)
+                                const inputUuid = node.getJupyterInputNodeUuid();
+                                const outputKey = INPUT_UUID_TO_OUTPUT_KEY.get(inputUuid);
+                                if (outputKey) {
+                                    jupyterOutputNode = $getNodeByKey(outputKey);
                                 }
+                                return true; // Found it
                             }
+                            // Recursively search children (for collapsibles and other containers)
+                            const children = node.getChildren?.() || [];
+                            for (const child of children) {
+                                if (findNodes(child)) {
+                                    return true; // Found in descendant
+                                }
+                            }
+                            return false; // Not found
                         };
-                        // Search through document
-                        root.getChildren().forEach(findNodes);
+                        // Search through document recursively
+                        for (const child of root.getChildren()) {
+                            if (findNodes(child)) {
+                                break; // Stop after finding the target
+                            }
+                        }
                         if (!jupyterOutputNode) {
                             reject(new Error('Could not find jupyter-output node for execution'));
                             return;
@@ -305,25 +535,46 @@ export class LexicalAdapter {
      * Run all executable blocks in the document
      */
     async runAllBlocks() {
-        const blocks = await this.getBlocks();
-        const executableBlocks = blocks.filter(b => b.block_type === 'jupyter-cell');
-        // Debug logging removed to satisfy ESLint no-console rule
-        // console.log(`[LexicalAdapter] Running ${executableBlocks.length} executable blocks`);
-        for (const block of executableBlocks) {
-            const result = await this.runBlock(block.block_id);
-            if (!result.success) {
-                return {
-                    success: false,
-                    error: `Failed to run block ${block.block_id}: ${result.error}`,
-                };
+        // Abort any existing run-all operation
+        if (this._runAllAbortController) {
+            this._runAllAbortController.abort();
+        }
+        // Create new abort controller for this run
+        this._runAllAbortController = new AbortController();
+        const signal = this._runAllAbortController.signal;
+        try {
+            const blocks = await this.getBlocks();
+            const executableBlocks = blocks.filter(b => b.block_type === 'jupyter-cell');
+            for (const block of executableBlocks) {
+                // Check if aborted before running next block
+                if (signal.aborted) {
+                    return {
+                        success: false,
+                        error: 'Run all blocks was cancelled (new run all started)',
+                    };
+                }
+                const result = await this.runBlock(block.block_id);
+                if (!result.success) {
+                    console.error(`[LexicalAdapter] Block ${block.block_id} failed:`, result.error);
+                    return {
+                        success: false,
+                        error: `Failed to run block ${block.block_id}: ${result.error}`,
+                    };
+                }
+            }
+            return {
+                success: true,
+                blockId: executableBlocks.length > 0
+                    ? executableBlocks[executableBlocks.length - 1].block_id
+                    : undefined,
+            };
+        }
+        finally {
+            // Clean up controller if this is still the active one
+            if (this._runAllAbortController?.signal === signal) {
+                this._runAllAbortController = null;
             }
         }
-        return {
-            success: true,
-            blockId: executableBlocks.length > 0
-                ? executableBlocks[executableBlocks.length - 1].block_id
-                : undefined,
-        };
     }
     /**
      * Clear all outputs from all Jupyter cells in the lexical document.
@@ -369,18 +620,57 @@ export class LexicalAdapter {
             });
         });
     }
+    /**
+     * Restart the Jupyter kernel.
+     * Dispatches the RESTART_JUPYTER_KERNEL_COMMAND which is handled by JupyterInputOutputPlugin.
+     */
+    async restartKernel() {
+        return new Promise(resolve => {
+            // Import command dynamically to avoid circular dependencies
+            import('../plugins/JupyterInputOutputPlugin')
+                .then(module => {
+                const { RESTART_JUPYTER_KERNEL_COMMAND } = module;
+                // Dispatch the restart command
+                const handled = this._editor.dispatchCommand(RESTART_JUPYTER_KERNEL_COMMAND, undefined);
+                if (handled) {
+                    resolve({
+                        success: true,
+                        message: 'Kernel restart initiated',
+                    });
+                }
+                else {
+                    resolve({
+                        success: false,
+                        error: 'RESTART_JUPYTER_KERNEL_COMMAND was not handled',
+                    });
+                }
+            })
+                .catch(error => {
+                resolve({
+                    success: false,
+                    error: `Failed to load restart command: ${error.message}`,
+                });
+            });
+        });
+    }
     /**
      * Check if a block type requires command-based insertion
      */
     requiresCommand(blockType) {
-        return ['jupyter-cell', 'image', 'equation'].includes(blockType);
+        return [
+            'jupyter-cell',
+            'image',
+            'equation',
+            'youtube',
+            'excalidraw',
+            'table',
+            'collapsible',
+        ].includes(blockType);
     }
     /**
      * Insert a block using editor commands (for complex types)
      */
     async insertViaCommand(block, afterBlockId) {
-        // Debug logging removed to satisfy ESLint no-console rule
-        // console.log(`[LexicalAdapter] Inserting ${block.block_type} via command`);
         // eslint-disable-next-line no-async-promise-executor
         return new Promise(async (resolve) => {
             try {
@@ -444,73 +734,294 @@ export class LexicalAdapter {
                             equation,
                             inline,
                         });
-                        resolve({ success: true });
+                        // Find the newly inserted equation node and get its ID
+                        let blockId;
+                        setTimeout(() => {
+                            this._editor.getEditorState().read(() => {
+                                const root = $getRoot();
+                                const children = root.getChildren();
+                                // Find newest equation node
+                                for (let i = children.length - 1; i >= 0; i--) {
+                                    if (children[i].getType() === 'equation') {
+                                        blockId = children[i].getKey();
+                                        break;
+                                    }
+                                }
+                            });
+                            resolve({ success: true, blockId });
+                        }, 20);
                     }, 10);
                 }
                 else if (block.block_type === 'jupyter-cell') {
                     // Import jupyter command dynamically
                     const { INSERT_JUPYTER_INPUT_OUTPUT_COMMAND } = await import('../plugins/JupyterInputOutputPlugin');
-                    // For jupyter-cell, we need to:
-                    // 1. Create a placeholder paragraph at the target location
-                    // 2. Dispatch the command to insert the jupyter cell
-                    // 3. Remove the placeholder
+                    const source = Array.isArray(block.source)
+                        ? block.source.join('\n')
+                        : block.source;
+                    const commandPayload = {
+                        code: source,
+                        outputs: (block.metadata?.outputs || []),
+                        loading: '',
+                    };
+                    // NO MARKERS - directly set selection and dispatch
+                    let blockId;
                     this._editor.update(() => {
                         const root = $getRoot();
                         const children = root.getChildren();
-                        // Create a temporary marker paragraph
-                        const marker = $createParagraphNode();
-                        marker.append($createTextNode('__JUPYTER_CELL_MARKER__'));
-                        // Insert marker at the target position
+                        // Set selection at target position
                         if (afterBlockId === 'TOP') {
                             if (children.length > 0) {
-                                children[0].insertBefore(marker);
+                                children[0].selectStart();
                             }
                             else {
-                                root.append(marker);
+                                root.selectStart();
                             }
                         }
                         else if (afterBlockId === 'BOTTOM' || !afterBlockId) {
-                            root.append(marker);
+                            root.selectEnd();
                         }
                         else {
                             const targetBlock = children.find(child => child.getKey() === afterBlockId);
                             if (targetBlock) {
-                                targetBlock.insertAfter(marker);
+                                targetBlock.selectEnd();
                             }
                             else {
                                 throw new Error(`Block ID ${afterBlockId} not found`);
                             }
                         }
+                        // Dispatch command with selection already set
+                        this._editor.dispatchCommand(INSERT_JUPYTER_INPUT_OUTPUT_COMMAND, commandPayload);
+                        // Find the newly created node immediately (same update)
+                        const newChildren = $getRoot().getChildren();
+                        for (let i = newChildren.length - 1; i >= 0; i--) {
+                            if (newChildren[i].getType() === 'jupyter-input') {
+                                blockId = newChildren[i].getKey();
+                                break;
+                            }
+                        }
                     });
-                    // Now dispatch the command to insert jupyter cell
-                    const source = Array.isArray(block.source)
+                    if (!blockId) {
+                        resolve({
+                            success: false,
+                            error: 'Failed to create jupyter-cell',
+                        });
+                        return;
+                    }
+                    resolve({ success: true, blockId });
+                }
+                else if (block.block_type === 'youtube') {
+                    // Import YouTube command dynamically
+                    const { INSERT_YOUTUBE_COMMAND } = await import('../plugins/YouTubePlugin');
+                    // Get videoID from source field (11-character YouTube video ID or full URL)
+                    const sourceText = Array.isArray(block.source)
                         ? block.source.join('\n')
                         : block.source;
-                    const commandPayload = {
-                        code: source,
-                        outputs: (block.metadata?.outputs || []),
-                        loading: '',
+                    // Extract video ID from various YouTube URL formats
+                    const extractVideoID = (input) => {
+                        const trimmed = input.trim();
+                        // If it's already just an ID (11 chars, alphanumeric + - and _)
+                        if (/^[a-zA-Z0-9_-]{11}$/.test(trimmed)) {
+                            return trimmed;
+                        }
+                        // Extract from various URL formats:
+                        // - https://www.youtube.com/watch?v=VIDEO_ID
+                        // - https://youtu.be/VIDEO_ID
+                        // - https://youtube.com/watch?v=VIDEO_ID
+                        // - https://m.youtube.com/watch?v=VIDEO_ID
+                        // Try youtu.be format first
+                        const shortMatch = trimmed.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);
+                        if (shortMatch) {
+                            return shortMatch[1];
+                        }
+                        // Try youtube.com/watch?v= format
+                        const watchMatch = trimmed.match(/[?&]v=([a-zA-Z0-9_-]{11})/);
+                        if (watchMatch) {
+                            return watchMatch[1];
+                        }
+                        // Fallback to default if no valid ID found
+                        return 'lO2p9LQB7ds';
                     };
-                    // Dispatch the command - this will be handled by the jupyter plugin
+                    const videoID = extractVideoID(sourceText || '');
+                    // Insert using marker technique
+                    await this.insertWithMarker(afterBlockId, () => {
+                        this._editor.dispatchCommand(INSERT_YOUTUBE_COMMAND, videoID);
+                    });
+                    // Find the newly inserted YouTube node and get its ID
+                    let blockId;
+                    setTimeout(() => {
+                        this._editor.getEditorState().read(() => {
+                            const root = $getRoot();
+                            const children = root.getChildren();
+                            // Find newest youtube node
+                            for (let i = children.length - 1; i >= 0; i--) {
+                                if (children[i].getType() === 'youtube') {
+                                    blockId = children[i].getKey();
+                                    break;
+                                }
+                            }
+                        });
+                        resolve({ success: true, blockId });
+                    }, 20);
+                }
+                else if (block.block_type === 'excalidraw') {
+                    // Import Excalidraw node dynamically
+                    const { $createExcalidrawNode } = await import('../nodes/ExcalidrawNode');
+                    const { $wrapNodeInElement } = await import('@lexical/utils');
+                    const { $isRootOrShadowRoot } = await import('lexical');
+                    const data = block.metadata?.data || '[]';
+                    const width = block.metadata?.width;
+                    const height = block.metadata?.height;
+                    let blockId;
+                    this._editor.update(() => {
+                        const node = $createExcalidrawNode(data, width || 'inherit', height || 'inherit');
+                        this.insertNodeAtPosition(node, afterBlockId);
+                        // Capture block ID
+                        blockId = node.getKey();
+                        // Wrap in paragraph if at root
+                        if ($isRootOrShadowRoot(node.getParentOrThrow())) {
+                            $wrapNodeInElement(node, $createParagraphNode).selectEnd();
+                        }
+                    });
+                    resolve({ success: true, blockId });
+                }
+                else if (block.block_type === 'table') {
+                    // Import table command dynamically
+                    const { INSERT_TABLE_COMMAND } = await import('@lexical/table');
+                    const { $getTableCellNodeFromLexicalNode, $getTableNodeFromLexicalNodeOrThrow, } = await import('@lexical/table');
+                    // Parse table data from source if provided as markdown
+                    let rows = block.metadata?.rows || 2;
+                    let columns = block.metadata?.columns || 2;
+                    let data = block.metadata?.data;
+                    const includeHeaders = block.metadata?.includeHeaders !== false;
+                    // CRITICAL: If data is provided directly in metadata, infer dimensions from it
+                    if (data && Array.isArray(data) && data.length > 0) {
+                        rows = data.length;
+                        columns = data[0].length;
+                    }
+                    // If source contains markdown table, parse it
+                    const sourceText = Array.isArray(block.source)
+                        ? block.source.join('\n')
+                        : block.source;
+                    if (sourceText &&
+                        typeof sourceText === 'string' &&
+                        sourceText.includes('|')) {
+                        try {
+                            // Parse markdown table
+                            const lines = sourceText.split('\n').filter(line => line.trim());
+                            const tableData = [];
+                            for (const line of lines) {
+                                // Skip separator rows like |---|---|
+                                if (line.match(/^\|?[\s-|]+\|?$/)) {
+                                    continue;
+                                }
+                                // Extract cell values
+                                const cells = line
+                                    .split('|')
+                                    .slice(1, -1) // Remove empty strings from start/end
+                                    .map(cell => cell.trim());
+                                if (cells.length > 0) {
+                                    tableData.push(cells);
+                                }
+                            }
+                            if (tableData.length > 0) {
+                                data = tableData;
+                                rows = tableData.length;
+                                columns = tableData[0].length;
+                            }
+                        }
+                        catch (e) {
+                            // If parsing fails, use defaults
+                        }
+                    }
+                    await this.insertWithMarker(afterBlockId, () => {
+                        this._editor.dispatchCommand(INSERT_TABLE_COMMAND, {
+                            rows: rows.toString(),
+                            columns: columns.toString(),
+                            includeHeaders,
+                        });
+                    });
+                    // Find the newly inserted table node and get its ID
+                    let blockId;
                     setTimeout(() => {
                         this._editor.update(() => {
-                            // Find and select the marker
                             const root = $getRoot();
                             const children = root.getChildren();
-                            const markerNode = children.find(child => child.getType() === 'paragraph' &&
-                                child.getTextContent() === '__JUPYTER_CELL_MARKER__');
-                            if (markerNode) {
-                                // Select the marker node before removing it
-                                // This ensures the INSERT command will insert at this position
-                                markerNode.selectEnd();
-                                // Remove the marker - the command will insert at selection
-                                markerNode.remove();
+                            // Find the newest table
+                            for (let i = children.length - 1; i >= 0; i--) {
+                                if (children[i].getType() === 'table') {
+                                    // Capture block ID
+                                    blockId = children[i].getKey();
+                                    // Populate table cells with data if provided
+                                    if (data && data.length > 0) {
+                                        try {
+                                            const tableNode = $getTableNodeFromLexicalNodeOrThrow(children[i]);
+                                            const tableRows = tableNode.getChildren();
+                                            // Populate each cell with data
+                                            for (let rowIdx = 0; rowIdx < Math.min(data.length, tableRows.length); rowIdx++) {
+                                                const rowNode = tableRows[rowIdx];
+                                                const cellNodes = rowNode.getChildren();
+                                                for (let colIdx = 0; colIdx <
+                                                    Math.min(data[rowIdx].length, cellNodes.length); colIdx++) {
+                                                    const cellNode = $getTableCellNodeFromLexicalNode(cellNodes[colIdx]);
+                                                    if (cellNode) {
+                                                        // Clear existing content and add new text
+                                                        cellNode.clear();
+                                                        cellNode.append($createTextNode(data[rowIdx][colIdx]));
+                                                    }
+                                                }
+                                            }
+                                        }
+                                        catch (error) {
+                                            // Silently fail if table population doesn't work
+                                        }
+                                    }
+                                    break;
+                                }
                             }
                         });
-                        // Dispatch the insert command
-                        this._editor.dispatchCommand(INSERT_JUPYTER_INPUT_OUTPUT_COMMAND, commandPayload);
-                        resolve({ success: true });
-                    }, 10);
+                        resolve({ success: true, blockId });
+                    }, 20);
+                }
+                else if (block.block_type === 'collapsible') {
+                    // Import collapsible command dynamically
+                    const { INSERT_COLLAPSIBLE_COMMAND } = await import('../plugins/CollapsiblePlugin');
+                    const open = block.metadata?.open ?? true;
+                    // Title comes from source field
+                    const title = Array.isArray(block.source)
+                        ? block.source.join('\n')
+                        : block.source || '';
+                    // Insert empty collapsible structure
+                    await this.insertWithMarker(afterBlockId, () => {
+                        this._editor.dispatchCommand(INSERT_COLLAPSIBLE_COMMAND, undefined);
+                    });
+                    // Find the newly inserted collapsible node and get its ID
+                    let blockId;
+                    setTimeout(() => {
+                        this._editor.update(() => {
+                            const root = $getRoot();
+                            const children = root.getChildren();
+                            // Find newest collapsible
+                            for (let i = children.length - 1; i >= 0; i--) {
+                                if (children[i].getType() === 'collapsible-container') {
+                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any
+                                    const container = children[i];
+                                    // Capture block ID
+                                    blockId = container.getKey();
+                                    // Set open state
+                                    container.setOpen?.(open);
+                                    // Populate title
+                                    const containerChildren = container.getChildren();
+                                    if (containerChildren[0] && title) {
+                                        containerChildren[0].clear();
+                                        containerChildren[0].append($createTextNode(title));
+                                    }
+                                    // Note: content is empty - blocks will be inserted separately with metadata.collapsible
+                                    break;
+                                }
+                            }
+                        });
+                        resolve({ success: true, blockId });
+                    }, 20);
                 }
                 else {
                     resolve({
@@ -600,9 +1111,15 @@ export class LexicalAdapter {
                 });
             }
             else {
-                return [
-                    textContent ? $createTextNode(textContent) : $createTextNode(''),
-                ];
+                // Parse markdown formatting from text content
+                const segments = parseMarkdownFormatting(textContent || '');
+                return segments.map(seg => {
+                    const textNode = $createTextNode(seg.text);
+                    if (seg.format) {
+                        textNode.setFormat(seg.format);
+                    }
+                    return textNode;
+                });
             }
         };
         switch (block.block_type) {
@@ -643,10 +1160,17 @@ export class LexicalAdapter {
                     list.append(listItem);
                 }
                 else {
-                    // Create a list item for each line
+                    // Create a list item for each line with inline markdown parsing
                     items.forEach(itemText => {
                         const listItem = $createListItemNode();
-                        listItem.append($createTextNode(itemText));
+                        const segments = parseMarkdownFormatting(itemText);
+                        segments.forEach(seg => {
+                            const textNode = $createTextNode(seg.text);
+                            if (seg.format) {
+                                textNode.setFormat(seg.format);
+                            }
+                            listItem.append(textNode);
+                        });
                         list.append(listItem);
                     });
                 }
@@ -667,6 +1191,137 @@ export class LexicalAdapter {
                 return null;
         }
     }
+    /**
+     * Check if text contains block-level markdown that should be split into multiple blocks
+     */
+    containsBlockLevelMarkdown(text) {
+        if (!text || typeof text !== 'string')
+            return false;
+        // Check for headings
+        if (/^#{1,6}\s+.+$/m.test(text))
+            return true;
+        // Check for lists (bullet or numbered)
+        if (/^[\s]*[-*+]\s+.+$/m.test(text))
+            return true;
+        if (/^[\s]*\d+\.\s+.+$/m.test(text))
+            return true;
+        // Check for multiple paragraphs (separated by blank lines)
+        if (/\n\s*\n/.test(text))
+            return true;
+        return false;
+    }
+    /**
+     * Parse markdown text into multiple LexicalBlock objects
+     */
+    parseMarkdownToBlocks(text) {
+        const blocks = [];
+        const lines = text.split('\n');
+        let currentBlock = null;
+        for (let i = 0; i < lines.length; i++) {
+            const line = lines[i];
+            const trimmed = line.trim();
+            // Empty line - finish current block
+            if (trimmed === '') {
+                if (currentBlock && currentBlock.lines.length > 0) {
+                    blocks.push(this.createBlockFromParsed(currentBlock));
+                    currentBlock = null;
+                }
+                continue;
+            }
+            // Heading (# through ######)
+            const headingMatch = trimmed.match(/^(#{1,6})\s+(.+)$/);
+            if (headingMatch) {
+                // Finish previous block
+                if (currentBlock && currentBlock.lines.length > 0) {
+                    blocks.push(this.createBlockFromParsed(currentBlock));
+                }
+                // Create heading block
+                const level = headingMatch[1].length;
+                blocks.push({
+                    block_id: '', // Will be assigned on insertion
+                    block_type: 'heading',
+                    source: headingMatch[2],
+                    metadata: { tag: `h${level}` },
+                });
+                currentBlock = null;
+                continue;
+            }
+            // Bullet list item (-, *, +)
+            const bulletMatch = trimmed.match(/^[-*+]\s+(.+)$/);
+            if (bulletMatch) {
+                // Start or continue list
+                if (!currentBlock || currentBlock.type !== 'list-bullet') {
+                    if (currentBlock && currentBlock.lines.length > 0) {
+                        blocks.push(this.createBlockFromParsed(currentBlock));
+                    }
+                    currentBlock = {
+                        type: 'list-bullet',
+                        lines: [bulletMatch[1]],
+                        metadata: { listType: 'bullet' },
+                    };
+                }
+                else {
+                    currentBlock.lines.push(bulletMatch[1]);
+                }
+                continue;
+            }
+            // Numbered list item (1., 2., etc.)
+            const numberedMatch = trimmed.match(/^\d+\.\s+(.+)$/);
+            if (numberedMatch) {
+                // Start or continue numbered list
+                if (!currentBlock || currentBlock.type !== 'list-number') {
+                    if (currentBlock && currentBlock.lines.length > 0) {
+                        blocks.push(this.createBlockFromParsed(currentBlock));
+                    }
+                    currentBlock = {
+                        type: 'list-number',
+                        lines: [numberedMatch[1]],
+                        metadata: { listType: 'number' },
+                    };
+                }
+                else {
+                    currentBlock.lines.push(numberedMatch[1]);
+                }
+                continue;
+            }
+            // Regular paragraph text
+            if (!currentBlock || currentBlock.type.startsWith('list-')) {
+                // Lists don't continue across non-list lines
+                if (currentBlock && currentBlock.lines.length > 0) {
+                    blocks.push(this.createBlockFromParsed(currentBlock));
+                }
+                currentBlock = { type: 'paragraph', lines: [line] };
+            }
+            else {
+                // Continue current paragraph
+                currentBlock.lines.push(line);
+            }
+        }
+        // Finish last block
+        if (currentBlock && currentBlock.lines.length > 0) {
+            blocks.push(this.createBlockFromParsed(currentBlock));
+        }
+        return blocks;
+    }
+    /**
+     * Create a LexicalBlock from parsed markdown
+     */
+    createBlockFromParsed(parsed) {
+        if (parsed.type === 'list-bullet' || parsed.type === 'list-number') {
+            return {
+                block_id: '',
+                block_type: 'list',
+                source: parsed.lines.join('\n'),
+                metadata: parsed.metadata || {},
+            };
+        }
+        return {
+            block_id: '',
+            block_type: parsed.type,
+            source: parsed.lines.join('\n'),
+            metadata: parsed.metadata || {},
+        };
+    }
     /**
      * Execute code directly in the kernel without creating a block.
      *
@@ -784,5 +1439,105 @@ export class LexicalAdapter {
             };
         }
     }
+    /**
+     * Insert a block using marker technique (for command-based insertion).
+     * This ensures correct positioning when commands don't support afterId.
+     */
+    async insertWithMarker(afterBlockId, dispatchFn) {
+        return new Promise(resolve => {
+            this._editor.update(() => {
+                const root = $getRoot();
+                const children = root.getChildren();
+                const marker = $createParagraphNode();
+                marker.append($createTextNode('__MARKER__'));
+                if (afterBlockId === 'TOP') {
+                    if (children.length > 0) {
+                        children[0].insertBefore(marker);
+                    }
+                    else {
+                        root.append(marker);
+                    }
+                }
+                else if (afterBlockId === 'BOTTOM' || !afterBlockId) {
+                    root.append(marker);
+                }
+                else {
+                    const target = children.find(c => c.getKey() === afterBlockId);
+                    if (target) {
+                        target.insertAfter(marker);
+                    }
+                    else {
+                        throw new Error(`Block ${afterBlockId} not found`);
+                    }
+                }
+            });
+            setTimeout(() => {
+                this._editor.update(() => {
+                    const root = $getRoot();
+                    const marker = root
+                        .getChildren()
+                        .find(c => c.getType() === 'paragraph' &&
+                        c.getTextContent() === '__MARKER__');
+                    if (marker) {
+                        marker.selectEnd();
+                        marker.remove();
+                    }
+                });
+                dispatchFn();
+                resolve();
+            }, 10);
+        });
+    }
+    /**
+     * Insert a node at a specific position (for direct node insertion).
+     */
+    insertNodeAtPosition(node, afterBlockId) {
+        const root = $getRoot();
+        const children = root.getChildren();
+        if (afterBlockId === 'TOP') {
+            if (children.length > 0) {
+                children[0].insertBefore(node);
+            }
+            else {
+                root.append(node);
+            }
+        }
+        else if (afterBlockId === 'BOTTOM' || !afterBlockId) {
+            root.append(node);
+        }
+        else {
+            const target = children.find(c => c.getKey() === afterBlockId);
+            if (target) {
+                target.insertAfter(node);
+            }
+            else {
+                throw new Error(`Block ${afterBlockId} not found`);
+            }
+        }
+    }
+    /**
+     * List available block types with their schemas.
+     * This operation returns static block type definitions and doesn't require editor access.
+     *
+     * @param category - Optional category filter
+     * @returns Promise with available block types, count, and categories
+     */
+    async listAvailableBlocks() {
+        try {
+            // Import and execute the operation
+            const { listAvailableBlocksOperation } = await import('../tools/operations/listAvailableBlocks');
+            const result = await listAvailableBlocksOperation.execute({ type: 'all' }, {
+                documentId: 'static-operation', // Not used for this operation
+                executor: null, // Not used for this operation
+            });
+            return result;
+        }
+        catch (error) {
+            return {
+                success: false,
+                error: error instanceof Error ? error.message : String(error),
+            };
+        }
+    }
 }
 //# sourceMappingURL=LexicalAdapter.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js.map b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js.map
index c343d23..71e56f9 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js.map
@@ -1 +1 @@
-{"version":3,"file":"LexicalAdapter.js","sourceRoot":"","sources":["../../src/state/LexicalAdapter.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAeH,OAAO,EACL,QAAQ,EACR,aAAa,EACb,oBAAoB,EACpB,eAAe,GAChB,MAAM,SAAS,CAAC;AACjB,OAAO,EACL,kBAAkB,EAClB,gBAAgB,GAEjB,MAAM,oBAAoB,CAAC;AAC5B,OAAO,EAAE,eAAe,EAAE,MAAM,eAAe,CAAC;AAChD,OAAO,EAAE,eAAe,EAAE,mBAAmB,EAAE,MAAM,eAAe,CAAC;AACrE,OAAO,EAAE,yBAAyB,EAAE,MAAM,0CAA0C,CAAC;AAOrF,OAAO,EAAE,mBAAmB,EAAE,MAAM,uBAAuB,CAAC;AAe5D;;;;;;;;GAQG;AACH,MAAM,OAAO,cAAc;IACjB,OAAO,CAAgB;IACvB,iBAAiB,GAAW,WAAW,CAAC;IACxC,eAAe,CAAO,CAAC,2CAA2C;IAE1E,YAAY,MAAqB,EAAE,cAAoB;QACrD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;IACxC,CAAC;IAED;;OAEG;IACH,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED;;;OAGG;IACH,IAAI,cAAc;QAChB,OAAO,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED;;;OAGG;IACH,mBAAmB,CAAC,IAAY;QAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAChC,CAAC;IAED;;OAEG;IACH,IAAI,gBAAgB;QAClB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAChC,CAAC;IAED;;;;;OAKG;IACH,KAAK,CAAC,SAAS,CACb,SAAsB,OAAO;QAE7B,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,MAAM,MAAM,GAAG,mBAAmB,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YACzD,OAAO,CAAC,MAAM,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,KAAK,CAAC,QAAQ,CAAC,KAAa;QAC1B,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,MAAM,MAAM,GAAG,mBAAmB,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;YAC7D,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;gBACxC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAiB,CAAC,CAAC;YACzC,CAAC;iBAAM,CAAC;gBACN,OAAO,CAAC,IAAI,CAAC,CAAC;YAChB,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,KAAK,CAAC,YAAY,CAAC,OAAe;QAChC,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,MAAM,MAAM,GAAG,mBAAmB,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;YAC7D,MAAM,KAAK,GAAI,MAAyB,CAAC,IAAI,CAC3C,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,OAAO,CAC5B,CAAC;YACF,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,aAAa;QACjB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;QACtC,OAAO,MAAM,CAAC,MAAM,CAAC;IACvB,CAAC;IAED;;;;;;OAMG;IACH,KAAK,CAAC,WAAW,CACf,KAAmB,EACnB,YAAoB;QAEpB,0DAA0D;QAC1D,uGAAuG;QAEvG,mDAAmD;QACnD,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE,CAAC;YAC3C,OAAO,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;QACpD,CAAC;QAED,qDAAqD;QACrD,OAAO,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;IACjD,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,WAAW,CAAC,OAAe;QAC/B,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;gBACvB,IAAI,CAAC;oBACH,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;oBACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;oBACpC,MAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,OAAO,CAAC,CAAC;oBAEhE,IAAI,CAAC,IAAI,EAAE,CAAC;wBACV,OAAO,CAAC;4BACN,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,iBAAiB,OAAO,YAAY;yBAC5C,CAAC,CAAC;wBACH,OAAO;oBACT,CAAC;oBAED,IAAI,CAAC,MAAM,EAAE,CAAC;oBACd,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC7B,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBACf,OAAO,CAAC;wBACN,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;qBAC9D,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,WAAW,CACf,OAAe,EACf,KAAmB;QAEnB,wCAAwC;QACxC,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACrD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;YAC1B,OAAO,YAAY,CAAC;QACtB,CAAC;QAED,2DAA2D;QAC3D,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;QACtC,MAAM,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC;QACnE,MAAM,aAAa,GACjB,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC;QAE/D,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;IAChD,CAAC;IAED;;;OAGG;IACH,KAAK,CAAC,QAAQ,CAAC,OAAgB;QAC7B,kEAAkE;QAClE,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,IAAI,YAAY,GAAkB,IAAI,CAAC;YAEvC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gBACtC,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;gBAClC,IAAI,CAAC,SAAS;oBAAE,OAAO;gBAEvB,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;gBACnC,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC;oBAAE,OAAO;gBAE/B,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBAEtB,4CAA4C;gBAC5C,IAAI,OAAO,GAAQ,IAAI,CAAC;gBACxB,OAAO,OAAO,EAAE,CAAC;oBACf,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;oBAC/B,IAAI,IAAI,KAAK,cAAc,IAAI,IAAI,KAAK,eAAe,EAAE,CAAC;wBACxD,YAAY,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;wBAChC,MAAM;oBACR,CAAC;oBACD,MAAM,MAAM,GAAG,OAAO,CAAC,SAAS,EAAE,CAAC;oBACnC,IAAI,CAAC,MAAM;wBAAE,MAAM;oBACnB,OAAO,GAAG,MAAM,CAAC;gBACnB,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,YAAY,EAAE,CAAC;gBAClB,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,sCAAsC;iBAC9C,CAAC;YACJ,CAAC;YAED,OAAO,GAAG,YAAY,CAAC;QACzB,CAAC;QAED,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,iBAAiB,OAAO,YAAY;aAC5C,CAAC;QACJ,CAAC;QAED,+EAA+E;QAC/E,MAAM,eAAe,GAAG,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;QAC1D,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE,CAAC;YAChD,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,cAAc,KAAK,CAAC,UAAU,oBAAoB;aAC1D,CAAC;QACJ,CAAC;QAED,wCAAwC;QACxC,IAAI,CAAC;YACH,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAE7B,6BAA6B;YAC7B,MAAM,MAAM,GAAQ,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gBACxD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;oBACvB,IAAI,CAAC;wBACH,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;wBACxB,IAAI,iBAAiB,GAAQ,IAAI,CAAC;wBAClC,IAAI,IAAI,GAAG,EAAE,CAAC;wBAEd,kDAAkD;wBAClD,MAAM,SAAS,GAAG,CAAC,IAAS,EAAE,EAAE;4BAC9B,IACE,IAAI,CAAC,OAAO,EAAE,KAAK,cAAc;gCACjC,IAAI,CAAC,MAAM,EAAE,KAAK,OAAO,EACzB,CAAC;gCACD,2CAA2C;gCAC3C,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;gCACpC,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAU,EAAE,EAAE;oCAC9B,IAAI,KAAK,CAAC,OAAO,EAAE,KAAK,eAAe,EAAE,CAAC;wCACxC,IAAI,GAAG,KAAK,CAAC,cAAc,EAAE,CAAC;oCAChC,CAAC;yCAAM,IAAI,KAAK,CAAC,OAAO,EAAE,KAAK,gBAAgB,EAAE,CAAC;wCAChD,iBAAiB,GAAG,KAAK,CAAC;oCAC5B,CAAC;gCACH,CAAC,CAAC,CAAC;4BACL,CAAC;iCAAM,IACL,IAAI,CAAC,OAAO,EAAE,KAAK,eAAe;gCAClC,IAAI,CAAC,MAAM,EAAE,KAAK,OAAO,EACzB,CAAC;gCACD,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;gCAC7B,2CAA2C;gCAC3C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;gCAChC,IAAI,MAAM,EAAE,CAAC;oCACX,MAAM,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,CAAC,OAAY,EAAE,EAAE;wCAC5C,IAAI,OAAO,CAAC,OAAO,EAAE,KAAK,gBAAgB,EAAE,CAAC;4CAC3C,iBAAiB,GAAG,OAAO,CAAC;wCAC9B,CAAC;oCACH,CAAC,CAAC,CAAC;gCACL,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC;wBAEF,0BAA0B;wBAC1B,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;wBAEtC,IAAI,CAAC,iBAAiB,EAAE,CAAC;4BACvB,MAAM,CACJ,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAC9D,CAAC;4BACF,OAAO;wBACT,CAAC;wBAED,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC;4BAChC,MAAM,CAAC,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC,CAAC;4BACxC,OAAO;wBACT,CAAC;wBAED,wCAAwC;wBACxC,6CAA6C;wBAC7C,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;wBAEpC,2CAA2C;wBAC3C,MAAM,aAAa,GAAG,iBAAiB,CAAC,eAAe,CAAC;wBACxD,IAAI,CAAC,aAAa,EAAE,CAAC;4BACnB,MAAM,CAAC,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC,CAAC;4BAChD,OAAO;wBACT,CAAC;wBAED,OAAO,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;oBACnC,CAAC;oBAAC,OAAO,KAAK,EAAE,CAAC;wBACf,MAAM,CAAC,KAAK,CAAC,CAAC;oBAChB,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YAEH,kEAAkE;YAClE,gFAAgF;YAChF,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;YAE3C,yCAAyC;YACzC,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YAC/D,MAAM,YAAY,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC,GAAG,IAAI,CAAC;YAErD,MAAM,aAAa,GAAG;gBACpB,OAAO,EAAE,IAAI;gBACb,eAAe,EAAE,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI;gBAC9C,OAAO,EAAE,OAAO;gBAChB,YAAY;gBACZ,OAAO,EAAE,qBAAqB,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG;aACzD,CAAC;YAEF,OAAO,aAAa,CAAC;QACvB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,4BAA4B,YAAY,EAAE;aAClD,CAAC;QACJ,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,YAAY;QAChB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;QACtC,MAAM,gBAAgB,GAAG,MAAM,CAAC,MAAM,CACpC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,KAAK,cAAc,CACrC,CAAC;QAEF,0DAA0D;QAC1D,wFAAwF;QAExF,KAAK,MAAM,KAAK,IAAI,gBAAgB,EAAE,CAAC;YACrC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gBACpB,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,uBAAuB,KAAK,CAAC,QAAQ,KAAK,MAAM,CAAC,KAAK,EAAE;iBAChE,CAAC;YACJ,CAAC;QACH,CAAC;QAED,OAAO;YACL,OAAO,EAAE,IAAI;YACb,OAAO,EACL,gBAAgB,CAAC,MAAM,GAAG,CAAC;gBACzB,CAAC,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ;gBACxD,CAAC,CAAC,SAAS;SAChB,CAAC;IACJ,CAAC;IAED;;;;;;;;;;OAUG;IACH,KAAK,CAAC,eAAe;QACnB,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;gBACvB,IAAI,YAAY,GAAG,CAAC,CAAC;gBAErB,iEAAiE;gBACjE,SAAS,mBAAmB,CAAC,IAAS;oBACpC,4DAA4D;oBAC5D,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,EAAE,KAAK,gBAAgB,EAAE,CAAC;wBACxD,mEAAmE;wBACnE,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;4BACzB,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;4BAC7B,YAAY,EAAE,CAAC;wBACjB,CAAC;oBACH,CAAC;oBACD,+CAA+C;oBAC/C,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;wBACrB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;wBACpC,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE,CAAC;4BAC7B,mBAAmB,CAAC,KAAK,CAAC,CAAC;wBAC7B,CAAC;oBACH,CAAC;gBACH,CAAC;gBAED,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;gBACxB,mBAAmB,CAAC,IAAI,CAAC,CAAC;gBAE1B,OAAO,CAAC;oBACN,OAAO,EAAE,IAAI;oBACb,OAAO,EACL,YAAY,GAAG,CAAC;wBACd,CAAC,CAAC,wBAAwB,YAAY,gBAAgB;wBACtD,CAAC,CAAC,iCAAiC;iBACxC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACK,eAAe,CAAC,SAAiB;QACvC,OAAO,CAAC,cAAc,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;IACnE,CAAC;IAED;;OAEG;IACK,KAAK,CAAC,gBAAgB,CAC5B,KAAmB,EACnB,YAAoB;QAEpB,0DAA0D;QAC1D,6EAA6E;QAE7E,qDAAqD;QACrD,OAAO,IAAI,OAAO,CAAC,KAAK,EAAC,OAAO,EAAC,EAAE;YACjC,IAAI,CAAC;gBACH,8DAA8D;gBAC9D,IAAI,KAAK,CAAC,UAAU,KAAK,UAAU,EAAE,CAAC;oBACpC,sCAAsC;oBACtC,MAAM,EAAE,uBAAuB,EAAE,GAC/B,MAAM,MAAM,CAAC,4BAA4B,CAAC,CAAC;oBAE7C,mCAAmC;oBACnC,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;wBACxC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;wBACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;oBAEjB,MAAM,QAAQ,GACX,KAAK,CAAC,QAAQ,EAAE,QAAmB;wBACnC,KAAK,CAAC,QAAQ,EAAE,KAAgB;wBACjC,MAAM,CAAC;oBAET,kEAAkE;oBAClE,MAAM,MAAM,GAAG,KAAK,CAAC;oBAErB,gDAAgD;oBAChD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;wBACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;wBACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;wBAEpC,sCAAsC;wBACtC,MAAM,MAAM,GAAG,oBAAoB,EAAE,CAAC;wBACtC,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC,CAAC;wBAEtD,uCAAuC;wBACvC,IAAI,YAAY,KAAK,KAAK,EAAE,CAAC;4BAC3B,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gCACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;4BACnC,CAAC;iCAAM,CAAC;gCACN,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;4BACtB,CAAC;wBACH,CAAC;6BAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;4BACtD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;wBACtB,CAAC;6BAAM,CAAC;4BACN,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAC/B,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,YAAY,CACzC,CAAC;4BACF,IAAI,WAAW,EAAE,CAAC;gCAChB,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;4BAClC,CAAC;iCAAM,CAAC;gCACN,MAAM,IAAI,KAAK,CAAC,YAAY,YAAY,YAAY,CAAC,CAAC;4BACxD,CAAC;wBACH,CAAC;oBACH,CAAC,CAAC,CAAC;oBAEH,gCAAgC;oBAChC,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;4BACvB,6BAA6B;4BAC7B,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;4BACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;4BACpC,MAAM,UAAU,GAAG,QAAQ,CAAC,IAAI,CAC9B,KAAK,CAAC,EAAE,CACN,KAAK,CAAC,OAAO,EAAE,KAAK,WAAW;gCAC/B,KAAK,CAAC,cAAc,EAAE,KAAK,qBAAqB,CACnD,CAAC;4BAEF,IAAI,UAAU,EAAE,CAAC;gCACf,UAAU,CAAC,SAAS,EAAE,CAAC;gCACvB,UAAU,CAAC,MAAM,EAAE,CAAC;4BACtB,CAAC;wBACH,CAAC,CAAC,CAAC;wBAEH,8BAA8B;wBAC9B,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,uBAAuB,EAAE;4BACpD,QAAQ;4BACR,MAAM;yBACP,CAAC,CAAC;wBAEH,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;oBAC7B,CAAC,EAAE,EAAE,CAAC,CAAC;gBACT,CAAC;qBAAM,IAAI,KAAK,CAAC,UAAU,KAAK,cAAc,EAAE,CAAC;oBAC/C,qCAAqC;oBACrC,MAAM,EAAE,mCAAmC,EAAE,GAC3C,MAAM,MAAM,CAAC,qCAAqC,CAAC,CAAC;oBAEtD,gCAAgC;oBAChC,2DAA2D;oBAC3D,qDAAqD;oBACrD,4BAA4B;oBAE5B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;wBACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;wBACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;wBAEpC,sCAAsC;wBACtC,MAAM,MAAM,GAAG,oBAAoB,EAAE,CAAC;wBACtC,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,yBAAyB,CAAC,CAAC,CAAC;wBAE1D,uCAAuC;wBACvC,IAAI,YAAY,KAAK,KAAK,EAAE,CAAC;4BAC3B,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gCACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;4BACnC,CAAC;iCAAM,CAAC;gCACN,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;4BACtB,CAAC;wBACH,CAAC;6BAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;4BACtD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;wBACtB,CAAC;6BAAM,CAAC;4BACN,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAC/B,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,YAAY,CACzC,CAAC;4BACF,IAAI,WAAW,EAAE,CAAC;gCAChB,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;4BAClC,CAAC;iCAAM,CAAC;gCACN,MAAM,IAAI,KAAK,CAAC,YAAY,YAAY,YAAY,CAAC,CAAC;4BACxD,CAAC;wBACH,CAAC;oBACH,CAAC,CAAC,CAAC;oBAEH,kDAAkD;oBAClD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;wBACxC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;wBACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;oBAEjB,MAAM,cAAc,GAAG;wBACrB,IAAI,EAAE,MAAM;wBACZ,OAAO,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,IAAI,EAAE,CAAc;wBACrD,OAAO,EAAE,EAAE;qBACZ,CAAC;oBAEF,oEAAoE;oBACpE,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;4BACvB,6BAA6B;4BAC7B,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;4BACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;4BACpC,MAAM,UAAU,GAAG,QAAQ,CAAC,IAAI,CAC9B,KAAK,CAAC,EAAE,CACN,KAAK,CAAC,OAAO,EAAE,KAAK,WAAW;gCAC/B,KAAK,CAAC,cAAc,EAAE,KAAK,yBAAyB,CACvD,CAAC;4BAEF,IAAI,UAAU,EAAE,CAAC;gCACf,4CAA4C;gCAC5C,+DAA+D;gCAC/D,UAAU,CAAC,SAAS,EAAE,CAAC;gCACvB,2DAA2D;gCAC3D,UAAU,CAAC,MAAM,EAAE,CAAC;4BACtB,CAAC;wBACH,CAAC,CAAC,CAAC;wBAEH,8BAA8B;wBAC9B,IAAI,CAAC,OAAO,CAAC,eAAe,CAC1B,mCAAmC,EACnC,cAAc,CACf,CAAC;wBAEF,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;oBAC7B,CAAC,EAAE,EAAE,CAAC,CAAC;gBACT,CAAC;qBAAM,CAAC;oBACN,OAAO,CAAC;wBACN,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,yCAAyC,KAAK,CAAC,UAAU,EAAE;qBACnE,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,OAAO,CAAC;oBACN,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;iBAC9D,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACK,KAAK,CAAC,aAAa,CACzB,KAAmB,EACnB,YAAoB;QAEpB,0DAA0D;QAC1D,mFAAmF;QAEnF,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;gBACvB,IAAI,CAAC;oBACH,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;oBACxB,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;oBAE1C,IAAI,CAAC,IAAI,EAAE,CAAC;wBACV,OAAO,CAAC;4BACN,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,mCAAmC,KAAK,CAAC,UAAU,EAAE;yBAC7D,CAAC,CAAC;wBACH,OAAO;oBACT,CAAC;oBAED,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;oBAEpC,4BAA4B;oBAC5B,IAAI,YAAY,KAAK,KAAK,EAAE,CAAC;wBAC3B,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;4BACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;wBACjC,CAAC;6BAAM,CAAC;4BACN,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;wBACpB,CAAC;oBACH,CAAC;yBAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;wBACtD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;oBACpB,CAAC;yBAAM,CAAC;wBACN,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAC/B,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,YAAY,CACzC,CAAC;wBACF,IAAI,WAAW,EAAE,CAAC;4BAChB,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;wBAChC,CAAC;6BAAM,CAAC;4BACN,OAAO,CAAC;gCACN,OAAO,EAAE,KAAK;gCACd,KAAK,EAAE,YAAY,YAAY,YAAY;6BAC5C,CAAC,CAAC;4BACH,OAAO;wBACT,CAAC;oBACH,CAAC;oBAED,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;gBACrD,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBACf,OAAO,CAAC;wBACN,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;qBAC9D,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACK,gBAAgB,CAAC,KAAmB;QAC1C,MAAM,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;YAC7C,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;YACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;QAEjB,MAAM,eAAe,GAAG,GAAG,EAAE;YAC3B,IAAI,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACpD,OAAO,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;oBAChC,MAAM,QAAQ,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;wBACf,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;oBACjC,CAAC;oBACD,OAAO,QAAQ,CAAC;gBAClB,CAAC,CAAC,CAAC;YACL,CAAC;iBAAM,CAAC;gBACN,OAAO;oBACL,WAAW,CAAC,CAAC,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,EAAE,CAAC;iBACjE,CAAC;YACJ,CAAC;QACH,CAAC,CAAC;QAEF,QAAQ,KAAK,CAAC,UAAU,EAAE,CAAC;YACzB,KAAK,WAAW,CAAC,CAAC,CAAC;gBACjB,MAAM,SAAS,GAAG,oBAAoB,EAAE,CAAC;gBACzC,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC1D,OAAO,SAAS,CAAC;YACnB,CAAC;YAED,KAAK,SAAS,CAAC,CAAC,CAAC;gBACf,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,CAAC;gBACzC,MAAM,GAAG,GAAG,IAAI,KAAK,EAAoB,CAAC;gBAC1C,MAAM,OAAO,GAAG,kBAAkB,CAAC,GAAG,CAAC,CAAC;gBACxC,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBACxD,OAAO,OAAO,CAAC;YACjB,CAAC;YAED,KAAK,MAAM,CAAC,CAAC,CAAC;gBACZ,MAAM,QAAQ,GAAI,KAAK,CAAC,QAAQ,EAAE,QAAmB,IAAI,WAAW,CAAC;gBACrE,MAAM,IAAI,GAAG,eAAe,CAAC,QAAQ,CAAC,CAAC;gBACvC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC1C,OAAO,IAAI,CAAC;YACd,CAAC;YAED,KAAK,OAAO,CAAC,CAAC,CAAC;gBACb,MAAM,KAAK,GAAG,gBAAgB,EAAE,CAAC;gBACjC,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBACtD,OAAO,KAAK,CAAC;YACf,CAAC;YAED,KAAK,MAAM,CAAC,CAAC,CAAC;gBACZ,MAAM,QAAQ,GAAI,KAAK,CAAC,QAAQ,EAAE,QAAmB,IAAI,QAAQ,CAAC;gBAClE,MAAM,IAAI,GAAG,eAAe,CAAC,QAA+B,CAAC,CAAC;gBAE9D,8DAA8D;gBAC9D,MAAM,KAAK,GAAG,WAAW;qBACtB,KAAK,CAAC,IAAI,CAAC;qBACX,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;qBACxB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAEnC,8CAA8C;gBAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBACvB,MAAM,QAAQ,GAAG,mBAAmB,EAAE,CAAC;oBACvC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACxB,CAAC;qBAAM,CAAC;oBACN,mCAAmC;oBACnC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;wBACvB,MAAM,QAAQ,GAAG,mBAAmB,EAAE,CAAC;wBACvC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC;wBAC3C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;oBACxB,CAAC,CAAC,CAAC;gBACL,CAAC;gBAED,OAAO,IAAI,CAAC;YACd,CAAC;YAED,KAAK,gBAAgB,CAAC,CAAC,CAAC;gBACtB,OAAO,yBAAyB,EAAE,CAAC;YACrC,CAAC;YAED,KAAK,UAAU,CAAC,CAAC,CAAC;gBAChB,MAAM,QAAQ,GAAG,mBAAmB,EAAE,CAAC;gBACvC,IAAI,KAAK,CAAC,QAAQ,EAAE,OAAO,KAAK,SAAS,EAAE,CAAC;oBAC1C,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;gBAC9C,CAAC;gBACD,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBACzD,OAAO,QAAQ,CAAC;YAClB,CAAC;YAED;gBACE,OAAO,IAAI,CAAC;QAChB,CAAC;IACH,CAAC;IAED;;;;;;;;;;;;;;;OAeG;IACH,KAAK,CAAC,WAAW,CACf,IAAa,EACb,YAAsB,EACtB,MAAgB,EAChB,WAAqB;QAUrB,2CAA2C;QAC3C,MAAM,aAAa,GAAG,IAAI,IAAI,EAAE,CAAC;QAEjC,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC;YAC1B,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,gDAAgD;aACxD,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EACH,wFAAwF;aAC3F,CAAC;QACJ,CAAC;QAED,sDAAsD;QACtD,IAAI,MAAM,GAAQ,IAAI,CAAC;QAEvB,IAAI,CAAC;YACH,sCAAsC;YACtC,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;YACpD,MAAM,cAAc,GAAG,KAAK,CAAC,IAAI,CAC/B,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,EAAE,CAC9B,CAAC;YAEX,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBAChC,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,sDAAsD;iBAC9D,CAAC;YACJ,CAAC;YAED,qCAAqC;YACrC,MAAM,WAAW,GAAQ,cAAc,CAAC,CAAC,CAAC,CAAC;YAE3C,0EAA0E;YAC1E,MAAM,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,SAAS,CAAC;gBACpD,KAAK,EAAE,WAAW;aACnB,CAAC,CAAC;QACL,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,gCAAgC,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;aAC1F,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,MAAM,IAAI,OAAO,MAAM,CAAC,cAAc,KAAK,UAAU,EAAE,CAAC;YAC3D,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,wDAAwD;aAChE,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,kCAAkC;YAClC,MAAM,MAAM,GAAG,MAAM,CAAC,cAAc,CAAC;gBACnC,IAAI,EAAE,aAAa;gBACnB,aAAa,EAAE,WAAW,IAAI,IAAI;gBAClC,aAAa,EAAE,YAAY,IAAI,IAAI;gBACnC,MAAM,EAAE,MAAM,IAAI,KAAK;gBACvB,WAAW,EAAE,KAAK;aACnB,CAAC,CAAC;YAEH,MAAM,OAAO,GAGR,EAAE,CAAC;YAER,IAAI,cAAkC,CAAC;YAEvC,kBAAkB;YAClB,MAAM,CAAC,OAAO,GAAG,CAAC,GAAQ,EAAE,EAAE;gBAC5B,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC;gBAEpC,IAAI,OAAO,KAAK,QAAQ,EAAE,CAAC;oBACzB,OAAO,CAAC,IAAI,CAAC;wBACX,IAAI,EAAE,QAAQ;wBACd,OAAO,EAAE,GAAG,CAAC,OAAO;qBACrB,CAAC,CAAC;gBACL,CAAC;qBAAM,IAAI,OAAO,KAAK,gBAAgB,EAAE,CAAC;oBACxC,OAAO,CAAC,IAAI,CAAC;wBACX,IAAI,EAAE,gBAAgB;wBACtB,OAAO,EAAE,GAAG,CAAC,OAAO;qBACrB,CAAC,CAAC;oBACH,cAAc,GAAI,GAAG,CAAC,OAAe,CAAC,eAAe,CAAC;gBACxD,CAAC;qBAAM,IAAI,OAAO,KAAK,cAAc,EAAE,CAAC;oBACtC,OAAO,CAAC,IAAI,CAAC;wBACX,IAAI,EAAE,cAAc;wBACpB,OAAO,EAAE,GAAG,CAAC,OAAO;qBACrB,CAAC,CAAC;gBACL,CAAC;qBAAM,IAAI,OAAO,KAAK,OAAO,EAAE,CAAC;oBAC/B,OAAO,CAAC,IAAI,CAAC;wBACX,IAAI,EAAE,OAAO;wBACb,OAAO,EAAE,GAAG,CAAC,OAAO;qBACrB,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC;YAEF,iCAAiC;YACjC,MAAM,MAAM,CAAC,IAAI,CAAC;YAElB,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,OAAO;gBACP,cAAc;aACf,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;aAC9D,CAAC;QACJ,CAAC;IACH,CAAC;CACF"}
\ No newline at end of file
+{"version":3,"file":"LexicalAdapter.js","sourceRoot":"","sources":["../../src/state/LexicalAdapter.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAeH,OAAO,EACL,QAAQ,EACR,aAAa,EACb,oBAAoB,EACpB,eAAe,EACf,aAAa,GACd,MAAM,SAAS,CAAC;AACjB,OAAO,EACL,kBAAkB,EAClB,gBAAgB,GAEjB,MAAM,oBAAoB,CAAC;AAC5B,OAAO,EAAE,eAAe,EAAE,MAAM,eAAe,CAAC;AAChD,OAAO,EAAE,eAAe,EAAE,mBAAmB,EAAE,MAAM,eAAe,CAAC;AACrE,OAAO,EAAE,yBAAyB,EAAE,MAAM,0CAA0C,CAAC;AAOrF,OAAO,EACL,mBAAmB,EACnB,uBAAuB,GACxB,MAAM,uBAAuB,CAAC;AAC/B,OAAO,EAAE,wBAAwB,EAAE,MAAM,qCAAqC,CAAC;AAe/E;;;;;;;;GAQG;AACH,MAAM,OAAO,cAAc;IACjB,OAAO,CAAgB;IACvB,iBAAiB,GAAW,WAAW,CAAC;IACxC,eAAe,CAAO,CAAC,2CAA2C;IAClE,sBAAsB,GAA2B,IAAI,CAAC;IAE9D,YAAY,MAAqB,EAAE,cAAoB;QACrD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;IACxC,CAAC;IAED;;OAEG;IACH,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED;;;OAGG;IACH,IAAI,cAAc;QAChB,OAAO,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED;;;OAGG;IACH,mBAAmB,CAAC,IAAY;QAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAChC,CAAC;IAED;;OAEG;IACH,IAAI,gBAAgB;QAClB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAChC,CAAC;IAED;;;;;OAKG;IACH,KAAK,CAAC,SAAS,CACb,SAAsB,OAAO;QAE7B,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,MAAM,MAAM,GAAG,mBAAmB,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YACzD,OAAO,CAAC,MAAM,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,KAAK,CAAC,QAAQ,CAAC,KAAa;QAC1B,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,MAAM,MAAM,GAAG,mBAAmB,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;YAC7D,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;gBACxC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAiB,CAAC,CAAC;YACzC,CAAC;iBAAM,CAAC;gBACN,OAAO,CAAC,IAAI,CAAC,CAAC;YAChB,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,KAAK,CAAC,YAAY,CAAC,OAAe;QAChC,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,MAAM,MAAM,GAAG,mBAAmB,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;YAC7D,MAAM,KAAK,GAAI,MAAyB,CAAC,IAAI,CAC3C,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,OAAO,CAC5B,CAAC;YACF,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,aAAa;QACjB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;QACtC,OAAO,MAAM,CAAC,MAAM,CAAC;IACvB,CAAC;IAED;;;;;;OAMG;IACH,KAAK,CAAC,WAAW,CACf,KAAmB,EACnB,YAAoB;QAEpB,wDAAwD;QACxD,sEAAsE;QACtE,gFAAgF;QAChF,MAAM,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;YAC5C,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;YACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;QAEjB,MAAM,mBAAmB,GACvB,KAAK,CAAC,UAAU,KAAK,WAAW,IAAI,KAAK,CAAC,UAAU,KAAK,MAAM,CAAC;QAElE,IAAI,mBAAmB,IAAI,IAAI,CAAC,0BAA0B,CAAC,UAAU,CAAC,EAAE,CAAC;YACvE,6BAA6B;YAC7B,MAAM,YAAY,GAAG,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC;YAE5D,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAC5B,iCAAiC;gBACjC,IAAI,mBAAmB,GAAG,YAAY,CAAC;gBACvC,IAAI,WAA+B,CAAC;gBAEpC,KAAK,MAAM,WAAW,IAAI,YAAY,EAAE,CAAC;oBACvC,yDAAyD;oBACzD,WAAW,CAAC,QAAQ,GAAG;wBACrB,GAAG,WAAW,CAAC,QAAQ;wBACvB,GAAG,KAAK,CAAC,QAAQ;qBAClB,CAAC;oBAEF,eAAe;oBACf,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,WAAW,CACnC,WAAW,EACX,mBAAmB,CACpB,CAAC;oBAEF,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;wBACpB,OAAO,MAAM,CAAC,CAAC,qBAAqB;oBACtC,CAAC;oBAED,mDAAmD;oBACnD,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;wBACnB,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC;wBAC7B,mBAAmB,GAAG,MAAM,CAAC,OAAO,CAAC;oBACvC,CAAC;gBACH,CAAC;gBAED,OAAO;oBACL,OAAO,EAAE,IAAI;oBACb,OAAO,EAAE,WAAW;oBACpB,OAAO,EAAE,YAAY,YAAY,CAAC,MAAM,uBAAuB;iBAChE,CAAC;YACJ,CAAC;QACH,CAAC;QAED,mDAAmD;QACnD,IAAI,KAAK,CAAC,QAAQ,EAAE,WAAW,EAAE,CAAC;YAChC,MAAM,aAAa,GAAG,KAAK,CAAC,QAAQ,CAAC,WAAqB,CAAC;YAE3D,mEAAmE;YACnE,IAAI,aAAa,KAAK,KAAK,IAAI,aAAa,KAAK,QAAQ,EAAE,CAAC;gBAC1D,OAAO,OAAO,CAAC,OAAO,CAAC;oBACrB,OAAO,EAAE,KAAK;oBACd,KAAK,EACH,4BAA4B,aAAa,KAAK;wBAC9C,yCAAyC;wBACzC,+DAA+D;wBAC/D,gFAAgF;wBAChF,+EAA+E;iBAClF,CAAC,CAAC;YACL,CAAC;YAED,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;gBAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;oBACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;oBACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;oBAEpC,iCAAiC;oBACjC,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,aAAa,CAAC,CAAC;oBAErE,IACE,CAAC,WAAW;wBACZ,WAAW,CAAC,OAAO,EAAE,KAAK,uBAAuB,EACjD,CAAC;wBACD,OAAO,CAAC;4BACN,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,yBAAyB,aAAa,YAAY;yBAC1D,CAAC,CAAC;wBACH,OAAO;oBACT,CAAC;oBAED,oCAAoC;oBACpC,MAAM,iBAAiB,GAAI,WAAmB,CAAC,WAAW,EAAE,EAAE,IAAI,EAAE,CAAC;oBACrE,MAAM,WAAW,GAAG,iBAAiB,CAAC,IAAI,CACxC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,qBAAqB,CAClD,CAAC;oBAEF,IAAI,CAAC,WAAW,EAAE,CAAC;wBACjB,OAAO,CAAC;4BACN,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,yCAAyC,aAAa,EAAE;yBAChE,CAAC,CAAC;wBACH,OAAO;oBACT,CAAC;oBAED,iGAAiG;oBACjG,qDAAqD;oBAErD,sDAAsD;oBACtD,MAAM,iBAAiB,GAAiB;wBACtC,GAAG,KAAK;wBACR,QAAQ,EAAE,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAE;qBACxD,CAAC;oBAEF,oDAAoD;oBACpD,IAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE,QAAQ,CAAC;yBAC1C,IAAI,CAAC,MAAM,CAAC,EAAE;wBACb,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;4BACvC,OAAO,CAAC;gCACN,OAAO,EAAE,KAAK;gCACd,KAAK,EAAE,oBAAoB,KAAK,CAAC,UAAU,KAAK,MAAM,CAAC,KAAK,IAAI,eAAe,EAAE;6BAClF,CAAC,CAAC;4BACH,OAAO;wBACT,CAAC;wBAED,0DAA0D;wBAC1D,UAAU,CAAC,GAAG,EAAE;4BACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;gCACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;gCACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;gCAEpC,iCAAiC;gCACjC,MAAM,YAAY,GAAG,QAAQ,CAAC,IAAI,CAChC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,MAAM,CAAC,OAAO,CACnC,CAAC;gCAEF,IAAI,CAAC,YAAY,EAAE,CAAC;oCAClB,OAAO,CAAC;wCACN,OAAO,EAAE,KAAK;wCACd,KAAK,EAAE,gCAAgC,MAAM,CAAC,OAAO,EAAE;qCACxD,CAAC,CAAC;oCACH,OAAO;gCACT,CAAC;gCAED,mBAAmB;gCACnB,YAAY,CAAC,MAAM,EAAE,CAAC;gCAEtB,gCAAgC;gCAChC,WAAW,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;gCAEjC,OAAO,CAAC;oCACN,OAAO,EAAE,IAAI;oCACb,OAAO,EAAE,MAAM,CAAC,OAAO;oCACvB,OAAO,EAAE,kBAAkB,KAAK,CAAC,UAAU,iCAAiC,aAAa,EAAE;iCAC5F,CAAC,CAAC;4BACL,CAAC,CAAC,CAAC;wBACL,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,gEAAgE;oBAC1E,CAAC,CAAC;yBACD,KAAK,CAAC,KAAK,CAAC,EAAE;wBACb,OAAO,CAAC;4BACN,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,2BAA2B,KAAK,CAAC,OAAO,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE;yBACnE,CAAC,CAAC;oBACL,CAAC,CAAC,CAAC;gBACP,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;QAED,mDAAmD;QACnD,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE,CAAC;YAC3C,OAAO,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;QACpD,CAAC;QAED,qDAAqD;QACrD,OAAO,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;IACjD,CAAC;IAED;;;;;;OAMG;IACH,KAAK,CAAC,WAAW,CACf,QAAkB;QAElB,IAAI,CAAC;YACH,0DAA0D;YAC1D,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;YAChD,MAAM,UAAU,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;YAEhE,yBAAyB;YACzB,MAAM,UAAU,GAAa,EAAE,CAAC;YAChC,KAAK,MAAM,EAAE,IAAI,QAAQ,EAAE,CAAC;gBAC1B,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC;oBACxB,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACtB,CAAC;YACH,CAAC;YAED,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAC1B,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,0BAA0B,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,MAAM,CAAC,MAAM,UAAU;iBAChG,CAAC;YACJ,CAAC;YAED,kFAAkF;YAClF,0EAA0E;YAC1E,MAAM,SAAS,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;gBAC5C,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC;gBAC/D,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC;gBAC/D,6CAA6C;gBAC7C,OAAO,MAAM,GAAG,MAAM,CAAC;YACzB,CAAC,CAAC,CAAC;YAEH,MAAM,aAAa,GAA0B,EAAE,CAAC;YAEhD,qCAAqC;YACrC,KAAK,MAAM,OAAO,IAAI,SAAS,EAAE,CAAC;gBAChC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;gBAEtD,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;oBACnB,aAAa,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC;gBACtC,CAAC;qBAAM,IAAI,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC;oBAC/C,+EAA+E;oBAC/E,+CAA+C;oBAC/C,SAAS;gBACX,CAAC;qBAAM,CAAC;oBACN,gCAAgC;oBAChC,OAAO,MAAM,CAAC;gBAChB,CAAC;YACH,CAAC;YAED,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,aAAa;aACd,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;aAC9D,CAAC;QACJ,CAAC;IACH,CAAC;IAED;;OAEG;IACK,KAAK,CAAC,kBAAkB,CAAC,OAAe;QAC9C,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;gBACvB,IAAI,CAAC;oBACH,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;oBAExB,wDAAwD;oBACxD,MAAM,aAAa,GAAG,CAAC,IAAS,EAAE,SAAiB,EAAO,EAAE;wBAC1D,IAAI,IAAI,CAAC,MAAM,EAAE,KAAK,SAAS,EAAE,CAAC;4BAChC,OAAO,IAAI,CAAC;wBACd,CAAC;wBAED,sCAAsC;wBACtC,IAAI,aAAa,IAAI,IAAI,EAAE,CAAC;4BAC1B,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;4BACpC,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE,CAAC;gCAC7B,MAAM,KAAK,GAAG,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;gCAC9C,IAAI,KAAK;oCAAE,OAAO,KAAK,CAAC;4BAC1B,CAAC;wBACH,CAAC;wBAED,OAAO,IAAI,CAAC;oBACd,CAAC,CAAC;oBAEF,kCAAkC;oBAClC,MAAM,IAAI,GAAG,aAAa,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;oBAE1C,IAAI,CAAC,IAAI,EAAE,CAAC;wBACV,OAAO,CAAC;4BACN,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,iBAAiB,OAAO,YAAY;yBAC5C,CAAC,CAAC;wBACH,OAAO;oBACT,CAAC;oBAED,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAChC,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;oBAEhC,gFAAgF;oBAChF,qEAAqE;oBACrE,IACE,CAAC,QAAQ,KAAK,UAAU,IAAI,QAAQ,KAAK,YAAY,CAAC;wBACtD,MAAM;wBACN,MAAM,CAAC,OAAO,EAAE,KAAK,WAAW,EAChC,CAAC;wBACD,+BAA+B;wBAC/B,MAAM,CAAC,MAAM,EAAE,CAAC;oBAClB,CAAC;yBAAM,CAAC;wBACN,mCAAmC;wBACnC,IAAI,CAAC,MAAM,EAAE,CAAC;oBAChB,CAAC;oBAED,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC7B,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBACf,OAAO,CAAC;wBACN,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;qBAC9D,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,WAAW,CACf,OAAe,EACf,KAAmB;QAEnB,wCAAwC;QACxC,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;YAC1B,OAAO,YAAY,CAAC;QACtB,CAAC;QAED,2DAA2D;QAC3D,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;QACtC,MAAM,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC;QACnE,MAAM,aAAa,GACjB,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC;QAE/D,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;IAChD,CAAC;IAED;;;OAGG;IACH,KAAK,CAAC,QAAQ,CAAC,OAAgB;QAC7B,kEAAkE;QAClE,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,IAAI,YAAY,GAAkB,IAAI,CAAC;YAEvC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gBACtC,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;gBAClC,IAAI,CAAC,SAAS;oBAAE,OAAO;gBAEvB,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;gBACnC,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC;oBAAE,OAAO;gBAE/B,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBAEtB,4CAA4C;gBAC5C,IAAI,OAAO,GAAQ,IAAI,CAAC;gBACxB,OAAO,OAAO,EAAE,CAAC;oBACf,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;oBAC/B,IAAI,IAAI,KAAK,cAAc,IAAI,IAAI,KAAK,eAAe,EAAE,CAAC;wBACxD,YAAY,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;wBAChC,MAAM;oBACR,CAAC;oBACD,MAAM,MAAM,GAAG,OAAO,CAAC,SAAS,EAAE,CAAC;oBACnC,IAAI,CAAC,MAAM;wBAAE,MAAM;oBACnB,OAAO,GAAG,MAAM,CAAC;gBACnB,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,YAAY,EAAE,CAAC;gBAClB,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,sCAAsC;iBAC9C,CAAC;YACJ,CAAC;YAED,OAAO,GAAG,YAAY,CAAC;QACzB,CAAC;QAED,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,iBAAiB,OAAO,YAAY;aAC5C,CAAC;QACJ,CAAC;QAED,+EAA+E;QAC/E,MAAM,eAAe,GAAG,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;QAC1D,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE,CAAC;YAChD,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,cAAc,KAAK,CAAC,UAAU,oBAAoB;aAC1D,CAAC;QACJ,CAAC;QAED,wCAAwC;QACxC,IAAI,CAAC;YACH,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAE7B,6BAA6B;YAC7B,MAAM,MAAM,GAAQ,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gBACxD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;oBACvB,IAAI,CAAC;wBACH,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;wBACxB,IAAI,iBAAiB,GAAQ,IAAI,CAAC;wBAClC,IAAI,IAAI,GAAG,EAAE,CAAC;wBAEd,gEAAgE;wBAChE,MAAM,SAAS,GAAG,CAAC,IAAS,EAAW,EAAE;4BACvC,IACE,IAAI,CAAC,OAAO,EAAE,KAAK,cAAc;gCACjC,IAAI,CAAC,MAAM,EAAE,KAAK,OAAO,EACzB,CAAC;gCACD,2CAA2C;gCAC3C,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;gCACpC,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAU,EAAE,EAAE;oCAC9B,IAAI,KAAK,CAAC,OAAO,EAAE,KAAK,eAAe,EAAE,CAAC;wCACxC,IAAI,GAAG,KAAK,CAAC,cAAc,EAAE,CAAC;oCAChC,CAAC;yCAAM,IAAI,KAAK,CAAC,OAAO,EAAE,KAAK,gBAAgB,EAAE,CAAC;wCAChD,iBAAiB,GAAG,KAAK,CAAC;oCAC5B,CAAC;gCACH,CAAC,CAAC,CAAC;gCACH,OAAO,IAAI,CAAC,CAAC,WAAW;4BAC1B,CAAC;iCAAM,IACL,IAAI,CAAC,OAAO,EAAE,KAAK,eAAe;gCAClC,IAAI,CAAC,MAAM,EAAE,KAAK,OAAO,EACzB,CAAC;gCACD,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;gCAC7B,0EAA0E;gCAC1E,MAAM,SAAS,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;gCACjD,MAAM,SAAS,GAAG,wBAAwB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gCAC1D,IAAI,SAAS,EAAE,CAAC;oCACd,iBAAiB,GAAG,aAAa,CAAC,SAAS,CAAC,CAAC;gCAC/C,CAAC;gCACD,OAAO,IAAI,CAAC,CAAC,WAAW;4BAC1B,CAAC;4BAED,sEAAsE;4BACtE,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,EAAE,CAAC;4BAC5C,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE,CAAC;gCAC7B,IAAI,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC;oCACrB,OAAO,IAAI,CAAC,CAAC,sBAAsB;gCACrC,CAAC;4BACH,CAAC;4BAED,OAAO,KAAK,CAAC,CAAC,YAAY;wBAC5B,CAAC,CAAC;wBAEF,sCAAsC;wBACtC,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;4BACvC,IAAI,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC;gCACrB,MAAM,CAAC,gCAAgC;4BACzC,CAAC;wBACH,CAAC;wBAED,IAAI,CAAC,iBAAiB,EAAE,CAAC;4BACvB,MAAM,CACJ,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAC9D,CAAC;4BACF,OAAO;wBACT,CAAC;wBAED,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC;4BAChC,MAAM,CAAC,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC,CAAC;4BACxC,OAAO;wBACT,CAAC;wBAED,wCAAwC;wBACxC,6CAA6C;wBAC7C,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;wBAEpC,2CAA2C;wBAC3C,MAAM,aAAa,GAAG,iBAAiB,CAAC,eAAe,CAAC;wBACxD,IAAI,CAAC,aAAa,EAAE,CAAC;4BACnB,MAAM,CAAC,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC,CAAC;4BAChD,OAAO;wBACT,CAAC;wBAED,OAAO,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;oBACnC,CAAC;oBAAC,OAAO,KAAK,EAAE,CAAC;wBACf,MAAM,CAAC,KAAK,CAAC,CAAC;oBAChB,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YAEH,kEAAkE;YAClE,gFAAgF;YAChF,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;YAE3C,yCAAyC;YACzC,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YAC/D,MAAM,YAAY,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC,GAAG,IAAI,CAAC;YAErD,MAAM,aAAa,GAAG;gBACpB,OAAO,EAAE,IAAI;gBACb,eAAe,EAAE,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI;gBAC9C,OAAO,EAAE,OAAO;gBAChB,YAAY;gBACZ,OAAO,EAAE,qBAAqB,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG;aACzD,CAAC;YAEF,OAAO,aAAa,CAAC;QACvB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,4BAA4B,YAAY,EAAE;aAClD,CAAC;QACJ,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,YAAY;QAChB,uCAAuC;QACvC,IAAI,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAChC,IAAI,CAAC,sBAAsB,CAAC,KAAK,EAAE,CAAC;QACtC,CAAC;QAED,2CAA2C;QAC3C,IAAI,CAAC,sBAAsB,GAAG,IAAI,eAAe,EAAE,CAAC;QACpD,MAAM,MAAM,GAAG,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC;QAElD,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;YACtC,MAAM,gBAAgB,GAAG,MAAM,CAAC,MAAM,CACpC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,KAAK,cAAc,CACrC,CAAC;YAEF,KAAK,MAAM,KAAK,IAAI,gBAAgB,EAAE,CAAC;gBACrC,6CAA6C;gBAC7C,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;oBACnB,OAAO;wBACL,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,oDAAoD;qBAC5D,CAAC;gBACJ,CAAC;gBAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;gBACnD,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;oBACpB,OAAO,CAAC,KAAK,CACX,0BAA0B,KAAK,CAAC,QAAQ,UAAU,EAClD,MAAM,CAAC,KAAK,CACb,CAAC;oBACF,OAAO;wBACL,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,uBAAuB,KAAK,CAAC,QAAQ,KAAK,MAAM,CAAC,KAAK,EAAE;qBAChE,CAAC;gBACJ,CAAC;YACH,CAAC;YAED,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,OAAO,EACL,gBAAgB,CAAC,MAAM,GAAG,CAAC;oBACzB,CAAC,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ;oBACxD,CAAC,CAAC,SAAS;aAChB,CAAC;QACJ,CAAC;gBAAS,CAAC;YACT,sDAAsD;YACtD,IAAI,IAAI,CAAC,sBAAsB,EAAE,MAAM,KAAK,MAAM,EAAE,CAAC;gBACnD,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;YACrC,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;;;;;OAUG;IACH,KAAK,CAAC,eAAe;QACnB,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;gBACvB,IAAI,YAAY,GAAG,CAAC,CAAC;gBAErB,iEAAiE;gBACjE,SAAS,mBAAmB,CAAC,IAAS;oBACpC,4DAA4D;oBAC5D,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,EAAE,KAAK,gBAAgB,EAAE,CAAC;wBACxD,mEAAmE;wBACnE,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;4BACzB,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;4BAC7B,YAAY,EAAE,CAAC;wBACjB,CAAC;oBACH,CAAC;oBACD,+CAA+C;oBAC/C,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;wBACrB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;wBACpC,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE,CAAC;4BAC7B,mBAAmB,CAAC,KAAK,CAAC,CAAC;wBAC7B,CAAC;oBACH,CAAC;gBACH,CAAC;gBAED,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;gBACxB,mBAAmB,CAAC,IAAI,CAAC,CAAC;gBAE1B,OAAO,CAAC;oBACN,OAAO,EAAE,IAAI;oBACb,OAAO,EACL,YAAY,GAAG,CAAC;wBACd,CAAC,CAAC,wBAAwB,YAAY,gBAAgB;wBACtD,CAAC,CAAC,iCAAiC;iBACxC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;OAGG;IACH,KAAK,CAAC,aAAa;QACjB,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,4DAA4D;YAC5D,MAAM,CAAC,qCAAqC,CAAC;iBAC1C,IAAI,CAAC,MAAM,CAAC,EAAE;gBACb,MAAM,EAAE,8BAA8B,EAAE,GAAG,MAAM,CAAC;gBAElD,+BAA+B;gBAC/B,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAC1C,8BAA8B,EAC9B,SAAS,CACV,CAAC;gBAEF,IAAI,OAAO,EAAE,CAAC;oBACZ,OAAO,CAAC;wBACN,OAAO,EAAE,IAAI;wBACb,OAAO,EAAE,0BAA0B;qBACpC,CAAC,CAAC;gBACL,CAAC;qBAAM,CAAC;oBACN,OAAO,CAAC;wBACN,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,gDAAgD;qBACxD,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC;iBACD,KAAK,CAAC,KAAK,CAAC,EAAE;gBACb,OAAO,CAAC;oBACN,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,mCAAmC,KAAK,CAAC,OAAO,EAAE;iBAC1D,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACK,eAAe,CAAC,SAAiB;QACvC,OAAO;YACL,cAAc;YACd,OAAO;YACP,UAAU;YACV,SAAS;YACT,YAAY;YACZ,OAAO;YACP,aAAa;SACd,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;IACxB,CAAC;IAED;;OAEG;IACK,KAAK,CAAC,gBAAgB,CAC5B,KAAmB,EACnB,YAAoB;QAEpB,qDAAqD;QACrD,OAAO,IAAI,OAAO,CAAC,KAAK,EAAC,OAAO,EAAC,EAAE;YACjC,IAAI,CAAC;gBACH,8DAA8D;gBAC9D,IAAI,KAAK,CAAC,UAAU,KAAK,UAAU,EAAE,CAAC;oBACpC,sCAAsC;oBACtC,MAAM,EAAE,uBAAuB,EAAE,GAC/B,MAAM,MAAM,CAAC,4BAA4B,CAAC,CAAC;oBAE7C,mCAAmC;oBACnC,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;wBACxC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;wBACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;oBAEjB,MAAM,QAAQ,GACX,KAAK,CAAC,QAAQ,EAAE,QAAmB;wBACnC,KAAK,CAAC,QAAQ,EAAE,KAAgB;wBACjC,MAAM,CAAC;oBAET,kEAAkE;oBAClE,MAAM,MAAM,GAAG,KAAK,CAAC;oBAErB,gDAAgD;oBAChD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;wBACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;wBACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;wBAEpC,sCAAsC;wBACtC,MAAM,MAAM,GAAG,oBAAoB,EAAE,CAAC;wBACtC,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC,CAAC;wBAEtD,uCAAuC;wBACvC,IAAI,YAAY,KAAK,KAAK,EAAE,CAAC;4BAC3B,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gCACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;4BACnC,CAAC;iCAAM,CAAC;gCACN,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;4BACtB,CAAC;wBACH,CAAC;6BAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;4BACtD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;wBACtB,CAAC;6BAAM,CAAC;4BACN,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAC/B,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,YAAY,CACzC,CAAC;4BACF,IAAI,WAAW,EAAE,CAAC;gCAChB,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;4BAClC,CAAC;iCAAM,CAAC;gCACN,MAAM,IAAI,KAAK,CAAC,YAAY,YAAY,YAAY,CAAC,CAAC;4BACxD,CAAC;wBACH,CAAC;oBACH,CAAC,CAAC,CAAC;oBAEH,gCAAgC;oBAChC,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;4BACvB,6BAA6B;4BAC7B,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;4BACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;4BACpC,MAAM,UAAU,GAAG,QAAQ,CAAC,IAAI,CAC9B,KAAK,CAAC,EAAE,CACN,KAAK,CAAC,OAAO,EAAE,KAAK,WAAW;gCAC/B,KAAK,CAAC,cAAc,EAAE,KAAK,qBAAqB,CACnD,CAAC;4BAEF,IAAI,UAAU,EAAE,CAAC;gCACf,UAAU,CAAC,SAAS,EAAE,CAAC;gCACvB,UAAU,CAAC,MAAM,EAAE,CAAC;4BACtB,CAAC;wBACH,CAAC,CAAC,CAAC;wBAEH,8BAA8B;wBAC9B,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,uBAAuB,EAAE;4BACpD,QAAQ;4BACR,MAAM;yBACP,CAAC,CAAC;wBAEH,uDAAuD;wBACvD,IAAI,OAA2B,CAAC;wBAChC,UAAU,CAAC,GAAG,EAAE;4BACd,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gCACtC,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;gCACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;gCAEpC,4BAA4B;gCAC5B,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;oCAC9C,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,EAAE,CAAC;wCACzC,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;wCAC/B,MAAM;oCACR,CAAC;gCACH,CAAC;4BACH,CAAC,CAAC,CAAC;4BAEH,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;wBACtC,CAAC,EAAE,EAAE,CAAC,CAAC;oBACT,CAAC,EAAE,EAAE,CAAC,CAAC;gBACT,CAAC;qBAAM,IAAI,KAAK,CAAC,UAAU,KAAK,cAAc,EAAE,CAAC;oBAC/C,qCAAqC;oBACrC,MAAM,EAAE,mCAAmC,EAAE,GAC3C,MAAM,MAAM,CAAC,qCAAqC,CAAC,CAAC;oBAEtD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;wBACxC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;wBACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;oBAEjB,MAAM,cAAc,GAAG;wBACrB,IAAI,EAAE,MAAM;wBACZ,OAAO,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,IAAI,EAAE,CAAc;wBACrD,OAAO,EAAE,EAAE;qBACZ,CAAC;oBAEF,mDAAmD;oBACnD,IAAI,OAA2B,CAAC;oBAEhC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;wBACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;wBACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;wBAEpC,mCAAmC;wBACnC,IAAI,YAAY,KAAK,KAAK,EAAE,CAAC;4BAC3B,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gCACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;4BAC5B,CAAC;iCAAM,CAAC;gCACN,IAAI,CAAC,WAAW,EAAE,CAAC;4BACrB,CAAC;wBACH,CAAC;6BAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;4BACtD,IAAI,CAAC,SAAS,EAAE,CAAC;wBACnB,CAAC;6BAAM,CAAC;4BACN,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAC/B,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,YAAY,CACzC,CAAC;4BACF,IAAI,WAAW,EAAE,CAAC;gCAChB,WAAW,CAAC,SAAS,EAAE,CAAC;4BAC1B,CAAC;iCAAM,CAAC;gCACN,MAAM,IAAI,KAAK,CAAC,YAAY,YAAY,YAAY,CAAC,CAAC;4BACxD,CAAC;wBACH,CAAC;wBAED,8CAA8C;wBAC9C,IAAI,CAAC,OAAO,CAAC,eAAe,CAC1B,mCAAmC,EACnC,cAAc,CACf,CAAC;wBAEF,wDAAwD;wBACxD,MAAM,WAAW,GAAG,QAAQ,EAAE,CAAC,WAAW,EAAE,CAAC;wBAE7C,KAAK,IAAI,CAAC,GAAG,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;4BACjD,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,eAAe,EAAE,CAAC;gCACjD,OAAO,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;gCAClC,MAAM;4BACR,CAAC;wBACH,CAAC;oBACH,CAAC,CAAC,CAAC;oBAEH,IAAI,CAAC,OAAO,EAAE,CAAC;wBACb,OAAO,CAAC;4BACN,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,+BAA+B;yBACvC,CAAC,CAAC;wBACH,OAAO;oBACT,CAAC;oBAED,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;gBACtC,CAAC;qBAAM,IAAI,KAAK,CAAC,UAAU,KAAK,SAAS,EAAE,CAAC;oBAC1C,qCAAqC;oBACrC,MAAM,EAAE,sBAAsB,EAAE,GAC9B,MAAM,MAAM,CAAC,0BAA0B,CAAC,CAAC;oBAC3C,4EAA4E;oBAC5E,MAAM,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;wBAC5C,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;wBACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;oBAEjB,oDAAoD;oBACpD,MAAM,cAAc,GAAG,CAAC,KAAa,EAAU,EAAE;wBAC/C,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;wBAE7B,gEAAgE;wBAChE,IAAI,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;4BACxC,OAAO,OAAO,CAAC;wBACjB,CAAC;wBAED,oCAAoC;wBACpC,6CAA6C;wBAC7C,8BAA8B;wBAC9B,yCAAyC;wBACzC,2CAA2C;wBAE3C,4BAA4B;wBAC5B,MAAM,UAAU,GAAG,OAAO,CAAC,KAAK,CAAC,gCAAgC,CAAC,CAAC;wBACnE,IAAI,UAAU,EAAE,CAAC;4BACf,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC;wBACvB,CAAC;wBAED,kCAAkC;wBAClC,MAAM,UAAU,GAAG,OAAO,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAC;wBAC9D,IAAI,UAAU,EAAE,CAAC;4BACf,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC;wBACvB,CAAC;wBAED,2CAA2C;wBAC3C,OAAO,aAAa,CAAC;oBACvB,CAAC,CAAC;oBAEF,MAAM,OAAO,GAAG,cAAc,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC;oBAEjD,gCAAgC;oBAChC,MAAM,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,GAAG,EAAE;wBAC7C,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,sBAAsB,EAAE,OAAO,CAAC,CAAC;oBAChE,CAAC,CAAC,CAAC;oBAEH,sDAAsD;oBACtD,IAAI,OAA2B,CAAC;oBAChC,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;4BACtC,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;4BACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;4BAEpC,2BAA2B;4BAC3B,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gCAC9C,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,SAAS,EAAE,CAAC;oCACxC,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;oCAC/B,MAAM;gCACR,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;wBAEH,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;oBACtC,CAAC,EAAE,EAAE,CAAC,CAAC;gBACT,CAAC;qBAAM,IAAI,KAAK,CAAC,UAAU,KAAK,YAAY,EAAE,CAAC;oBAC7C,qCAAqC;oBACrC,MAAM,EAAE,qBAAqB,EAAE,GAC7B,MAAM,MAAM,CAAC,yBAAyB,CAAC,CAAC;oBAC1C,MAAM,EAAE,kBAAkB,EAAE,GAAG,MAAM,MAAM,CAAC,gBAAgB,CAAC,CAAC;oBAC9D,MAAM,EAAE,mBAAmB,EAAE,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,CAAC;oBAExD,MAAM,IAAI,GAAI,KAAK,CAAC,QAAQ,EAAE,IAAe,IAAI,IAAI,CAAC;oBACtD,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,KAA2B,CAAC;oBAC1D,MAAM,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,MAA4B,CAAC;oBAE5D,IAAI,OAA2B,CAAC;oBAEhC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;wBACvB,MAAM,IAAI,GAAG,qBAAqB,CAChC,IAAI,EACJ,KAAK,IAAI,SAAS,EAClB,MAAM,IAAI,SAAS,CACpB,CAAC;wBACF,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;wBAE9C,mBAAmB;wBACnB,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;wBAExB,+BAA+B;wBAC/B,IAAI,mBAAmB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,CAAC;4BACjD,kBAAkB,CAAC,IAAI,EAAE,oBAAoB,CAAC,CAAC,SAAS,EAAE,CAAC;wBAC7D,CAAC;oBACH,CAAC,CAAC,CAAC;oBAEH,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;gBACtC,CAAC;qBAAM,IAAI,KAAK,CAAC,UAAU,KAAK,OAAO,EAAE,CAAC;oBACxC,mCAAmC;oBACnC,MAAM,EAAE,oBAAoB,EAAE,GAAG,MAAM,MAAM,CAAC,gBAAgB,CAAC,CAAC;oBAChE,MAAM,EACJ,gCAAgC,EAChC,mCAAmC,GACpC,GAAG,MAAM,MAAM,CAAC,gBAAgB,CAAC,CAAC;oBAEnC,uDAAuD;oBACvD,IAAI,IAAI,GAAI,KAAK,CAAC,QAAQ,EAAE,IAAe,IAAI,CAAC,CAAC;oBACjD,IAAI,OAAO,GAAI,KAAK,CAAC,QAAQ,EAAE,OAAkB,IAAI,CAAC,CAAC;oBACvD,IAAI,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE,IAA8B,CAAC;oBAC1D,MAAM,cAAc,GAAG,KAAK,CAAC,QAAQ,EAAE,cAAc,KAAK,KAAK,CAAC;oBAEhE,+EAA+E;oBAC/E,IAAI,IAAI,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wBACnD,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;wBACnB,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;oBAC3B,CAAC;oBAED,8CAA8C;oBAC9C,MAAM,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;wBAC5C,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;wBACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;oBAEjB,IACE,UAAU;wBACV,OAAO,UAAU,KAAK,QAAQ;wBAC9B,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,EACxB,CAAC;wBACD,IAAI,CAAC;4BACH,uBAAuB;4BACvB,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;4BACjE,MAAM,SAAS,GAAe,EAAE,CAAC;4BAEjC,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;gCACzB,qCAAqC;gCACrC,IAAI,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAAE,CAAC;oCAClC,SAAS;gCACX,CAAC;gCAED,sBAAsB;gCACtB,MAAM,KAAK,GAAG,IAAI;qCACf,KAAK,CAAC,GAAG,CAAC;qCACV,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,sCAAsC;qCACnD,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;gCAE5B,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;oCACrB,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gCACxB,CAAC;4BACH,CAAC;4BAED,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gCACzB,IAAI,GAAG,SAAS,CAAC;gCACjB,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC;gCACxB,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;4BAChC,CAAC;wBACH,CAAC;wBAAC,OAAO,CAAC,EAAE,CAAC;4BACX,iCAAiC;wBACnC,CAAC;oBACH,CAAC;oBAED,MAAM,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,GAAG,EAAE;wBAC7C,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,oBAAoB,EAAE;4BACjD,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE;4BACrB,OAAO,EAAE,OAAO,CAAC,QAAQ,EAAE;4BAC3B,cAAc;yBACf,CAAC,CAAC;oBACL,CAAC,CAAC,CAAC;oBAEH,oDAAoD;oBACpD,IAAI,OAA2B,CAAC;oBAChC,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;4BACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;4BACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;4BAEpC,wBAAwB;4BACxB,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gCAC9C,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,OAAO,EAAE,CAAC;oCACtC,mBAAmB;oCACnB,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;oCAE/B,6CAA6C;oCAC7C,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wCAC5B,IAAI,CAAC;4CACH,MAAM,SAAS,GAAG,mCAAmC,CACnD,QAAQ,CAAC,CAAC,CAAC,CACZ,CAAC;4CACF,MAAM,SAAS,GAAI,SAAiB,CAAC,WAAW,EAAE,CAAC;4CAEnD,+BAA+B;4CAC/B,KACE,IAAI,MAAM,GAAG,CAAC,EACd,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,MAAM,CAAC,EAChD,MAAM,EAAE,EACR,CAAC;gDACD,MAAM,OAAO,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;gDAClC,MAAM,SAAS,GAAI,OAAe,CAAC,WAAW,EAAE,CAAC;gDAEjD,KACE,IAAI,MAAM,GAAG,CAAC,EACd,MAAM;oDACN,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,SAAS,CAAC,MAAM,CAAC,EAC/C,MAAM,EAAE,EACR,CAAC;oDACD,MAAM,QAAQ,GAAG,gCAAgC,CAC/C,SAAS,CAAC,MAAM,CAAC,CAClB,CAAC;oDACF,IAAI,QAAQ,EAAE,CAAC;wDACb,0CAA0C;wDAC1C,QAAQ,CAAC,KAAK,EAAE,CAAC;wDACjB,QAAQ,CAAC,MAAM,CACb,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CACtC,CAAC;oDACJ,CAAC;gDACH,CAAC;4CACH,CAAC;wCACH,CAAC;wCAAC,OAAO,KAAK,EAAE,CAAC;4CACf,iDAAiD;wCACnD,CAAC;oCACH,CAAC;oCACD,MAAM;gCACR,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;wBAEH,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;oBACtC,CAAC,EAAE,EAAE,CAAC,CAAC;gBACT,CAAC;qBAAM,IAAI,KAAK,CAAC,UAAU,KAAK,aAAa,EAAE,CAAC;oBAC9C,yCAAyC;oBACzC,MAAM,EAAE,0BAA0B,EAAE,GAClC,MAAM,MAAM,CAAC,8BAA8B,CAAC,CAAC;oBAC/C,MAAM,IAAI,GAAI,KAAK,CAAC,QAAQ,EAAE,IAAgB,IAAI,IAAI,CAAC;oBAEvD,gCAAgC;oBAChC,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;wBACvC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;wBACzB,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC;oBAEvB,qCAAqC;oBACrC,MAAM,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,GAAG,EAAE;wBAC7C,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC;oBACtE,CAAC,CAAC,CAAC;oBAEH,0DAA0D;oBAC1D,IAAI,OAA2B,CAAC;oBAChC,UAAU,CAAC,GAAG,EAAE;wBACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;4BACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;4BACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;4BAEpC,0BAA0B;4BAC1B,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gCAC9C,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,uBAAuB,EAAE,CAAC;oCACtD,8DAA8D;oCAC9D,MAAM,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAQ,CAAC;oCAErC,mBAAmB;oCACnB,OAAO,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC;oCAE7B,iBAAiB;oCACjB,SAAS,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC;oCAE1B,iBAAiB;oCACjB,MAAM,iBAAiB,GAAG,SAAS,CAAC,WAAW,EAAE,CAAC;oCAClD,IAAI,iBAAiB,CAAC,CAAC,CAAC,IAAI,KAAK,EAAE,CAAC;wCAClC,iBAAiB,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;wCAC7B,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;oCACtD,CAAC;oCACD,wFAAwF;oCACxF,MAAM;gCACR,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;wBAEH,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;oBACtC,CAAC,EAAE,EAAE,CAAC,CAAC;gBACT,CAAC;qBAAM,CAAC;oBACN,OAAO,CAAC;wBACN,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,yCAAyC,KAAK,CAAC,UAAU,EAAE;qBACnE,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,OAAO,CAAC;oBACN,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;iBAC9D,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACK,KAAK,CAAC,aAAa,CACzB,KAAmB,EACnB,YAAoB;QAEpB,0DAA0D;QAC1D,mFAAmF;QAEnF,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;gBACvB,IAAI,CAAC;oBACH,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;oBACxB,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;oBAE1C,IAAI,CAAC,IAAI,EAAE,CAAC;wBACV,OAAO,CAAC;4BACN,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,mCAAmC,KAAK,CAAC,UAAU,EAAE;yBAC7D,CAAC,CAAC;wBACH,OAAO;oBACT,CAAC;oBAED,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;oBAEpC,4BAA4B;oBAC5B,IAAI,YAAY,KAAK,KAAK,EAAE,CAAC;wBAC3B,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;4BACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;wBACjC,CAAC;6BAAM,CAAC;4BACN,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;wBACpB,CAAC;oBACH,CAAC;yBAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;wBACtD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;oBACpB,CAAC;yBAAM,CAAC;wBACN,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAC/B,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,YAAY,CACzC,CAAC;wBACF,IAAI,WAAW,EAAE,CAAC;4BAChB,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;wBAChC,CAAC;6BAAM,CAAC;4BACN,OAAO,CAAC;gCACN,OAAO,EAAE,KAAK;gCACd,KAAK,EAAE,YAAY,YAAY,YAAY;6BAC5C,CAAC,CAAC;4BACH,OAAO;wBACT,CAAC;oBACH,CAAC;oBAED,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;gBACrD,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBACf,OAAO,CAAC;wBACN,OAAO,EAAE,KAAK;wBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;qBAC9D,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACK,gBAAgB,CAAC,KAAmB;QAC1C,MAAM,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;YAC7C,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;YACzB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;QAEjB,MAAM,eAAe,GAAG,GAAG,EAAE;YAC3B,IAAI,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACpD,OAAO,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;oBAChC,MAAM,QAAQ,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;wBACf,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;oBACjC,CAAC;oBACD,OAAO,QAAQ,CAAC;gBAClB,CAAC,CAAC,CAAC;YACL,CAAC;iBAAM,CAAC;gBACN,8CAA8C;gBAC9C,MAAM,QAAQ,GAAG,uBAAuB,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC;gBAC5D,OAAO,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;oBACxB,MAAM,QAAQ,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;wBACf,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;oBACjC,CAAC;oBACD,OAAO,QAAQ,CAAC;gBAClB,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC;QAEF,QAAQ,KAAK,CAAC,UAAU,EAAE,CAAC;YACzB,KAAK,WAAW,CAAC,CAAC,CAAC;gBACjB,MAAM,SAAS,GAAG,oBAAoB,EAAE,CAAC;gBACzC,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC1D,OAAO,SAAS,CAAC;YACnB,CAAC;YAED,KAAK,SAAS,CAAC,CAAC,CAAC;gBACf,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,CAAC;gBACzC,MAAM,GAAG,GAAG,IAAI,KAAK,EAAoB,CAAC;gBAC1C,MAAM,OAAO,GAAG,kBAAkB,CAAC,GAAG,CAAC,CAAC;gBACxC,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBACxD,OAAO,OAAO,CAAC;YACjB,CAAC;YAED,KAAK,MAAM,CAAC,CAAC,CAAC;gBACZ,MAAM,QAAQ,GAAI,KAAK,CAAC,QAAQ,EAAE,QAAmB,IAAI,WAAW,CAAC;gBACrE,MAAM,IAAI,GAAG,eAAe,CAAC,QAAQ,CAAC,CAAC;gBACvC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC1C,OAAO,IAAI,CAAC;YACd,CAAC;YAED,KAAK,OAAO,CAAC,CAAC,CAAC;gBACb,MAAM,KAAK,GAAG,gBAAgB,EAAE,CAAC;gBACjC,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBACtD,OAAO,KAAK,CAAC;YACf,CAAC;YAED,KAAK,MAAM,CAAC,CAAC,CAAC;gBACZ,MAAM,QAAQ,GAAI,KAAK,CAAC,QAAQ,EAAE,QAAmB,IAAI,QAAQ,CAAC;gBAClE,MAAM,IAAI,GAAG,eAAe,CAAC,QAA+B,CAAC,CAAC;gBAE9D,8DAA8D;gBAC9D,MAAM,KAAK,GAAG,WAAW;qBACtB,KAAK,CAAC,IAAI,CAAC;qBACX,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;qBACxB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAEnC,8CAA8C;gBAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBACvB,MAAM,QAAQ,GAAG,mBAAmB,EAAE,CAAC;oBACvC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACxB,CAAC;qBAAM,CAAC;oBACN,gEAAgE;oBAChE,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;wBACvB,MAAM,QAAQ,GAAG,mBAAmB,EAAE,CAAC;wBACvC,MAAM,QAAQ,GAAG,uBAAuB,CAAC,QAAQ,CAAC,CAAC;wBACnD,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;4BACrB,MAAM,QAAQ,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;4BAC3C,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;gCACf,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;4BACjC,CAAC;4BACD,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;wBAC5B,CAAC,CAAC,CAAC;wBACH,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;oBACxB,CAAC,CAAC,CAAC;gBACL,CAAC;gBAED,OAAO,IAAI,CAAC;YACd,CAAC;YAED,KAAK,gBAAgB,CAAC,CAAC,CAAC;gBACtB,OAAO,yBAAyB,EAA4B,CAAC;YAC/D,CAAC;YAED,KAAK,UAAU,CAAC,CAAC,CAAC;gBAChB,MAAM,QAAQ,GAAG,mBAAmB,EAAE,CAAC;gBACvC,IAAI,KAAK,CAAC,QAAQ,EAAE,OAAO,KAAK,SAAS,EAAE,CAAC;oBAC1C,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;gBAC9C,CAAC;gBACD,eAAe,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBACzD,OAAO,QAAQ,CAAC;YAClB,CAAC;YAED;gBACE,OAAO,IAAI,CAAC;QAChB,CAAC;IACH,CAAC;IAED;;OAEG;IACK,0BAA0B,CAAC,IAAY;QAC7C,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ;YAAE,OAAO,KAAK,CAAC;QAEpD,qBAAqB;QACrB,IAAI,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,CAAC;QAE7C,uCAAuC;QACvC,IAAI,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,CAAC;QACjD,IAAI,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,CAAC;QAEjD,2DAA2D;QAC3D,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,CAAC;QAEtC,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;OAEG;IACK,qBAAqB,CAAC,IAAY;QACxC,MAAM,MAAM,GAAmB,EAAE,CAAC;QAClC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAE/B,IAAI,YAAY,GAIL,IAAI,CAAC;QAEhB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACtC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;YAE5B,oCAAoC;YACpC,IAAI,OAAO,KAAK,EAAE,EAAE,CAAC;gBACnB,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;oBAClD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC,CAAC;oBACtD,YAAY,GAAG,IAAI,CAAC;gBACtB,CAAC;gBACD,SAAS;YACX,CAAC;YAED,6BAA6B;YAC7B,MAAM,YAAY,GAAG,OAAO,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;YACxD,IAAI,YAAY,EAAE,CAAC;gBACjB,wBAAwB;gBACxB,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;oBAClD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC,CAAC;gBACxD,CAAC;gBAED,uBAAuB;gBACvB,MAAM,KAAK,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;gBACrC,MAAM,CAAC,IAAI,CAAC;oBACV,QAAQ,EAAE,EAAE,EAAE,gCAAgC;oBAC9C,UAAU,EAAE,SAAS;oBACrB,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC;oBACvB,QAAQ,EAAE,EAAE,GAAG,EAAE,IAAI,KAAK,EAAE,EAAE;iBAC/B,CAAC,CAAC;gBACH,YAAY,GAAG,IAAI,CAAC;gBACpB,SAAS;YACX,CAAC;YAED,6BAA6B;YAC7B,MAAM,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;YACpD,IAAI,WAAW,EAAE,CAAC;gBAChB,yBAAyB;gBACzB,IAAI,CAAC,YAAY,IAAI,YAAY,CAAC,IAAI,KAAK,aAAa,EAAE,CAAC;oBACzD,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wBAClD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC,CAAC;oBACxD,CAAC;oBACD,YAAY,GAAG;wBACb,IAAI,EAAE,aAAa;wBACnB,KAAK,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;wBACvB,QAAQ,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE;qBACjC,CAAC;gBACJ,CAAC;qBAAM,CAAC;oBACN,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC1C,CAAC;gBACD,SAAS;YACX,CAAC;YAED,oCAAoC;YACpC,MAAM,aAAa,GAAG,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;YACtD,IAAI,aAAa,EAAE,CAAC;gBAClB,kCAAkC;gBAClC,IAAI,CAAC,YAAY,IAAI,YAAY,CAAC,IAAI,KAAK,aAAa,EAAE,CAAC;oBACzD,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wBAClD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC,CAAC;oBACxD,CAAC;oBACD,YAAY,GAAG;wBACb,IAAI,EAAE,aAAa;wBACnB,KAAK,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;wBACzB,QAAQ,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE;qBACjC,CAAC;gBACJ,CAAC;qBAAM,CAAC;oBACN,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5C,CAAC;gBACD,SAAS;YACX,CAAC;YAED,yBAAyB;YACzB,IAAI,CAAC,YAAY,IAAI,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;gBAC3D,6CAA6C;gBAC7C,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;oBAClD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC,CAAC;gBACxD,CAAC;gBACD,YAAY,GAAG,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACtD,CAAC;iBAAM,CAAC;gBACN,6BAA6B;gBAC7B,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChC,CAAC;QACH,CAAC;QAED,oBAAoB;QACpB,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAClD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC,CAAC;QACxD,CAAC;QAED,OAAO,MAAM,CAAC;IAChB,CAAC;IAED;;OAEG;IACK,qBAAqB,CAAC,MAI7B;QACC,IAAI,MAAM,CAAC,IAAI,KAAK,aAAa,IAAI,MAAM,CAAC,IAAI,KAAK,aAAa,EAAE,CAAC;YACnE,OAAO;gBACL,QAAQ,EAAE,EAAE;gBACZ,UAAU,EAAE,MAAM;gBAClB,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;gBAC/B,QAAQ,EAAE,MAAM,CAAC,QAAQ,IAAI,EAAE;aAChC,CAAC;QACJ,CAAC;QAED,OAAO;YACL,QAAQ,EAAE,EAAE;YACZ,UAAU,EAAE,MAAM,CAAC,IAAI;YACvB,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;YAC/B,QAAQ,EAAE,MAAM,CAAC,QAAQ,IAAI,EAAE;SAChC,CAAC;IACJ,CAAC;IAED;;;;;;;;;;;;;;;OAeG;IACH,KAAK,CAAC,WAAW,CACf,IAAa,EACb,YAAsB,EACtB,MAAgB,EAChB,WAAqB;QAUrB,2CAA2C;QAC3C,MAAM,aAAa,GAAG,IAAI,IAAI,EAAE,CAAC;QAEjC,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC;YAC1B,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,gDAAgD;aACxD,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EACH,wFAAwF;aAC3F,CAAC;QACJ,CAAC;QAED,sDAAsD;QACtD,IAAI,MAAM,GAAQ,IAAI,CAAC;QAEvB,IAAI,CAAC;YACH,sCAAsC;YACtC,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;YACpD,MAAM,cAAc,GAAG,KAAK,CAAC,IAAI,CAC/B,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,EAAE,CAC9B,CAAC;YAEX,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBAChC,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,sDAAsD;iBAC9D,CAAC;YACJ,CAAC;YAED,qCAAqC;YACrC,MAAM,WAAW,GAAQ,cAAc,CAAC,CAAC,CAAC,CAAC;YAE3C,0EAA0E;YAC1E,MAAM,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,SAAS,CAAC;gBACpD,KAAK,EAAE,WAAW;aACnB,CAAC,CAAC;QACL,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,gCAAgC,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;aAC1F,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,MAAM,IAAI,OAAO,MAAM,CAAC,cAAc,KAAK,UAAU,EAAE,CAAC;YAC3D,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,wDAAwD;aAChE,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,kCAAkC;YAClC,MAAM,MAAM,GAAG,MAAM,CAAC,cAAc,CAAC;gBACnC,IAAI,EAAE,aAAa;gBACnB,aAAa,EAAE,WAAW,IAAI,IAAI;gBAClC,aAAa,EAAE,YAAY,IAAI,IAAI;gBACnC,MAAM,EAAE,MAAM,IAAI,KAAK;gBACvB,WAAW,EAAE,KAAK;aACnB,CAAC,CAAC;YAEH,MAAM,OAAO,GAGR,EAAE,CAAC;YAER,IAAI,cAAkC,CAAC;YAEvC,kBAAkB;YAClB,MAAM,CAAC,OAAO,GAAG,CAAC,GAAQ,EAAE,EAAE;gBAC5B,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC;gBAEpC,IAAI,OAAO,KAAK,QAAQ,EAAE,CAAC;oBACzB,OAAO,CAAC,IAAI,CAAC;wBACX,IAAI,EAAE,QAAQ;wBACd,OAAO,EAAE,GAAG,CAAC,OAAO;qBACrB,CAAC,CAAC;gBACL,CAAC;qBAAM,IAAI,OAAO,KAAK,gBAAgB,EAAE,CAAC;oBACxC,OAAO,CAAC,IAAI,CAAC;wBACX,IAAI,EAAE,gBAAgB;wBACtB,OAAO,EAAE,GAAG,CAAC,OAAO;qBACrB,CAAC,CAAC;oBACH,cAAc,GAAI,GAAG,CAAC,OAAe,CAAC,eAAe,CAAC;gBACxD,CAAC;qBAAM,IAAI,OAAO,KAAK,cAAc,EAAE,CAAC;oBACtC,OAAO,CAAC,IAAI,CAAC;wBACX,IAAI,EAAE,cAAc;wBACpB,OAAO,EAAE,GAAG,CAAC,OAAO;qBACrB,CAAC,CAAC;gBACL,CAAC;qBAAM,IAAI,OAAO,KAAK,OAAO,EAAE,CAAC;oBAC/B,OAAO,CAAC,IAAI,CAAC;wBACX,IAAI,EAAE,OAAO;wBACb,OAAO,EAAE,GAAG,CAAC,OAAO;qBACrB,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC;YAEF,iCAAiC;YACjC,MAAM,MAAM,CAAC,IAAI,CAAC;YAElB,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,OAAO;gBACP,cAAc;aACf,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;aAC9D,CAAC;QACJ,CAAC;IACH,CAAC;IAED;;;OAGG;IACK,KAAK,CAAC,gBAAgB,CAC5B,YAAgC,EAChC,UAAsB;QAEtB,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;gBACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;gBACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;gBAEpC,MAAM,MAAM,GAAG,oBAAoB,EAAE,CAAC;gBACtC,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,CAAC;gBAE7C,IAAI,YAAY,KAAK,KAAK,EAAE,CAAC;oBAC3B,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wBACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;oBACnC,CAAC;yBAAM,CAAC;wBACN,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;oBACtB,CAAC;gBACH,CAAC;qBAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;oBACtD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBACtB,CAAC;qBAAM,CAAC;oBACN,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,YAAY,CAAC,CAAC;oBAC/D,IAAI,MAAM,EAAE,CAAC;wBACX,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;oBAC7B,CAAC;yBAAM,CAAC;wBACN,MAAM,IAAI,KAAK,CAAC,SAAS,YAAY,YAAY,CAAC,CAAC;oBACrD,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE;oBACvB,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;oBACxB,MAAM,MAAM,GAAG,IAAI;yBAChB,WAAW,EAAE;yBACb,IAAI,CACH,CAAC,CAAC,EAAE,CACF,CAAC,CAAC,OAAO,EAAE,KAAK,WAAW;wBAC3B,CAAC,CAAC,cAAc,EAAE,KAAK,YAAY,CACtC,CAAC;oBACJ,IAAI,MAAM,EAAE,CAAC;wBACX,MAAM,CAAC,SAAS,EAAE,CAAC;wBACnB,MAAM,CAAC,MAAM,EAAE,CAAC;oBAClB,CAAC;gBACH,CAAC,CAAC,CAAC;gBAEH,UAAU,EAAE,CAAC;gBACb,OAAO,EAAE,CAAC;YACZ,CAAC,EAAE,EAAE,CAAC,CAAC;QACT,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACK,oBAAoB,CAC1B,IAAiB,EACjB,YAAgC;QAEhC,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC;QACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAEpC,IAAI,YAAY,KAAK,KAAK,EAAE,CAAC;YAC3B,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YACjC,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACpB,CAAC;QACH,CAAC;aAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,CAAC,YAAY,EAAE,CAAC;YACtD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC;aAAM,CAAC;YACN,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,YAAY,CAAC,CAAC;YAC/D,IAAI,MAAM,EAAE,CAAC;gBACX,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAC3B,CAAC;iBAAM,CAAC;gBACN,MAAM,IAAI,KAAK,CAAC,SAAS,YAAY,YAAY,CAAC,CAAC;YACrD,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;OAMG;IACH,KAAK,CAAC,mBAAmB;QAMvB,IAAI,CAAC;YACH,mCAAmC;YACnC,MAAM,EAAE,4BAA4B,EAAE,GACpC,MAAM,MAAM,CAAC,yCAAyC,CAAC,CAAC;YAE1D,MAAM,MAAM,GAAG,MAAM,4BAA4B,CAAC,OAAO,CACvD,EAAE,IAAI,EAAE,KAAK,EAAE,EACf;gBACE,UAAU,EAAE,kBAAkB,EAAE,8BAA8B;gBAC9D,QAAQ,EAAE,IAAW,EAAE,8BAA8B;aACtD,CACF,CAAC;YAEF,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;aAC9D,CAAC;QACJ,CAAC;IACH,CAAC;CACF"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.d.ts
index b61af72..b750f55 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.d.ts
@@ -20,7 +20,7 @@ export type InsertBlockMutation = {
     id: string;
     type: string;
     source: string;
-    properties?: Record<string, unknown>;
+    metadata?: Record<string, unknown>;
     afterId: string;
 };
 export type InsertBlocksMutation = {
@@ -28,7 +28,7 @@ export type InsertBlocksMutation = {
     blocks: Array<{
         type: string;
         source: string;
-        properties?: Record<string, unknown>;
+        metadata?: Record<string, unknown>;
     }>;
     afterId: string;
 };
@@ -37,7 +37,7 @@ export type UpdateBlockMutation = {
     blockId: string;
     type?: string;
     source?: string;
-    properties?: Record<string, unknown>;
+    metadata?: Record<string, unknown>;
 };
 export type DeleteBlockMutation = {
     id: string;
@@ -54,16 +54,29 @@ export type LexicalState = ILexicalsState & {
     setLexicals: (lexicals: Map<string, ILexicalState>) => void;
     selectLexical: (id: string) => ILexicalState | undefined;
     selectLexicalAdapter: (id: string) => LexicalAdapter | undefined;
-    insertBlock: (id: string, type?: string, source?: string, properties?: Record<string, unknown>, afterId?: string) => Promise<void>;
-    updateBlock: (id: string, blockId?: string, type?: string, source?: string, properties?: Record<string, unknown>) => Promise<void>;
+    insertBlock: (id: string, type?: string, source?: string, metadata?: Record<string, unknown>, afterId?: string) => Promise<OperationResult>;
+    updateBlock: (id: string, blockId?: string, type?: string, source?: string, metadata?: Record<string, unknown>) => Promise<void>;
     deleteBlock: (id: string, blockId?: string) => Promise<void>;
+    deleteBlocks: (id: string, blockIds?: string[]) => Promise<{
+        success: boolean;
+        deletedBlocks?: Array<{
+            id: string;
+        }>;
+    }>;
     readBlock: (id: string, blockId?: string) => Promise<LexicalBlock | null>;
     readAllBlocks: (id: string, format?: BlockFormat) => Promise<LexicalBlock[] | BriefBlock[]>;
     runBlock: (id: string, blockId?: string) => Promise<any>;
     runAllBlocks: (id: string) => Promise<any>;
     executeCode: (id: string, code?: string, storeHistory?: boolean, silent?: boolean, stopOnError?: boolean) => Promise<any>;
     clearAllOutputs: (id: string) => Promise<OperationResult>;
+    restartKernel: (id: string) => Promise<OperationResult>;
     getBlockCount: (id: string) => Promise<number>;
+    listAvailableBlocks: (id: string) => Promise<{
+        success: boolean;
+        types?: any[];
+        count?: number;
+        error?: string;
+    }>;
     reset: () => void;
 };
 /**
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js
index 096aca6..3919f9a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js
@@ -26,11 +26,11 @@ export const lexicalStore = createStore((set, get) => ({
         return get().lexicals.get(id)?.adapter;
     },
     // Tool operations - thin wrappers delegating to adapter
-    insertBlock: async (id, type, source, properties, afterId) => {
+    insertBlock: async (id, type, source, metadata, afterId) => {
         // Accept object from executor, destructure it
         const params = typeof id === 'object'
             ? id
-            : { id, type, source, properties, afterId };
+            : { id, type, source, metadata, afterId };
         const adapter = get().lexicals.get(params.id)?.adapter;
         if (!adapter) {
             throw new Error(`Lexical document ${params.id} not found`);
@@ -39,18 +39,20 @@ export const lexicalStore = createStore((set, get) => ({
             block_id: '', // Will be assigned by editor
             block_type: params.type,
             source: params.source,
-            metadata: params.properties,
+            metadata: params.metadata,
         };
         const result = await adapter.insertBlock(block, params.afterId);
         if (!result.success) {
             throw new Error(result.error || 'Failed to insert block');
         }
+        // Return the result with blockId
+        return result;
     },
-    updateBlock: async (id, blockId, type, source, properties) => {
+    updateBlock: async (id, blockId, type, source, metadata) => {
         // Accept object from executor, destructure it
         const params = typeof id === 'object'
             ? id
-            : { id, blockId, type, source, properties };
+            : { id, blockId, type, source, metadata };
         const adapter = get().lexicals.get(params.id)?.adapter;
         if (!adapter) {
             throw new Error(`Lexical document ${params.id} not found`);
@@ -67,7 +69,7 @@ export const lexicalStore = createStore((set, get) => ({
             source: params.source ?? existingBlock.source,
             metadata: {
                 ...existingBlock.metadata,
-                ...params.properties,
+                ...params.metadata,
             },
         };
         const result = await adapter.updateBlock(params.blockId, updatedBlock);
@@ -76,16 +78,33 @@ export const lexicalStore = createStore((set, get) => ({
         }
     },
     deleteBlock: async (id, blockId) => {
-        // Accept object from executor, destructure it
+        // Single block deletion - delegates to deleteBlocks
         const params = typeof id === 'object' ? id : { id, blockId };
         const adapter = get().lexicals.get(params.id)?.adapter;
         if (!adapter) {
             throw new Error(`Lexical document ${params.id} not found`);
         }
-        const result = await adapter.deleteBlock(params.blockId);
+        const result = await adapter.deleteBlock([params.blockId]);
+        if (!result.success) {
+            throw new Error(result.error || 'Failed to delete block');
+        }
+    },
+    deleteBlocks: async (id, blockIds) => {
+        // Multiple blocks deletion - handles array of IDs
+        const params = typeof id === 'object' ? id : { id, blockIds };
+        const adapter = get().lexicals.get(params.id)?.adapter;
+        if (!adapter) {
+            throw new Error(`Lexical document ${params.id} not found`);
+        }
+        // Ensure blockIds is an array
+        const idsArray = Array.isArray(params.blockIds)
+            ? params.blockIds
+            : [params.blockIds];
+        const result = await adapter.deleteBlock(idsArray);
         if (!result.success) {
             throw new Error(result.error || 'Failed to delete block');
         }
+        return result;
     },
     readBlock: async (id, blockId) => {
         // Accept object from executor, destructure it
@@ -139,10 +158,35 @@ export const lexicalStore = createStore((set, get) => ({
         }
         return await adapter.clearAllOutputs();
     },
+    restartKernel: async (id) => {
+        const params = typeof id === 'object' ? id : { id };
+        const adapter = get().lexicals.get(params.id)?.adapter;
+        if (!adapter) {
+            return { success: false, error: 'Adapter not found' };
+        }
+        return await adapter.restartKernel();
+    },
     getBlockCount: async (id) => {
         const blocks = await get().readAllBlocks(id);
         return blocks.length;
     },
+    listAvailableBlocks: async (id) => {
+        console.log('[LexicalState]  listAvailableBlocks CALLED with:', { id });
+        // Delegate to adapter (following consistent pattern with all other operations)
+        const params = typeof id === 'object' ? id : { id };
+        console.log('[LexicalState]  Processed params:', params);
+        // Special case: this operation is static and doesn't require a document
+        // If no document is found, call the operation directly
+        const adapter = get().lexicals.get(params.id)?.adapter;
+        if (!adapter) {
+            // Call operation directly without adapter (static operation)
+            const { listAvailableBlocksOperation } = await import('../tools/operations/listAvailableBlocks');
+            const result = await listAvailableBlocksOperation.execute({ type: 'all' }, { documentId: 'static', executor: null });
+            return result;
+        }
+        const result = await adapter.listAvailableBlocks();
+        return result;
+    },
     reset: () => set({ lexicals: new Map() }),
 }));
 export function useLexicalStore(selector) {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js.map b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js.map
index 1b13581..564e5eb 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js.map
@@ -1 +1 @@
-{"version":3,"file":"LexicalState.js","sourceRoot":"","sources":["../../src/state/LexicalState.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;;GAOG;AAEH,OAAO,EAAE,WAAW,EAAE,MAAM,iBAAiB,CAAC;AAC9C,OAAO,EAAE,QAAQ,EAAE,MAAM,SAAS,CAAC;AA6GnC;;GAEG;AACH,MAAM,CAAC,MAAM,YAAY,GAAG,WAAW,CAAe,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;IACnE,QAAQ,EAAE,IAAI,GAAG,EAAyB;IAE1C,WAAW,EAAE,CAAC,QAAoC,EAAE,EAAE,CACpD,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;IAE3B,aAAa,EAAE,CAAC,EAAU,EAA6B,EAAE;QACvD,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAChC,CAAC;IAED,oBAAoB,EAAE,CAAC,EAAU,EAA8B,EAAE;QAC/D,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC;IACzC,CAAC;IAED,wDAAwD;IACxD,WAAW,EAAE,KAAK,EAChB,EAAU,EACV,IAAa,EACb,MAAe,EACf,UAAoC,EACpC,OAAgB,EACD,EAAE;QACjB,8CAA8C;QAC9C,MAAM,MAAM,GACV,OAAO,EAAE,KAAK,QAAQ;YACpB,CAAC,CAAE,EAAU;YACb,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,OAAO,EAAE,CAAC;QAEhD,MAAM,OAAO,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC;QACvD,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,oBAAoB,MAAM,CAAC,EAAE,YAAY,CAAC,CAAC;QAC7D,CAAC;QAED,MAAM,KAAK,GAAiB;YAC1B,QAAQ,EAAE,EAAE,EAAE,6BAA6B;YAC3C,UAAU,EAAE,MAAM,CAAC,IAAI;YACvB,MAAM,EAAE,MAAM,CAAC,MAAM;YACrB,QAAQ,EAAE,MAAM,CAAC,UAAU;SAC5B,CAAC;QAEF,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;QAChE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YACpB,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,wBAAwB,CAAC,CAAC;QAC5D,CAAC;IACH,CAAC;IAED,WAAW,EAAE,KAAK,EAChB,EAAU,EACV,OAAgB,EAChB,IAAa,EACb,MAAe,EACf,UAAoC,EACrB,EAAE;QACjB,8CAA8C;QAC9C,MAAM,MAAM,GACV,OAAO,EAAE,KAAK,QAAQ;YACpB,CAAC,CAAE,EAAU;YACb,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;QAEhD,MAAM,OAAO,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC;QACvD,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,oBAAoB,MAAM,CAAC,EAAE,YAAY,CAAC,CAAC;QAC7D,CAAC;QAED,+BAA+B;QAC/B,MAAM,aAAa,GAAG,MAAM,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACjE,IAAI,CAAC,aAAa,EAAE,CAAC;YACnB,MAAM,IAAI,KAAK,CAAC,SAAS,MAAM,CAAC,OAAO,YAAY,CAAC,CAAC;QACvD,CAAC;QAED,oCAAoC;QACpC,MAAM,YAAY,GAAiB;YACjC,GAAG,aAAa;YAChB,UAAU,EAAE,MAAM,CAAC,IAAI,IAAI,aAAa,CAAC,UAAU;YACnD,MAAM,EAAE,MAAM,CAAC,MAAM,IAAI,aAAa,CAAC,MAAM;YAC7C,QAAQ,EAAE;gBACR,GAAG,aAAa,CAAC,QAAQ;gBACzB,GAAG,MAAM,CAAC,UAAU;aACrB;SACF,CAAC;QAEF,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;QACvE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YACpB,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,wBAAwB,CAAC,CAAC;QAC5D,CAAC;IACH,CAAC;IAED,WAAW,EAAE,KAAK,EAAE,EAAU,EAAE,OAAgB,EAAiB,EAAE;QACjE,8CAA8C;QAC9C,MAAM,MAAM,GAAG,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAE,EAAU,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,CAAC;QAEtE,MAAM,OAAO,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC;QACvD,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,oBAAoB,MAAM,CAAC,EAAE,YAAY,CAAC,CAAC;QAC7D,CAAC;QAED,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACzD,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YACpB,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,wBAAwB,CAAC,CAAC;QAC5D,CAAC;IACH,CAAC;IAED,SAAS,EAAE,KAAK,EACd,EAAU,EACV,OAAgB,EACc,EAAE;QAChC,8CAA8C;QAC9C,MAAM,MAAM,GAAG,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAE,EAAU,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,CAAC;QAEtE,MAAM,OAAO,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC;QACvD,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,oBAAoB,MAAM,CAAC,EAAE,YAAY,CAAC,CAAC;QAC7D,CAAC;QAED,OAAO,MAAM,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACpD,CAAC;IAED,aAAa,EAAE,KAAK,EAClB,EAAU,EACV,MAAoB,EACoB,EAAE;QAC1C,8CAA8C;QAC9C,MAAM,MAAM,GACV,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAE,EAAU,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,MAAM,IAAI,OAAO,EAAE,CAAC;QAE3E,MAAM,OAAO,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC;QACvD,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,oBAAoB,MAAM,CAAC,EAAE,YAAY,CAAC,CAAC;QAC7D,CAAC;QAED,OAAO,MAAM,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC;IAC3D,CAAC;IAED,QAAQ,EAAE,KAAK,EAAE,EAAU,EAAE,OAAgB,EAAgB,EAAE;QAC7D,MAAM,MAAM,GAAG,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,CAAC;QAC7D,OAAO,CACL,CAAC,MAAM,GAAG,EAAE;aACT,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAY,CAAC;YAClC,EAAE,OAAO,EAAE,QAAQ,CAAC,MAAM,CAAC,OAAiB,CAAC,CAAC,IAAI;YAClD,OAAO,EAAE,KAAK;YACd,KAAK,EAAE,mBAAmB;SAC3B,CACF,CAAC;IACJ,CAAC;IAED,YAAY,EAAE,KAAK,EAAE,EAAU,EAAgB,EAAE;QAC/C,MAAM,MAAM,GAAG,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC;QACpD,OAAO,CACL,CAAC,MAAM,GAAG,EAAE;aACT,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAY,CAAC;YAClC,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC,IAAI;YAC9B,OAAO,EAAE,KAAK;YACd,KAAK,EAAE,mBAAmB;SAC3B,CACF,CAAC;IACJ,CAAC;IAED,WAAW,EAAE,KAAK,EAChB,EAAU,EACV,IAAa,EACb,YAAsB,EACtB,MAAgB,EAChB,WAAqB,EACP,EAAE;QAChB,MAAM,MAAM,GACV,OAAO,EAAE,KAAK,QAAQ;YACpB,CAAC,CAAC,EAAE;YACJ,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,YAAY,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC;QAEtD,OAAO,CACL,CAAC,MAAM,GAAG,EAAE;aACT,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAY,CAAC;YAClC,EAAE,OAAO,EAAE,WAAW,CACpB,MAAM,CAAC,IAAc,EACrB,MAAM,CAAC,YAAY,EACnB,MAAM,CAAC,MAAM,EACb,MAAM,CAAC,WAAW,CACnB,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,mBAAmB,EAAE,CACvD,CAAC;IACJ,CAAC;IAED,eAAe,EAAE,KAAK,EAAE,EAAU,EAA4B,EAAE;QAC9D,MAAM,MAAM,GAAG,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC;QACpD,MAAM,OAAO,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAY,CAAC,EAAE,OAAO,CAAC;QACjE,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,mBAAmB,EAAE,CAAC;QACxD,CAAC;QACD,OAAO,MAAM,OAAO,CAAC,eAAe,EAAE,CAAC;IACzC,CAAC;IAED,aAAa,EAAE,KAAK,EAAE,EAAU,EAAmB,EAAE;QACnD,MAAM,MAAM,GAAG,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;QAC7C,OAAO,MAAM,CAAC,MAAM,CAAC;IACvB,CAAC;IAED,KAAK,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,QAAQ,EAAE,IAAI,GAAG,EAAE,EAAE,CAAC;CAC1C,CAAC,CAAC,CAAC;AAiBJ,MAAM,UAAU,eAAe,CAC7B,QAAqC;IAErC,oEAAoE;IACpE,OAAO,QAAQ,CAAC,YAAY,EAAE,QAAS,CAAC,CAAC;AAC3C,CAAC;AAED,eAAe,eAAe,CAAC"}
\ No newline at end of file
+{"version":3,"file":"LexicalState.js","sourceRoot":"","sources":["../../src/state/LexicalState.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/index.js b/node_modules/@datalayer/jupyter-lexical/lib/state/index.js
index 5ddb108..a7ec158 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/state/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/index.js
@@ -8,6 +8,6 @@
  *
  * @module tools/state
  */
-export * from './LexicalAdapter.js';
-export * from './LexicalState.js';
+export * from './LexicalAdapter';
+export * from './LexicalState';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/themes/CommentEditorTheme.js b/node_modules/@datalayer/jupyter-lexical/lib/themes/CommentEditorTheme.js
index bd44636..e4427eb 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/themes/CommentEditorTheme.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/themes/CommentEditorTheme.js
@@ -3,7 +3,7 @@
  *
  * MIT License
  */
-import baseTheme from './Theme.js';
+import baseTheme from './Theme';
 export const commentTheme = {
     ...baseTheme,
     paragraph: 'CommentEditorTheme__paragraph',
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/themes/index.js b/node_modules/@datalayer/jupyter-lexical/lib/themes/index.js
index 578249f..3cca7b6 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/themes/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/themes/index.js
@@ -3,6 +3,6 @@
  *
  * MIT License
  */
-export * from './CommentEditorTheme.js';
-export * from './Theme.js';
+export * from './CommentEditorTheme';
+export * from './Theme';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js
index 7a34c04..d91dd5f 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js
@@ -31,31 +31,21 @@ export class DefaultExecutor {
      * @returns Result from store method
      */
     async execute(operationName, args) {
-        console.log('[DefaultExecutor] ========== EXECUTE CALLED ==========');
-        console.log('[DefaultExecutor] Operation name:', operationName);
-        console.log('[DefaultExecutor] Args:', JSON.stringify(args, null, 2));
-        console.log('[DefaultExecutor] Lexical ID:', this.lexicalId);
         // Get the store method directly (1:1 mapping, no transformation)
         const method = this.store[operationName];
-        console.log('[DefaultExecutor] Store method found:', typeof method);
         if (typeof method !== 'function') {
-            console.error('[DefaultExecutor]  Store method not found or not a function!');
             throw new Error(`Store method '${operationName}' not found or not a function`);
         }
         // Inject lexicalId into args and call store method
         const payload = typeof args === 'object' && args !== null
             ? { id: this.lexicalId, ...args }
             : { id: this.lexicalId };
-        console.log('[DefaultExecutor] Injected payload:', JSON.stringify(payload, null, 2));
-        console.log('[DefaultExecutor] Calling store method:', operationName);
         try {
             const result = await method.call(this.store, payload);
-            console.log('[DefaultExecutor]  Store method returned:', result);
             return result;
         }
         catch (error) {
-            console.error('[DefaultExecutor]  ERROR calling store method:', error);
-            console.error('[DefaultExecutor] Error stack:', error instanceof Error ? error.stack : 'N/A');
+            console.error('[DefaultExecutor] Error calling store method:', error);
             throw error;
         }
     }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js.map
index f90881b..5392d3d 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js.map
@@ -1 +1 @@
-{"version":3,"file":"executor.js","sourceRoot":"","sources":["../../../src/tools/core/executor.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AA0BH;;;;;;;;;GASG;AACH,MAAM,OAAO,eAAe;IAEhB;IACA;IAFV,YACU,SAAiB,EACjB,KAAmB;QADnB,cAAS,GAAT,SAAS,CAAQ;QACjB,UAAK,GAAL,KAAK,CAAc;IAC1B,CAAC;IAEJ;;;;;;;;;OASG;IACH,KAAK,CAAC,OAAO,CACX,aAAqB,EACrB,IAAc;QAEd,OAAO,CAAC,GAAG,CAAC,wDAAwD,CAAC,CAAC;QACtE,OAAO,CAAC,GAAG,CAAC,mCAAmC,EAAE,aAAa,CAAC,CAAC;QAChE,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;QACtE,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAE7D,iEAAiE;QACjE,MAAM,MAAM,GAAI,IAAI,CAAC,KAA4C,CAC/D,aAAa,CACd,CAAC;QAEF,OAAO,CAAC,GAAG,CAAC,uCAAuC,EAAE,OAAO,MAAM,CAAC,CAAC;QAEpE,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,CAAC;YACjC,OAAO,CAAC,KAAK,CACX,+DAA+D,CAChE,CAAC;YACF,MAAM,IAAI,KAAK,CACb,iBAAiB,aAAa,+BAA+B,CAC9D,CAAC;QACJ,CAAC;QAED,mDAAmD;QACnD,MAAM,OAAO,GACX,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,IAAI;YACvC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,GAAG,IAAI,EAAE;YACjC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC;QAE7B,OAAO,CAAC,GAAG,CACT,qCAAqC,EACrC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CACjC,CAAC;QACF,OAAO,CAAC,GAAG,CAAC,yCAAyC,EAAE,aAAa,CAAC,CAAC;QAEtE,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,MAAO,MAAwC,CAAC,IAAI,CACjE,IAAI,CAAC,KAAK,EACV,OAAO,CACR,CAAC;YAEF,OAAO,CAAC,GAAG,CAAC,4CAA4C,EAAE,MAAM,CAAC,CAAC;YAClE,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,iDAAiD,EAAE,KAAK,CAAC,CAAC;YACxE,OAAO,CAAC,KAAK,CACX,gCAAgC,EAChC,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAC7C,CAAC;YACF,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;CACF"}
\ No newline at end of file
+{"version":3,"file":"executor.js","sourceRoot":"","sources":["../../../src/tools/core/executor.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AA0BH;;;;;;;;;GASG;AACH,MAAM,OAAO,eAAe;IAEhB;IACA;IAFV,YACU,SAAiB,EACjB,KAAmB;QADnB,cAAS,GAAT,SAAS,CAAQ;QACjB,UAAK,GAAL,KAAK,CAAc;IAC1B,CAAC;IAEJ;;;;;;;;;OASG;IACH,KAAK,CAAC,OAAO,CACX,aAAqB,EACrB,IAAc;QAEd,iEAAiE;QACjE,MAAM,MAAM,GAAI,IAAI,CAAC,KAA4C,CAC/D,aAAa,CACd,CAAC;QAEF,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,CAAC;YACjC,MAAM,IAAI,KAAK,CACb,iBAAiB,aAAa,+BAA+B,CAC9D,CAAC;QACJ,CAAC;QAED,mDAAmD;QACnD,MAAM,OAAO,GACX,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,IAAI;YACvC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,GAAG,IAAI,EAAE;YACjC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC;QAE7B,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,MAAO,MAAwC,CAAC,IAAI,CACjE,IAAI,CAAC,KAAK,EACV,OAAO,CACR,CAAC;YAEF,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,+CAA+C,EAAE,KAAK,CAAC,CAAC;YACtE,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;CACF"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.d.ts
index 67ba79f..74eaa6e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.d.ts
@@ -7,7 +7,7 @@
  */
 export * from '../operations/insertBlock';
 export * from '../operations/updateBlock';
-export * from '../operations/deleteBlock';
+export * from '../operations/deleteBlocks';
 export * from '../operations/readBlock';
 export * from '../operations/readAllBlocks';
 export * from '../operations/runBlock';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js
index 515c056..7a34ea6 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js
@@ -11,16 +11,16 @@
  * @module jupyter-ui-lexical/tools/core
  */
 // Re-export operations
-export * from '../operations/insertBlock.js';
-export * from '../operations/updateBlock.js';
-export * from '../operations/deleteBlock.js';
-export * from '../operations/readBlock.js';
-export * from '../operations/readAllBlocks.js';
-export * from '../operations/runBlock.js';
-export * from '../operations/runAllBlocks.js';
-export * from '../operations/listAvailableBlocks.js';
+export * from '../operations/insertBlock';
+export * from '../operations/updateBlock';
+export * from '../operations/deleteBlocks';
+export * from '../operations/readBlock';
+export * from '../operations/readAllBlocks';
+export * from '../operations/runBlock';
+export * from '../operations/runAllBlocks';
+export * from '../operations/listAvailableBlocks';
 // Export interfaces and types
-export * from './interfaces.js';
-export * from './types.js';
-export * from './executor.js';
+export * from './interfaces';
+export * from './types';
+export * from './executor';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js.map
index c56916c..7b0091f 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/core/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,uBAAuB;AACvB,cAAc,2BAA2B,CAAC;AAC1C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,yBAAyB,CAAC;AACxC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,wBAAwB,CAAC;AACvC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,mCAAmC,CAAC;AAElD,8BAA8B;AAC9B,cAAc,cAAc,CAAC;AAC7B,cAAc,SAAS,CAAC;AACxB,cAAc,YAAY,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/core/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,uBAAuB;AACvB,cAAc,2BAA2B,CAAC;AAC1C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,4BAA4B,CAAC;AAC3C,cAAc,yBAAyB,CAAC;AACxC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,wBAAwB,CAAC;AACvC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,mCAAmC,CAAC;AAElD,8BAA8B;AAC9B,cAAc,cAAc,CAAC;AAC7B,cAAc,SAAS,CAAC;AACxB,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.d.ts
index 929578f..6a8ef0e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.d.ts
@@ -108,16 +108,14 @@ export interface LexicalBlock {
  */
 export type BlockFormat = 'brief' | 'detailed';
 /**
- * Brief block representation for structure queries
- * Includes block_id, block_type, and a 40-char content preview
+ * Brief block representation for structure queries (CSV-serializable)
+ * Fields: block_id, block_type, preview, collapsible
  */
 export interface BriefBlock {
-    /** Unique block identifier */
     block_id: string;
-    /** Block type identifier */
     block_type: string;
-    /** 40-character preview of block content (empty for horizontalrule) */
     preview: string;
+    collapsible?: string;
 }
 /**
  * Complete Lexical document structure
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js.map
deleted file mode 100644
index f1985e6..0000000
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js.map
+++ /dev/null
@@ -1 +0,0 @@
-{"version":3,"file":"deleteBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/deleteBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;GAIG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,uBAAuB;IAC7B,WAAW,EAAE,yBAAyB;IACtC,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,sYAAsY;IAExY,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAyB,EAAE,EAAE;YACjD,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;YAChC,OAAO,KAAK,KAAK,CAAC;gBAChB,CAAC,CAAC,gBAAgB,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,iCAAiC;gBAChE,CAAC,CAAC,UAAU,KAAK,YAAY,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,kCAAkC,CAAC;QACzF,CAAC;QACD,iBAAiB,EAAE,CAAC,MAAyB,EAAE,EAAE;YAC/C,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;YAChC,OAAO,KAAK,KAAK,CAAC;gBAChB,CAAC,CAAC,kBAAkB,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,wBAAwB;gBACzD,CAAC,CAAC,YAAY,KAAK,+BAA+B,CAAC;QACvD,CAAC;QACD,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC;CAC7C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.d.ts
similarity index 75%
rename from node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.d.ts
rename to node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.d.ts
index 8384fe9..ce0ef74 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.d.ts
@@ -1,7 +1,7 @@
 /**
  * Tool definition for deleting blocks from Lexical documents
  *
- * @module tools/definitions/tools/deleteBlock
+ * @module tools/definitions/tools/deleteBlocks
  */
 import type { ToolDefinition } from '../core';
 /**
@@ -9,4 +9,4 @@ import type { ToolDefinition } from '../core';
  *
  * This tool permanently removes blocks by their IDs. Supports both single and multi-delete operations.
  */
-export declare const deleteBlockTool: ToolDefinition;
+export declare const deleteBlocksTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.js
similarity index 64%
rename from node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js
rename to node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.js
index bddf1b6..88bd01f 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.js
@@ -4,19 +4,19 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { deleteBlockParamsSchema } from '../schemas/deleteBlock.js';
+import { deleteBlocksParamsSchema } from '../schemas/deleteBlocks';
 /**
  * Tool definition for deleting one or more blocks from a Lexical document
  *
  * This tool permanently removes blocks by their IDs. Supports both single and multi-delete operations.
  */
-export const deleteBlockTool = {
-    name: 'datalayer_deleteBlock',
+export const deleteBlocksTool = {
+    name: 'datalayer_deleteBlocks',
     displayName: 'Delete Lexical Block(s)',
-    toolReferenceName: 'deleteBlock',
-    description: 'Delete one or more blocks from the currently open Lexical document by block_id. Supports single block deletion (pass string) or multi-delete (pass array of strings). WORKFLOW: 1) Call readAllBlocks to get block_id values, 2) Pass block_id(s) to delete. Validates all IDs exist before deletion. This permanently removes blocks and changes appear immediately. Works on active .lexical file.',
-    parameters: zodToToolParameters(deleteBlockParamsSchema),
-    operation: 'deleteBlock',
+    toolReferenceName: 'deleteBlocks',
+    description: 'Delete one or more blocks from the currently open Lexical document by block_id. Pass array of block IDs to delete. WORKFLOW: 1) Call readAllBlocks to get block_id values, 2) Pass block_id array to delete. Validates all IDs exist before deletion. This permanently removes blocks and changes appear immediately. Works on active .lexical file.',
+    parameters: zodToToolParameters(deleteBlocksParamsSchema),
+    operation: 'deleteBlocks',
     config: {
         confirmationMessage: (params) => {
             const count = params.ids.length;
@@ -36,4 +36,4 @@ export const deleteBlockTool = {
     },
     tags: ['lexical', 'delete', 'block', 'edit'],
 };
-//# sourceMappingURL=deleteBlock.js.map
\ No newline at end of file
+//# sourceMappingURL=deleteBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.js.map
new file mode 100644
index 0000000..24d3415
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"deleteBlocks.js","sourceRoot":"","sources":["../../../src/tools/definitions/deleteBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,wBAAwB,EAAE,MAAM,yBAAyB,CAAC;AAEnE;;;;GAIG;AACH,MAAM,CAAC,MAAM,gBAAgB,GAAmB;IAC9C,IAAI,EAAE,wBAAwB;IAC9B,WAAW,EAAE,yBAAyB;IACtC,iBAAiB,EAAE,cAAc;IACjC,WAAW,EACT,sVAAsV;IAExV,UAAU,EAAE,mBAAmB,CAAC,wBAAwB,CAAC;IAEzD,SAAS,EAAE,cAAc;IAEzB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAyB,EAAE,EAAE;YACjD,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;YAChC,OAAO,KAAK,KAAK,CAAC;gBAChB,CAAC,CAAC,gBAAgB,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,iCAAiC;gBAChE,CAAC,CAAC,UAAU,KAAK,YAAY,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,kCAAkC,CAAC;QACzF,CAAC;QACD,iBAAiB,EAAE,CAAC,MAAyB,EAAE,EAAE;YAC/C,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;YAChC,OAAO,KAAK,KAAK,CAAC;gBAChB,CAAC,CAAC,kBAAkB,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,wBAAwB;gBACzD,CAAC,CAAC,YAAY,KAAK,+BAA+B,CAAC;QACvD,CAAC;QACD,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC;CAC7C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js
index e4f6b57..019d82c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { executeCodeParamsSchema } from '../schemas/executeCode.js';
+import { executeCodeParamsSchema } from '../schemas/executeCode';
 /**
  * Tool definition for executing code directly in the kernel
  *
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.d.ts
index 757ce90..ae9cb76 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.d.ts
@@ -7,7 +7,7 @@
  */
 export * from './insertBlock';
 export * from './updateBlock';
-export * from './deleteBlock';
+export * from './deleteBlocks';
 export * from './readBlock';
 export * from './readAllBlocks';
 export * from './runBlock';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js
index 8f565f5..c912519 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js
@@ -10,13 +10,13 @@
  *
  * @module jupyter-ui-lexical/tools/definitions
  */
-export * from './insertBlock.js';
-export * from './updateBlock.js';
-export * from './deleteBlock.js';
-export * from './readBlock.js';
-export * from './readAllBlocks.js';
-export * from './runBlock.js';
-export * from './runAllBlocks.js';
-export * from './listAvailableBlocks.js';
-export * from './executeCode.js';
+export * from './insertBlock';
+export * from './updateBlock';
+export * from './deleteBlocks';
+export * from './readBlock';
+export * from './readAllBlocks';
+export * from './runBlock';
+export * from './runAllBlocks';
+export * from './listAvailableBlocks';
+export * from './executeCode';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js.map
index 5e716e0..19388c3 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/definitions/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,aAAa,CAAC;AAC5B,cAAc,iBAAiB,CAAC;AAChC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,uBAAuB,CAAC;AACtC,cAAc,eAAe,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/definitions/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,iBAAiB,CAAC;AAChC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,uBAAuB,CAAC;AACtC,cAAc,eAAe,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.d.ts
index 55514c4..2e16766 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.d.ts
@@ -9,8 +9,8 @@ import type { ToolDefinition } from '../core';
  *
  * Supports inserting various block types:
  * - paragraph: Regular text paragraph
- * - heading: Semantic HTML heading (NOT markdown - use plain text, specify tag property for h1-h6)
- * - code: Code block (specify language in properties)
+ * - heading: Semantic HTML heading (NOT markdown - use plain text, specify tag in metadata for h1-h6)
+ * - code: Code block (specify language in metadata)
  * - quote: Blockquote
  * - list/listitem: List blocks
  * - jupyter-cell: Executable Jupyter code cells
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js
index 38e237d..a9606ec 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js
@@ -4,14 +4,14 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { insertBlockParamsSchema } from '../schemas/insertBlock.js';
+import { insertBlockParamsSchema } from '../schemas/insertBlock';
 /**
  * Tool definition for inserting a block into a Lexical document
  *
  * Supports inserting various block types:
  * - paragraph: Regular text paragraph
- * - heading: Semantic HTML heading (NOT markdown - use plain text, specify tag property for h1-h6)
- * - code: Code block (specify language in properties)
+ * - heading: Semantic HTML heading (NOT markdown - use plain text, specify tag in metadata for h1-h6)
+ * - code: Code block (specify language in metadata)
  * - quote: Blockquote
  * - list/listitem: List blocks
  * - jupyter-cell: Executable Jupyter code cells
@@ -20,7 +20,7 @@ export const insertBlockTool = {
     name: 'datalayer_insertBlock',
     displayName: 'Insert Lexical Block',
     toolReferenceName: 'insertBlock',
-    description: "Insert different type of content with blocks. Use listAvailableBlocks to get availables blocks. When inserting MULTIPLE blocks sequentially (e.g., creating a document outline with heading + paragraph + code), ALWAYS use afterId: 'BOTTOM' for each insertion to append blocks in order. For single insertions, call readAllBlocks first to see document structure. Position blocks using afterId: 'TOP' (beginning), 'BOTTOM' (end - REQUIRED for sequential inserts), or a specific block_id value from readAllBlocks. IMPORTANT: heading blocks are semantic HTML (NOT markdown) - use plain text in source field without # symbols, specify tag property (h1-h6) instead. Use listAvailableBlocks to see all supported types. Works on active .lexical file.",
+    description: "Insert blocks into Lexical documents (.dlex files). IMPORTANT: Lexical documents support EXECUTABLE JUPYTER CELLS - use type='jupyter-cell' to insert Python/R/Julia code cells that can be executed via kernel (just like .ipynb notebooks). Other block types: paragraph, heading, code (non-executable syntax highlighting), quote, list, table, collapsible, equation, image, youtube, horizontalrule. CRITICAL: DO NOT use markdown syntax in source field. Heading blocks use PLAIN TEXT (no # symbols) - specify tag metadata (h1-h6) instead. Inline formatting like **bold** or *italic* is automatically converted. ALWAYS call listAvailableBlocks FIRST to see block types and required metadata format. When inserting MULTIPLE blocks sequentially (e.g., creating a document outline with heading + paragraph + code), ALWAYS use afterId: 'BOTTOM' for each insertion to append blocks in order. For single insertions, call readAllBlocks first to see document structure. Position blocks using afterId: 'TOP' (beginning), 'BOTTOM' (end - REQUIRED for sequential inserts), or a specific block_id value from readAllBlocks. To insert blocks INSIDE a collapsible: 1) First insert collapsible (type='collapsible'), which returns a blockId, 2) Then insert nested blocks with metadata.collapsible set to that RETURNED BLOCK ID (NOT 'TOP' or 'BOTTOM'). Example: result = insertBlock({type: 'collapsible', source: 'Section', afterId: 'BOTTOM'}); insertBlock({type: 'paragraph', source: 'text', metadata: {collapsible: result.blockId}, afterId: 'BOTTOM'}). DO NOT use position markers (TOP/BOTTOM) as collapsible IDs - they are only for afterId positioning. Works on active .lexical/.dlex file.",
     parameters: zodToToolParameters(insertBlockParamsSchema),
     operation: 'insertBlock',
     config: {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js.map
index c096b37..7e4454c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js.map
@@ -1 +1 @@
-{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;;;;;;;GAUG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,uBAAuB;IAC7B,WAAW,EAAE,sBAAsB;IACnC,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,quBAAquB;IAEvuB,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAIrB,EAAE,EAAE,CACH,UAAU,MAAM,CAAC,IAAI,UAAU,MAAM,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,eAAe,MAAM,CAAC,OAAO,EAAE,QAAQ,MAAM,CAAC,MAAM,EAAE;QAC5K,iBAAiB,EAAE,CAAC,MAAwB,EAAE,EAAE,CAC9C,aAAa,MAAM,CAAC,IAAI,8BAA8B;QACxD,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC;CAC7C,CAAC"}
\ No newline at end of file
+{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;;;;;;;GAUG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,uBAAuB;IAC7B,WAAW,EAAE,sBAAsB;IACnC,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,soDAAsoD;IAExoD,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAIrB,EAAE,EAAE,CACH,UAAU,MAAM,CAAC,IAAI,UAAU,MAAM,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,eAAe,MAAM,CAAC,OAAO,EAAE,QAAQ,MAAM,CAAC,MAAM,EAAE;QAC5K,iBAAiB,EAAE,CAAC,MAAwB,EAAE,EAAE,CAC9C,aAAa,MAAM,CAAC,IAAI,8BAA8B;QACxD,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC;CAC7C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js
index 3ec909d..4689c9b 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { listAvailableBlocksParamsSchema } from '../schemas/listAvailableBlocks.js';
+import { listAvailableBlocksParamsSchema } from '../schemas/listAvailableBlocks';
 /**
  * Tool definition for listing available Lexical block types
  *
@@ -21,15 +21,15 @@ export const listAvailableBlocksTool = {
     name: 'datalayer_listAvailableBlocks',
     displayName: 'List Available Lexical Blocks',
     toolReferenceName: 'listAvailableBlocks',
-    description: "Discover available block types for the currently open Lexical document. Returns schema for all registered blocks including: 'jupyter-cell' (executable code cell with language property), standard blocks (paragraph, heading [NOT markdown - semantic HTML with tag property], code, quote, list, table). Use this to see exact block type names and required properties before calling insertBlock.",
+    description: "Discover available block types for the currently open Lexical document. Available blocks: paragraph, heading, quote, code, list, horizontalrule, jupyter-cell (executable), equation, image, youtube (video embed), table (data table), collapsible (expandable section). Returns detailed schema including required/optional metadata for each block type. Set type parameter to specific block type (e.g., 'youtube', 'table') or 'all' (default) for all blocks. Use this BEFORE calling insertBlock to see exact type names and required metadata format.",
     parameters: zodToToolParameters(listAvailableBlocksParamsSchema),
     operation: 'listAvailableBlocks',
     config: {
-        confirmationMessage: (params) => params.category
-            ? `List available ${params.category} block types?`
+        confirmationMessage: (params) => params.type && params.type !== 'all'
+            ? `List details for '${params.type}' block type?`
             : 'List all available block types?',
-        invocationMessage: (params) => params.category
-            ? `Listing ${params.category} block types`
+        invocationMessage: (params) => params.type && params.type !== 'all'
+            ? `Listing '${params.type}' block type details`
             : 'Listing all available block types',
         requiresConfirmation: false,
         canBeReferencedInPrompt: true,
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js.map
index eb4089e..ac7a6b9 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js.map
@@ -1 +1 @@
-{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/definitions/listAvailableBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,+BAA+B,EAAE,MAAM,gCAAgC,CAAC;AAEjF;;;;;;;;;;;GAWG;AACH,MAAM,CAAC,MAAM,uBAAuB,GAAmB;IACrD,IAAI,EAAE,+BAA+B;IACrC,WAAW,EAAE,+BAA+B;IAC5C,iBAAiB,EAAE,qBAAqB;IACxC,WAAW,EACT,uYAAuY;IAEzY,UAAU,EAAE,mBAAmB,CAAC,+BAA+B,CAAC;IAEhE,SAAS,EAAE,qBAAqB;IAEhC,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAA6B,EAAE,EAAE,CACrD,MAAM,CAAC,QAAQ;YACb,CAAC,CAAC,kBAAkB,MAAM,CAAC,QAAQ,eAAe;YAClD,CAAC,CAAC,iCAAiC;QACvC,iBAAiB,EAAE,CAAC,MAA6B,EAAE,EAAE,CACnD,MAAM,CAAC,QAAQ;YACb,CAAC,CAAC,WAAW,MAAM,CAAC,QAAQ,cAAc;YAC1C,CAAC,CAAC,mCAAmC;QACzC,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,KAAK;KAChB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,WAAW,EAAE,QAAQ,CAAC;CACnD,CAAC"}
\ No newline at end of file
+{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/definitions/listAvailableBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,+BAA+B,EAAE,MAAM,gCAAgC,CAAC;AAEjF;;;;;;;;;;;GAWG;AACH,MAAM,CAAC,MAAM,uBAAuB,GAAmB;IACrD,IAAI,EAAE,+BAA+B;IACrC,WAAW,EAAE,+BAA+B;IAC5C,iBAAiB,EAAE,qBAAqB;IACxC,WAAW,EACT,+hBAA+hB;IAEjiB,UAAU,EAAE,mBAAmB,CAAC,+BAA+B,CAAC;IAEhE,SAAS,EAAE,qBAAqB;IAEhC,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAyB,EAAE,EAAE,CACjD,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,KAAK;YAClC,CAAC,CAAC,qBAAqB,MAAM,CAAC,IAAI,eAAe;YACjD,CAAC,CAAC,iCAAiC;QACvC,iBAAiB,EAAE,CAAC,MAAyB,EAAE,EAAE,CAC/C,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,KAAK;YAClC,CAAC,CAAC,YAAY,MAAM,CAAC,IAAI,sBAAsB;YAC/C,CAAC,CAAC,mCAAmC;QACzC,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,KAAK;KAChB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,WAAW,EAAE,QAAQ,CAAC;CACnD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js
index cea6ccf..02421d4 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { readAllBlocksParamsSchema } from '../schemas/readAllBlocks.js';
+import { readAllBlocksParamsSchema } from '../schemas/readAllBlocks';
 /**
  * Tool definition for reading all blocks from a Lexical document
  *
@@ -14,7 +14,7 @@ export const readAllBlocksTool = {
     name: 'datalayer_readAllBlocks',
     displayName: 'Read All Lexical Blocks',
     toolReferenceName: 'readAllBlocks',
-    description: "Read all blocks from the currently open Lexical document. Use listAvailableBlocks to get available blocks. Supports two response formats: 'brief' (default, ~1,100 tokens) returns block_id, block_type, and 40-char content preview for structure queries; 'detailed' (~20,000 tokens) returns full content with source, metadata, and properties. Use brief when you need to see document structure, count blocks, or quickly scan content. Use detailed when you need to read full content. Brief format preview shows: lists as comma-separated items, code/jupyter-cell as first line, horizontalrule as empty string. Returns array of blocks with: block_id (stable identifier for insertion), block_type (e.g. 'heading', 'paragraph', 'jupyter-cell'), preview (brief only), and optionally source/metadata (detailed only). CRITICAL: Use the block_id values from this result for insertBlock's afterId parameter. Works on active .lexical file.",
+    description: "Read all blocks from the currently open Lexical document. Use listAvailableBlocks to get available block types. Supports two response formats: 'brief' (default, ~1,100 tokens) returns block_id, block_type, and 40-char content preview for structure queries; 'detailed' (~20,000 tokens) returns full content with source, metadata, and properties. Use brief when you need to see document structure, count blocks, or quickly scan content. Use detailed when you need to read full content. Brief format preview shows: lists as comma-separated items, code/jupyter-cell as first line, horizontalrule as empty string. Returns array of blocks with: block_id (stable identifier for insertion), block_type (e.g. 'heading', 'paragraph', 'jupyter-cell'), preview (brief only), and optionally source/metadata (detailed only). CRITICAL: Use the block_id values from this result for insertBlock's afterId parameter. Works on active .lexical file.",
     parameters: zodToToolParameters(readAllBlocksParamsSchema),
     operation: 'readAllBlocks',
     config: {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js.map
index 7238344..6a67fec 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js.map
@@ -1 +1 @@
-{"version":3,"file":"readAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/definitions/readAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,yBAAyB,EAAE,MAAM,0BAA0B,CAAC;AAErE;;;;GAIG;AACH,MAAM,CAAC,MAAM,iBAAiB,GAAmB;IAC/C,IAAI,EAAE,yBAAyB;IAC/B,WAAW,EAAE,yBAAyB;IACtC,iBAAiB,EAAE,eAAe;IAClC,WAAW,EACT,85BAA85B;IAEh6B,UAAU,EAAE,mBAAmB,CAAC,yBAAyB,CAAC;IAE1D,SAAS,EAAE,eAAe;IAE1B,MAAM,EAAE;QACN,mBAAmB,EAAE,GAAG,EAAE,CAAC,4CAA4C;QACvE,iBAAiB,EAAE,GAAG,EAAE,CAAC,0CAA0C;QACnE,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,QAAQ;KACnB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC;CAC3C,CAAC"}
\ No newline at end of file
+{"version":3,"file":"readAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/definitions/readAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,yBAAyB,EAAE,MAAM,0BAA0B,CAAC;AAErE;;;;GAIG;AACH,MAAM,CAAC,MAAM,iBAAiB,GAAmB;IAC/C,IAAI,EAAE,yBAAyB;IAC/B,WAAW,EAAE,yBAAyB;IACtC,iBAAiB,EAAE,eAAe;IAClC,WAAW,EACT,m6BAAm6B;IAEr6B,UAAU,EAAE,mBAAmB,CAAC,yBAAyB,CAAC;IAE1D,SAAS,EAAE,eAAe;IAE1B,MAAM,EAAE;QACN,mBAAmB,EAAE,GAAG,EAAE,CAAC,4CAA4C;QACvE,iBAAiB,EAAE,GAAG,EAAE,CAAC,0CAA0C;QACnE,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,QAAQ;KACnB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC;CAC3C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js
index 4795d86..8b7aa0a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { readBlockParamsSchema } from '../schemas/readBlock.js';
+import { readBlockParamsSchema } from '../schemas/readBlock';
 /**
  * Tool definition for reading a single block from a Lexical document
  *
@@ -14,7 +14,7 @@ export const readBlockTool = {
     name: 'datalayer_readBlock',
     displayName: 'Read Lexical Block',
     toolReferenceName: 'readBlock',
-    description: "Read a single block from the currently open Lexical document by its block_id. Use listAvailableBlocks to get available blocks. Returns the block with: block_id, block_type (e.g. 'heading', 'paragraph', 'jupyter-cell'), source (content as string), metadata (properties like level, language). Use block_id values from readAllBlocks. Works on active .lexical file.",
+    description: "Read a single block from the currently open Lexical document by its block_id. Use listAvailableBlocks to get available block types. Returns the block with: block_id, block_type (e.g. 'heading', 'paragraph', 'jupyter-cell'), source (content as string), metadata (properties like level, language). Use block_id values from readAllBlocks. Works on active .lexical file.",
     parameters: zodToToolParameters(readBlockParamsSchema),
     operation: 'readBlock',
     config: {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js.map
index 79a882d..e045824 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js.map
@@ -1 +1 @@
-{"version":3,"file":"readBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/readBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,qBAAqB,EAAE,MAAM,sBAAsB,CAAC;AAE7D;;;;GAIG;AACH,MAAM,CAAC,MAAM,aAAa,GAAmB;IAC3C,IAAI,EAAE,qBAAqB;IAC3B,WAAW,EAAE,oBAAoB;IACjC,iBAAiB,EAAE,WAAW;IAC9B,WAAW,EACT,2WAA2W;IAE7W,UAAU,EAAE,mBAAmB,CAAC,qBAAqB,CAAC;IAEtD,SAAS,EAAE,WAAW;IAEtB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC9C,cAAc,MAAM,CAAC,EAAE,6BAA6B;QACtD,iBAAiB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC5C,iBAAiB,MAAM,CAAC,EAAE,wBAAwB;QACpD,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,QAAQ;KACnB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;CAC7C,CAAC"}
\ No newline at end of file
+{"version":3,"file":"readBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/readBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,qBAAqB,EAAE,MAAM,sBAAsB,CAAC;AAE7D;;;;GAIG;AACH,MAAM,CAAC,MAAM,aAAa,GAAmB;IAC3C,IAAI,EAAE,qBAAqB;IAC3B,WAAW,EAAE,oBAAoB;IACjC,iBAAiB,EAAE,WAAW;IAC9B,WAAW,EACT,gXAAgX;IAElX,UAAU,EAAE,mBAAmB,CAAC,qBAAqB,CAAC;IAEtD,SAAS,EAAE,WAAW;IAEtB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC9C,cAAc,MAAM,CAAC,EAAE,6BAA6B;QACtD,iBAAiB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC5C,iBAAiB,MAAM,CAAC,EAAE,wBAAwB;QACpD,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,QAAQ;KACnB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;CAC7C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js
index fdcc5d6..bd7a876 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { runAllBlocksParamsSchema } from '../schemas/runAllBlocks.js';
+import { runAllBlocksParamsSchema } from '../schemas/runAllBlocks';
 /**
  * Tool definition for running all executable blocks in sequence
  *
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js
index c3b1ced..90b3d75 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { runBlockParamsSchema } from '../schemas/runBlock.js';
+import { runBlockParamsSchema } from '../schemas/runBlock';
 /**
  * Tool definition for running a single executable block
  *
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.d.ts
index 6b317a7..f2bc3b1 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.d.ts
@@ -7,6 +7,6 @@ import type { ToolDefinition } from '../core';
 /**
  * Tool definition for updating an existing block
  *
- * Modifies block type, source content, and/or properties.
+ * Modifies block type, source content, and/or metadata.
  */
 export declare const updateBlockTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js
index 13303ec..af4393b 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js
@@ -4,17 +4,17 @@
  * MIT License
  */
 import { zodToToolParameters } from '@datalayer/jupyter-react/tools';
-import { updateBlockParamsSchema } from '../schemas/updateBlock.js';
+import { updateBlockParamsSchema } from '../schemas/updateBlock';
 /**
  * Tool definition for updating an existing block
  *
- * Modifies block type, source content, and/or properties.
+ * Modifies block type, source content, and/or metadata.
  */
 export const updateBlockTool = {
     name: 'datalayer_updateBlock',
     displayName: 'Update Lexical Block',
     toolReferenceName: 'updateBlock',
-    description: 'Update an existing block in the currently open Lexical document. Use listAvailableBlocks to get available blocks. Can modify block type, source content, and/or properties. Requires id from readAllBlocks. At least one of type, source, or properties must be provided. Properties are merged with existing metadata. Works on active .lexical file.',
+    description: 'Update an existing block in the currently open Lexical document. CRITICAL: DO NOT use markdown syntax (like # for headings) in source field - use plain text and specify block type/metadata instead. Inline formatting like **bold** or *italic* is automatically converted. Use listAvailableBlocks to get available block types. Can modify block type, source content, and/or metadata. Requires id from readAllBlocks. At least one of type, source, or metadata must be provided. Metadata is merged with existing metadata. Works on active .lexical file.',
     parameters: zodToToolParameters(updateBlockParamsSchema),
     operation: 'updateBlock',
     config: {
@@ -24,8 +24,8 @@ export const updateBlockTool = {
                 updates.push(`type to ${params.type}`);
             if (params.source)
                 updates.push('source');
-            if (params.properties)
-                updates.push('properties');
+            if (params.metadata)
+                updates.push('metadata');
             return `Update block ${params.id} (${updates.join(', ')})?`;
         },
         invocationMessage: (params) => `Updating block ${params.id}`,
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js.map
index 4b5a3ff..0053bcb 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js.map
@@ -1 +1 @@
-{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;GAIG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,uBAAuB;IAC7B,WAAW,EAAE,sBAAsB;IACnC,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,wVAAwV;IAE1V,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAKrB,EAAE,EAAE;YACH,MAAM,OAAO,GAAa,EAAE,CAAC;YAC7B,IAAI,MAAM,CAAC,IAAI;gBAAE,OAAO,CAAC,IAAI,CAAC,WAAW,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACxD,IAAI,MAAM,CAAC,MAAM;gBAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC1C,IAAI,MAAM,CAAC,UAAU;gBAAE,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAClD,OAAO,gBAAgB,MAAM,CAAC,EAAE,KAAK,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAC9D,CAAC;QACD,iBAAiB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC5C,kBAAkB,MAAM,CAAC,EAAE,EAAE;QAC/B,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;CACvD,CAAC"}
\ No newline at end of file
+{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AACrE,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;GAIG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,uBAAuB;IAC7B,WAAW,EAAE,sBAAsB;IACnC,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,miBAAmiB;IAEriB,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAKrB,EAAE,EAAE;YACH,MAAM,OAAO,GAAa,EAAE,CAAC;YAC7B,IAAI,MAAM,CAAC,IAAI;gBAAE,OAAO,CAAC,IAAI,CAAC,WAAW,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACxD,IAAI,MAAM,CAAC,MAAM;gBAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC1C,IAAI,MAAM,CAAC,QAAQ;gBAAE,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC9C,OAAO,gBAAgB,MAAM,CAAC,EAAE,KAAK,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAC9D,CAAC;QACD,iBAAiB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC5C,kBAAkB,MAAM,CAAC,EAAE,EAAE;QAC/B,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;CACvD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.d.ts
index bd5dab2..8ee75fd 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.d.ts
@@ -20,12 +20,10 @@ export * from './core';
 export * from './definitions';
 export * from './operations/insertBlock';
 export * from './operations/updateBlock';
-export * from './operations/deleteBlock';
+export * from './operations/deleteBlocks';
 export * from './operations/readBlock';
 export * from './operations/readAllBlocks';
 export * from './operations/runBlock';
 export * from './operations/runAllBlocks';
 export * from './operations/listAvailableBlocks';
 export * from './operations/executeCode';
-export * from '../state';
-export * from './utils';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js
index 1b7f8ae..6346d80 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js
@@ -11,32 +11,32 @@
  * @module jupyter-ui-lexical/tools
  */
 // Import all tool definitions
-import { insertBlockTool } from './definitions/insertBlock.js';
-import { updateBlockTool } from './definitions/updateBlock.js';
-import { deleteBlockTool } from './definitions/deleteBlock.js';
-import { readBlockTool } from './definitions/readBlock.js';
-import { readAllBlocksTool } from './definitions/readAllBlocks.js';
-import { runBlockTool } from './definitions/runBlock.js';
-import { runAllBlocksTool } from './definitions/runAllBlocks.js';
-import { listAvailableBlocksTool } from './definitions/listAvailableBlocks.js';
-import { executeCodeTool } from './definitions/executeCode.js';
+import { insertBlockTool } from './definitions/insertBlock';
+import { updateBlockTool } from './definitions/updateBlock';
+import { deleteBlocksTool } from './definitions/deleteBlocks';
+import { readBlockTool } from './definitions/readBlock';
+import { readAllBlocksTool } from './definitions/readAllBlocks';
+import { runBlockTool } from './definitions/runBlock';
+import { runAllBlocksTool } from './definitions/runAllBlocks';
+import { listAvailableBlocksTool } from './definitions/listAvailableBlocks';
+import { executeCodeTool } from './definitions/executeCode';
 // Import all operations
-import { insertBlockOperation } from './operations/insertBlock.js';
-import { updateBlockOperation } from './operations/updateBlock.js';
-import { deleteBlockOperation } from './operations/deleteBlock.js';
-import { readBlockOperation } from './operations/readBlock.js';
-import { readAllBlocksOperation } from './operations/readAllBlocks.js';
-import { runBlockOperation } from './operations/runBlock.js';
-import { runAllBlocksOperation } from './operations/runAllBlocks.js';
-import { listAvailableBlocksOperation } from './operations/listAvailableBlocks.js';
-import { executeCodeOperation } from './operations/executeCode.js';
+import { insertBlockOperation } from './operations/insertBlock';
+import { updateBlockOperation } from './operations/updateBlock';
+import { deleteBlocksOperation } from './operations/deleteBlocks';
+import { readBlockOperation } from './operations/readBlock';
+import { readAllBlocksOperation } from './operations/readAllBlocks';
+import { runBlockOperation } from './operations/runBlock';
+import { runAllBlocksOperation } from './operations/runAllBlocks';
+import { listAvailableBlocksOperation } from './operations/listAvailableBlocks';
+import { executeCodeOperation } from './operations/executeCode';
 /**
  * Array of all lexical tool definitions
  */
 export const lexicalToolDefinitions = [
     insertBlockTool,
     updateBlockTool,
-    deleteBlockTool,
+    deleteBlocksTool,
     readBlockTool,
     readAllBlocksTool,
     runBlockTool,
@@ -51,7 +51,7 @@ export const lexicalToolDefinitions = [
 export const lexicalToolOperations = {
     insertBlock: insertBlockOperation,
     updateBlock: updateBlockOperation,
-    deleteBlock: deleteBlockOperation,
+    deleteBlocks: deleteBlocksOperation,
     readBlock: readBlockOperation,
     readAllBlocks: readAllBlocksOperation,
     runBlock: runBlockOperation,
@@ -67,17 +67,17 @@ export const lexicalTools = {
     operations: lexicalToolOperations,
 };
 // Re-export everything for convenience
-export * from './core/index.js';
-export * from './definitions/index.js';
-export * from './operations/insertBlock.js';
-export * from './operations/updateBlock.js';
-export * from './operations/deleteBlock.js';
-export * from './operations/readBlock.js';
-export * from './operations/readAllBlocks.js';
-export * from './operations/runBlock.js';
-export * from './operations/runAllBlocks.js';
-export * from './operations/listAvailableBlocks.js';
-export * from './operations/executeCode.js';
-export * from '../state/index.js';
-export * from './utils/index.js';
+// NOTE: Do NOT export '../state' or './utils' here - they contain UI code (lexical imports)
+// that cannot load in Node.js environment (causes CSS import errors)
+export * from './core';
+export * from './definitions';
+export * from './operations/insertBlock';
+export * from './operations/updateBlock';
+export * from './operations/deleteBlocks';
+export * from './operations/readBlock';
+export * from './operations/readAllBlocks';
+export * from './operations/runBlock';
+export * from './operations/runAllBlocks';
+export * from './operations/listAvailableBlocks';
+export * from './operations/executeCode';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js.map
index 83191f3..7f9ef21 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/tools/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,8BAA8B;AAC9B,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAChE,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AACtD,OAAO,EAAE,gBAAgB,EAAE,MAAM,4BAA4B,CAAC;AAC9D,OAAO,EAAE,uBAAuB,EAAE,MAAM,mCAAmC,CAAC;AAC5E,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAE5D,wBAAwB;AACxB,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAChE,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAChE,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAChE,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAC5D,OAAO,EAAE,sBAAsB,EAAE,MAAM,4BAA4B,CAAC;AACpE,OAAO,EAAE,iBAAiB,EAAE,MAAM,uBAAuB,CAAC;AAC1D,OAAO,EAAE,qBAAqB,EAAE,MAAM,2BAA2B,CAAC;AAClE,OAAO,EAAE,4BAA4B,EAAE,MAAM,kCAAkC,CAAC;AAChF,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAMhE;;GAEG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAAqB;IACtD,eAAe;IACf,eAAe;IACf,eAAe;IACf,aAAa;IACb,iBAAiB;IACjB,YAAY;IACZ,gBAAgB;IAChB,uBAAuB;IACvB,eAAe;CAChB,CAAC;AAEF;;;GAGG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAG9B;IACF,WAAW,EAAE,oBAAoB;IACjC,WAAW,EAAE,oBAAoB;IACjC,WAAW,EAAE,oBAAoB;IACjC,SAAS,EAAE,kBAAkB;IAC7B,aAAa,EAAE,sBAAsB;IACrC,QAAQ,EAAE,iBAAiB;IAC3B,YAAY,EAAE,qBAAqB;IACnC,mBAAmB,EAAE,4BAA4B;IACjD,WAAW,EAAE,oBAAoB;CAClC,CAAC;AAEF;;GAEG;AACH,MAAM,CAAC,MAAM,YAAY,GAAG;IAC1B,WAAW,EAAE,sBAAsB;IACnC,UAAU,EAAE,qBAAqB;CAClC,CAAC;AAEF,uCAAuC;AACvC,cAAc,QAAQ,CAAC;AACvB,cAAc,eAAe,CAAC;AAC9B,cAAc,0BAA0B,CAAC;AACzC,cAAc,0BAA0B,CAAC;AACzC,cAAc,0BAA0B,CAAC;AACzC,cAAc,wBAAwB,CAAC;AACvC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,uBAAuB,CAAC;AACtC,cAAc,2BAA2B,CAAC;AAC1C,cAAc,kCAAkC,CAAC;AACjD,cAAc,0BAA0B,CAAC;AACzC,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/tools/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,8BAA8B;AAC9B,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,gBAAgB,EAAE,MAAM,4BAA4B,CAAC;AAC9D,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAChE,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AACtD,OAAO,EAAE,gBAAgB,EAAE,MAAM,4BAA4B,CAAC;AAC9D,OAAO,EAAE,uBAAuB,EAAE,MAAM,mCAAmC,CAAC;AAC5E,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAE5D,wBAAwB;AACxB,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAChE,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAChE,OAAO,EAAE,qBAAqB,EAAE,MAAM,2BAA2B,CAAC;AAClE,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAC5D,OAAO,EAAE,sBAAsB,EAAE,MAAM,4BAA4B,CAAC;AACpE,OAAO,EAAE,iBAAiB,EAAE,MAAM,uBAAuB,CAAC;AAC1D,OAAO,EAAE,qBAAqB,EAAE,MAAM,2BAA2B,CAAC;AAClE,OAAO,EAAE,4BAA4B,EAAE,MAAM,kCAAkC,CAAC;AAChF,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAMhE;;GAEG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAAqB;IACtD,eAAe;IACf,eAAe;IACf,gBAAgB;IAChB,aAAa;IACb,iBAAiB;IACjB,YAAY;IACZ,gBAAgB;IAChB,uBAAuB;IACvB,eAAe;CAChB,CAAC;AAEF;;;GAGG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAG9B;IACF,WAAW,EAAE,oBAAoB;IACjC,WAAW,EAAE,oBAAoB;IACjC,YAAY,EAAE,qBAAqB;IACnC,SAAS,EAAE,kBAAkB;IAC7B,aAAa,EAAE,sBAAsB;IACrC,QAAQ,EAAE,iBAAiB;IAC3B,YAAY,EAAE,qBAAqB;IACnC,mBAAmB,EAAE,4BAA4B;IACjD,WAAW,EAAE,oBAAoB;CAClC,CAAC;AAEF;;GAEG;AACH,MAAM,CAAC,MAAM,YAAY,GAAG;IAC1B,WAAW,EAAE,sBAAsB;IACnC,UAAU,EAAE,qBAAqB;CAClC,CAAC;AAEF,uCAAuC;AACvC,4FAA4F;AAC5F,qEAAqE;AACrE,cAAc,QAAQ,CAAC;AACvB,cAAc,eAAe,CAAC;AAC9B,cAAc,0BAA0B,CAAC;AACzC,cAAc,0BAA0B,CAAC;AACzC,cAAc,2BAA2B,CAAC;AAC1C,cAAc,wBAAwB,CAAC;AACvC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,uBAAuB,CAAC;AACtC,cAAc,2BAA2B,CAAC;AAC1C,cAAc,kCAAkC,CAAC;AACjD,cAAc,0BAA0B,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.d.ts
deleted file mode 100644
index d7af6c7..0000000
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.d.ts
+++ /dev/null
@@ -1,52 +0,0 @@
-/**
- * Delete block operation for Lexical documents
- *
- * @module tools/core/operations/deleteBlock
- */
-import type { ToolOperation } from '../core/interfaces';
-import { type DeleteBlockParams } from '../schemas/deleteBlock';
-/**
- * Information about a deleted block.
- */
-export interface DeletedBlockInfo {
-    /** Block ID of the deleted block */
-    id: string;
-    /** Block type (e.g. paragraph, heading, code, jupyter-cell) */
-    type: string;
-    /** Block source content */
-    source: string | string[];
-}
-/**
- * Result of deleting a block
- */
-export interface DeleteBlockResult {
-    /** Whether the operation succeeded */
-    success: boolean;
-    /** Array of deleted blocks with their information */
-    deletedBlocks: DeletedBlockInfo[];
-    /** Formatted message describing the deletion */
-    message: string;
-}
-/**
- * Delete block operation - removes one or more blocks from a Lexical document
- *
- * IDs are stable identifiers so deletion order does not matter (unlike index-based deletion).
- *
- * Uses documentId as the universal identifier (matches Lexical component).
- *
- * Architecture:
- * - Core layer: Works with documentId (platform-agnostic)
- * - VS Code adapter: Converts documentId  documentUri via registry
- * - Internal command: Uses documentUri to send message to webview
- * - Webview: Lexical component uses same documentId
- *
- * @example
- * ```typescript
- * // Delete blocks
- * await deleteBlockOperation.execute(
- *   { ids: ["block-123", "block-456", "block-789"] },
- *   { documentId: "doc-1", executeCommand }
- * );
- * ```
- */
-export declare const deleteBlockOperation: ToolOperation<DeleteBlockParams, DeleteBlockResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js
deleted file mode 100644
index d3769f6..0000000
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js
+++ /dev/null
@@ -1,110 +0,0 @@
-/*
- * Copyright (c) 2021-2023 Datalayer, Inc.
- *
- * MIT License
- */
-import { readAllBlocksOperation } from './readAllBlocks.js';
-import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { deleteBlockParamsSchema, } from '../schemas/deleteBlock.js';
-/**
- * Delete block operation - removes one or more blocks from a Lexical document
- *
- * IDs are stable identifiers so deletion order does not matter (unlike index-based deletion).
- *
- * Uses documentId as the universal identifier (matches Lexical component).
- *
- * Architecture:
- * - Core layer: Works with documentId (platform-agnostic)
- * - VS Code adapter: Converts documentId  documentUri via registry
- * - Internal command: Uses documentUri to send message to webview
- * - Webview: Lexical component uses same documentId
- *
- * @example
- * ```typescript
- * // Delete blocks
- * await deleteBlockOperation.execute(
- *   { ids: ["block-123", "block-456", "block-789"] },
- *   { documentId: "doc-1", executeCommand }
- * );
- * ```
- */
-export const deleteBlockOperation = {
-    name: 'deleteBlock',
-    async execute(params, context) {
-        // Validate params using Zod
-        const validatedParams = validateWithZod(deleteBlockParamsSchema, params, 'deleteBlock');
-        const { ids } = validatedParams;
-        const { documentId } = context;
-        // Validate context
-        if (!documentId) {
-            throw new Error('Document ID is required for deleteBlock operation. ' +
-                'Ensure the tool execution context includes a valid documentId.');
-        }
-        // Ensure executor is available
-        if (!context.executor) {
-            throw new Error('Executor is required for deleteBlock operation. ' +
-                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
-        }
-        try {
-            // First, read all blocks to get current state and validate IDs
-            // Use detailed format to get source for deletion messages
-            const blocksResult = await readAllBlocksOperation.execute({ format: 'detailed' }, context);
-            if (!blocksResult.success || !blocksResult.blocks) {
-                throw new Error('Failed to read blocks for bounds validation');
-            }
-            const blocks = blocksResult.blocks;
-            const blockIds = new Set(blocks.map(block => block.block_id));
-            // Validate ALL IDs exist
-            const missingIds = [];
-            for (const id of ids) {
-                if (!blockIds.has(id)) {
-                    missingIds.push(id);
-                }
-            }
-            if (missingIds.length > 0) {
-                throw new Error(`Block ID(s) not found: ${missingIds.join(', ')}. ` +
-                    `Document has ${blocks.length} blocks.`);
-            }
-            // Store information about blocks before deletion
-            const deletedBlocks = [];
-            // Delete each block (order doesn't matter - IDs are stable)
-            for (const id of ids) {
-                // Find and store block info before deletion
-                const block = blocks.find(b => b.block_id === id);
-                if (!block) {
-                    // This shouldn't happen after validation, but be safe
-                    throw new Error(`Block with ID '${id}' not found during deletion`);
-                }
-                // Execute deletion via executor
-                await context.executor.execute(this.name, {
-                    blockId: id,
-                });
-                // Track deletion
-                deletedBlocks.push({
-                    id: block.block_id,
-                    type: block.block_type,
-                    source: block.source,
-                });
-            }
-            // Format message similar to deleteCell pattern
-            const message = deletedBlocks
-                .map(block => {
-                return (`Deleted block with ID '${block.id}':\n` +
-                    `Type: ${block.type}\n` +
-                    `----------------------------------------`);
-            })
-                .join('\n\n');
-            // Return success result
-            return {
-                success: true,
-                deletedBlocks,
-                message,
-            };
-        }
-        catch (error) {
-            const errorMessage = error instanceof Error ? error.message : String(error);
-            throw new Error(`Failed to delete block(s): ${errorMessage}`);
-        }
-    },
-};
-//# sourceMappingURL=deleteBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js.map
deleted file mode 100644
index 99f69b0..0000000
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js.map
+++ /dev/null
@@ -1 +0,0 @@
-{"version":3,"file":"deleteBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/deleteBlock.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.d.ts
new file mode 100644
index 0000000..1b5c634
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.d.ts
@@ -0,0 +1,41 @@
+/**
+ * Delete blocks operation for Lexical documents
+ *
+ * @module tools/core/operations/deleteBlocks
+ */
+import type { ToolOperation } from '../core/interfaces';
+import { type DeleteBlocksParams } from '../schemas/deleteBlocks';
+/**
+ * Information about a deleted block.
+ */
+export interface DeletedBlockInfo {
+    /** Block ID of the deleted block */
+    id: string;
+}
+/**
+ * Result of deleting blocks
+ */
+export interface DeleteBlocksResult {
+    /** Whether the operation succeeded */
+    success: boolean;
+    /** Array of deleted blocks with their IDs */
+    deletedBlocks: DeletedBlockInfo[];
+    /** Formatted message describing the deletion */
+    message: string;
+}
+/**
+ * Delete blocks operation - removes one or more blocks from a Lexical document
+ *
+ * Complex logic (validation, sorting, cascading deletion handling) is handled in the adapter.
+ * This operation validates parameters and delegates to the adapter.
+ *
+ * @example
+ * ```typescript
+ * // Delete blocks
+ * await deleteBlocksOperation.execute(
+ *   { ids: ["block-123", "block-456", "block-789"] },
+ *   { documentId: "doc-1", executor }
+ * );
+ * ```
+ */
+export declare const deleteBlocksOperation: ToolOperation<DeleteBlocksParams, DeleteBlocksResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.js
new file mode 100644
index 0000000..7e399ec
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.js
@@ -0,0 +1,70 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { validateWithZod } from '@datalayer/jupyter-react/tools';
+import { deleteBlocksParamsSchema, } from '../schemas/deleteBlocks';
+/**
+ * Delete blocks operation - removes one or more blocks from a Lexical document
+ *
+ * Complex logic (validation, sorting, cascading deletion handling) is handled in the adapter.
+ * This operation validates parameters and delegates to the adapter.
+ *
+ * @example
+ * ```typescript
+ * // Delete blocks
+ * await deleteBlocksOperation.execute(
+ *   { ids: ["block-123", "block-456", "block-789"] },
+ *   { documentId: "doc-1", executor }
+ * );
+ * ```
+ */
+export const deleteBlocksOperation = {
+    name: 'deleteBlocks',
+    async execute(params, context) {
+        // Validate params using Zod
+        const validatedParams = validateWithZod(deleteBlocksParamsSchema, params, 'deleteBlocks');
+        const { ids } = validatedParams;
+        const { documentId } = context;
+        // Validate context
+        if (!documentId) {
+            throw new Error('Document ID is required for deleteBlocks operation. ' +
+                'Ensure the tool execution context includes a valid documentId.');
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for deleteBlocks operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        try {
+            // Call deleteBlocks store method with all IDs
+            // The adapter handles validation, sorting, and cascading deletions
+            // NOTE: Don't pass 'id' - DefaultExecutor injects it automatically
+            const result = (await context.executor.execute('deleteBlocks', {
+                blockIds: ids,
+            }));
+            // Adapter returns { success, deletedBlocks }
+            if (!result || !result.deletedBlocks) {
+                throw new Error('Adapter did not return expected result structure');
+            }
+            // Format message
+            const message = result.deletedBlocks
+                .map((block) => {
+                return `Deleted block with ID '${block.id}'`;
+            })
+                .join('\n');
+            // Return success result
+            return {
+                success: true,
+                deletedBlocks: result.deletedBlocks,
+                message: message || `Deleted ${result.deletedBlocks.length} block(s)`,
+            };
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to delete block(s): ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=deleteBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.js.map
new file mode 100644
index 0000000..8dffeb9
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"deleteBlocks.js","sourceRoot":"","sources":["../../../src/tools/operations/deleteBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,wBAAwB,GAEzB,MAAM,yBAAyB,CAAC;AAwBjC;;;;;;;;;;;;;;GAcG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAG9B;IACF,IAAI,EAAE,cAAc;IAEpB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,wBAA+B,EAC/B,MAAM,EACN,cAAc,CACO,CAAC;QAExB,MAAM,EAAE,GAAG,EAAE,GAAG,eAAe,CAAC;QAChC,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,sDAAsD;gBACpD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,mDAAmD;gBACjD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,8CAA8C;YAC9C,mEAAmE;YACnE,mEAAmE;YACnE,MAAM,MAAM,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAc,EAAE;gBAC7D,QAAQ,EAAE,GAAG;aACd,CAAC,CAAQ,CAAC;YAEX,6CAA6C;YAC7C,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;gBACrC,MAAM,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAAC;YACtE,CAAC;YAED,iBAAiB;YACjB,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa;iBACjC,GAAG,CAAC,CAAC,KAAuB,EAAE,EAAE;gBAC/B,OAAO,0BAA0B,KAAK,CAAC,EAAE,GAAG,CAAC;YAC/C,CAAC,CAAC;iBACD,IAAI,CAAC,IAAI,CAAC,CAAC;YAEd,wBAAwB;YACxB,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,aAAa,EAAE,MAAM,CAAC,aAAa;gBACnC,OAAO,EAAE,OAAO,IAAI,WAAW,MAAM,CAAC,aAAa,CAAC,MAAM,WAAW;aACtE,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,8BAA8B,YAAY,EAAE,CAAC,CAAC;QAChE,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js
index 138eae2..fddcb72 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { executeCodeParamsSchema, } from '../schemas/executeCode.js';
+import { executeCodeParamsSchema, } from '../schemas/executeCode';
 /**
  * Executes code directly in the kernel without creating a block.
  *
@@ -17,14 +17,8 @@ import { executeCodeParamsSchema, } from '../schemas/executeCode.js';
 export const executeCodeOperation = {
     name: 'executeCode',
     async execute(params, context) {
-        console.log('[executeCodeOperation] Called with params:', params);
-        console.log('[executeCodeOperation] Context:', {
-            documentId: context.documentId,
-            hasExecutor: !!context.executor,
-        });
         // Validate params using Zod
         const validatedParams = validateWithZod(executeCodeParamsSchema, params, 'executeCode');
-        console.log('[executeCodeOperation] Validated params:', validatedParams);
         const { documentId } = context;
         if (!documentId) {
             return {
@@ -38,13 +32,8 @@ export const executeCodeOperation = {
                 'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
         }
         try {
-            console.log('[executeCodeOperation] Calling executor.execute with:', {
-                operationName: this.name,
-                validatedParams,
-            });
             // Call executor (uses this.name for DRY principle)
             const result = (await context.executor.execute(this.name, validatedParams));
-            console.log('[executeCodeOperation] Executor result:', result);
             return result;
         }
         catch (error) {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js.map
index bf8ed7a..83464ea 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js.map
@@ -1 +1 @@
-{"version":3,"file":"executeCode.js","sourceRoot":"","sources":["../../../src/tools/operations/executeCode.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAUH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAkBhC;;;;;;;;GAQG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,OAAO,CAAC,GAAG,CAAC,4CAA4C,EAAE,MAAM,CAAC,CAAC;QAClE,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE;YAC7C,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,WAAW,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ;SAChC,CAAC,CAAC;QAEH,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,OAAO,CAAC,GAAG,CAAC,0CAA0C,EAAE,eAAe,CAAC,CAAC;QAEzE,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,6CAA6C;aACrD,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,OAAO,CAAC,GAAG,CAAC,uDAAuD,EAAE;gBACnE,aAAa,EAAE,IAAI,CAAC,IAAI;gBACxB,eAAe;aAChB,CAAC,CAAC;YAEH,mDAAmD;YACnD,MAAM,MAAM,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAC5C,IAAI,CAAC,IAAI,EACT,eAAe,CAChB,CAAsB,CAAC;YAExB,OAAO,CAAC,GAAG,CAAC,yCAAyC,EAAE,MAAM,CAAC,CAAC;YAC/D,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
+{"version":3,"file":"executeCode.js","sourceRoot":"","sources":["../../../src/tools/operations/executeCode.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAUH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAkBhC;;;;;;;;GAQG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,6CAA6C;aACrD,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,mDAAmD;YACnD,MAAM,MAAM,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAC5C,IAAI,CAAC,IAAI,EACT,eAAe,CAChB,CAAsB,CAAC;YAExB,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.d.ts
index 407c61e..898ed51 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.d.ts
@@ -11,6 +11,8 @@ import { type InsertBlockParams } from '../schemas/insertBlock';
 export interface InsertBlockResult {
     /** Whether the operation succeeded */
     success: boolean;
+    /** ID of the newly inserted block */
+    blockId?: string;
     /** Success message describing the insertion */
     message?: string;
     /** Error message if operation failed */
@@ -21,8 +23,8 @@ export interface InsertBlockResult {
  *
  * Supports inserting various block types:
  * - paragraph: Regular text paragraph
- * - heading: Heading block (specify tag: h1-h6 in properties)
- * - code: Code block (specify language in properties)
+ * - heading: Heading block (specify tag: h1-h6 in metadata)
+ * - code: Code block (specify language in metadata)
  * - quote: Blockquote
  * - list/listitem: List blocks
  */
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js
index 6a5cf7f..71eb5a5 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js
@@ -4,14 +4,14 @@
  * MIT License
  */
 import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { insertBlockParamsSchema, } from '../schemas/insertBlock.js';
+import { insertBlockParamsSchema, } from '../schemas/insertBlock';
 /**
  * Insert block operation - adds a new block to a Lexical document
  *
  * Supports inserting various block types:
  * - paragraph: Regular text paragraph
- * - heading: Heading block (specify tag: h1-h6 in properties)
- * - code: Code block (specify language in properties)
+ * - heading: Heading block (specify tag: h1-h6 in metadata)
+ * - code: Code block (specify language in metadata)
  * - quote: Blockquote
  * - list/listitem: List blocks
  */
@@ -20,13 +20,19 @@ export const insertBlockOperation = {
     async execute(params, context) {
         // Validate params using Zod
         const validatedParams = validateWithZod(insertBlockParamsSchema, params, 'insertBlock');
-        const { afterId, type, source, properties } = validatedParams;
+        const { afterId, type, source, metadata } = validatedParams;
         const { documentId } = context;
         // Validate context
         if (!documentId) {
             throw new Error('Document ID is required for insertBlock operation. ' +
                 'Ensure the tool execution context includes a valid documentId.');
         }
+        // Default metadata for jupyter-cell blocks when metadata is missing
+        // This handles cases where agents forget to include metadata
+        const finalMetadata = type === 'jupyter-cell' &&
+            (!metadata || Object.keys(metadata).length === 0)
+            ? { language: 'python' }
+            : metadata;
         // Ensure executor is available
         if (!context.executor) {
             throw new Error('Executor is required for insertBlock operation. ' +
@@ -35,10 +41,10 @@ export const insertBlockOperation = {
         try {
             // Call executor with individual parameters (matches notebook pattern)
             // The state method will handle creating the LexicalBlock object
-            await context.executor.execute(this.name, {
+            const result = await context.executor.execute(this.name, {
                 type,
                 source,
-                properties,
+                metadata: finalMetadata,
                 afterId,
             });
             const message = afterId === 'TOP'
@@ -48,6 +54,7 @@ export const insertBlockOperation = {
                     : `Block of type '${type}' inserted after block '${afterId}'`;
             return {
                 success: true,
+                blockId: result?.blockId,
                 message,
             };
         }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js.map
index 8d80d58..6593522 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js.map
@@ -1 +1 @@
-{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAgBhC;;;;;;;;;GASG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,eAAe,CAAC;QAC9D,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,qDAAqD;gBACnD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sEAAsE;YACtE,gEAAgE;YAChE,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxC,IAAI;gBACJ,MAAM;gBACN,UAAU;gBACV,OAAO;aACR,CAAC,CAAC;YAEH,MAAM,OAAO,GACX,OAAO,KAAK,KAAK;gBACf,CAAC,CAAC,kBAAkB,IAAI,6CAA6C;gBACrE,CAAC,CAAC,OAAO,KAAK,QAAQ;oBACpB,CAAC,CAAC,kBAAkB,IAAI,uCAAuC;oBAC/D,CAAC,CAAC,kBAAkB,IAAI,2BAA2B,OAAO,GAAG,CAAC;YAEpE,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,OAAO;aACR,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
+{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAmBhC;;;;;;;;;GASG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,eAAe,CAAC;QAC5D,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,qDAAqD;gBACnD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,oEAAoE;QACpE,6DAA6D;QAC7D,MAAM,aAAa,GACjB,IAAI,KAAK,cAAc;YACvB,CAAC,CAAC,QAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;YAC/C,CAAC,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE;YACxB,CAAC,CAAC,QAAQ,CAAC;QAEf,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sEAAsE;YACtE,gEAAgE;YAChE,MAAM,MAAM,GAAQ,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBAC5D,IAAI;gBACJ,MAAM;gBACN,QAAQ,EAAE,aAAa;gBACvB,OAAO;aACR,CAAC,CAAC;YAEH,MAAM,OAAO,GACX,OAAO,KAAK,KAAK;gBACf,CAAC,CAAC,kBAAkB,IAAI,6CAA6C;gBACrE,CAAC,CAAC,OAAO,KAAK,QAAQ;oBACpB,CAAC,CAAC,kBAAkB,IAAI,uCAAuC;oBAC/D,CAAC,CAAC,kBAAkB,IAAI,2BAA2B,OAAO,GAAG,CAAC;YAEpE,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,OAAO,EAAE,MAAM,EAAE,OAAO;gBACxB,OAAO;aACR,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.d.ts
index 88ce07b..cb44768 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.d.ts
@@ -7,7 +7,7 @@
  * @module tools/core/operations/listAvailableBlocks
  */
 import type { ToolOperation } from '../core/interfaces';
-import { type ListAvailableBlocksParams, type BlockCategory } from '../schemas/listAvailableBlocks';
+import { type ListAvailableBlocksParams } from '../schemas/listAvailableBlocks';
 /**
  * Example block usage
  */
@@ -16,19 +16,17 @@ export interface BlockExample {
     type: string;
     /** Example source code or text content */
     source: string;
-    /** Example properties/metadata */
-    properties?: Record<string, unknown>;
+    /** Example metadata (aligned with Jupyter format) */
+    metadata?: Record<string, unknown>;
 }
 /**
  * Schema for a single block type
  */
 export interface BlockTypeSchema {
-    /** Block type identifier */
+    /** Block type identifier - use this value when inserting blocks */
     type: string;
     /** Human-readable display name */
     displayName: string;
-    /** Block category */
-    category: BlockCategory;
     /** Description of what this block does */
     description: string;
     /** Required properties for this block type */
@@ -57,8 +55,6 @@ export interface ListAvailableBlocksResult {
     types?: BlockTypeSchema[];
     /** Number of available block types */
     count?: number;
-    /** Categories available */
-    categories?: BlockCategory[];
     /** Error message if operation failed */
     error?: string;
 }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js
index 19c3c40..d23805b 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { listAvailableBlocksParamsSchema, } from '../schemas/listAvailableBlocks.js';
+import { listAvailableBlocksParamsSchema, } from '../schemas/listAvailableBlocks';
 /**
  * Default Lexical block types supported by the editor
  *
@@ -15,7 +15,6 @@ const DEFAULT_BLOCK_TYPES = [
     {
         type: 'paragraph',
         displayName: 'Paragraph',
-        category: 'text',
         description: 'A regular paragraph block for text content. Use plain text in source field - do NOT include markdown syntax.',
         canContainChildren: true,
         example: {
@@ -27,7 +26,6 @@ const DEFAULT_BLOCK_TYPES = [
     {
         type: 'heading',
         displayName: 'Heading',
-        category: 'heading',
         description: 'A semantic HTML heading block (NOT markdown). Use plain text in source field - do NOT include markdown syntax like # or ##. Specify heading level (h1-h6) via the tag property.',
         requiredProperties: ['tag'],
         optionalProperties: {
@@ -42,14 +40,13 @@ const DEFAULT_BLOCK_TYPES = [
         example: {
             type: 'heading',
             source: 'Introduction',
-            properties: { tag: 'h1' },
+            metadata: { tag: 'h1' },
         },
     },
     // Quote blocks
     {
         type: 'quote',
         displayName: 'Blockquote',
-        category: 'text',
         description: 'A blockquote for highlighting quoted text',
         canContainChildren: true,
         example: {
@@ -61,7 +58,6 @@ const DEFAULT_BLOCK_TYPES = [
     {
         type: 'list',
         displayName: 'List',
-        category: 'list',
         description: 'A list container supporting bullet or numbered items. Provide items as newline-separated text in the source field - each line becomes a separate list item automatically.',
         optionalProperties: {
             listType: {
@@ -80,14 +76,13 @@ const DEFAULT_BLOCK_TYPES = [
         example: {
             type: 'list',
             source: 'Apple\nBanana\nTangerine',
-            properties: { listType: 'number', start: 1 },
+            metadata: { listType: 'number', start: 1 },
         },
     },
     // Horizontal rule blocks
     {
         type: 'horizontalrule',
         displayName: 'Horizontal Rule',
-        category: 'text',
         description: 'A horizontal divider line for visually separating sections of content. Source field should be empty or omitted.',
         canContainChildren: false,
         example: {
@@ -99,7 +94,6 @@ const DEFAULT_BLOCK_TYPES = [
     {
         type: 'jupyter-cell',
         displayName: 'Jupyter Code Cell',
-        category: 'jupyter',
         description: 'An executable Jupyter code cell integrated into the document. RECOMMENDED: Use this for executable code (Python, JavaScript, etc.) instead of static code blocks, as it allows users to run code and see outputs directly in the document.',
         optionalProperties: {
             language: {
@@ -118,14 +112,13 @@ const DEFAULT_BLOCK_TYPES = [
         example: {
             type: 'jupyter-cell',
             source: "import pandas as pd\ndf = pd.DataFrame({'A': [1, 2, 3]})\ndf.head()",
-            properties: { language: 'python' },
+            metadata: { language: 'python' },
         },
     },
     // Code blocks (static, non-executable)
     {
         type: 'code',
         displayName: 'Code Block',
-        category: 'code',
         description: 'A static code block for displaying code without execution. Use this ONLY for non-executable code like SQL queries, configuration files, or pseudocode. For executable Python/JavaScript code, prefer jupyter-cell instead.',
         optionalProperties: {
             language: {
@@ -139,15 +132,14 @@ const DEFAULT_BLOCK_TYPES = [
         example: {
             type: 'code',
             source: 'SELECT * FROM users WHERE active = true;',
-            properties: { language: 'sql' },
+            metadata: { language: 'sql' },
         },
     },
     // Equation blocks
     {
         type: 'equation',
         displayName: 'Equation',
-        category: 'media',
-        description: 'A LaTeX equation block for mathematical notation. Use LaTeX syntax in the source field. Equations are always displayed as centered display equations (not inline). Do NOT include properties.inline - it is always false.',
+        description: 'A LaTeX equation block for mathematical notation. IMPORTANT: Use type: "equation" NOT type: "media". The category is "media" but you must use the block type "equation" when inserting. Use LaTeX syntax in the source field. Equations are always displayed as centered display equations (not inline). Do NOT include metadata.inline - it is always false.',
         optionalProperties: {
             equation: {
                 type: 'string',
@@ -159,7 +151,116 @@ const DEFAULT_BLOCK_TYPES = [
         example: {
             type: 'equation',
             source: 'E = mc^2',
-            properties: {},
+            metadata: {},
+        },
+    },
+    // YouTube video blocks
+    {
+        type: 'youtube',
+        displayName: 'YouTube Video',
+        description: 'Embed a YouTube video. The source field is OPTIONAL - if empty or omitted, a default example video is automatically used. To embed a specific video, put the 11-character video ID in source (extract from URLs like youtube.com/watch?v=VIDEO_ID). Examples: Default: { type: "youtube", source: "", metadata: {} }. Custom: { type: "youtube", source: "dQw4w9WgXcQ", metadata: {} }.',
+        requiredProperties: [],
+        optionalProperties: {},
+        canContainChildren: false,
+        isExecutable: false,
+        example: {
+            type: 'youtube',
+            source: '',
+            metadata: {},
+        },
+    },
+    // Excalidraw drawing blocks
+    // DISABLED: Excalidraw blocks are read-only. They can be viewed with readAllBlocks but not inserted via agent tools.
+    // {
+    //   type: 'excalidraw',
+    //   displayName: 'Excalidraw Drawing',
+    //   description:
+    //     'Interactive drawing canvas for diagrams and sketches using Excalidraw. IMPORTANT: Use type: "excalidraw" NOT type: "media". The category is "media" but you must use the block type "excalidraw" when inserting.',
+    //   optionalProperties: {
+    //     data: {
+    //       type: 'string',
+    //       description: 'Excalidraw JSON data (default: "[]" for empty canvas)',
+    //       default: '[]',
+    //     },
+    //     width: {
+    //       type: 'number',
+    //       description: 'Canvas width in pixels',
+    //     },
+    //     height: {
+    //       type: 'number',
+    //       description: 'Canvas height in pixels',
+    //     },
+    //   },
+    //   canContainChildren: false,
+    //   isExecutable: false,
+    //   example: {
+    //     type: 'excalidraw',
+    //     source: '',
+    //     metadata: { data: '[]' },
+    //   },
+    // },
+    // Table blocks
+    {
+        type: 'table',
+        displayName: 'Table',
+        description: 'Data table with rows and columns. Use type: "table" when inserting. THREE ways to populate: (1) RECOMMENDED - metadata.data as 2D array: {type: "table", source: "", metadata: {data: [["A", "B"], ["C", "D"]]}} creates a 2x2 table with data. (2) source as markdown table: {type: "table", source: "A | B\\n---|---\\nC | D", metadata: {}} is automatically parsed. (3) Empty table with dimensions: {type: "table", source: "", metadata: {rows: 3, columns: 4}} creates empty 3x4 table. When using data or markdown, rows/columns are auto-detected and should NOT be specified.',
+        optionalProperties: {
+            data: {
+                type: 'array',
+                description: 'RECOMMENDED: Table cell contents as 2D array of strings. Example: [["Name", "Age"], ["Alice", "30"], ["Bob", "25"]] creates a 3x2 table. First row becomes headers if includeHeaders is true (default). Rows and columns auto-detected.',
+            },
+            rows: {
+                type: 'number',
+                description: 'Number of rows for EMPTY table (default: 2). Ignored if data or markdown source provided.',
+                default: 2,
+            },
+            columns: {
+                type: 'number',
+                description: 'Number of columns for EMPTY table (default: 2). Ignored if data or markdown source provided.',
+                default: 2,
+            },
+            includeHeaders: {
+                type: 'boolean',
+                description: 'First row becomes headers (default: true). Applies to all creation methods.',
+                default: true,
+            },
+        },
+        canContainChildren: true,
+        isExecutable: false,
+        example: {
+            type: 'table',
+            source: '',
+            metadata: {
+                data: [
+                    ['Name', 'Age'],
+                    ['Alice', '30'],
+                    ['Bob', '25'],
+                ],
+            },
+        },
+    },
+    // Collapsible section blocks
+    {
+        type: 'collapsible',
+        displayName: 'Collapsible Section',
+        description: 'Expandable/collapsible section with title header. IMPORTANT: Use type: "collapsible" NOT type: "structure". The title text goes in the source field. EXAMPLE: {type: "collapsible", source: "My Title", metadata: {open: true}}. To add content INSIDE collapsible: (1) Insert collapsible first, get block_id from response. (2) Insert child blocks with metadata.collapsible = collapsible_block_id. EXAMPLE: insertBlock({afterId: "6", type: "paragraph", source: "text", metadata: {collapsible: "6"}}) puts paragraph INSIDE collapsible "6".',
+        optionalProperties: {
+            open: {
+                type: 'boolean',
+                description: 'Whether the section is expanded (default: true)',
+                default: true,
+            },
+            collapsible: {
+                type: 'string',
+                description: 'ONLY for insertBlock when adding content INSIDE a collapsible. Set to block_id of the collapsible container.',
+            },
+        },
+        canContainChildren: true,
+        isExecutable: false,
+        example: {
+            type: 'collapsible',
+            source: 'Section Title',
+            metadata: { open: true },
         },
     },
 ];
@@ -188,45 +289,35 @@ const DEFAULT_BLOCK_TYPES = [
  */
 export const listAvailableBlocksOperation = {
     name: 'listAvailableBlocks',
-    async execute(params, context) {
+    async execute(params, _context) {
+        console.log('[listAvailableBlocks]  execute CALLED');
+        console.log('[listAvailableBlocks] Params:', params);
+        console.log('[listAvailableBlocks] Context:', _context);
         // Validate params using Zod
+        console.log('[listAvailableBlocks]  Validating params...');
         const validatedParams = validateWithZod(listAvailableBlocksParamsSchema, params || {}, 'listAvailableBlocks');
-        const { category } = validatedParams;
-        const { documentId } = context;
+        console.log('[listAvailableBlocks]  Validated params:', validatedParams);
         try {
+            // Use static block type definitions
+            // This operation returns schema metadata, not runtime state
+            console.log('[listAvailableBlocks]  Using DEFAULT_BLOCK_TYPES');
             let types = DEFAULT_BLOCK_TYPES;
-            // Try to get dynamically registered types from the document
-            // This is optional - if no documentId or executor, we fall back to DEFAULT_BLOCK_TYPES
-            if (documentId && context.executor) {
-                try {
-                    // Call executor to get registered nodes
-                    const registeredNodes = (await context.executor.execute('listAvailableBlocks', {}));
-                    if (registeredNodes && registeredNodes.length > 0) {
-                        // Lexical nodes have types like: "paragraph", "heading", "code", "quote",
-                        // "list", "listitem", "table", "equation", "image", "youtube", "jupyter-cell"
-                        const registeredTypes = new Set(registeredNodes.map((node) => node.type.toLowerCase()));
-                        // Filter to only schemas for registered node types
-                        types = DEFAULT_BLOCK_TYPES.filter(schema => registeredTypes.has(schema.type.toLowerCase()));
-                    }
-                }
-                catch (error) {
-                    console.warn('Failed to get dynamic block types, using static list:', error);
-                }
-            }
-            // Filter by category if specified
-            if (category) {
-                types = types.filter(block => block.category === category);
+            // Filter by type if specified
+            const requestedType = validatedParams.type || 'all';
+            console.log('[listAvailableBlocks]  Requested type:', requestedType);
+            if (requestedType !== 'all') {
+                types = types.filter(t => t.type === requestedType);
+                console.log('[listAvailableBlocks]  Filtered to', types.length, 'type(s)');
             }
-            // Extract unique categories
-            const categories = Array.from(new Set(types.map(block => block.category)));
+            console.log('[listAvailableBlocks]  Returning result with', types.length, 'types');
             return {
                 success: true,
                 types,
                 count: types.length,
-                categories,
             };
         }
         catch (error) {
+            console.error('[listAvailableBlocks]  ERROR:', error);
             const errorMessage = error instanceof Error ? error.message : String(error);
             throw new Error(`Failed to list available blocks: ${errorMessage}`);
         }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js.map
index c6f8e2d..b42e7a5 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js.map
@@ -1 +1 @@
-{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/operations/listAvailableBlocks.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/operations/listAvailableBlocks.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js
index 5c1c7ab..6464f84 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { readAllBlocksParamsSchema, } from '../schemas/readAllBlocks.js';
+import { readAllBlocksParamsSchema, } from '../schemas/readAllBlocks';
 /**
  * Read all blocks operation - retrieves all blocks from a Lexical document
  *
@@ -32,6 +32,7 @@ export const readAllBlocksOperation = {
         }
         try {
             // Call executor with format parameter
+            // NOTE: Don't pass 'id' - DefaultExecutor injects it automatically
             const blocks = (await context.executor.execute(this.name, {
                 format,
             }));
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js.map
index fc1a517..debca86 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js.map
@@ -1 +1 @@
-{"version":3,"file":"readAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/operations/readAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAUH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,yBAAyB,GAE1B,MAAM,0BAA0B,CAAC;AAmBlC;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAG/B;IACF,IAAI,EAAE,eAAe;IAErB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,yBAAgC,EAChC,MAAM,IAAI,EAAE,EACZ,eAAe,CACO,CAAC;QAEzB,MAAM,EAAE,MAAM,GAAG,OAAO,EAAE,GAAG,eAAe,CAAC;QAC7C,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,uDAAuD;gBACrD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,oDAAoD;gBAClD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sCAAsC;YACtC,MAAM,MAAM,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxD,MAAM;aACP,CAAC,CAAkC,CAAC;YAErC,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,MAAM;gBACN,UAAU,EAAE,MAAM,CAAC,MAAM;aAC1B,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,8BAA8B,YAAY,EAAE,CAAC,CAAC;QAChE,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
+{"version":3,"file":"readAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/operations/readAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAUH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,yBAAyB,GAE1B,MAAM,0BAA0B,CAAC;AAmBlC;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAG/B;IACF,IAAI,EAAE,eAAe;IAErB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,yBAAgC,EAChC,MAAM,IAAI,EAAE,EACZ,eAAe,CACO,CAAC;QAEzB,MAAM,EAAE,MAAM,GAAG,OAAO,EAAE,GAAG,eAAe,CAAC;QAC7C,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,uDAAuD;gBACrD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,oDAAoD;gBAClD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sCAAsC;YACtC,mEAAmE;YACnE,MAAM,MAAM,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxD,MAAM;aACP,CAAC,CAAkC,CAAC;YAErC,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,MAAM;gBACN,UAAU,EAAE,MAAM,CAAC,MAAM;aAC1B,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,8BAA8B,YAAY,EAAE,CAAC,CAAC;QAChE,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js
index a0c0ffc..9768cf7 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js
@@ -3,9 +3,9 @@
  *
  * MIT License
  */
-import { readAllBlocksOperation } from './readAllBlocks.js';
+import { readAllBlocksOperation } from './readAllBlocks';
 import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { readBlockParamsSchema, } from '../schemas/readBlock.js';
+import { readBlockParamsSchema, } from '../schemas/readBlock';
 /**
  * Read block operation - retrieves a single block from a Lexical document
  *
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js
index c48416c..618cc4c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js
@@ -4,7 +4,7 @@
  * MIT License
  */
 import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { runAllBlocksParamsSchema, } from '../schemas/runAllBlocks.js';
+import { runAllBlocksParamsSchema, } from '../schemas/runAllBlocks';
 /**
  * Run all blocks operation - executes all executable blocks in a Lexical document
  *
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js
index 65e7361..7c16821 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js
@@ -3,9 +3,9 @@
  *
  * MIT License
  */
-import { readAllBlocksOperation } from './readAllBlocks.js';
+import { readAllBlocksOperation } from './readAllBlocks';
 import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { runBlockParamsSchema } from '../schemas/runBlock.js';
+import { runBlockParamsSchema } from '../schemas/runBlock';
 /**
  * Run block operation - executes a single block in a Lexical document
  *
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.d.ts
index a201a40..9bfc4b2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.d.ts
@@ -21,8 +21,8 @@ export interface UpdateBlockResult {
 /**
  * Update block operation - modifies an existing block in a Lexical document
  *
- * Allows updating block type, source content, and/or properties.
- * At least one of type, source, or properties must be provided.
+ * Allows updating block type, source content, and/or metadata.
+ * At least one of type, source, or metadata must be provided.
  *
  * Uses documentId as the universal identifier (matches Lexical component).
  */
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js
index 7ed3af2..07b6d05 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js
@@ -4,12 +4,12 @@
  * MIT License
  */
 import { validateWithZod } from '@datalayer/jupyter-react/tools';
-import { updateBlockParamsSchema, } from '../schemas/updateBlock.js';
+import { updateBlockParamsSchema, } from '../schemas/updateBlock';
 /**
  * Update block operation - modifies an existing block in a Lexical document
  *
- * Allows updating block type, source content, and/or properties.
- * At least one of type, source, or properties must be provided.
+ * Allows updating block type, source content, and/or metadata.
+ * At least one of type, source, or metadata must be provided.
  *
  * Uses documentId as the universal identifier (matches Lexical component).
  */
@@ -18,13 +18,11 @@ export const updateBlockOperation = {
     async execute(params, context) {
         // Validate params using Zod
         const validatedParams = validateWithZod(updateBlockParamsSchema, params, 'updateBlock');
-        const { id, type, source, properties } = validatedParams;
+        const { id, type, source, metadata } = validatedParams;
         const { documentId } = context;
         // Validate that at least one update field is provided
-        if (type === undefined &&
-            source === undefined &&
-            properties === undefined) {
-            throw new Error('At least one of type, source, or properties must be provided for updateBlock operation.');
+        if (type === undefined && source === undefined && metadata === undefined) {
+            throw new Error('At least one of type, source, or metadata must be provided for updateBlock operation.');
         }
         // Validate context
         if (!documentId) {
@@ -43,12 +41,12 @@ export const updateBlockOperation = {
                 blockId: id,
                 type,
                 source,
-                properties,
+                metadata,
             });
             const updatedFields = [
                 type !== undefined && 'type',
                 source !== undefined && 'source',
-                properties !== undefined && 'properties',
+                metadata !== undefined && 'metadata',
             ]
                 .filter(Boolean)
                 .join(', ');
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js.map
index b1b7308..bc6c7da 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js.map
@@ -1 +1 @@
-{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAmBhC;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,eAAe,CAAC;QACzD,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,sDAAsD;QACtD,IACE,IAAI,KAAK,SAAS;YAClB,MAAM,KAAK,SAAS;YACpB,UAAU,KAAK,SAAS,EACxB,CAAC;YACD,MAAM,IAAI,KAAK,CACb,yFAAyF,CAC1F,CAAC;QACJ,CAAC;QAED,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,qDAAqD;gBACnD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sEAAsE;YACtE,+CAA+C;YAC/C,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxC,OAAO,EAAE,EAAE;gBACX,IAAI;gBACJ,MAAM;gBACN,UAAU;aACX,CAAC,CAAC;YAEH,MAAM,aAAa,GAAG;gBACpB,IAAI,KAAK,SAAS,IAAI,MAAM;gBAC5B,MAAM,KAAK,SAAS,IAAI,QAAQ;gBAChC,UAAU,KAAK,SAAS,IAAI,YAAY;aACzC;iBACE,MAAM,CAAC,OAAO,CAAC;iBACf,IAAI,CAAC,IAAI,CAAC,CAAC;YACd,MAAM,OAAO,GAAG,UAAU,EAAE,2BAA2B,aAAa,GAAG,CAAC;YAExE,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,EAAE,EAAE,EAAE;gBACN,OAAO;aACR,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
+{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAmBhC;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,eAAe,CAAC;QACvD,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,sDAAsD;QACtD,IAAI,IAAI,KAAK,SAAS,IAAI,MAAM,KAAK,SAAS,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YACzE,MAAM,IAAI,KAAK,CACb,uFAAuF,CACxF,CAAC;QACJ,CAAC;QAED,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,qDAAqD;gBACnD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sEAAsE;YACtE,+CAA+C;YAC/C,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxC,OAAO,EAAE,EAAE;gBACX,IAAI;gBACJ,MAAM;gBACN,QAAQ;aACT,CAAC,CAAC;YAEH,MAAM,aAAa,GAAG;gBACpB,IAAI,KAAK,SAAS,IAAI,MAAM;gBAC5B,MAAM,KAAK,SAAS,IAAI,QAAQ;gBAChC,QAAQ,KAAK,SAAS,IAAI,UAAU;aACrC;iBACE,MAAM,CAAC,OAAO,CAAC;iBACf,IAAI,CAAC,IAAI,CAAC,CAAC;YACd,MAAM,OAAO,GAAG,UAAU,EAAE,2BAA2B,aAAa,GAAG,CAAC;YAExE,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,EAAE,EAAE,EAAE;gBACN,OAAO;aACR,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.d.ts
deleted file mode 100644
index 96836f8..0000000
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.d.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-/**
- * Zod schema for deleteBlock operation parameters.
- *
- * @module tools/schemas/deleteBlock
- */
-import { z } from 'zod';
-export declare const deleteBlockParamsSchema: z.ZodObject<{
-    ids: z.ZodArray<z.ZodString>;
-}, z.core.$strip>;
-export type DeleteBlockParams = z.infer<typeof deleteBlockParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js.map
deleted file mode 100644
index 7e222ea..0000000
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js.map
+++ /dev/null
@@ -1 +0,0 @@
-{"version":3,"file":"deleteBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/deleteBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,GAAG,EAAE,CAAC;SACH,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SACxB,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,CAAC,8BAA8B,CAAC;CAC5C,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.d.ts
new file mode 100644
index 0000000..0a16e5a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.d.ts
@@ -0,0 +1,10 @@
+/**
+ * Zod schema for deleteBlocks operation parameters.
+ *
+ * @module tools/schemas/deleteBlocks
+ */
+import { z } from 'zod';
+export declare const deleteBlocksParamsSchema: z.ZodObject<{
+    ids: z.ZodArray<z.ZodString>;
+}, z.core.$strip>;
+export type DeleteBlocksParams = z.infer<typeof deleteBlocksParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.js
similarity index 54%
rename from node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js
rename to node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.js
index c63318c..f539451 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.js
@@ -4,15 +4,15 @@
  * MIT License
  */
 /**
- * Zod schema for deleteBlock operation parameters.
+ * Zod schema for deleteBlocks operation parameters.
  *
- * @module tools/schemas/deleteBlock
+ * @module tools/schemas/deleteBlocks
  */
 import { z } from 'zod';
-export const deleteBlockParamsSchema = z.object({
+export const deleteBlocksParamsSchema = z.object({
     ids: z
         .array(z.string().min(1))
         .min(1)
         .describe('Array of block IDs to delete'),
 });
-//# sourceMappingURL=deleteBlock.js.map
\ No newline at end of file
+//# sourceMappingURL=deleteBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.js.map
new file mode 100644
index 0000000..19186b6
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"deleteBlocks.js","sourceRoot":"","sources":["../../../src/tools/schemas/deleteBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,wBAAwB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC/C,GAAG,EAAE,CAAC;SACH,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SACxB,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,CAAC,8BAA8B,CAAC;CAC5C,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.d.ts
index 3fa9a8a..6f19967 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.d.ts
@@ -5,7 +5,7 @@
  */
 export * from './insertBlock';
 export * from './updateBlock';
-export * from './deleteBlock';
+export * from './deleteBlocks';
 export * from './readBlock';
 export * from './readAllBlocks';
 export * from './runBlock';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js
index b4b791a..2064c54 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js
@@ -8,13 +8,13 @@
  *
  * @module tools/schemas
  */
-export * from './insertBlock.js';
-export * from './updateBlock.js';
-export * from './deleteBlock.js';
-export * from './readBlock.js';
-export * from './readAllBlocks.js';
-export * from './runBlock.js';
-export * from './runAllBlocks.js';
-export * from './executeCode.js';
-export * from './listAvailableBlocks.js';
+export * from './insertBlock';
+export * from './updateBlock';
+export * from './deleteBlocks';
+export * from './readBlock';
+export * from './readAllBlocks';
+export * from './runBlock';
+export * from './runAllBlocks';
+export * from './executeCode';
+export * from './listAvailableBlocks';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js.map
index 988ef20..56f4423 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/schemas/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,aAAa,CAAC;AAC5B,cAAc,iBAAiB,CAAC;AAChC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,eAAe,CAAC;AAC9B,cAAc,uBAAuB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/schemas/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,iBAAiB,CAAC;AAChC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,eAAe,CAAC;AAC9B,cAAc,uBAAuB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.d.ts
index 4c645ef..195156a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.d.ts
@@ -8,6 +8,6 @@ export declare const insertBlockParamsSchema: z.ZodObject<{
     afterId: z.ZodString;
     type: z.ZodString;
     source: z.ZodString;
-    properties: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>;
+    metadata: z.ZodPipe<z.ZodTransform<any, unknown>, z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>>;
 }, z.core.$strip>;
 export type InsertBlockParams = z.infer<typeof insertBlockParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js
index 337f380..8eee890 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js
@@ -16,11 +16,31 @@ export const insertBlockParamsSchema = z.object({
     type: z
         .string()
         .min(1)
-        .describe("Block type (e.g., 'paragraph', 'heading', 'code', 'list-item')"),
+        .describe("Block type (e.g., 'paragraph', 'heading', 'code', 'jupyter-cell', 'table', 'collapsible', 'list-item')"),
     source: z.string().describe('Block source content'),
-    properties: z
-        .record(z.string(), z.unknown())
-        .optional()
-        .describe('Optional block metadata and properties'),
+    metadata: z.preprocess(val => {
+        // Convert empty strings to undefined (common LLM mistake)
+        if (val === '' || val === null)
+            return undefined;
+        // If it's a string, try to parse it as JSON (LLMs often stringify metadata)
+        if (typeof val === 'string') {
+            try {
+                const parsed = JSON.parse(val);
+                // Only accept objects, not arrays or primitives
+                if (typeof parsed === 'object' && !Array.isArray(parsed)) {
+                    return parsed;
+                }
+                return undefined;
+            }
+            catch {
+                // Not valid JSON, convert to undefined
+                return undefined;
+            }
+        }
+        // Convert non-object values to undefined
+        if (typeof val !== 'object' || Array.isArray(val))
+            return undefined;
+        return val;
+    }, z.record(z.string(), z.unknown()).optional().describe('Optional block metadata (aligned with Jupyter format). CRITICAL: To insert blocks INSIDE a collapsible, set metadata.collapsible to the RETURNED BLOCK ID from inserting the collapsible container (a specific ID like "6", NOT position markers like "TOP" or "BOTTOM"). Example: {collapsible: "6"} inserts block inside collapsible with ID "6". Position markers (TOP/BOTTOM) are ONLY for the afterId parameter, never for metadata.collapsible.')),
 });
 //# sourceMappingURL=insertBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js.map
index 3963788..4be283c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js.map
@@ -1 +1 @@
-{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,OAAO,EAAE,CAAC;SACP,MAAM,EAAE;SACR,QAAQ,CACP,yFAAyF,CAC1F;IACH,IAAI,EAAE,CAAC;SACJ,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,CAAC,gEAAgE,CAAC;IAC7E,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,sBAAsB,CAAC;IACnD,UAAU,EAAE,CAAC;SACV,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;SAC/B,QAAQ,EAAE;SACV,QAAQ,CAAC,wCAAwC,CAAC;CACtD,CAAC,CAAC"}
\ No newline at end of file
+{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,OAAO,EAAE,CAAC;SACP,MAAM,EAAE;SACR,QAAQ,CACP,yFAAyF,CAC1F;IACH,IAAI,EAAE,CAAC;SACJ,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,CACP,wGAAwG,CACzG;IACH,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,sBAAsB,CAAC;IACnD,QAAQ,EAAE,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;QAC3B,0DAA0D;QAC1D,IAAI,GAAG,KAAK,EAAE,IAAI,GAAG,KAAK,IAAI;YAAE,OAAO,SAAS,CAAC;QAEjD,4EAA4E;QAC5E,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;YAC5B,IAAI,CAAC;gBACH,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC/B,gDAAgD;gBAChD,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;oBACzD,OAAO,MAAM,CAAC;gBAChB,CAAC;gBACD,OAAO,SAAS,CAAC;YACnB,CAAC;YAAC,MAAM,CAAC;gBACP,uCAAuC;gBACvC,OAAO,SAAS,CAAC;YACnB,CAAC;QACH,CAAC;QAED,yCAAyC;QACzC,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;YAAE,OAAO,SAAS,CAAC;QACpE,OAAO,GAAG,CAAC;IACb,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,ubAAub,CAAC,CAAC;CACnf,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.d.ts
index d33038f..3cb04b4 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.d.ts
@@ -4,25 +4,7 @@
  * @module tools/schemas/listAvailableBlocks
  */
 import { z } from 'zod';
-export declare const blockCategorySchema: z.ZodEnum<{
-    code: "code";
-    table: "table";
-    list: "list";
-    media: "media";
-    text: "text";
-    heading: "heading";
-    jupyter: "jupyter";
-}>;
 export declare const listAvailableBlocksParamsSchema: z.ZodObject<{
-    category: z.ZodOptional<z.ZodEnum<{
-        code: "code";
-        table: "table";
-        list: "list";
-        media: "media";
-        text: "text";
-        heading: "heading";
-        jupyter: "jupyter";
-    }>>;
+    type: z.ZodPipe<z.ZodTransform<{}, unknown>, z.ZodDefault<z.ZodString>>;
 }, z.core.$strip>;
-export type BlockCategory = z.infer<typeof blockCategorySchema>;
 export type ListAvailableBlocksParams = z.infer<typeof listAvailableBlocksParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js
index 6755506..29f2286 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js
@@ -9,18 +9,12 @@
  * @module tools/schemas/listAvailableBlocks
  */
 import { z } from 'zod';
-export const blockCategorySchema = z.enum([
-    'text',
-    'heading',
-    'code',
-    'media',
-    'list',
-    'table',
-    'jupyter',
-]);
 export const listAvailableBlocksParamsSchema = z.object({
-    category: blockCategorySchema
-        .optional()
-        .describe('Optional category filter for block types'),
+    type: z.preprocess(val => {
+        // Always default to 'all' if undefined, null, or empty string
+        if (val === undefined || val === null || val === '')
+            return 'all';
+        return val;
+    }, z.string().default('all').describe('Block type to filter (e.g., "youtube", "table", "paragraph") or "all" to return all available blocks. Default: "all".')),
 });
 //# sourceMappingURL=listAvailableBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js.map
index b7d3b0c..7324b49 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js.map
@@ -1 +1 @@
-{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/schemas/listAvailableBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAAC,CAAC,IAAI,CAAC;IACxC,MAAM;IACN,SAAS;IACT,MAAM;IACN,OAAO;IACP,MAAM;IACN,OAAO;IACP,SAAS;CACV,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,+BAA+B,GAAG,CAAC,CAAC,MAAM,CAAC;IACtD,QAAQ,EAAE,mBAAmB;SAC1B,QAAQ,EAAE;SACV,QAAQ,CAAC,0CAA0C,CAAC;CACxD,CAAC,CAAC"}
\ No newline at end of file
+{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/schemas/listAvailableBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,+BAA+B,GAAG,CAAC,CAAC,MAAM,CAAC;IACtD,IAAI,EAAE,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;QACvB,8DAA8D;QAC9D,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,KAAK,EAAE;YAAE,OAAO,KAAK,CAAC;QAClE,OAAO,GAAG,CAAC;IACb,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,uHAAuH,CAAC,CAAC;CAChK,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.d.ts
index 1219419..de5e658 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.d.ts
@@ -8,6 +8,6 @@ export declare const updateBlockParamsSchema: z.ZodObject<{
     id: z.ZodString;
     type: z.ZodOptional<z.ZodString>;
     source: z.ZodOptional<z.ZodString>;
-    properties: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>;
+    metadata: z.ZodPipe<z.ZodTransform<any, unknown>, z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>>;
 }, z.core.$strip>;
 export type UpdateBlockParams = z.infer<typeof updateBlockParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js
index 9950791..ecb3e16 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js
@@ -17,9 +17,29 @@ export const updateBlockParamsSchema = z.object({
         .optional()
         .describe("New block type (e.g., 'paragraph', 'heading', 'code', 'list-item')"),
     source: z.string().optional().describe('New block source content'),
-    properties: z
-        .record(z.string(), z.unknown())
-        .optional()
-        .describe('New block metadata and properties'),
+    metadata: z.preprocess(val => {
+        // Convert empty strings to undefined (common LLM mistake)
+        if (val === '' || val === null)
+            return undefined;
+        // If it's a string, try to parse it as JSON (LLMs often stringify metadata)
+        if (typeof val === 'string') {
+            try {
+                const parsed = JSON.parse(val);
+                // Only accept objects, not arrays or primitives
+                if (typeof parsed === 'object' && !Array.isArray(parsed)) {
+                    return parsed;
+                }
+                return undefined;
+            }
+            catch {
+                // Not valid JSON, convert to undefined
+                return undefined;
+            }
+        }
+        // Convert non-object values to undefined
+        if (typeof val !== 'object' || Array.isArray(val))
+            return undefined;
+        return val;
+    }, z.record(z.string(), z.unknown()).optional().describe('New block metadata (aligned with Jupyter format)')),
 });
 //# sourceMappingURL=updateBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js.map
index a43d65d..1465ce4 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js.map
@@ -1 +1 @@
-{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,oBAAoB,CAAC;IACpD,IAAI,EAAE,CAAC;SACJ,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,EAAE;SACV,QAAQ,CACP,oEAAoE,CACrE;IACH,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,0BAA0B,CAAC;IAClE,UAAU,EAAE,CAAC;SACV,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;SAC/B,QAAQ,EAAE;SACV,QAAQ,CAAC,mCAAmC,CAAC;CACjD,CAAC,CAAC"}
\ No newline at end of file
+{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,oBAAoB,CAAC;IACpD,IAAI,EAAE,CAAC;SACJ,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,EAAE;SACV,QAAQ,CACP,oEAAoE,CACrE;IACH,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,0BAA0B,CAAC;IAClE,QAAQ,EAAE,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;QAC3B,0DAA0D;QAC1D,IAAI,GAAG,KAAK,EAAE,IAAI,GAAG,KAAK,IAAI;YAAE,OAAO,SAAS,CAAC;QAEjD,4EAA4E;QAC5E,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;YAC5B,IAAI,CAAC;gBACH,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC/B,gDAAgD;gBAChD,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;oBACzD,OAAO,MAAM,CAAC;gBAChB,CAAC;gBACD,OAAO,SAAS,CAAC;YACnB,CAAC;YAAC,MAAM,CAAC;gBACP,uCAAuC;gBACvC,OAAO,SAAS,CAAC;YACnB,CAAC;QACH,CAAC;QAED,yCAAyC;QACzC,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;YAAE,OAAO,SAAS,CAAC;QACpE,OAAO,GAAG,CAAC;IACb,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,kDAAkD,CAAC,CAAC;CAC9G,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.d.ts
index c0d8b8c..a1f03e5 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.d.ts
@@ -41,6 +41,17 @@ export declare function deleteBlock(editor: LexicalEditor, index: number): void;
  * Update a block in the editor at the specified index.
  */
 export declare function updateBlock(editor: LexicalEditor, index: number, block: LexicalBlock): void;
+/**
+ * Parse markdown formatting from text and convert to Lexical format segments.
+ * Supports: **bold**, *italic*, ***bold+italic***, ~~strikethrough~~, `code`
+ *
+ * @param text - Text potentially containing markdown formatting
+ * @returns Array of {text, format} segments
+ */
+export declare function parseMarkdownFormatting(text: string): Array<{
+    text: string;
+    format: number;
+}>;
 /**
  * Get the count of top-level blocks in the editor.
  */
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js
index b1d0133..3114b3d 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js
@@ -24,6 +24,111 @@ function generatePreview(block) {
     if (block.block_type === 'horizontalrule') {
         return '';
     }
+    // YouTube: show short URL format
+    if (block.block_type === 'youtube') {
+        const videoID = block.metadata?.videoID;
+        return videoID ? `youtu.be/${videoID}` : '(no ID)';
+    }
+    // Excalidraw: show brief description
+    if (block.block_type === 'excalidraw') {
+        const data = block.metadata?.data;
+        if (data) {
+            try {
+                const elements = JSON.parse(data);
+                if (Array.isArray(elements) && elements.length > 0) {
+                    // Extract text snippets
+                    const textElements = elements.filter((el) => el.type === 'text' && el.text);
+                    const textSnippets = textElements
+                        .slice(0, 2)
+                        .map((el) => el.text.trim())
+                        .filter((t) => t.length > 0);
+                    // Count shape types
+                    const shapeTypes = {};
+                    elements.forEach((el) => {
+                        if (el.type &&
+                            el.type !== 'text' &&
+                            el.type !== 'freedraw' &&
+                            el.type !== 'selection') {
+                            shapeTypes[el.type] = (shapeTypes[el.type] || 0) + 1;
+                        }
+                    });
+                    const shapeParts = [];
+                    // Map Excalidraw types to readable names
+                    const typeNames = {
+                        rectangle: 'rect',
+                        ellipse: 'circle',
+                        diamond: 'diamond',
+                        arrow: 'arrow',
+                        line: 'line',
+                    };
+                    Object.entries(shapeTypes).forEach(([type, count]) => {
+                        const name = typeNames[type] || type;
+                        shapeParts.push(count > 1 ? `${count} ${name}s` : `${name}`);
+                    });
+                    // Build description
+                    const parts = [];
+                    if (shapeParts.length > 0) {
+                        parts.push(shapeParts.slice(0, 3).join(', '));
+                    }
+                    if (textSnippets.length > 0) {
+                        const textPart = textSnippets
+                            .map(t => `"${t.length > 15 ? t.slice(0, 15) + '...' : t}"`)
+                            .join(', ');
+                        parts.push(textPart);
+                    }
+                    if (parts.length > 0) {
+                        return parts.join(': ');
+                    }
+                }
+            }
+            catch (e) {
+                // If parsing fails, fall through to show diagram info
+            }
+        }
+        return '(empty diagram)';
+    }
+    // Table: show brief description
+    if (block.block_type === 'table') {
+        const rows = block.metadata?.rows || 0;
+        const columns = block.metadata?.columns || 0;
+        return `${rows}${columns} table`;
+    }
+    // Equation: show brief description
+    if (block.block_type === 'equation') {
+        const equation = block.metadata?.equation || '';
+        const isInline = block.metadata?.inline;
+        const preview = equation.length > 20 ? equation.slice(0, 20) + '...' : equation;
+        return isInline ? `$${preview}$` : `$$${preview}$$`;
+    }
+    // Image: show brief description
+    if (block.block_type === 'image') {
+        const altText = block.metadata?.altText || '';
+        const src = block.metadata?.src;
+        if (altText) {
+            return altText.length > maxLength
+                ? altText.slice(0, maxLength - 3) + '...'
+                : altText;
+        }
+        if (src) {
+            // Extract filename from URL
+            const filename = src.split('/').pop() || src;
+            return filename.length > maxLength
+                ? filename.slice(0, maxLength - 3) + '...'
+                : filename;
+        }
+        return '(image)';
+    }
+    // Collapsible: show title
+    if (block.block_type === 'collapsible') {
+        const metadataTitle = block.metadata?.title;
+        const sourceTitle = Array.isArray(block.source)
+            ? block.source.join(' ')
+            : block.source;
+        const title = metadataTitle || sourceTitle || '';
+        return title.length > maxLength
+            ? title.slice(0, maxLength - 3) + '...'
+            : title || '(untitled)';
+    }
     // Get source as string
     const source = Array.isArray(block.source)
         ? block.source.join('\n')
@@ -76,6 +181,71 @@ export function editorStateToBlocks(editor, format = 'brief') {
                 processedOutputIds.add(child.getKey());
                 continue;
             }
+            // Skip collapsible-title (merged into container)
+            if (childType === 'collapsible-title') {
+                continue;
+            }
+            // Special handling for collapsible-container
+            if (childType === 'collapsible-container') {
+                // 1. Add the container block itself
+                const containerBlock = nodeToBlock(child);
+                if (containerBlock) {
+                    blocks.push(containerBlock);
+                }
+                // 2. Process children inside collapsible-content
+                // eslint-disable-next-line @typescript-eslint/no-explicit-any
+                const containerChildren = child.getChildren?.() || [];
+                const contentNode = containerChildren.find(
+                // eslint-disable-next-line @typescript-eslint/no-explicit-any
+                (c) => c.getType() === 'collapsible-content');
+                if (contentNode) {
+                    const collapsibleId = child.getKey();
+                    // eslint-disable-next-line @typescript-eslint/no-explicit-any
+                    const contentChildren = contentNode.getChildren?.() || [];
+                    for (const contentChild of contentChildren) {
+                        const contentChildType = contentChild.getType();
+                        // Handle jupyter-cell merging inside collapsible
+                        if (contentChildType === 'jupyter-input') {
+                            // Look for paired output in contentChildren
+                            let outputNode = null;
+                            const contentChildIndex = contentChildren.indexOf(contentChild);
+                            for (let j = contentChildIndex + 1; j < contentChildren.length; j++) {
+                                if (contentChildren[j].getType() === 'jupyter-output') {
+                                    outputNode = contentChildren[j];
+                                    processedOutputIds.add(outputNode.getKey());
+                                    break;
+                                }
+                            }
+                            const merged = mergeJupyterNodes(contentChild, outputNode);
+                            if (merged) {
+                                merged.metadata = {
+                                    ...merged.metadata,
+                                    collapsible: collapsibleId,
+                                };
+                                blocks.push(merged);
+                            }
+                        }
+                        else if (contentChildType === 'jupyter-output') {
+                            // Skip if already processed
+                            if (!processedOutputIds.has(contentChild.getKey())) {
+                                processedOutputIds.add(contentChild.getKey());
+                            }
+                        }
+                        else {
+                            // Regular block inside collapsible
+                            const childBlock = nodeToBlock(contentChild);
+                            if (childBlock) {
+                                childBlock.metadata = {
+                                    ...childBlock.metadata,
+                                    collapsible: collapsibleId,
+                                };
+                                blocks.push(childBlock);
+                            }
+                        }
+                    }
+                }
+                continue;
+            }
             // For jupyter-input nodes, find and merge with paired output node
             if (childType === 'jupyter-input') {
                 const inputNode = child;
@@ -102,13 +272,18 @@ export function editorStateToBlocks(editor, format = 'brief') {
             }
         }
     });
-    // Return brief format if requested (block_id, block_type, and preview)
+    // Return brief format if requested (block_id, block_type, preview, collapsible)
     if (format === 'brief') {
-        return blocks.map(block => ({
-            block_id: block.block_id,
-            block_type: block.block_type,
-            preview: generatePreview(block),
-        }));
+        return blocks.map(block => {
+            const briefBlock = {
+                block_id: block.block_id,
+                block_type: block.block_type,
+                preview: generatePreview(block),
+                // Always include collapsible (empty string if not inside collapsible) for consistent TOON output
+                collapsible: block.metadata?.collapsible || '',
+            };
+            return briefBlock;
+        });
     }
     return blocks;
 }
@@ -221,23 +396,45 @@ export function nodeToBlock(node) {
     }
     // Paragraph (default)
     if (type === 'paragraph') {
-        // Check if paragraph contains only an equation child
-        // Equations get wrapped in paragraphs by the EquationsPlugin
+        // Check if paragraph contains only special child nodes that get wrapped
+        // Equations and Excalidraw get wrapped in paragraphs by their respective plugins
         // eslint-disable-next-line @typescript-eslint/no-explicit-any
         const children = 'getChildren' in node ? node.getChildren() : [];
-        if (children.length === 1 && children[0].getType() === 'equation') {
-            // Extract the equation child instead of the paragraph
-            const equationNode = children[0];
-            // eslint-disable-next-line @typescript-eslint/no-explicit-any
-            const eqAny = equationNode;
-            const equation = eqAny.getEquation?.() || eqAny.__equation || '';
-            const inline = eqAny.getInline?.() ?? eqAny.__inline ?? false;
-            return {
-                block_id: equationNode.getKey(), // Use equation's ID, not paragraph's
-                block_type: 'equation',
-                source: equation,
-                metadata: { equation, inline },
-            };
+        if (children.length === 1) {
+            const childType = children[0].getType();
+            // Extract equation child
+            if (childType === 'equation') {
+                const equationNode = children[0];
+                // eslint-disable-next-line @typescript-eslint/no-explicit-any
+                const eqAny = equationNode;
+                const equation = eqAny.getEquation?.() || eqAny.__equation || '';
+                const inline = eqAny.getInline?.() ?? eqAny.__inline ?? false;
+                return {
+                    block_id: equationNode.getKey(), // Use equation's ID, not paragraph's
+                    block_type: 'equation',
+                    source: equation,
+                    metadata: { equation, inline },
+                };
+            }
+            // Extract excalidraw child
+            if (childType === 'excalidraw') {
+                const excalidrawNode = children[0];
+                // eslint-disable-next-line @typescript-eslint/no-explicit-any
+                const exAny = excalidrawNode;
+                const data = exAny.__data || '[]';
+                const width = exAny.getWidth?.() || exAny.__width || 'inherit';
+                const height = exAny.getHeight?.() || exAny.__height || 'inherit';
+                return {
+                    block_id: excalidrawNode.getKey(), // Use excalidraw's ID, not paragraph's
+                    block_type: 'excalidraw',
+                    source: '',
+                    metadata: {
+                        data,
+                        width: width === 'inherit' ? undefined : width,
+                        height: height === 'inherit' ? undefined : height,
+                    },
+                };
+            }
         }
         // Regular paragraph
         const { text, formatting } = extractTextAndFormatting(node);
@@ -313,15 +510,102 @@ export function nodeToBlock(node) {
             metadata: { equation, inline },
         };
     }
+    // YouTube
+    if (type === 'youtube') {
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const nodeAny = node;
+        const videoID = nodeAny.getId?.() || nodeAny.__id || '';
+        return {
+            block_id,
+            block_type: 'youtube',
+            source: '',
+            metadata: { videoID },
+        };
+    }
+    // Excalidraw
+    if (type === 'excalidraw') {
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const nodeAny = node;
+        const data = nodeAny.__data || '[]';
+        const width = nodeAny.getWidth?.() || nodeAny.__width || 'inherit';
+        const height = nodeAny.getHeight?.() || nodeAny.__height || 'inherit';
+        return {
+            block_id,
+            block_type: 'excalidraw',
+            source: '',
+            metadata: {
+                data,
+                width: width === 'inherit' ? undefined : width,
+                height: height === 'inherit' ? undefined : height,
+            },
+        };
+    }
     // Table
     if (type === 'table') {
-        const text = node.getTextContent();
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const nodeAny = node;
+        const tableRows = nodeAny.getChildren?.() || [];
+        const rows = tableRows.length;
+        const columns = rows > 0 ? tableRows[0].getChildren?.()?.length || 0 : 0;
+        // Extract cell data as 2D array for better readability
+        const cellData = [];
+        for (const rowNode of tableRows) {
+            // eslint-disable-next-line @typescript-eslint/no-explicit-any
+            const cells = rowNode.getChildren?.() || [];
+            const rowData = [];
+            for (const cellNode of cells) {
+                rowData.push(cellNode.getTextContent().trim());
+            }
+            cellData.push(rowData);
+        }
+        // Create markdown-style table representation for source
+        const markdownTable = cellData
+            .map((row, idx) => {
+            const cells = row.join(' | ');
+            if (idx === 0) {
+                // Add header separator
+                const separator = row.map(() => '---').join(' | ');
+                return `| ${cells} |\n| ${separator} |`;
+            }
+            return `| ${cells} |`;
+        })
+            .join('\n');
         return {
             block_id,
             block_type: 'table',
-            source: text,
+            source: markdownTable,
+            metadata: {
+                rows,
+                columns,
+                data: cellData, // Include raw cell data for programmatic access
+            },
         };
     }
+    // Collapsible Container - create container block with title only
+    if (type === 'collapsible-container') {
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const nodeAny = node;
+        const open = nodeAny.getOpen?.() || nodeAny.__open || false;
+        const children = nodeAny.getChildren?.() || [];
+        let title = '';
+        if (children[0]?.getType() === 'collapsible-title') {
+            title = children[0].getTextContent();
+        }
+        return {
+            block_id,
+            block_type: 'collapsible',
+            source: title,
+            metadata: {
+                open,
+                title,
+            },
+        };
+    }
+    // Skip collapsible-title (merged into container block)
+    if (type === 'collapsible-title') {
+        return null;
+    }
+    // Don't skip collapsible-content - it will be processed by editorStateToBlocks
     // Unknown types - return as generic block to avoid data loss
     const text = node.getTextContent();
     return {
@@ -453,6 +737,83 @@ export function updateBlock(editor, index, block) {
         oldNode.replace(newNode);
     });
 }
+/**
+ * Parse markdown formatting from text and convert to Lexical format segments.
+ * Supports: **bold**, *italic*, ***bold+italic***, ~~strikethrough~~, `code`
+ *
+ * @param text - Text potentially containing markdown formatting
+ * @returns Array of {text, format} segments
+ */
+export function parseMarkdownFormatting(text) {
+    // Lexical format flags
+    const BOLD = 1;
+    const ITALIC = 2;
+    const STRIKETHROUGH = 4;
+    const CODE = 16;
+    const segments = [];
+    let currentIndex = 0;
+    // Regex patterns for markdown (order matters - check longer patterns first)
+    const patterns = [
+        // Bold + Italic: ***text***
+        { regex: /\*\*\*(.*?)\*\*\*/g, format: BOLD | ITALIC },
+        // Bold: **text**
+        { regex: /\*\*(.*?)\*\*/g, format: BOLD },
+        // Italic: *text* (single asterisk)
+        { regex: /\*(.*?)\*/g, format: ITALIC },
+        // Strikethrough: ~~text~~
+        { regex: /~~(.*?)~~/g, format: STRIKETHROUGH },
+        // Code: `text`
+        { regex: /`(.*?)`/g, format: CODE },
+    ];
+    // Find all markdown patterns and their positions
+    const matches = [];
+    for (const pattern of patterns) {
+        // Reset regex state before using (critical for global flag)
+        pattern.regex.lastIndex = 0;
+        let match;
+        while ((match = pattern.regex.exec(text)) !== null) {
+            // Skip if this match overlaps with an already-found match
+            const overlaps = matches.some(m => (match.index >= m.start && match.index < m.end) ||
+                (match.index + match[0].length > m.start &&
+                    match.index + match[0].length <= m.end));
+            if (!overlaps) {
+                matches.push({
+                    start: match.index,
+                    end: match.index + match[0].length,
+                    text: match[1], // Captured group (text without markdown syntax)
+                    format: pattern.format,
+                });
+            }
+        }
+    }
+    // Sort matches by start position
+    matches.sort((a, b) => a.start - b.start);
+    // Build segments with formatting
+    for (const match of matches) {
+        // Add plain text before this formatted segment
+        if (match.start > currentIndex) {
+            const plainText = text.substring(currentIndex, match.start);
+            if (plainText) {
+                segments.push({ text: plainText, format: 0 });
+            }
+        }
+        // Add formatted segment
+        segments.push({ text: match.text, format: match.format });
+        currentIndex = match.end;
+    }
+    // Add remaining plain text
+    if (currentIndex < text.length) {
+        const plainText = text.substring(currentIndex);
+        if (plainText) {
+            segments.push({ text: plainText, format: 0 });
+        }
+    }
+    // If no markdown found, return text as single segment
+    if (segments.length === 0) {
+        segments.push({ text, format: 0 });
+    }
+    return segments;
+}
 /**
  * Convert a LexicalBlock to a Lexical node.
  * Creates the appropriate node type with content.
@@ -465,7 +826,7 @@ function blockToNode(block) {
     // Helper to create text nodes with formatting
     const createTextNodes = () => {
         if (block.formatting && block.formatting.length > 0) {
-            // Create separate text nodes for each formatted segment
+            // Create separate text nodes for each formatted segment (pre-formatted)
             return block.formatting.map(seg => {
                 const textNode = $createTextNode(seg.text);
                 if (seg.format) {
@@ -475,8 +836,15 @@ function blockToNode(block) {
             });
         }
         else {
-            // Simple text node
-            return [textContent ? $createTextNode(textContent) : $createTextNode('')];
+            // Parse markdown formatting from text content
+            const segments = parseMarkdownFormatting(textContent || '');
+            return segments.map(seg => {
+                const textNode = $createTextNode(seg.text);
+                if (seg.format) {
+                    textNode.setFormat(seg.format);
+                }
+                return textNode;
+            });
         }
     };
     switch (block.block_type) {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js.map
index c033e31..6c42892 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js.map
@@ -1 +1 @@
-{"version":3,"file":"blocks.js","sourceRoot":"","sources":["../../../src/tools/utils/blocks.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"blocks.js","sourceRoot":"","sources":["../../../src/tools/utils/blocks.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js
index c313d37..e54af15 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js
@@ -10,5 +10,5 @@
  *
  * @module jupyter-ui-lexical/tools/utils
  */
-export * from './blocks.js';
+export * from './blocks';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.d.ts
new file mode 100644
index 0000000..6a76a14
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.d.ts
@@ -0,0 +1,2 @@
+import { EditorThemeClasses } from 'lexical';
+export declare function getThemeSelector(getTheme: () => EditorThemeClasses | null | undefined, name: keyof EditorThemeClasses): string;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.js b/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.js
new file mode 100644
index 0000000..2380f28
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.js
@@ -0,0 +1,16 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+export function getThemeSelector(getTheme, name) {
+    const className = getTheme()?.[name];
+    if (typeof className !== 'string') {
+        throw new Error(`getThemeClass: required theme property ${name} not defined`);
+    }
+    return className
+        .split(/\s+/g)
+        .map(cls => `.${cls}`)
+        .join();
+}
+//# sourceMappingURL=getThemeSelector.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.js.map b/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.js.map
new file mode 100644
index 0000000..9d84879
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/getThemeSelector.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"getThemeSelector.js","sourceRoot":"","sources":["../../src/utils/getThemeSelector.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAIH,MAAM,UAAU,gBAAgB,CAC9B,QAAqD,EACrD,IAA8B;IAE9B,MAAM,SAAS,GAAG,QAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;IACrC,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE,CAAC;QAClC,MAAM,IAAI,KAAK,CACb,0CAA0C,IAAI,cAAc,CAC7D,CAAC;IACJ,CAAC;IACD,OAAO,SAAS;SACb,KAAK,CAAC,MAAM,CAAC;SACb,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;SACrB,IAAI,EAAE,CAAC;AACZ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/utils/index.d.ts
index 92daa70..a32156e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/utils/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/index.d.ts
@@ -8,3 +8,5 @@ export * from './point';
 export * from './rect';
 export * from './selection';
 export * from './setFloatingElemPosition';
+export * from './setFloatingElemPositionForLinkEditor';
+export * from './url';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/index.js b/node_modules/@datalayer/jupyter-lexical/lib/utils/index.js
index c3eb029..3e4c317 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/utils/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/index.js
@@ -3,14 +3,16 @@
  *
  * MIT License
  */
-export * from './canUseDOM.js';
-export * from './getDOMRangeRect.js';
-export * from './getSelectedNode.js';
-export * from './guard.js';
-export * from './invariant.js';
-export * from './join.js';
-export * from './point.js';
-export * from './rect.js';
-export * from './selection.js';
-export * from './setFloatingElemPosition.js';
+export * from './canUseDOM';
+export * from './getDOMRangeRect';
+export * from './getSelectedNode';
+export * from './guard';
+export * from './invariant';
+export * from './join';
+export * from './point';
+export * from './rect';
+export * from './selection';
+export * from './setFloatingElemPosition';
+export * from './setFloatingElemPositionForLinkEditor';
+export * from './url';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/utils/index.js.map
index b4dcb35..9960148 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/utils/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/utils/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,aAAa,CAAC;AAC5B,cAAc,mBAAmB,CAAC;AAClC,cAAc,mBAAmB,CAAC;AAClC,cAAc,SAAS,CAAC;AACxB,cAAc,aAAa,CAAC;AAC5B,cAAc,QAAQ,CAAC;AACvB,cAAc,SAAS,CAAC;AACxB,cAAc,QAAQ,CAAC;AACvB,cAAc,aAAa,CAAC;AAC5B,cAAc,2BAA2B,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/utils/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,aAAa,CAAC;AAC5B,cAAc,mBAAmB,CAAC;AAClC,cAAc,mBAAmB,CAAC;AAClC,cAAc,SAAS,CAAC;AACxB,cAAc,aAAa,CAAC;AAC5B,cAAc,QAAQ,CAAC;AACvB,cAAc,SAAS,CAAC;AACxB,cAAc,QAAQ,CAAC;AACvB,cAAc,aAAa,CAAC;AAC5B,cAAc,2BAA2B,CAAC;AAC1C,cAAc,wCAAwC,CAAC;AACvD,cAAc,OAAO,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.d.ts
index f9cdac0..aeda939 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.d.ts
@@ -1 +1 @@
-export default function invariant(cond?: boolean, message?: string, ...args: string[]): asserts cond;
+export default function invariant(cond?: boolean, _message?: string, ..._args: string[]): asserts cond;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.js b/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.js
index 54ce09b..10daed5 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.js
@@ -6,7 +6,7 @@
 // invariant(condition, message) will refine types based on "condition", and
 // if "condition" is false will throw an error. This function is special-cased
 // in flow itself, so we can't name it anything else.
-export default function invariant(cond, message, ...args) {
+export default function invariant(cond, _message, ..._args) {
     if (cond) {
         return;
     }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.js.map b/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.js.map
index 8ae034a..67839d0 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/invariant.js.map
@@ -1 +1 @@
-{"version":3,"file":"invariant.js","sourceRoot":"","sources":["../../src/utils/invariant.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,4EAA4E;AAC5E,8EAA8E;AAC9E,qDAAqD;AACrD,MAAM,CAAC,OAAO,UAAU,SAAS,CAC/B,IAAc,EACd,OAAgB,EAChB,GAAG,IAAc;IAEjB,IAAI,IAAI,EAAE,CAAC;QACT,OAAO;IACT,CAAC;IAED,MAAM,IAAI,KAAK,CACb,yEAAyE;QACvE,oCAAoC,CACvC,CAAC;AACJ,CAAC"}
\ No newline at end of file
+{"version":3,"file":"invariant.js","sourceRoot":"","sources":["../../src/utils/invariant.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,4EAA4E;AAC5E,8EAA8E;AAC9E,qDAAqD;AACrD,MAAM,CAAC,OAAO,UAAU,SAAS,CAC/B,IAAc,EACd,QAAiB,EACjB,GAAG,KAAe;IAElB,IAAI,IAAI,EAAE,CAAC;QACT,OAAO;IACT,CAAC;IAED,MAAM,IAAI,KAAK,CACb,yEAAyE;QACvE,oCAAoC,CACvC,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/rect.js b/node_modules/@datalayer/jupyter-lexical/lib/utils/rect.js
index a66e0b1..4983897 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/utils/rect.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/rect.js
@@ -3,7 +3,7 @@
  *
  * MIT License
  */
-import { isPoint } from './point.js';
+import { isPoint } from './point';
 export class Rect {
     _left;
     _top;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.d.ts
new file mode 100644
index 0000000..8675c2b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.d.ts
@@ -0,0 +1 @@
+export declare function setFloatingElemPositionForLinkEditor(targetRect: DOMRect | null, floatingElem: HTMLElement, anchorElem: HTMLElement, verticalGap?: number, horizontalOffset?: number): void;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.js b/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.js
new file mode 100644
index 0000000..7e65e05
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.js
@@ -0,0 +1,42 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ */
+const VERTICAL_GAP = 10;
+const HORIZONTAL_OFFSET = 5;
+export function setFloatingElemPositionForLinkEditor(targetRect, floatingElem, anchorElem, verticalGap = VERTICAL_GAP, horizontalOffset = HORIZONTAL_OFFSET) {
+    const scrollerElem = anchorElem.parentElement;
+    if (targetRect === null || !scrollerElem) {
+        floatingElem.style.opacity = '0';
+        floatingElem.style.top = '-10000px';
+        floatingElem.style.left = '-10000px';
+        floatingElem.style.transform = 'translate(0px, 0px)';
+        return;
+    }
+    const floatingElemRect = floatingElem.getBoundingClientRect();
+    const anchorElementRect = anchorElem.getBoundingClientRect();
+    const editorScrollerRect = scrollerElem.getBoundingClientRect();
+    let top = targetRect.top - verticalGap;
+    let left = targetRect.left - horizontalOffset;
+    if (top < editorScrollerRect.top) {
+        top += floatingElemRect.height + targetRect.height + verticalGap * 2;
+    }
+    if (left + floatingElemRect.width > editorScrollerRect.right) {
+        left = editorScrollerRect.right - floatingElemRect.width - horizontalOffset;
+    }
+    top -= anchorElementRect.top;
+    left -= anchorElementRect.left;
+    floatingElem.style.opacity = '1';
+    floatingElem.style.top = '0px';
+    floatingElem.style.left = '0px';
+    floatingElem.style.transform = `translate(${left}px, ${top}px)`;
+}
+//# sourceMappingURL=setFloatingElemPositionForLinkEditor.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.js.map b/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.js.map
new file mode 100644
index 0000000..bb4b7ad
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/utils/setFloatingElemPositionForLinkEditor.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"setFloatingElemPositionForLinkEditor.js","sourceRoot":"","sources":["../../src/utils/setFloatingElemPositionForLinkEditor.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AACH,MAAM,YAAY,GAAG,EAAE,CAAC;AACxB,MAAM,iBAAiB,GAAG,CAAC,CAAC;AAE5B,MAAM,UAAU,oCAAoC,CAClD,UAA0B,EAC1B,YAAyB,EACzB,UAAuB,EACvB,cAAsB,YAAY,EAClC,mBAA2B,iBAAiB;IAE5C,MAAM,YAAY,GAAG,UAAU,CAAC,aAAa,CAAC;IAE9C,IAAI,UAAU,KAAK,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;QACzC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC;QACjC,YAAY,CAAC,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC;QACpC,YAAY,CAAC,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;QACrC,YAAY,CAAC,KAAK,CAAC,SAAS,GAAG,qBAAqB,CAAC;QACrD,OAAO;IACT,CAAC;IAED,MAAM,gBAAgB,GAAG,YAAY,CAAC,qBAAqB,EAAE,CAAC;IAC9D,MAAM,iBAAiB,GAAG,UAAU,CAAC,qBAAqB,EAAE,CAAC;IAC7D,MAAM,kBAAkB,GAAG,YAAY,CAAC,qBAAqB,EAAE,CAAC;IAEhE,IAAI,GAAG,GAAG,UAAU,CAAC,GAAG,GAAG,WAAW,CAAC;IACvC,IAAI,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,gBAAgB,CAAC;IAE9C,IAAI,GAAG,GAAG,kBAAkB,CAAC,GAAG,EAAE,CAAC;QACjC,GAAG,IAAI,gBAAgB,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,GAAG,WAAW,GAAG,CAAC,CAAC;IACvE,CAAC;IAED,IAAI,IAAI,GAAG,gBAAgB,CAAC,KAAK,GAAG,kBAAkB,CAAC,KAAK,EAAE,CAAC;QAC7D,IAAI,GAAG,kBAAkB,CAAC,KAAK,GAAG,gBAAgB,CAAC,KAAK,GAAG,gBAAgB,CAAC;IAC9E,CAAC;IAED,GAAG,IAAI,iBAAiB,CAAC,GAAG,CAAC;IAC7B,IAAI,IAAI,iBAAiB,CAAC,IAAI,CAAC;IAE/B,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC;IACjC,YAAY,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC;IAC/B,YAAY,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;IAChC,YAAY,CAAC,KAAK,CAAC,SAAS,GAAG,aAAa,IAAI,OAAO,GAAG,KAAK,CAAC;AAClE,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/CodeActionMenuPlugin.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/CodeActionMenuPlugin.css
index f10b084..9704ad2 100644
--- a/node_modules/@datalayer/jupyter-lexical/style/lexical/CodeActionMenuPlugin.css
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/CodeActionMenuPlugin.css
@@ -50,3 +50,18 @@
   background-color: rgba(223, 232, 250);
   border: 1px solid rgba(0, 0, 0, 0.45);
 }
+
+.code-action-menu-container .prettier-wrapper {
+  position: relative;
+}
+
+.code-action-menu-container .prettier-wrapper .code-error-tips {
+  padding: 5px;
+  border-radius: 4px;
+  color: #fff;
+  background: #222;
+  margin-top: 4px;
+  position: absolute;
+  top: 26px;
+  right: 0;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/ColorPicker.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/ColorPicker.css
new file mode 100644
index 0000000..5f16758
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/ColorPicker.css
@@ -0,0 +1,87 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+.color-picker-wrapper {
+  padding: 20px;
+}
+
+.color-picker-basic-color {
+  display: flex;
+  flex-wrap: wrap;
+  gap: 10px;
+  margin: 0;
+  padding: 0;
+}
+
+.color-picker-basic-color button {
+  border: 1px solid #ccc;
+  border-radius: 4px;
+  height: 16px;
+  width: 16px;
+  cursor: pointer;
+  list-style-type: none;
+}
+
+.color-picker-basic-color button.active {
+  box-shadow: 0px 0px 2px 2px rgba(0, 0, 0, 0.3);
+}
+
+.color-picker-saturation {
+  width: 100%;
+  position: relative;
+  margin-top: 15px;
+  height: 150px;
+  background-image:
+    linear-gradient(transparent, black),
+    linear-gradient(to right, white, transparent);
+  user-select: none;
+}
+.color-picker-saturation_cursor {
+  position: absolute;
+  width: 20px;
+  height: 20px;
+  border: 2px solid #ffffff;
+  border-radius: 50%;
+  box-shadow: 0 0 15px #00000026;
+  box-sizing: border-box;
+  transform: translate(-10px, -10px);
+}
+.color-picker-hue {
+  width: 100%;
+  position: relative;
+  margin-top: 15px;
+  height: 12px;
+  background-image: linear-gradient(
+    to right,
+    rgb(255, 0, 0),
+    rgb(255, 255, 0),
+    rgb(0, 255, 0),
+    rgb(0, 255, 255),
+    rgb(0, 0, 255),
+    rgb(255, 0, 255),
+    rgb(255, 0, 0)
+  );
+  user-select: none;
+  border-radius: 12px;
+}
+
+.color-picker-hue_cursor {
+  position: absolute;
+  width: 20px;
+  height: 20px;
+  border: 2px solid #ffffff;
+  border-radius: 50%;
+  box-shadow: #0003 0 0 0 0.5px;
+  box-sizing: border-box;
+  transform: translate(-10px, -4px);
+}
+
+.color-picker-color {
+  border: 1px solid #ccc;
+  margin-top: 15px;
+  width: 100%;
+  height: 20px;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/CommentPlugin.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/CommentPlugin.css
index c8f4f07..ec1857f 100644
--- a/node_modules/@datalayer/jupyter-lexical/style/lexical/CommentPlugin.css
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/CommentPlugin.css
@@ -147,33 +147,6 @@ i.add-comment {
   outline: 1px solid var(--vscode-focusBorder, rgb(66, 135, 245));
 }

-.CommentPlugin_ShowCommentsButton {
-  position: fixed;
-  top: 10px;
-  right: 10px;
-  background-color: #ddd;
-  border-radius: 10px;
-}
-
-i.comments {
-  background-size: contain;
-  display: inline-block;
-  height: 20px;
-  width: 20px;
-  vertical-align: -10px;
-  background-image: url(./icons/comments.svg);
-  opacity: 0.5;
-  transition: opacity 0.2s linear;
-}
-
-.CommentPlugin_ShowCommentsButton:hover i.comments {
-  opacity: 1;
-}
-
-.CommentPlugin_ShowCommentsButton.active {
-  background-color: #ccc;
-}
-
 .CommentPlugin_CommentsPanel {
   position: fixed;
   right: 0;
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/Editor.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/Editor.css
index e95cefc..fb69ad6 100644
--- a/node_modules/@datalayer/jupyter-lexical/style/lexical/Editor.css
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/Editor.css
@@ -94,7 +94,8 @@ body .editor-shell {
   position: relative;
   resize: vertical;
   padding-left: 20px;
-  z-index: -1;
+  z-index: 0;
+  overflow: visible;
 }

 .test-recorder-output {
@@ -579,131 +580,10 @@ i.prettier-error {
   background-image: url(icons/prettier-error.svg);
 }

-.link-editor .button.active,
 .toolbar .button.active {
   background-color: rgb(223, 232, 250);
 }

-.link-editor .link-input {
-  display: block;
-  width: calc(100% - 75px);
-  box-sizing: border-box;
-  margin: 12px 12px;
-  padding: 8px 12px;
-  border-radius: 15px;
-  background-color: #eee;
-  font-size: 15px;
-  color: rgb(5, 5, 5);
-  border: 0;
-  outline: 0;
-  position: relative;
-  font-family: inherit;
-}
-
-.link-editor .link-view {
-  display: block;
-  width: calc(100% - 24px);
-  margin: 8px 12px;
-  padding: 8px 12px;
-  border-radius: 15px;
-  font-size: 15px;
-  color: rgb(5, 5, 5);
-  border: 0;
-  outline: 0;
-  position: relative;
-  font-family: inherit;
-}
-
-.link-editor .link-view a {
-  display: block;
-  word-break: break-word;
-  width: calc(100% - 33px);
-}
-
-.link-editor div.link-edit {
-  background-image: url(icons/pencil-fill.svg);
-  background-size: 16px;
-  background-position: center;
-  background-repeat: no-repeat;
-  width: 35px;
-  vertical-align: -0.25em;
-  position: absolute;
-  right: 30px;
-  top: 0;
-  bottom: 0;
-  cursor: pointer;
-}
-
-.link-editor div.link-trash {
-  background-image: url(icons/trash.svg);
-  background-size: 16px;
-  background-position: center;
-  background-repeat: no-repeat;
-  width: 35px;
-  vertical-align: -0.25em;
-  position: absolute;
-  right: 0;
-  top: 0;
-  bottom: 0;
-  cursor: pointer;
-}
-
-.link-editor div.link-cancel {
-  background-image: url(icons/close.svg);
-  background-size: 16px;
-  background-position: center;
-  background-repeat: no-repeat;
-  width: 35px;
-  vertical-align: -0.25em;
-  margin-right: 28px;
-  position: absolute;
-  right: 0;
-  top: 0;
-  bottom: 0;
-  cursor: pointer;
-}
-
-.link-editor div.link-confirm {
-  background-image: url(icons/success-alt.svg);
-  background-size: 16px;
-  background-position: center;
-  background-repeat: no-repeat;
-  width: 35px;
-  vertical-align: -0.25em;
-  margin-right: 2px;
-  position: absolute;
-  right: 0;
-  top: 0;
-  bottom: 0;
-  cursor: pointer;
-}
-
-.link-editor .link-input a {
-  color: rgb(33, 111, 219);
-  text-decoration: underline;
-  white-space: nowrap;
-  overflow: hidden;
-  margin-right: 30px;
-  text-overflow: ellipsis;
-}
-
-.link-editor .link-input a:hover {
-  text-decoration: underline;
-}
-
-.link-editor .font-size-wrapper,
-.link-editor .font-family-wrapper {
-  display: flex;
-  margin: 0 4px;
-}
-
-.link-editor select {
-  padding: 6px;
-  border: none;
-  background-color: rgba(0, 0, 0, 0.075);
-  border-radius: 4px;
-}
-
 .mention:focus {
   box-shadow: rgb(180 213 255) 0px 0px 0px 2px;
   outline: none;
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/ExcalidrawModal.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/ExcalidrawModal.css
new file mode 100644
index 0000000..de1b34f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/ExcalidrawModal.css
@@ -0,0 +1,148 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+/**
+ * Copyright (c) Meta Platforms, Inc. and affiliates.
+ *
+ * This source code is licensed under the MIT license found in the
+ * LICENSE file in the root directory of this source tree.
+ *
+ *
+ */
+
+.ExcalidrawModal__overlay {
+  display: flex;
+  align-items: center;
+  position: fixed;
+  flex-direction: column;
+  top: 0px;
+  bottom: 0px;
+  left: 0px;
+  right: 0px;
+  flex-grow: 0px;
+  flex-shrink: 1px;
+  z-index: 100;
+  background-color: rgba(40, 40, 40, 0.6);
+}
+.ExcalidrawModal__actions {
+  text-align: end;
+  position: absolute;
+  right: 5px;
+  top: 5px;
+  z-index: 1;
+}
+.ExcalidrawModal__actions button {
+  background-color: #fff;
+  border-radius: 5px;
+}
+.ExcalidrawModal__row {
+  position: relative;
+  padding: 40px 5px 5px;
+  width: 70vw;
+  height: 90vh;
+  border-radius: 8px;
+  box-shadow:
+    0 12px 28px 0 rgba(0, 0, 0, 0.2),
+    0 2px 4px 0 rgba(0, 0, 0, 0.1),
+    inset 0 0 0 1px rgba(255, 255, 255, 0.5);
+}
+.ExcalidrawModal__row > div {
+  border-radius: 5px;
+}
+.ExcalidrawModal__modal {
+  position: relative;
+  z-index: 10;
+  top: 50px;
+  width: auto;
+  left: 0;
+  display: flex;
+  justify-content: center;
+  align-items: center;
+  border-radius: 8px;
+  background-color: #eee;
+}
+.ExcalidrawModal__discardModal {
+  margin-top: 60px;
+  text-align: center;
+}
+
+/* Ensure Excalidraw canvas is interactive */
+.ExcalidrawModal__row .excalidraw,
+.ExcalidrawModal__row canvas {
+  pointer-events: auto !important;
+  touch-action: none !important;
+}
+
+/* Remove VS Code's blue button background - let Excalidraw handle colors */
+.ExcalidrawModal__row .excalidraw button:not(.color-picker__button) {
+  background: none !important;
+  background-color: transparent !important;
+  /* Preserve Excalidraw's button layout */
+  display: flex !important;
+  align-items: center !important;
+  justify-content: center !important;
+  /* Ensure icon color is visible - use dark color for light theme, light for dark theme */
+  color: var(--color-on-surface, #1e1e1e) !important;
+}
+
+/* Color picker buttons - use their swatch color and enforce square shape */
+.ExcalidrawModal__row .excalidraw .color-picker__button {
+  background-color: var(--swatch-color) !important;
+  display: flex !important;
+  align-items: center !important;
+  justify-content: center !important;
+  width: 1rem !important;
+  height: 1rem !important;
+  min-width: 1rem !important;
+  min-height: 1rem !important;
+  padding: 0 !important;
+  flex-shrink: 0 !important;
+}
+
+/* Hide radio inputs visually but keep them accessible for keyboard and pointer navigation */
+.ExcalidrawModal__row .excalidraw label input[type='radio'],
+.ExcalidrawModal__row .excalidraw label input[type='checkbox'] {
+  position: absolute !important;
+  opacity: 0 !important;
+  width: 1px !important;
+  height: 1px !important;
+  /* REMOVED: pointer-events: none - it was blocking toolbar interaction */
+}
+
+/* Ensure labels (containing hidden inputs + SVGs) center their visible content */
+.ExcalidrawModal__row .excalidraw label {
+  display: flex !important;
+  align-items: center !important;
+  justify-content: center !important;
+  position: relative !important;
+}
+
+/* Ensure SVG icons in buttons maintain proper size and color */
+.ExcalidrawModal__row .excalidraw button svg,
+.ExcalidrawModal__row .excalidraw label svg,
+.ExcalidrawModal__row .excalidraw .ToolIcon__icon svg {
+  width: 20px !important;
+  height: 20px !important;
+  min-width: 20px !important;
+  min-height: 20px !important;
+  /* Keep outlined icons outlined - only set stroke color for visibility */
+  stroke: currentColor !important;
+}
+
+/* Layer buttons need slightly larger icons */
+.ExcalidrawModal__row .excalidraw .zIndexButton svg {
+  width: 24px !important;
+  height: 24px !important;
+  min-width: 24px !important;
+  min-height: 24px !important;
+}
+
+/* Ensure images and embedded content within Excalidraw are interactive */
+.ExcalidrawModal__row .excalidraw img,
+.ExcalidrawModal__row .excalidraw [data-type='image'],
+.ExcalidrawModal__row .excalidraw .excalidraw-image {
+  pointer-events: auto !important;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/ExcalidrawNode.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/ExcalidrawNode.css
new file mode 100644
index 0000000..c65c4b8
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/ExcalidrawNode.css
@@ -0,0 +1,137 @@
+/**
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+/* Excalidraw button container */
+.excalidraw-button {
+  position: relative;
+  display: inline-block;
+  max-width: 100%;
+  cursor: pointer;
+  background: transparent;
+  border: none;
+  padding: 0;
+  margin: 0;
+}
+
+/* Excalidraw image preview */
+.excalidraw-button .image {
+  display: block;
+  max-width: 100%;
+  height: auto;
+  pointer-events: auto;
+}
+
+/* Blue outline when selected */
+.excalidraw-button.selected {
+  outline: 2px solid var(--vscode-focusBorder, #007acc) !important;
+  outline-offset: 2px !important;
+  box-shadow: 0 0 0 2px var(--vscode-focusBorder, #007acc) !important;
+}
+
+/* Edit button - top right corner (styled by component, rendered as .image-edit-button) */
+.excalidraw-button .image-edit-button {
+  position: absolute;
+  top: 12px;
+  right: 12px;
+  width: 32px;
+  height: 32px;
+  background-color: var(--vscode-button-background, #0e639c);
+  color: var(--vscode-button-foreground, #fff);
+  border: none;
+  border-radius: 4px;
+  display: flex;
+  align-items: center;
+  justify-content: center;
+  cursor: pointer;
+  pointer-events: auto;
+  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
+  transition: background-color 0.2s;
+  z-index: 10;
+}
+
+.excalidraw-button .image-edit-button::before {
+  content: '';
+  font-size: 18px;
+  line-height: 1;
+  color: var(--vscode-button-foreground, #fff);
+}
+
+.excalidraw-button .image-edit-button:hover {
+  background-color: var(--vscode-button-hoverBackground, #1177bb);
+}
+
+/* Image resizer handles styling (ImageResizer component renders these) */
+.excalidraw-button .image-resizer {
+  position: absolute !important;
+  width: 10px !important;
+  height: 10px !important;
+  background-color: var(--vscode-focusBorder, #007acc) !important;
+  border: 2px solid var(--vscode-editor-background, #fff) !important;
+  box-sizing: border-box !important;
+  pointer-events: auto !important;
+  z-index: 100 !important;
+  display: block !important;
+}
+
+/* North handle */
+.excalidraw-button .image-resizer-n {
+  top: -5px !important;
+  left: 50% !important;
+  transform: translateX(-50%) !important;
+  cursor: n-resize !important;
+}
+
+/* Northeast handle */
+.excalidraw-button .image-resizer-ne {
+  top: -5px !important;
+  right: -5px !important;
+  cursor: ne-resize !important;
+}
+
+/* East handle */
+.excalidraw-button .image-resizer-e {
+  top: 50% !important;
+  right: -5px !important;
+  transform: translateY(-50%) !important;
+  cursor: e-resize !important;
+}
+
+/* Southeast handle */
+.excalidraw-button .image-resizer-se {
+  bottom: -5px !important;
+  right: -5px !important;
+  cursor: se-resize !important;
+}
+
+/* South handle */
+.excalidraw-button .image-resizer-s {
+  bottom: -5px !important;
+  left: 50% !important;
+  transform: translateX(-50%) !important;
+  cursor: s-resize !important;
+}
+
+/* Southwest handle */
+.excalidraw-button .image-resizer-sw {
+  bottom: -5px !important;
+  left: -5px !important;
+  cursor: sw-resize !important;
+}
+
+/* West handle */
+.excalidraw-button .image-resizer-w {
+  top: 50% !important;
+  left: -5px !important;
+  transform: translateY(-50%) !important;
+  cursor: w-resize !important;
+}
+
+/* Northwest handle */
+.excalidraw-button .image-resizer-nw {
+  top: -5px !important;
+  left: -5px !important;
+  cursor: nw-resize !important;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/Rich.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/Rich.css
index 2a8de5f..d5a8c51 100644
--- a/node_modules/@datalayer/jupyter-lexical/style/lexical/Rich.css
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/Rich.css
@@ -628,83 +628,8 @@ i.chevron-down {
   }
 }

-.link-editor {
-  position: absolute;
-  z-index: 100;
-  top: -10000px;
-  left: -10000px;
-  margin-top: -6px;
-  max-width: 300px;
-  width: 100%;
-  opacity: 0;
-  background-color: #fff;
-  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.3);
-  border-radius: 8px;
-  transition: opacity 0.5s;
-}
-
-.link-editor .link-input {
-  display: block;
-  width: calc(100% - 24px);
-  box-sizing: border-box;
-  margin: 8px 12px;
-  padding: 8px 12px;
-  border-radius: 15px;
-  background-color: #eee;
-  font-size: 15px;
-  color: rgb(5, 5, 5);
-  border: 0;
-  outline: 0;
-  position: relative;
-  font-family: inherit;
-}
+/* link-editor styles moved to FloatingLinkEditorPlugin/index.css */

-.link-editor div.link-edit {
-  background-image: url(icons/pencil-fill.svg);
-  background-size: 16px;
-  background-position: center;
-  background-repeat: no-repeat;
-  width: 35px;
-  vertical-align: -0.25em;
-  position: absolute;
-  right: 0;
-  top: 0;
-  bottom: 0;
-  cursor: pointer;
-}
-
-.link-editor .link-input a {
-  color: rgb(33, 111, 219);
-  text-decoration: none;
-  display: block;
-  white-space: nowrap;
-  overflow: hidden;
-  margin-right: 30px;
-  text-overflow: ellipsis;
-}
-
-.link-editor .link-input a:hover {
-  text-decoration: underline;
-}
-
-.link-editor .button {
-  width: 20px;
-  height: 20px;
-  display: inline-block;
-  padding: 6px;
-  border-radius: 8px;
-  cursor: pointer;
-  margin: 0 2px;
-}
-
-.link-editor .button.hovered {
-  width: 20px;
-  height: 20px;
-  display: inline-block;
-  background-color: #eee;
-}
-
-.link-editor .button i,
 .actions i {
   background-size: contain;
   display: inline-block;
@@ -721,6 +646,16 @@ i.redo {
   background-image: url(icons/arrow-clockwise.svg);
 }

+i.comments {
+  background-image: url(./icons/comments.svg);
+  opacity: 0.6;
+}
+
+i.comments-active {
+  background-image: url(./icons/comments.svg);
+  opacity: 1;
+}
+
 .icon.paragraph {
   background-image: url(icons/text-paragraph.svg);
 }
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/TableInsertModal.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/TableInsertModal.css
new file mode 100644
index 0000000..9bfc256
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/TableInsertModal.css
@@ -0,0 +1,112 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+.TableInsertModal__overlay {
+  display: flex;
+  justify-content: center;
+  align-items: center;
+  position: fixed;
+  flex-direction: column;
+  top: 0px;
+  bottom: 0px;
+  left: 0px;
+  right: 0px;
+  background-color: rgba(40, 40, 40, 0.6);
+  flex-grow: 0px;
+  flex-shrink: 1px;
+  z-index: 100;
+}
+
+.TableInsertModal__modal {
+  padding: 20px;
+  min-height: 100px;
+  min-width: 400px;
+  display: flex;
+  flex-grow: 0px;
+  background: var(--vscode-editor-background, #fff);
+  color: var(--vscode-editor-foreground, #333);
+  flex-direction: column;
+  position: relative;
+  box-shadow: 0 0 20px 0 #444;
+  border-radius: 10px;
+}
+
+.TableInsertModal__title {
+  color: var(--vscode-editor-foreground, #444);
+  margin: 0px;
+  padding-bottom: 10px;
+  border-bottom: 1px solid var(--vscode-editorWidget-border, #ccc);
+}
+
+.TableInsertModal__content {
+  display: flex;
+  flex-direction: column;
+  gap: 16px;
+  margin-bottom: 24px;
+}
+
+.TableInsertModal__field {
+  display: flex;
+  flex-direction: column;
+  gap: 8px;
+}
+
+.TableInsertModal__field label {
+  font-size: 14px;
+  font-weight: 500;
+  color: var(--vscode-foreground, #555);
+}
+
+.TableInsertModal__field input {
+  padding: 10px 12px;
+  border: 1px solid var(--vscode-input-border, #ccc);
+  background-color: var(--vscode-input-background, white);
+  color: var(--vscode-input-foreground, inherit);
+  border-radius: 4px;
+  font-size: 16px;
+  outline: none;
+  transition: border-color 0.2s;
+}
+
+.TableInsertModal__field input:focus {
+  border-color: var(--vscode-focusBorder, #0078d4);
+  outline: 1px solid var(--vscode-focusBorder, #0078d4);
+  outline-offset: -1px;
+}
+
+.TableInsertModal__actions {
+  display: flex;
+  justify-content: flex-end;
+  gap: 12px;
+}
+
+.TableInsertModal__button {
+  padding: 10px 20px;
+  border: none;
+  border-radius: 4px;
+  font-size: 14px;
+  font-weight: 500;
+  cursor: pointer;
+  transition: background-color 0.2s;
+}
+
+.TableInsertModal__button--cancel {
+  background-color: var(--vscode-button-secondaryBackground, #f0f0f0);
+  color: var(--vscode-button-secondaryForeground, #333);
+}
+
+.TableInsertModal__button--cancel:hover {
+  background-color: var(--vscode-button-secondaryHoverBackground, #e0e0e0);
+}
+
+.TableInsertModal__button--confirm {
+  background-color: var(--vscode-button-background, #0078d4);
+  color: var(--vscode-button-foreground, white);
+}
+
+.TableInsertModal__button--confirm:hover {
+  background-color: var(--vscode-button-hoverBackground, #006cbe);
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/TableNode.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/TableNode.css
new file mode 100644
index 0000000..d975032
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/TableNode.css
@@ -0,0 +1,287 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+/* Table container styles - matches VS Code theme */
+.PlaygroundEditorTheme__table {
+  border-collapse: collapse !important;
+  border-spacing: 0 !important;
+  max-width: 100% !important;
+  overflow-y: scroll !important;
+  table-layout: fixed !important;
+  width: max-content !important;
+  margin: 20px 0 !important;
+  border: 1px solid var(--vscode-editorGroup-border, rgba(128, 128, 128, 0.35)) !important;
+}
+
+/* Table cell styles */
+.PlaygroundEditorTheme__tableCell {
+  border: 1px solid var(--vscode-editorGroup-border, rgba(128, 128, 128, 0.35)) !important;
+  min-width: 75px !important;
+  width: 75px !important;
+  vertical-align: top !important;
+  text-align: start !important;
+  padding: 8px 10px !important;
+  position: relative !important;
+  outline: none !important;
+  background-color: var(--vscode-editor-background, transparent) !important;
+  color: var(--vscode-editor-foreground, inherit) !important;
+}
+
+/* Table header cell styles */
+.PlaygroundEditorTheme__tableCellHeader {
+  border: 1px solid var(--vscode-editorGroup-border, rgba(128, 128, 128, 0.35)) !important;
+  min-width: 75px !important;
+  width: 75px !important;
+  vertical-align: top !important;
+  text-align: start !important;
+  padding: 8px 10px !important;
+  position: relative !important;
+  outline: none !important;
+  background-color: var(
+    --vscode-editorGroupHeader-tabsBackground,
+    rgba(128, 128, 128, 0.1)
+  ) !important;
+  color: var(--vscode-editor-foreground, inherit) !important;
+  font-weight: bold !important;
+}
+
+/* Cell focus styles */
+.PlaygroundEditorTheme__tableCell:focus,
+.PlaygroundEditorTheme__tableCellHeader:focus {
+  outline: 2px solid var(--vscode-focusBorder, rgb(60, 132, 244)) !important;
+  outline-offset: -2px;
+}
+
+/* Cell selection styles */
+.PlaygroundEditorTheme__tableCellSelected {
+  background-color: var(
+    --vscode-list-activeSelectionBackground,
+    rgba(60, 132, 244, 0.15)
+  ) !important;
+}
+
+/* Placeholder for empty cells */
+.PlaygroundEditorTheme__tableCell:empty::after {
+  content: '';
+  display: block;
+  min-height: 20px;
+}
+
+/* Cell resize handles */
+.PlaygroundEditorTheme__tableCellResizer {
+  position: absolute;
+  right: -4px;
+  bottom: 0;
+  width: 8px;
+  top: 0;
+  cursor: ew-resize;
+  user-select: none;
+  z-index: 10;
+}
+
+.PlaygroundEditorTheme__tableCellResizer:after {
+  content: '';
+  position: absolute;
+  right: 3px;
+  top: 0;
+  height: 100%;
+  width: 2px;
+  background-color: transparent;
+}
+
+.PlaygroundEditorTheme__tableCellResizer:hover:after,
+.PlaygroundEditorTheme__tableCellResizer:active:after {
+  background-color: var(--vscode-focusBorder, #3c84f4);
+}
+
+/* Table action menu - CHEVRON BUTTON */
+.PlaygroundEditorTheme__tableCellActionButtonContainer {
+  display: flex !important;
+  gap: 4px !important;
+  position: absolute !important;
+  top: 0 !important;
+  left: 0 !important;
+  will-change: transform !important;
+  z-index: 999 !important;
+  visibility: visible !important;
+  opacity: 1 !important;
+}
+
+.PlaygroundEditorTheme__tableCellActionButton {
+  background-color: var(
+    --vscode-button-secondaryBackground,
+    rgba(128, 128, 128, 0.1)
+  ) !important;
+  color: var(--vscode-button-secondaryForeground, inherit) !important;
+  display: flex !important;
+  justify-content: center !important;
+  align-items: center !important;
+  border: 1px solid var(--vscode-editorGroup-border, rgba(128, 128, 128, 0.35)) !important;
+  position: relative !important;
+  border-radius: 4px !important;
+  cursor: pointer !important;
+  user-select: none !important;
+  padding: 4px 8px !important;
+  font-size: 14px !important;
+  min-width: 24px !important;
+  min-height: 24px !important;
+  visibility: visible !important;
+  opacity: 1 !important;
+  pointer-events: auto !important;
+}
+
+.PlaygroundEditorTheme__tableCellActionButton:after {
+  content: '' !important;
+  font-size: 10px !important;
+  display: block !important;
+  line-height: 1 !important;
+}
+
+.PlaygroundEditorTheme__tableCellActionButton:hover {
+  background-color: var(
+    --vscode-button-secondaryHoverBackground,
+    rgba(128, 128, 128, 0.2)
+  ) !important;
+}
+
+/* Table Scrollable Wrapper - for TableScrollShadowPlugin */
+.PlaygroundEditorTheme__tableScrollableWrapper {
+  overflow-x: auto;
+  margin: 0px 25px 30px 0px;
+}
+
+.PlaygroundEditorTheme__tableScrollRight {
+  box-shadow: inset -10px 0 10px rgba(0, 0, 0, 0.15);
+}
+
+.PlaygroundEditorTheme__tableScrollLeft {
+  box-shadow: inset 10px 0 10px rgba(0, 0, 0, 0.15);
+}
+
+.PlaygroundEditorTheme__tableScrollMiddle {
+  box-shadow:
+    inset 10px 0 10px rgba(0, 0, 0, 0.15),
+    inset -10px 0 10px rgba(0, 0, 0, 0.15);
+}
+
+.PlaygroundEditorTheme__tableScrollableWrapper > .PlaygroundEditorTheme__table {
+  /* Remove the table's vertical margin and put it on the wrapper */
+  margin-top: 0;
+  margin-bottom: 0;
+}
+
+.PlaygroundEditorTheme__tableAlignmentCenter {
+  margin-left: auto;
+  margin-right: auto;
+}
+
+.PlaygroundEditorTheme__tableAlignmentRight {
+  margin-left: auto;
+}
+
+.PlaygroundEditorTheme__table {
+  border-collapse: collapse;
+  border-spacing: 0;
+  overflow-y: scroll;
+  overflow-x: scroll;
+  table-layout: fixed;
+  width: fit-content;
+  margin-top: 25px;
+  margin-bottom: 30px;
+}
+
+.PlaygroundEditorTheme__tableScrollableWrapper.PlaygroundEditorTheme__tableFrozenRow {
+  /* position:sticky needs overflow:clip or visible */
+  overflow-x: clip;
+}
+
+.PlaygroundEditorTheme__tableFrozenRow tr:nth-of-type(1) > td {
+  overflow: clip;
+  background-color: var(--vscode-editor-background, #ffffff);
+  position: sticky;
+  z-index: 2;
+  top: 44px;
+}
+
+/* Table hover action buttons - Add Column */
+.PlaygroundEditorTheme__tableAddColumns {
+  position: absolute !important;
+  background-color: var(--vscode-button-secondaryBackground, #eee) !important;
+  /* Let plugin set dimensions, just constrain them */
+  min-width: 15px !important;
+  max-width: 20px !important;
+  min-height: 20px !important;
+  animation: table-controls 0.2s ease !important;
+  border: 0 !important;
+  cursor: pointer !important;
+  z-index: 999 !important;
+  display: block !important;
+  visibility: visible !important;
+  opacity: 1 !important;
+  pointer-events: auto !important;
+}
+
+.PlaygroundEditorTheme__tableAddColumns:after {
+  content: '+' !important;
+  display: block !important;
+  font-size: 14px !important;
+  text-align: center !important;
+  line-height: 20px !important;
+  color: var(--vscode-editor-foreground, #666) !important;
+  opacity: 0.7 !important;
+}
+
+.PlaygroundEditorTheme__tableAddColumns:hover,
+.PlaygroundEditorTheme__tableAddRows:hover {
+  background-color: var(--vscode-button-hoverBackground, #c9dbf0) !important;
+}
+
+/* Table hover action buttons - Add Row */
+.PlaygroundEditorTheme__tableAddRows {
+  position: absolute !important;
+  /* Let plugin set dimensions, just constrain them */
+  min-width: 50px !important;
+  min-height: 15px !important;
+  max-height: 20px !important;
+  background-color: var(--vscode-button-secondaryBackground, #eee) !important;
+  animation: table-controls 0.2s ease !important;
+  border: 0 !important;
+  cursor: pointer !important;
+  z-index: 999 !important;
+  display: block !important;
+  visibility: visible !important;
+  opacity: 1 !important;
+  pointer-events: auto !important;
+}
+
+.PlaygroundEditorTheme__tableAddRows:after {
+  content: '+' !important;
+  display: block !important;
+  font-size: 14px !important;
+  text-align: center !important;
+  line-height: 20px !important;
+  color: var(--vscode-editor-foreground, #666) !important;
+  opacity: 0.7 !important;
+}
+
+@keyframes table-controls {
+  0% {
+    opacity: 0;
+  }
+  100% {
+    opacity: 1;
+  }
+}
+
+/* Table cell resizer ruler */
+.PlaygroundEditorTheme__tableCellResizeRuler {
+  display: block;
+  position: absolute;
+  width: 1px;
+  background-color: var(--vscode-focusBorder, rgb(60, 132, 244));
+  height: 100%;
+  top: 0;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/icons/LICENSE.md b/node_modules/@datalayer/jupyter-lexical/style/lexical/icons/LICENSE.md
new file mode 100644
index 0000000..ce74f6a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/icons/LICENSE.md
@@ -0,0 +1,5 @@
+Bootstrap Icons
+https://icons.getbootstrap.com
+
+Licensed under MIT license
+https://github.com/twbs/icons/blob/main/LICENSE.md
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/images/icons/pencil-fill.svg b/node_modules/@datalayer/jupyter-lexical/style/lexical/images/icons/pencil-fill.svg
new file mode 100644
index 0000000..7afda81
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/images/icons/pencil-fill.svg
@@ -0,0 +1 @@
+<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill"><path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/></svg>
diff --git a/node_modules/@datalayer/jupyter-lexical/style/lexical/index.css b/node_modules/@datalayer/jupyter-lexical/style/lexical/index.css
index dc4c2e3..bec3dde 100644
--- a/node_modules/@datalayer/jupyter-lexical/style/lexical/index.css
+++ b/node_modules/@datalayer/jupyter-lexical/style/lexical/index.css
@@ -6,6 +6,7 @@

 @import url('Button.css');
 @import url('CodeActionMenuPlugin.css');
+/* Collapsible.css - now imported directly in src/plugins/CollapsiblePlugin/index.ts */
 @import url('CommentEditorTheme.css');
 @import url('CommentPlugin.css');
 @import url('ContentEditable.css');
@@ -13,6 +14,8 @@
 @import url('DraggableBlockPlugin.css');
 @import url('Editor.css');
 @import url('EquationEditor.css');
+@import url('ExcalidrawModal.css');
+@import url('ExcalidrawNode.css');
 @import url('FloatingTextFormatToolbarPlugin.css');
 @import url('ImageNode.css');
 @import url('Input.css');
@@ -23,6 +26,10 @@
 @import url('Placeholder.css');
 @import url('PrettierButton.css');
 @import url('Rich.css');
+@import url('TableNode.css');
+@import url('TableInsertModal.css');
+/* TableCellResizer.css - now imported directly in src/plugins/TableCellResizer/index.tsx */
+@import url('ColorPicker.css');
 @import url('TableOfContentsPlugin.css');
 @import url('Theme.css');
 @import url('ToolbarPlugin.css');
diff --git a/node_modules/@datalayer/jupyter-lexical/style/modal-overrides.css b/node_modules/@datalayer/jupyter-lexical/style/modal-overrides.css
new file mode 100644
index 0000000..539e98d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/style/modal-overrides.css
@@ -0,0 +1,255 @@
+/*
+ * Copyright (c) 2025-2026 Datalayer, Inc.
+ * Distributed under the terms of the Modified BSD License.
+ */
+
+/**
+ * CSS overrides for Lexical modals (TableInsertModal, ExcalidrawModal)
+ * Fixes layout issues with global CSS conflicts
+ *
+ * Usage:
+ *   import '@datalayer/jupyter-lexical/style/modal-overrides.css';
+ */
+
+/* ============================================
+   Table Insert Modal Fixes
+   ============================================ */
+
+.TableInsertModal__overlay {
+  display: flex !important;
+  justify-content: center !important;
+  align-items: center !important;
+  position: fixed !important;
+  flex-direction: column !important;
+  top: 0 !important;
+  bottom: 0 !important;
+  left: 0 !important;
+  right: 0 !important;
+  background-color: rgba(40, 40, 40, 0.6) !important;
+  z-index: 10000 !important;
+}
+
+.TableInsertModal__modal {
+  padding: 24px !important;
+  min-height: 250px !important;
+  min-width: 400px !important;
+  max-width: 500px !important;
+  display: flex !important;
+  flex-direction: column !important;
+  background: white !important;
+  color: #333 !important;
+  box-shadow: 0 0 20px 0 #444 !important;
+  border-radius: 10px !important;
+}
+
+.TableInsertModal__title {
+  margin: 0 0 20px 0 !important;
+  padding-bottom: 12px !important;
+  border-bottom: 1px solid #ccc !important;
+  font-size: 18px !important;
+  font-weight: 600 !important;
+  color: #333 !important;
+}
+
+.TableInsertModal__content {
+  display: flex !important;
+  flex-direction: column !important;
+  gap: 20px !important;
+  margin-bottom: 24px !important;
+  flex: 1 !important;
+}
+
+.TableInsertModal__field {
+  display: flex !important;
+  flex-direction: column !important;
+  gap: 8px !important;
+}
+
+.TableInsertModal__field label {
+  font-size: 14px !important;
+  font-weight: 500 !important;
+  color: #555 !important;
+  display: block !important;
+}
+
+.TableInsertModal__field input {
+  padding: 10px 12px !important;
+  border: 1px solid #ccc !important;
+  background-color: white !important;
+  color: inherit !important;
+  border-radius: 4px !important;
+  font-size: 16px !important;
+  width: 100% !important;
+  box-sizing: border-box !important;
+  display: block !important;
+  min-height: 40px !important;
+  -webkit-appearance: none !important;
+  -moz-appearance: textfield !important;
+}
+
+.TableInsertModal__field input:focus {
+  border-color: #0078d4 !important;
+  outline: 1px solid #0078d4 !important;
+  outline-offset: -1px !important;
+}
+
+.TableInsertModal__actions {
+  display: flex !important;
+  justify-content: flex-end !important;
+  gap: 12px !important;
+  margin-top: auto !important;
+}
+
+.TableInsertModal__button {
+  padding: 10px 20px !important;
+  border: none !important;
+  border-radius: 4px !important;
+  font-size: 14px !important;
+  font-weight: 500 !important;
+  cursor: pointer !important;
+  min-width: 80px !important;
+}
+
+.TableInsertModal__button--cancel {
+  background-color: #f0f0f0 !important;
+  color: #333 !important;
+}
+
+.TableInsertModal__button--cancel:hover {
+  background-color: #e0e0e0 !important;
+}
+
+.TableInsertModal__button--confirm {
+  background-color: #0078d4 !important;
+  color: white !important;
+}
+
+.TableInsertModal__button--confirm:hover {
+  background-color: #006cbe !important;
+}
+
+/* ============================================
+   Excalidraw Modal Fixes
+   ============================================ */
+
+/* Overlay - block background clicks but allow modal interaction */
+.ExcalidrawModal__overlay {
+  display: flex !important;
+  align-items: center !important;
+  justify-content: center !important;
+  position: fixed !important;
+  top: 0 !important;
+  bottom: 0 !important;
+  left: 0 !important;
+  right: 0 !important;
+  z-index: 10000 !important;
+  background-color: rgba(40, 40, 40, 0.6) !important;
+  flex-direction: column !important;
+  /* No pointer-events override - use default behavior */
+}
+
+.ExcalidrawModal__modal {
+  position: relative !important;
+  z-index: 10001 !important;
+  display: flex !important;
+  justify-content: center !important;
+  align-items: center !important;
+  border-radius: 8px !important;
+  background-color: #eee !important;
+  width: auto !important;
+  height: auto !important;
+}
+
+.ExcalidrawModal__row {
+  position: relative !important;
+  padding: 50px 10px 10px !important;
+  width: 70vw !important;
+  height: 90vh !important;
+  border-radius: 8px !important;
+  box-shadow:
+    0 12px 28px 0 rgba(0, 0, 0, 0.2),
+    0 2px 4px 0 rgba(0, 0, 0, 0.1),
+    inset 0 0 0 1px rgba(255, 255, 255, 0.5) !important;
+  display: flex !important;
+  flex-direction: column !important;
+  background: white !important;
+  z-index: 10002 !important;
+}
+
+.ExcalidrawModal__row > div:not(.ExcalidrawModal__actions) {
+  border-radius: 5px !important;
+  width: 100% !important;
+  height: 100% !important;
+  display: flex !important;
+  flex: 1 !important;
+  position: relative !important;
+  z-index: 1 !important;
+}
+
+.ExcalidrawModal__actions {
+  position: absolute !important;
+  right: 5px !important;
+  top: 5px !important;
+  z-index: 10003 !important;
+  display: flex !important;
+  flex-direction: row !important;
+  gap: 10px !important;
+  align-items: center !important;
+  pointer-events: auto !important;
+  /* CRITICAL: Don't let this expand and block the modal */
+  width: auto !important;
+  height: auto !important;
+  max-width: fit-content !important;
+  max-height: fit-content !important;
+}
+
+/* CRITICAL: These containers were blocking everything - make them pass-through */
+.ExcalidrawModal__row .excalidraw-eye-dropper-container,
+.ExcalidrawModal__row .excalidraw-textEditorContainer,
+.ExcalidrawModal__row .excalidraw-contextMenuContainer,
+.ExcalidrawModal__row .SVGLayer {
+  pointer-events: none !important;
+  width: 0 !important;
+  height: 0 !important;
+}
+
+/* Canvas must be interactive */
+.ExcalidrawModal__row canvas {
+  pointer-events: auto !important;
+  touch-action: none !important;
+}
+
+/* Target the actual button class used in the component */
+.ExcalidrawModal__actions button,
+.ExcalidrawModal__actions .action-button {
+  background-color: #fff !important;
+  border-radius: 6px !important;
+  padding: 10px 20px !important;
+  border: 1px solid #ccc !important;
+  cursor: pointer !important;
+  font-size: 14px !important;
+  font-weight: 500 !important;
+  color: #333 !important;
+  min-width: 100px !important;
+  white-space: nowrap !important;
+  pointer-events: auto !important;
+}
+
+.ExcalidrawModal__actions button:hover,
+.ExcalidrawModal__actions .action-button:hover {
+  background-color: #f0f0f0 !important;
+  border-color: #999 !important;
+}
+
+/* Excalidraw container */
+.ExcalidrawModal__row .excalidraw {
+  pointer-events: auto !important;
+  touch-action: none !important;
+}
+
+/* Let Excalidraw manage its own pointer-events for proper event handling */
+
+/* Only ensure critical interactive elements have pointer-events */
+.ExcalidrawModal__row canvas {
+  pointer-events: auto !important;
+}
