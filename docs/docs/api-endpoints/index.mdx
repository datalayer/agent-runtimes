---
title: API Endpoints
---

# API Endpoints

Agent Runtimes exposes a comprehensive REST API for managing agents, executing prompts, and monitoring system status.

## Base URL

```
http://localhost:8765/api/v1
```

## Agents

Manage AI agents and their configurations.

### List Agents

```http
GET /api/v1/agents
```

Returns a list of all registered agents.

**Response:**

```json
{
  "agents": [
    {
      "id": "pydantic-ai",
      "name": "Pydantic AI Agent",
      "transport": "streaming",
      "model": "gpt-4o"
    }
  ]
}
```

### Get Agent

```http
GET /api/v1/agents/{agent_id}
```

Get details for a specific agent.

**Response:**

```json
{
  "id": "pydantic-ai",
  "name": "Pydantic AI Agent",
  "transport": "streaming",
  "model": "gpt-4o",
  "mcp_toolsets": ["tavily", "fetch"]
}
```

### Create Agent

```http
POST /api/v1/agents
Content-Type: application/json
```

Create a new agent.

**Request Body:**

```json
{
  "id": "my-agent",
  "name": "My Custom Agent",
  "model": "gpt-4o",
  "system_prompt": "You are a helpful assistant."
}
```

### Update Agent

```http
PUT /api/v1/agents/{agent_id}
Content-Type: application/json
```

Update an existing agent configuration.

### Delete Agent

```http
DELETE /api/v1/agents/{agent_id}
```

Remove an agent from the system.

## Prompts

Execute prompts against agents and manage conversations.

### Send Prompt (Streaming)

```http
POST /api/v1/agents/{agent_id}/prompt
Content-Type: application/json
```

Send a prompt to an agent and receive a streaming response.

**Request Body:**

```json
{
  "message": "What is the weather in Paris?",
  "conversation_id": "optional-conversation-id"
}
```

**Response:** Server-Sent Events (SSE) stream

```
data: {"type": "text", "content": "Based on "}
data: {"type": "text", "content": "the current weather..."}
data: {"type": "tool_call", "name": "get_weather", "args": {...}}
data: {"type": "tool_result", "result": {...}}
data: {"type": "done"}
```

### Send Prompt (Non-Streaming)

```http
POST /api/v1/agents/{agent_id}/prompt/sync
Content-Type: application/json
```

Send a prompt and wait for the complete response.

**Response:**

```json
{
  "response": "Based on the current weather data...",
  "tool_calls": [...],
  "usage": {
    "prompt_tokens": 150,
    "completion_tokens": 200
  }
}
```

## Configuration

System configuration and status endpoints.

### Get Configuration

```http
GET /api/v1/configure
```

Get the current system configuration including available models and MCP servers.

**Response:**

```json
{
  "models": [...],
  "mcp_servers": [...],
  "tools": [...]
}
```

### MCP Toolsets Status

```http
GET /api/v1/configure/mcp-toolsets-status
```

Get the status of MCP toolsets initialization.

**Response:**

```json
{
  "initialized": true,
  "ready_count": 3,
  "failed_count": 0,
  "ready_servers": ["tavily", "linkedin", "kaggle"],
  "failed_servers": {}
}
```

### MCP Toolsets Info

```http
GET /api/v1/configure/mcp-toolsets-info
```

Get detailed information about running MCP toolsets.

**Response:**

```json
[
  {
    "type": "MCPServerStdio",
    "id": "tavily",
    "command": "npx",
    "args": ["-y", "tavily-mcp@0.1.3"]
  }
]
```

## MCP Servers

Manage MCP (Model Context Protocol) servers for tool integration.

### List Available Servers

```http
GET /api/v1/mcp/servers/available
```

Get all available MCP servers - combines catalog servers with running servers from `~/.datalayer/mcp.json`.

**Response:**

```json
[
  {
    "id": "tavily",
    "name": "Tavily Search",
    "description": "Web search and research capabilities via Tavily API",
    "enabled": true,
    "tools": [
      {
        "name": "tavily-search",
        "description": "Search the web using Tavily",
        "enabled": true
      }
    ],
    "command": "npx",
    "args": ["-y", "@tavily/mcp-server"],
    "requiredEnvVars": ["TAVILY_API_KEY"],
    "isAvailable": true,
    "isRunning": true,
    "isRuntime": false,
    "transport": "stdio"
  }
]
```

### List Catalog Servers

```http
GET /api/v1/mcp/servers/catalog
```

Get all predefined MCP servers from the catalog.

**Response:**

```json
[
  {
    "id": "tavily",
    "name": "Tavily Search",
    "description": "Web search and research capabilities via Tavily API",
    "enabled": true,
    "tools": [],
    "command": "npx",
    "args": ["-y", "@tavily/mcp-server"],
    "requiredEnvVars": ["TAVILY_API_KEY"],
    "isAvailable": false,
    "transport": "stdio"
  }
]
```

### List Running Servers

```http
GET /api/v1/mcp/servers
```

Get all currently running MCP servers.

**Response:**

```json
[
  {
    "id": "tavily",
    "name": "Tavily Search",
    "enabled": true,
    "tools": [
      {
        "name": "tavily-search",
        "description": "A powerful web search tool...",
        "enabled": true,
        "inputSchema": {...}
      }
    ],
    "isAvailable": true
  }
]
```

### Get Server

```http
GET /api/v1/mcp/servers/{server_id}
```

Get details for a specific MCP server.

### Enable Catalog Server

```http
POST /api/v1/mcp/servers/catalog/{server_name}/enable
```

Start an MCP server from the catalog for the current session.

**Response:** `201 Created`

```json
{
  "id": "tavily",
  "name": "Tavily Search",
  "enabled": true,
  "tools": [
    {
      "name": "tavily-search",
      "description": "Search the web using Tavily"
    }
  ]
}
```

### Disable Catalog Server

```http
DELETE /api/v1/mcp/servers/catalog/{server_name}/disable
```

Stop an MCP server and remove it from the current session.

**Response:** `204 No Content`

### Create Server

```http
POST /api/v1/mcp/servers
Content-Type: application/json
```

Add a new MCP server configuration.

**Request Body:**

```json
{
  "id": "my-server",
  "name": "My Custom Server",
  "command": "npx",
  "args": ["-y", "my-mcp-server"],
  "enabled": true
}
```

### Update Server

```http
PUT /api/v1/mcp/servers/{server_id}
Content-Type: application/json
```

Update an existing MCP server configuration.

### Delete Server

```http
DELETE /api/v1/mcp/servers/{server_id}
```

Remove an MCP server configuration.

**Response:** `204 No Content`

## Extensions

### A2UI Endpoints

```http
GET  /api/v1/a2ui/           # A2UI protocol
GET  /api/v1/a2ui/agents     # List A2UI agents
```

### MCP-UI Endpoints

```http
GET  /api/v1/mcp-ui/         # MCP-UI protocol
GET  /api/v1/mcp-ui/agents   # List MCP-UI agents
```

## Conversations

Manage conversation history and context.

### Get Conversation

```http
GET /api/v1/conversations/{conversation_id}
```

Retrieve a conversation by ID.

### List Conversations

```http
GET /api/v1/conversations
```

List all conversations, optionally filtered by agent.

### Delete Conversation

```http
DELETE /api/v1/conversations/{conversation_id}
```

Delete a conversation and its history.

## Health & Status

### Health Check

```http
GET /api/v1/health
```

**Response:**

```json
{
  "status": "healthy",
  "version": "0.4.5"
}
```

### Readiness Check

```http
GET /api/v1/ready
```

Returns 200 when the service is ready to accept requests.

## Error Responses

All endpoints return standard error responses:

```json
{
  "detail": "Agent not found",
  "status_code": 404
}
```

### Common Status Codes

| Code | Description |
|------|-------------|
| `200` | Success |
| `201` | Created |
| `400` | Bad Request |
| `404` | Not Found |
| `422` | Validation Error |
| `500` | Internal Server Error |

## Authentication

:::info
Authentication is optional and configurable. When enabled, include the API key in the request header:

```http
Authorization: Bearer your-api-key
```
:::

## Rate Limiting

Rate limiting can be configured per endpoint. When rate limited, you'll receive:

```http
HTTP/1.1 429 Too Many Requests
Retry-After: 60
```

## OpenAPI Documentation

Interactive API documentation is available at:

- **Swagger UI:** `http://localhost:8765/docs`
- **ReDoc:** `http://localhost:8765/redoc`
- **OpenAPI JSON:** `http://localhost:8765/openapi.json`
